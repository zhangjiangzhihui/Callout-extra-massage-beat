/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  CalloutMessageView: () => CalloutMessageView,
  default: () => CalloutExtraMessagePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  currentSceneId: "default",
  scenes: [{
    id: "default",
    name: "\u9ED8\u8BA4\u573A\u666F",
    callouts: []
  }],
  iconSettings: {
    type: 1,
    size: 24,
    position: {
      top: 8,
      right: 16
    }
  },
  isActivated: false,
  licenseKey: "",
  _lastInstallTime: Date.now(),
  hasUsedTrial: false,
  trialEndTime: null,
  showGlobalIcons: true,
  // 添加这一行，默认显示图标
  usePrismStyle: false,
  // 添加这一行
  showCalloutIcon: true,
  messages: {}
};
var CALL_OUT_MESSAGE_VIEW = "callout-message-view";
var CalloutExtraMessagePlugin = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.reopenCurrentNote = async () => {
      var _a, _b;
      const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
      if (!activeView)
        return;
      const currentFile = activeView.file;
      if (!currentFile)
        return;
      const isInEditMode = activeView.getMode() === "source";
      const scrollInfo = (_a = activeView.currentMode) == null ? void 0 : _a.getScroll();
      const cursor = isInEditMode ? (_b = activeView.editor) == null ? void 0 : _b.getCursor() : null;
      await this.app.commands.executeCommandById("workspace:close");
      return new Promise((resolve) => {
        setTimeout(async () => {
          try {
            const leaf = this.app.workspace.getLeaf(true);
            await leaf.openFile(currentFile);
            setTimeout(async () => {
              if (isInEditMode) {
                await leaf.setViewState({
                  type: "markdown",
                  state: { mode: "source" }
                });
              } else {
                await leaf.setViewState({
                  type: "markdown",
                  state: { mode: "preview" }
                });
              }
              const newView = leaf.view;
              if (scrollInfo) {
                setTimeout(() => {
                  var _a2;
                  (_a2 = newView.currentMode) == null ? void 0 : _a2.applyScroll(scrollInfo);
                }, 100);
              }
              if (isInEditMode && cursor && newView.editor) {
                newView.editor.setCursor(cursor);
              }
              this.app.workspace.setActiveLeaf(leaf);
              resolve();
            }, 100);
          } catch (error) {
            console.error("\u91CD\u65B0\u6253\u5F00\u6587\u4EF6\u5931\u8D25:", error);
            new import_obsidian.Notice("\u91CD\u65B0\u6253\u5F00\u6587\u4EF6\u5931\u8D25");
            resolve();
          }
        }, 100);
      });
    };
  }
  async onload() {
    await this.loadSettings();
    this.togglePrismStyle(this.settings.usePrismStyle);
    this.addSettingTab(new CalloutMessageSettingTab(this.app, this));
    const hasPermission = await this.checkActivation();
    if (hasPermission) {
      this.messageIconObserver = new MutationObserver((mutations) => {
        this.handleDOMChanges(mutations);
      });
      this.registerView(
        CALL_OUT_MESSAGE_VIEW,
        (leaf) => new CalloutMessageView(leaf, this)
      );
      this.registerEvent(
        this.app.workspace.on("active-leaf-change", () => {
          this.startObserving();
        })
      );
      this.registerEvent(
        this.app.workspace.on("file-open", () => {
          this.startObserving();
        })
      );
      this.addCommand({
        id: "transform-to-callout",
        name: "\u5C06\u9009\u4E2D\u6587\u672C\u8F6C\u6362\u4E3A Callout",
        editorCallback: (editor) => {
          this.transformToCallout(editor);
        }
      });
      this.addCommand({
        id: "refresh-callout-messages",
        name: "\u5237\u65B0 Callout \u5907\u6CE8",
        checkCallback: (checking) => {
          var _a;
          const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
          if (!activeView)
            return false;
          if (!checking) {
            try {
              const callouts = activeView.contentEl.querySelectorAll(".callout");
              callouts.forEach((callout) => {
                if (callout instanceof HTMLElement) {
                  this.updateCalloutMessageCount(callout);
                }
              });
              const messageView = (_a = this.app.workspace.getLeavesOfType(CALL_OUT_MESSAGE_VIEW)[0]) == null ? void 0 : _a.view;
              if (messageView) {
                messageView.refreshView();
              }
              new import_obsidian.Notice("Callout \u5907\u6CE8\u5DF2\u5237\u65B0");
            } catch (error) {
              console.error("\u5237\u65B0\u5931\u8D25:", error);
              new import_obsidian.Notice("\u5237\u65B0\u5931\u8D25\uFF0C\u8BF7\u67E5\u770B\u63A7\u5236\u53F0\u4E86\u89E3\u8BE6\u60C5");
            }
          }
          return true;
        }
      });
      this.registerContextMenu();
      this.addRibbonIcon(
        "message-circle",
        "Callout \u5907\u6CE8",
        async () => {
          const existingLeaves = this.app.workspace.getLeavesOfType(CALL_OUT_MESSAGE_VIEW);
          if (existingLeaves.length > 0) {
            this.app.workspace.revealLeaf(existingLeaves[0]);
          } else {
            const leaf = this.app.workspace.getRightLeaf(false);
            await leaf.setViewState({
              type: CALL_OUT_MESSAGE_VIEW,
              active: true
            });
            this.app.workspace.revealLeaf(leaf);
          }
        }
      );
      this.addRibbonIcon(
        "list",
        "\u663E\u793A\u6240\u6709 Callout \u7B14\u8BB0",
        async () => {
          const existingLeaves = this.app.workspace.getLeavesOfType(CALL_OUT_MESSAGE_VIEW);
          let leaf;
          if (existingLeaves.length > 0) {
            leaf = existingLeaves[0];
          } else {
            leaf = this.app.workspace.getRightLeaf(false);
            if (leaf) {
              await leaf.setViewState({
                type: CALL_OUT_MESSAGE_VIEW,
                active: true
              });
            }
          }
          if (leaf) {
            this.app.workspace.revealLeaf(leaf);
            const messageView = leaf.view;
            messageView.switchToAllMode();
          }
        }
      );
      this.startObserving();
    }
    this.registerEvent(
      this.app.workspace.on("css-change", () => {
        this.updateCalloutIconVisibility();
      })
    );
    this.updateCalloutIconVisibility();
  }
  async onunload() {
    const leaves = this.app.workspace.getLeavesOfType(CALL_OUT_MESSAGE_VIEW);
    for (const leaf of leaves) {
      await leaf.detach();
    }
  }
  // 处理 DOM 变化的新方法
  handleDOMChanges(mutations) {
    const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (!markdownView || !markdownView.file)
      return;
    const file = markdownView.file;
    const cache = this.app.metadataCache.getFileCache(file);
    const frontmatter = cache == null ? void 0 : cache.frontmatter;
    const globalIconsEnabled = this.settings.showGlobalIcons;
    const frontmatterDisplay = frontmatter == null ? void 0 : frontmatter["Callout extra message display"];
    let shouldShowIcons = false;
    if (!globalIconsEnabled) {
      shouldShowIcons = frontmatterDisplay === "Yes";
    } else {
      shouldShowIcons = frontmatterDisplay !== "No";
    }
    if (!shouldShowIcons) {
      const existingIcons = markdownView.contentEl.querySelectorAll(".callout-message-icon-container");
      existingIcons.forEach((icon) => icon.remove());
      return;
    }
    for (const mutation of mutations) {
      const addedNodes = Array.from(mutation.addedNodes);
      for (const node of addedNodes) {
        if (node instanceof HTMLElement) {
          const callouts = node.querySelectorAll(".callout");
          callouts.forEach((callout) => {
            if (callout instanceof HTMLElement && !callout.querySelector(".callout-message-icon")) {
              this.addMessageIconToCallout(callout);
            }
          });
        }
      }
    }
  }
  // 修改 addMessageIconToCallout 方法
  addMessageIconToCallout(callout) {
    var _a, _b;
    const existingContainer = callout.querySelector(".callout-message-icon-container");
    if (existingContainer) {
      const calloutId2 = this.getCalloutId(callout);
      const messageData2 = this.settings.messages[calloutId2];
      const messageCount2 = ((_a = messageData2 == null ? void 0 : messageData2.messages) == null ? void 0 : _a.length) || 0;
      const countSpan2 = existingContainer.querySelector(".callout-message-count");
      if (countSpan2) {
        countSpan2.textContent = messageCount2.toString();
      }
      return;
    }
    const iconContainer = document.createElement("div");
    iconContainer.className = "callout-message-icon-container";
    const icon = document.createElement("div");
    icon.className = "callout-message-icon";
    icon.innerHTML = this.getIconSvg(this.settings.iconSettings.type);
    icon.title = "\u70B9\u51FB\u6DFB\u52A0\u6216\u7F16\u8F91\u6D88\u606F";
    callout.style.setProperty("--icon-size", `${this.settings.iconSettings.size}px`);
    callout.style.setProperty("--icon-top-position", `${this.settings.iconSettings.position.top}px`);
    callout.style.setProperty("--icon-right-position", `${this.settings.iconSettings.position.right}px`);
    icon.style.width = `${this.settings.iconSettings.size}px`;
    icon.style.height = `${this.settings.iconSettings.size}px`;
    iconContainer.style.top = `${this.settings.iconSettings.position.top}px`;
    iconContainer.style.right = `${this.settings.iconSettings.position.right}px`;
    icon.addEventListener("click", async (e) => {
      e.preventDefault();
      e.stopPropagation();
      if (!await this.checkActivation())
        return;
      const calloutId2 = this.getCalloutId(callout);
      this.showMessageInput(callout);
    });
    iconContainer.appendChild(icon);
    const calloutId = this.getCalloutId(callout);
    const messageData = this.settings.messages[calloutId];
    const messageCount = ((_b = messageData == null ? void 0 : messageData.messages) == null ? void 0 : _b.length) || 0;
    const countSpan = document.createElement("span");
    countSpan.className = "callout-message-count";
    countSpan.textContent = messageCount.toString();
    countSpan.addEventListener("click", async (e) => {
      e.preventDefault();
      e.stopPropagation();
      if (!await this.checkActivation())
        return;
      const calloutId2 = this.getCalloutId(callout);
      let messageView = null;
      const existingLeaves = this.app.workspace.getLeavesOfType(CALL_OUT_MESSAGE_VIEW);
      if (existingLeaves.length > 0) {
        const leaf = existingLeaves[0];
        messageView = leaf.view;
        if (messageView) {
          messageView.switchToSingleMode(calloutId2);
        }
        this.app.workspace.revealLeaf(leaf);
      } else {
        const leaf = this.app.workspace.getRightLeaf(false);
        await leaf.setViewState({
          type: CALL_OUT_MESSAGE_VIEW,
          active: true
        });
        this.app.workspace.revealLeaf(leaf);
        messageView = leaf.view;
        if (messageView) {
          messageView.switchToSingleMode(calloutId2);
        }
      }
    });
    iconContainer.appendChild(countSpan);
    callout.appendChild(iconContainer);
    callout.style.position = "relative";
  }
  // 修改 updateCalloutMessageCount 方法
  updateCalloutMessageCount(callout) {
    var _a;
    const calloutId = this.getCalloutId(callout);
    const messageData = this.settings.messages[calloutId];
    const messageCount = ((_a = messageData == null ? void 0 : messageData.messages) == null ? void 0 : _a.length) || 0;
    const container = callout.querySelector(".callout-message-icon-container");
    if (container instanceof HTMLElement) {
      const countSpan = container.querySelector(".callout-message-count");
      if (countSpan) {
        countSpan.textContent = messageCount.toString();
      }
    }
  }
  // 弹框显示输入容
  async showMessageInput(callout) {
    if (!await this.checkActivation())
      return;
    const calloutId = this.getCalloutId(callout);
    const savedMessage = this.settings.messages[calloutId] || "";
    const modal = new MessageInputModal(this.app, this, calloutId);
    modal.open();
  }
  // 获取 callout 的 ID，用于保存消息
  getCalloutId(callout) {
    var _a;
    const footnote = (_a = callout.querySelector("span")) == null ? void 0 : _a.getAttribute("data-callout-id");
    if (footnote) {
      return footnote;
    }
    const timestamp = Date.now();
    const randomStr = Math.random().toString(36).substring(2, 8);
    const newId = `callout-${timestamp}-${randomStr}`;
    const span = callout.querySelector("span");
    if (span) {
      span.setAttribute("data-callout-id", newId);
    }
    return newId;
  }
  // 加载插件设
  async loadSettings() {
    const savedData = await this.loadData();
    if (!savedData) {
      this.settings = Object.assign({}, DEFAULT_SETTINGS);
      this.settings._lastInstallTime = Date.now();
      this.settings.hasUsedTrial = false;
      this.settings.trialEndTime = null;
      new import_obsidian.Notice("\u68C0\u6D4B\u5230\u63D2\u9996\u6B21\u5B89\u88C5\u6216\u91CD\u65B0\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\u88C5\uFF0C\u5DF2\u542F\u7528\u8BD5\uFFFD\uFFFD\uFFFD\uFFFD\u529F\uFFFD\uFFFD");
      await this.saveSettings();
      return;
    }
    this.settings = Object.assign({}, DEFAULT_SETTINGS, savedData);
    await this.saveSettings();
  }
  // 存插件设置
  async saveSettings() {
    await this.saveData(this.settings);
  }
  // 添加侧边栏图标
  addSidebarIcon() {
    const sidebarIconEl = this.addRibbonIcon(
      "message-circle",
      // 使用一致标
      "Open Callout Extra Message",
      () => {
        this.activateView();
      }
    );
    sidebarIconEl.addClass("callout-sidebar-icon");
  }
  // 激活自定义视图
  async activateView() {
    const existingLeaves = this.app.workspace.getLeavesOfType(CALL_OUT_MESSAGE_VIEW);
    let leaf;
    if (existingLeaves.length > 0) {
      leaf = existingLeaves[0];
    } else {
      if (!this.app.workspace.getRightLeaf(false)) {
        await this.app.workspace.getRightLeaf(true);
      }
      const rightSplit = this.app.workspace.getRightLeaf(false);
      if (rightSplit) {
        leaf = rightSplit;
        await leaf.setViewState({
          type: CALL_OUT_MESSAGE_VIEW,
          active: true
        });
      } else {
        new import_obsidian.Notice("\u65E0\u6CD5\u521B\u5EFA\u89C6\u56FE");
        return;
      }
    }
    if (leaf.view instanceof CalloutMessageView) {
      leaf.view.getIcon = () => "message-circle";
      leaf.view.getDisplayText = () => "Callout \u5907\u6CE8";
    }
    this.app.workspace.revealLeaf(leaf);
    if (leaf.view instanceof CalloutMessageView) {
      leaf.view.displayMessages();
    }
  }
  // 注册 Transform to Callout 命令
  async transformToCallout(editor, calloutIndex = 0) {
    if (!await this.checkActivation())
      return;
    const selection = editor.getSelection();
    if (!selection) {
      new import_obsidian.Notice("\u8BF7\u5148\u9009\u62E9\u8981\u8F6C\u6362\u7684\u6587\u672C");
      return;
    }
    const currentScene = this.settings.scenes.find(
      (scene) => scene.id === this.settings.currentSceneId
    );
    if (!currentScene || !currentScene.callouts[calloutIndex]) {
      new import_obsidian.Notice("\u672A\u627E\u5230\u5BF9\u5E94\u7684 Callout \u914D\u7F6E");
      return;
    }
    const callout = currentScene.callouts[calloutIndex];
    const timestamp = Date.now();
    const randomStr = Math.random().toString(36).substr(2, 6);
    const calloutId = `callout-${timestamp}-${randomStr}`;
    editor.replaceSelection(`<font color="${callout.textColor}">${selection}</font>`);
    const coloredText = editor.getSelection();
    const formattedText = `> [!${callout.type}] **<font color="${callout.color}">${callout.name}</font>**
> <span style="background:${callout.color}" data-callout-id="${calloutId}"><font color="${callout.textColor}">${coloredText}</font></span>

`;
    editor.replaceSelection(formattedText);
    new import_obsidian.Notice(`\u6587\u672C\u5DF2\u8F6C\u6362\u4E3A ${callout.name} \u683C\uFF01`);
  }
  // 获取当前编辑器实��
  getEditor() {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (!activeView)
      return null;
    const editor = activeView.editor;
    return editor;
  }
  // 获取当前选中本
  getSelectedText(editor) {
    if (!editor.getSelection()) {
      this.selectLineUnderCursor(editor);
    }
    return editor.getSelection();
  }
  // 如果没有本选中，则选择光标所在行
  selectLineUnderCursor(editor) {
    const cursor = editor.getCursor();
    const line = editor.getLine(cursor.line);
    editor.setSelection(
      { line: cursor.line, ch: 0 },
      { line: cursor.line, ch: line.length }
    );
  }
  // 观察 DOM 变
  async startObserving() {
    var _a;
    (_a = this.messageIconObserver) == null ? void 0 : _a.disconnect();
    if (!await this.checkActivation()) {
      return;
    }
    const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (!markdownView || !markdownView.file)
      return;
    const file = markdownView.file;
    const cache = this.app.metadataCache.getFileCache(file);
    const frontmatter = cache == null ? void 0 : cache.frontmatter;
    const globalIconsEnabled = this.settings.showGlobalIcons;
    const frontmatterDisplay = frontmatter == null ? void 0 : frontmatter["Callout extra message display"];
    let shouldShowIcons = false;
    if (!globalIconsEnabled) {
      shouldShowIcons = frontmatterDisplay === "Yes";
    } else {
      shouldShowIcons = frontmatterDisplay !== "No";
    }
    const contentEl = markdownView.contentEl;
    if (!shouldShowIcons) {
      const existingIcons = contentEl.querySelectorAll(".callout-message-icon-container");
      existingIcons.forEach((icon) => icon.remove());
      return;
    }
    this.messageIconObserver.observe(contentEl, {
      childList: true,
      subtree: true
    });
    const callouts = contentEl.querySelectorAll(".callout");
    callouts.forEach((callout) => {
      if (callout instanceof HTMLElement) {
        this.addMessageIconToCallout(callout);
      }
    });
  }
  // 添加一个新方法来更新所有打开的笔记
  updateAllOpenNotes() {
    const leaves = this.app.workspace.getLeavesOfType("markdown");
    leaves.forEach((leaf) => {
      const view = leaf.view;
      if (view instanceof import_obsidian.MarkdownView) {
        this.startObserving();
      }
    });
  }
  registerContextMenu() {
    this.registerEvent(
      this.app.workspace.on("editor-menu", (menu, editor) => {
        menu.addItem((item) => {
          item.setTitle("\u6211\u7684\u7B14\u8BB0\u7C7B\u578B").setIcon("quote-glyph").setSection("a-my-notes").onClick(async () => {
            if (!await this.checkActivation())
              return;
            const modal = new CalloutSelectionModal(this.app, this, editor);
            modal.open();
          });
        });
        menu.addSeparator();
      })
    );
  }
  async validateLicense(key) {
    const validLicenseKey = "L9Z3-KJ2V-P4A6-QT1Y-M5B0-R8N7-DX3W-H6U9-FC0M-V2G1";
    const cleanInput = key.replace(/[\s-]/g, "");
    const cleanValid = validLicenseKey.replace(/[\s-]/g, "");
    return cleanInput === cleanValid;
  }
  // 修�����插件功能方法，添加授权检查
  async checkActivation() {
    if (this.settings.licenseKey && await this.validateLicense(this.settings.licenseKey)) {
      return true;
    }
    if (this.settings.trialEndTime) {
      const now = Date.now();
      if (now < this.settings.trialEndTime) {
        return true;
      } else {
        this.settings.trialEndTime = null;
        await this.saveSettings();
        this.disablePluginFeatures();
        return false;
      }
    }
    return false;
  }
  updateMessageCount(callout, container) {
    var _a;
    const calloutId = this.getCalloutId(callout);
    const messageData = this.settings.messages[calloutId];
    const messageCount = ((_a = messageData == null ? void 0 : messageData.messages) == null ? void 0 : _a.length) || 0;
    const countSpan = container.querySelector(".callout-message-count");
    if (countSpan) {
      countSpan.textContent = messageCount.toString();
    }
  }
  // 在 CalloutMessagePlugin 类中添加禁用功能的方法
  disablePluginFeatures() {
    var _a;
    (_a = this.messageIconObserver) == null ? void 0 : _a.disconnect();
    const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (markdownView) {
      const icons = markdownView.contentEl.querySelectorAll(".callout-message-icon-container");
      icons.forEach((icon) => icon.remove());
    }
    this.app.workspace.detachLeavesOfType(CALL_OUT_MESSAGE_VIEW);
    this.app.workspace.trigger("editor-menu");
    const commandId = "transform-to-callout";
    if (this.app.commands.commands[commandId]) {
      delete this.app.commands.commands[commandId];
    }
  }
  getIconSvg(type) {
    const icons = {
      1: '<svg t="1733304888910" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2829" width="200" height="200"><path d="M507.297959 862.040816c-52.244898 0-102.922449-9.404082-151.510204-27.689796l-116.506122 25.6c-24.032653 5.22449-46.497959 0-60.604082-14.628571-14.628571-14.628571-19.853061-36.571429-14.628571-60.604082l17.240816-77.844898c-43.363265-57.469388-66.35102-122.77551-66.35102-190.693877C114.938776 320.783673 291.004082 161.959184 507.297959 161.959184c107.62449 0 208.457143 36.04898 283.689796 101.877551C867.265306 330.710204 909.061224 420.04898 909.061224 516.179592c0 190.693878-180.244898 345.861224-401.763265 345.861224z" fill="#7BD4EF" p-id="2830"></path><path d="M512 581.485714c-38.138776 0-69.485714-31.346939-69.485714-69.485714s31.346939-69.485714 69.485714-69.485714 69.485714 31.346939 69.485714 69.485714-31.346939 69.485714-69.485714 69.485714zM710.530612 581.485714c-38.138776 0-69.485714-31.346939-69.485714-69.485714s31.346939-69.485714 69.485714-69.485714 69.485714 31.346939 69.485715 69.485714-31.346939 69.485714-69.485715 69.485714zM313.469388 581.485714c-38.138776 0-69.485714-31.346939-69.485715-69.485714s31.346939-69.485714 69.485715-69.485714 69.485714 31.346939 69.485714 69.485714-31.346939 69.485714-69.485714 69.485714z" fill="#278DCA" p-id="2831"></path></svg>',
      2: '<svg t="1733305164756" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4084" width="200" height="200"><path d="M913.33 144.15v577.57H590.85c-8.94 0-17.41 2.58-24.58 7.12L304.72 854.97v-87.24c0-25.41-20.6-46-46-46H109.33V144.15h804m25.42-46H83.92c-11.37 0-20.58 9.22-20.58 20.58v628.41c0 11.37 9.22 20.58 20.58 20.58h174.8v160.49L591.17 767.9l-0.31-0.18h347.9c11.37 0 20.58-9.22 20.58-20.58v-628.4c-0.01-11.37-9.22-20.59-20.59-20.59z" fill="#5BE7C4" p-id="4085"></path><path d="M720.54 468.51H302.12c-12.7 0-23-10.3-23-23s10.3-23 23-23h418.42c12.7 0 23 10.3 23 23s-10.29 23-23 23z" fill="#7A57D1" p-id="4086"></path><path d="M511.33 677.72c-12.7 0-23-10.3-23-23V236.3c0-12.7 10.3-23 23-23s23 10.3 23 23v418.42c0 12.71-10.29 23-23 23z" fill="#7A57D1" p-id="4087"></path><path d="M745.81 200.71h-41.97c-6.63 0-12-5.37-12-12s5.37-12 12-12h41.97c6.63 0 12 5.37 12 12s-5.37 12-12 12zM861.39 351.81c-6.63 0-12-5.37-12-12V227.37c0-14.7-11.96-26.67-26.67-26.67h-24.38c-6.63 0-12-5.37-12-12s5.37-12 12-12h24.38c27.94 0 50.67 22.73 50.67 50.67v112.44c0 6.63-5.38 12-12 12z" fill="#5BE7C4" p-id="4088"></path></svg>',
      3: '<svg t="1733305183783" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4249" width="200" height="200"><path d="M892.84 410.07H459.97c-9.21 0-16.67 7.44-16.67 16.63v333c0 9.22 7.46 16.63 16.67 16.63h266.38l116.54 66.63v-66.63h49.95c9.21 0 16.67-7.41 16.67-16.63v-333c0-9.19-7.46-16.63-16.67-16.63z" fill="#EC87C0" p-id="4250"></path><path d="M459.97 410.07c-9.21 0-16.67 7.44-16.67 16.63v216.47h249.75c9.21 0 16.67-7.46 16.67-16.68V410.07H459.97z" fill="#D770AD" p-id="4251"></path><path d="M659.76 176.96H126.95c-9.21 0-16.63 7.46-16.63 16.66v399.61c0 9.17 7.43 16.63 16.63 16.63h49.95v99.9l179.81-99.9h303.05c9.18 0 16.63-7.46 16.63-16.63V193.62c0.01-9.2-7.44-16.66-16.63-16.66z" fill="#AC92EB" p-id="4252"></path><path d="M448.87 276.86c-21.74 0-41.4 8.94-55.5 23.33-14.11-14.39-33.76-23.33-55.51-23.33-42.9 0-77.69 34.79-77.69 77.7 0 88.8 133.2 166.48 133.2 166.48s133.19 77.68 133.19 166.48c0 42.91-34.78 77.7-77.69 77.7z" fill="#F5F7FA" p-id="4253"></path><path d="M448.87 276.86c-5.72 0-11.29 0.63-16.66 1.81 34.91 7.62 61.06 38.69 61.06 75.9 0 69.17-80.83 131.61-116.56 155.82 10.15 6.88 16.66 10.66 16.66 10.66s133.19-77.68 133.19-166.48c0-42.92-34.78-77.71-77.69-77.71z" opacity=".1" p-id="4254"></path></svg>',
      4: '<svg t="1733305238955" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7560" width="200" height="200"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#FF9D54" p-id="7561"></path><path d="M140.4844 241.955886a46.55193 101.696557 29.75 1 0 80.832661 46.199672 46.55193 101.696557 29.75 1 0-80.832661-46.199672Z" fill="#FFFFFF" p-id="7562"></path><path d="M93.495652 431.86087m-22.260869 0a22.26087 22.26087 0 1 0 44.521739 0 22.26087 22.26087 0 1 0-44.521739 0Z" fill="#FFFFFF" p-id="7563"></path><path d="M832.556522 857.043478a24.486957 24.486957 0 1 0 0-48.973913 24.486957 24.486957 0 0 0 0 48.973913z m0 24.486957a48.973913 48.973913 0 1 0 0-97.947826 48.973913 48.973913 0 0 0 0 97.947826z" fill="#FFFFFF" p-id="7564"></path><path d="M735.392278 320.556522H297.51207C275.785461 320.556522 258.226087 338.3296 258.226087 360.314435v312.480278c0 21.97593 17.559374 39.749009 39.285983 39.749009h63.024973l10.685218 47.941008c4.968626 22.216348 31.833043 30.693287 48.350609 15.199722l67.584-63.131826h248.235408c21.726609 0 39.285983-17.781983 39.285983-39.757913V360.314435C774.678261 338.383026 757.056557 320.556522 735.392278 320.556522zM401.497043 534.643757c-18.378574 0-33.213217-15.083965-33.213217-33.613914s14.896974-33.613913 33.213217-33.613913c18.36967 0 33.213217 15.083965 33.213218 33.613913s-14.843548 33.613913-33.213218 33.613914z m120.965566 2.341843c-18.36967 0-33.213217-15.083965-33.213218-33.613913 0-18.538852 14.896974-33.622817 33.213218-33.622817 18.36967 0 33.213217 15.083965 33.213217 33.622817 0 18.521043-14.843548 33.613913-33.213217 33.613913z m120.965565 0c-18.36967 0-33.213217-15.083965-33.213217-33.613913 0-18.538852 14.896974-33.622817 33.213217-33.622817 18.36967 0 33.213217 15.083965 33.213217 33.622817 0 18.521043-14.843548 33.613913-33.213217 33.613913z" fill="#FFFFFF" p-id="7565"></path></svg>',
      5: '<svg t="1733305266547" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8918" width="200" height="200"><path d="M512 736l-192 192v-192H128a32 32 0 0 1-32-32V128a32 32 0 0 1 32-32h768a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H512z" fill="#FFFFFF" p-id="8919"></path><path d="M512 736l-192 192v-192H128a32 32 0 0 1-32-32V128a32 32 0 0 1 32-32h768a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H512z m-160 114.752L498.752 704H896V128H128v576h224v146.752z" fill="#5D6D7E" p-id="8920"></path><path d="M224 384h576v32H224v-32z m0 96h576v32H224v-32z m0 96h320v32H224v-32z" fill="#808FA1" p-id="8921"></path><path d="M224 224h576v192H224z" fill="#C49F74" p-id="8922"></path></svg>'
    };
    return icons[type] || icons[1];
  }
  // 修改 refreshAllIcons 方法
  refreshAllIcons() {
    const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (!markdownView)
      return;
    const callouts = markdownView.contentEl.querySelectorAll(".callout");
    callouts.forEach((callout) => {
      if (callout instanceof HTMLElement) {
        const existingIcon = callout.querySelector(".callout-message-icon-container");
        if (existingIcon) {
          existingIcon.remove();
        }
        callout.style.setProperty("--icon-size", `${this.settings.iconSettings.size}px`);
        callout.style.setProperty("--icon-top-position", `${this.settings.iconSettings.position.top}px`);
        callout.style.setProperty("--icon-right-position", `${this.settings.iconSettings.position.right}px`);
        this.addMessageIconToCallout(callout);
      }
    });
  }
  // 修改 togglePrismStyle 方法
  togglePrismStyle(enabled) {
    const rootElement = document.body;
    if (enabled) {
      const styleTag = document.createElement("style");
      styleTag.id = "callout-prism-styles";
      styleTag.textContent = `
                body:not(.pt-disable-callout-styling) {
                    --callout-padding: 4px;
                    --callout-radius: var(--radius-m);
                    --callout-background-alpha: 20%;
                }

                body:not(.pt-disable-callout-styling) .callout {
                    background-color: unset;
                    position: relative !important;
                }

                .callout-message-icon-container {
                    position: absolute !important;
                    z-index: 9999 !important;
                    display: flex !important;
                    align-items: center !important;
                    gap: 4px !important;
                    cursor: pointer !important;
                    pointer-events: all !important;
                    user-select: none !important;
                }

                .callout-message-icon {
                    display: flex !important;
                    align-items: center !important;
                    justify-content: center !important;
                    pointer-events: all !important;
                    z-index: 9999 !important;
                }

                /* \u6DFB\u52A0\u65B0\u7684\u6837\u5F0F\u89C4\u5219\u6765\u7406\u52A8\u6001\u5C3A\u5BF8\u548C\u4F4D\u7F6E */
                .callout-message-icon-container[style*="top"],
                .callout-message-icon-container[style*="right"] {
                    top: var(--icon-top-position) !important;
                    right: var(--icon-right-position) !important;
                }

                .callout-message-icon[style*="width"],
                .callout-message-icon[style*="height"] {
                    width: var(--icon-size) !important;
                    height: var(--icon-size) !important;
                }

                .callout-message-count {
                    display: inline-flex !important;
                    align-items: center !important;
                    justify-content: center !important;
                    background-color: var(--text-accent) !important;
                    color: white !important;
                    border-radius: 50% !important;
                    width: 20px !important;
                    height: 20px !important;
                    font-size: 12px !important;
                    cursor: pointer !important;
                    pointer-events: all !important;
                    z-index: 9999 !important;
                    user-select: none !important;
                }

                .callout:hover .callout-message-icon-container {
                    opacity: 1 !important;
                    visibility: visible !important;
                }

                .workspace-leaf-content[data-type="markdown"] .callout-message-icon-container {
                    z-index: 9999 !important;
                }

                .callout-message-icon-container::before {
                    content: '';
                    position: absolute;
                    top: -5px;
                    right: -5px;
                    bottom: -5px;
                    left: -5px;
                    z-index: -1;
                }

                .callout-title {
                    position: relative;
                    z-index: 5;
                    gap: unset;
                    align-items: center;
                    min-height: 36px;
                    border: 2px solid;
                    border-radius: var(--radius-m);
                    background: rgba(var(--callout-color), 0.05);
                    pointer-events: auto;
                }

                .callout-title:empty + .callout-content {
                    padding: var(--size-4-1) var(--size-4-3);
                    border-top-style: solid;
                    border-top-width: 1px;
                    border-radius: var(--radius-m);
                }

                .callout-title-inner {
                    padding: var(--size-4-1) 0;
                    margin: 0 var(--size-4-1);
                }

                .callout-icon {
                    align-self: unset;
                    margin: 0 var(--size-4-1) 0 var(--size-4-2);
                    border-radius: var(--radius-m);
                }

                .callout-fold {
                    display: flex;
                    align-self: unset;
                    margin-top: unset;
                    margin-left: auto;
                }

                .callout-content {
                    padding: var(--size-4-5) var(--size-4-3) var(--size-4-1) var(--size-4-3);
                    margin-top: -16px;
                    border-right: 1px solid rgba(var(--callout-color));
                    border-bottom: 1px solid rgba(var(--callout-color));
                    border-left: 1px solid rgba(var(--callout-color));
                    border-bottom-right-radius: var(--radius-m);
                    border-bottom-left-radius: var(--radius-m);
                    background: rgba(var(--callout-color), 0);
                }

                .callout p {
                    font-family: 'Palatino', 'Kai', '\u6977\u4F53', serif;
                    margin-top: 20px;
                    margin-bottom: 0;
                }

                .callout-highlight {
                    animation: highlight-pulse 2s ease-in-out;
                }

                @keyframes highlight-pulse {
                    0% {
                        box-shadow: 0 0 0 0 rgba(var(--text-accent-rgb), 0.4);
                    }
                    70% {
                        box-shadow: 0 0 0 10px rgba(var(--text-accent-rgb), 0);
                    }
                    100% {
                        box-shadow: 0 0 0 0 rgba(var(--text-accent-rgb), 0);
                    }
                }

                /* \u6DFB\u52A0\u6240\u6709 Callout \u7C7B\u578B\u7684\u6837\u5F0F */
                ${this.getCalloutTypeStyles()}
            `;
      document.head.appendChild(styleTag);
    } else {
      const existingStyle = document.getElementById("callout-prism-styles");
      if (existingStyle) {
        existingStyle.remove();
      }
    }
    this.refreshAllIcons();
  }
  // 添加一个新方法来生成所有 Callout 类型的样式
  getCalloutTypeStyles() {
    return `
            /* Type 1 - Note */
            body:not(.pt-disable-callout-styling) .callout[data-callout="note"] > .callout-title {
                color: var(--color-grey-text);
                background-color: var(--color-grey-base);
                border-color: var(--color-grey-tint);
            }
            body:not(.pt-disable-callout-styling) .callout[data-callout="note"] > .callout-content {
                background-color: hsla(var(--color-grey-base-hsl), var(--callout-background-alpha));
                border-color: var(--color-grey-tint);
            }

            /* Type 2 - Abstract/Summary/TLDR */
            body:not(.pt-disable-callout-styling) .callout:is([data-callout="abstract"],[data-callout="summary"],[data-callout="tldr"]) > .callout-title {
                color: var(--color-cyan-text);
                background-color: var(--color-cyan-base);
                border-color: var(--color-cyan-tint);
            }
            body:not(.pt-disable-callout-styling) .callout:is([data-callout="abstract"],[data-callout="summary"],[data-callout="tldr"]) > .callout-content {
                background-color: hsla(var(--color-cyan-base-hsl), var(--callout-background-alpha));
                border-color: var(--color-cyan-tint);
            }

            /* \u7EE7\u7EED\u52A0\u5176\u4ED6\u7C7B\u578B\u7684\u6837\u5F0F... */
            /* \u8FD9\u91CC\u53EF\u4EE5\u7EE7\u7EED\u6DFB\u52A0\u5176\u4ED6\u7C7B\u578B\u7684\u6837\u5F0F\uFF0C\u4E0E\u539F\u59CB CSS \u4FDD\u6301\u4E00\u81F4 */
        `;
  }
  // 添加更新图标显示状态的方法
  updateCalloutIconVisibility() {
    const bodyClasses = document.body.classList;
    if (this.settings.showCalloutIcon) {
      bodyClasses.add("show-callout-icon");
    } else {
      bodyClasses.remove("show-callout-icon");
    }
  }
};
var MessageInputModal = class extends import_obsidian.Modal {
  // 添加消息索引属性
  constructor(app, plugin, calloutId, messageIndex) {
    super(app);
    this.plugin = plugin;
    this.calloutId = calloutId;
    this.messageIndex = messageIndex;
    this.inputEl = document.createElement("textarea");
  }
  onOpen() {
    var _a;
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("message-input-modal");
    contentEl.createEl("h3", { text: "\u7F16\u8F91 Callout \u5907\u6CE8" });
    if (typeof this.messageIndex === "number") {
      const messageData = this.plugin.settings.messages[this.calloutId];
      if ((_a = messageData == null ? void 0 : messageData.messages) == null ? void 0 : _a[this.messageIndex]) {
        this.inputEl.value = messageData.messages[this.messageIndex].text;
      }
    }
    this.inputEl.rows = 10;
    this.inputEl.placeholder = "\u8BF7\u8F93\u5165 Callout \u5907\u6CE8\u4FE1\u606F...";
    const buttonContainer = contentEl.createEl("div", {
      cls: "message-input-modal-buttons"
    });
    const saveButton = buttonContainer.createEl("button", {
      text: "\u4FDD\u5B58",
      cls: "mod-cta"
    });
    const cancelButton = buttonContainer.createEl("button", {
      text: "\u53D6\u6D88"
    });
    saveButton.addEventListener("click", () => {
      this.saveMessage();
      this.close();
    });
    cancelButton.addEventListener("click", () => this.close());
    contentEl.appendChild(this.inputEl);
    contentEl.appendChild(buttonContainer);
  }
  async saveMessage() {
    var _a, _b;
    const text = this.inputEl.value.trim();
    if (!text)
      return;
    if (!this.plugin.settings.messages[this.calloutId]) {
      this.plugin.settings.messages[this.calloutId] = {
        messages: []
      };
    }
    const timestamp = new Date().toLocaleString();
    if (typeof this.messageIndex === "number") {
      this.plugin.settings.messages[this.calloutId].messages[this.messageIndex] = {
        text,
        timestamp
      };
    } else {
      this.plugin.settings.messages[this.calloutId].messages.push({
        text,
        timestamp
      });
    }
    await this.plugin.saveSettings();
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (activeView) {
      const callout = (_a = activeView.contentEl.querySelector(
        `[data-callout-id="${this.calloutId}"]`
      )) == null ? void 0 : _a.closest(".callout");
      if (callout instanceof HTMLElement) {
        this.plugin.updateCalloutMessageCount(callout);
      }
    }
    const messageView = (_b = this.app.workspace.getLeavesOfType(CALL_OUT_MESSAGE_VIEW)[0]) == null ? void 0 : _b.view;
    if (messageView) {
      messageView.displayMessages();
    }
    try {
      await this.plugin.reopenCurrentNote();
    } catch (error) {
      console.error("\u91CD\u65B0\u6253\u5F00\u7B14\u8BB0\u5931\u8D25:", error);
    }
    this.close();
  }
  updateAllCalloutCounts(calloutId) {
    const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (!markdownView)
      return;
    const callouts = markdownView.contentEl.querySelectorAll(".callout");
    callouts.forEach((callout) => {
      if (callout instanceof HTMLElement) {
        const id = this.plugin.getCalloutId(callout);
        if (id === calloutId) {
          const container = callout.querySelector(".callout-message-icon-container");
          if (container instanceof HTMLElement) {
            this.plugin.updateMessageCount(callout, container);
          }
        }
      }
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var CalloutMessageView = class extends import_obsidian.View {
  constructor(leaf, plugin) {
    super(leaf);
    this.currentCalloutId = null;
    this.viewMode = "all";
    // 添加新方法以支持导航
    this.navigation = true;
    this.plugin = plugin;
    this.containerEl.empty();
    this.initializeButtons();
    this.messageContainer = this.containerEl.createDiv("callout-messages-container");
    this.registerEvent(
      this.app.workspace.on("active-leaf-change", () => {
        if (this.viewMode === "all") {
          this.displayMessages();
        }
      })
    );
    this.registerEvent(
      this.app.workspace.on("editor-change", () => {
        setTimeout(() => {
          if (this.viewMode === "all") {
            this.displayMessages();
          }
        }, 100);
      })
    );
    this.registerEvent(
      this.app.workspace.on("file-open", () => {
        if (this.viewMode === "all") {
          this.displayMessages();
        }
      })
    );
    this.registerEvent(
      this.app.workspace.on("layout-change", () => {
        setTimeout(() => {
          if (this.viewMode === "all") {
            this.displayMessages();
          }
        }, 100);
      })
    );
    if (this.viewMode === "all") {
      this.displayMessages();
    }
  }
  initializeButtons() {
    this.buttonContainer = this.containerEl.createDiv("view-buttons-row");
    const allButton = this.buttonContainer.createEl("button", {
      cls: this.viewMode === "all" ? "mod-cta" : ""
    });
    const buttonContent = allButton.createDiv({
      attr: {
        style: "display: flex; flex-direction: column; align-items: center; gap: 4px;"
      }
    });
    const mainText = buttonContent.createDiv();
    mainText.textContent = "\u663E\u793A\u6216\u5237\u65B0\u6240\u6709callout\u7B14\u8BB0";
    const tipText = buttonContent.createDiv();
    tipText.innerHTML = '<strong style="color: red; font-size: 0.9em;">\u2705\u70B9\u51FB\u7B14\u8BB0\u754C\u9762\u4EFB\u610F\u533A\u57DF</strong>';
    const singleButton = this.buttonContainer.createEl("button", {
      cls: this.viewMode === "single" ? "mod-cta" : ""
    });
    const singleButtonContent = singleButton.createDiv({
      attr: {
        style: "display: flex; flex-direction: column; align-items: center; gap: 4px;"
      }
    });
    const singleMainText = singleButtonContent.createDiv();
    singleMainText.textContent = "\u663E\u793A\u6216\u5237\u65B0\u5355\u4E2ACallout\u7B14\u8BB0";
    const singleTipText = singleButtonContent.createDiv();
    singleTipText.innerHTML = '<strong style="color: #2ecc71; font-size: 0.9em;">\u{1F499}\u70B9\u51FB\u7B14\u8BB0\u53F3\u4E0A\u89D2\u7684\u6570\u5B57</strong>';
    allButton.addEventListener("click", () => {
      this.switchToAllMode();
    });
    singleButton.addEventListener("click", () => {
      if (this.currentCalloutId) {
        this.switchToSingleMode(this.currentCalloutId);
      } else {
        new import_obsidian.Notice("\u70B9\u51FB Callout \u53F3\u4E0A\u89D2\u7684\u6570\u5B57\u6765\u67E5\u770B\u5355\u4E2A Callout \u7684\u5907\u6CE8");
      }
    });
    const exportButtonRow = this.buttonContainer.createDiv("export-button-row");
    const exportButton = exportButtonRow.createEl("button", {
      text: "\u5BFC\u51FA\u7B14\u8BB0",
      cls: "export-button"
    });
    exportButton.addEventListener("click", () => {
      this.exportToPDF();
    });
  }
  // 修改 switchViewMode 方法
  switchViewMode(mode, activeButton, inactiveButton) {
    this.viewMode = mode;
    activeButton.addClass("mod-cta");
    inactiveButton.removeClass("mod-cta");
    this.messageContainer.empty();
    if (mode === "single") {
      if (this.currentCalloutId) {
        this.displayMessages();
      } else {
        new import_obsidian.Notice("\u70B9\u51FB Callout \u53F3\u4E0A\u89D2\u7684\u6570\u5B57\u6765\u67E5\u770B\u5355\u4E2A Callout \u7684\u5907\u6CE8");
      }
    } else if (mode === "all") {
      this.displayMessages();
    }
  }
  // 修改 switchToAllMode 方法
  switchToAllMode() {
    this.viewMode = "all";
    this.currentCalloutId = null;
    this.updateButtonStates();
    this.refreshView();
  }
  // 修改 switchToSingleMode 方法
  switchToSingleMode(calloutId) {
    var _a;
    this.viewMode = "single";
    this.currentCalloutId = calloutId;
    this.updateButtonStates();
    this.messageContainer.empty();
    if (!calloutId) {
      new import_obsidian.Notice("\u70B9\u51FB Callout \u53F3\u4E0A\u89D2\u7684\u6570\u5B57\u6765\u67E5\u770B\u5355\u4E2A Callout \u7684\u5907\u6CE8");
      return;
    }
    const messageData = this.plugin.settings.messages[calloutId];
    if (((_a = messageData == null ? void 0 : messageData.messages) == null ? void 0 : _a.length) > 0) {
      this.renderMessages(calloutId, messageData);
    } else {
      this.showEmptyMessage("\u8BE5 Callout \u6682\u65E0\u5907\u6CE8");
    }
  }
  setCurrentCallout(calloutId) {
    this.currentCalloutId = calloutId;
    this.viewMode = "single";
    this.updateButtonStates();
    this.displayMessages();
  }
  updateButtonStates() {
    const buttons = this.buttonContainer.querySelectorAll("button");
    buttons[0].toggleClass("mod-cta", this.viewMode === "all");
    buttons[1].toggleClass("mod-cta", this.viewMode === "single");
  }
  // 修改 displayMessages 方法
  displayMessages() {
    var _a;
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (!activeView)
      return;
    this.messageContainer.empty();
    const callouts = activeView.contentEl.querySelectorAll(".callout");
    const currentCalloutIds = /* @__PURE__ */ new Set();
    callouts.forEach((callout) => {
      if (callout instanceof HTMLElement) {
        const id = this.getCalloutIdFromElement(callout);
        if (id)
          currentCalloutIds.add(id);
      }
    });
    const messages = this.plugin.settings.messages;
    if (this.viewMode === "single" && this.currentCalloutId) {
      const messageData = messages[this.currentCalloutId];
      if (((_a = messageData == null ? void 0 : messageData.messages) == null ? void 0 : _a.length) > 0) {
        this.renderMessages(this.currentCalloutId, messageData);
      } else {
        this.showEmptyMessage("\u8BE5 Callout \u6682\u65E0\u5907\u6CE8");
      }
    } else if (this.viewMode === "all") {
      let hasMessages = false;
      currentCalloutIds.forEach((calloutId) => {
        var _a2;
        const messageData = messages[calloutId];
        if (((_a2 = messageData == null ? void 0 : messageData.messages) == null ? void 0 : _a2.length) > 0) {
          const groupContainer = this.messageContainer.createDiv("callout-message-group");
          const groupTitle = groupContainer.createDiv("callout-message-group-title");
          const calloutConfig = this.getCalloutConfigForMessage(calloutId);
          groupTitle.style.color = calloutConfig.color;
          groupTitle.style.borderBottom = `2px solid ${calloutConfig.color}`;
          groupTitle.style.marginBottom = "10px";
          groupTitle.style.paddingBottom = "5px";
          groupTitle.style.fontWeight = "bold";
          groupTitle.textContent = `${calloutConfig.name} \u7684\u5907\u6CE8`;
          messageData.messages.forEach((message, index) => {
            const messageEl = this.createMessageElement(
              calloutId,
              message,
              index,
              messageData,
              calloutConfig
            );
            groupContainer.appendChild(messageEl);
          });
          hasMessages = true;
        }
      });
      if (!hasMessages) {
        this.showEmptyMessage("\u5F53\u524D\u6587\u6863\u4E2D\u6CA1\u6709 Callout \u5907\u6CE8");
      }
    }
  }
  // 新增：消息渲染方法
  renderMessages(calloutId, messageData) {
    if (!(messageData == null ? void 0 : messageData.messages))
      return;
    this.messageContainer.empty();
    const calloutConfig = this.getCalloutConfigForMessage(calloutId);
    messageData.messages.forEach((message, index) => {
      const messageEl = this.createMessageElement(
        calloutId,
        message,
        index,
        messageData,
        calloutConfig
      );
      this.messageContainer.appendChild(messageEl);
    });
  }
  // 新增：单个消息元素创建方法
  createMessageElement(calloutId, message, index, messageData, calloutConfig) {
    const messageEl = createEl("div", { cls: "callout-message-item" });
    Object.assign(messageEl.style, {
      backgroundColor: this.adjustColor(calloutConfig.color, 0.1),
      borderLeft: `4px solid ${calloutConfig.color}`,
      borderRadius: "4px",
      margin: "10px 0",
      padding: "12px"
    });
    const titleEl = messageEl.createEl("div", { cls: "callout-message-title" });
    const titleText = titleEl.createEl("span", {
      text: calloutConfig.name,
      cls: "callout-title-text"
    });
    titleText.style.color = calloutConfig.color;
    titleText.style.fontWeight = "bold";
    const buttonContainer = titleEl.createEl("div", { cls: "callout-message-buttons" });
    const editButton = this.createButton(buttonContainer, "\u7F16\u8F91", calloutConfig.color);
    editButton.onclick = async (e) => {
      e.preventDefault();
      e.stopPropagation();
      const modal = new import_obsidian.Modal(this.app);
      modal.titleEl.setText("\u7F16\u8F91 Callout \u5907\u6CE8");
      modal.containerEl.addClass("callout-message-modal");
      const textAreaContainer = modal.contentEl.createDiv("callout-message-textarea-container");
      textAreaContainer.style.margin = "20px 0";
      const textArea = textAreaContainer.createEl("textarea", {
        attr: {
          placeholder: "\u8BF7\u8F93\u5165 Callout \u5907\u6CE8\u4FE1\u606F..."
        },
        cls: "callout-message-textarea",
        value: message.text
      });
      textArea.addEventListener("input", () => {
        const newText = textArea.value.trim();
        if (newText) {
          messageData.messages[index] = {
            text: newText,
            timestamp: new Date().toLocaleString()
          };
          this.displayMessages();
        }
      });
      textArea.style.width = "100%";
      textArea.style.minHeight = "150px";
      textArea.style.padding = "10px";
      textArea.style.borderRadius = "4px";
      textArea.style.border = "1px solid var(--background-modifier-border)";
      textArea.style.backgroundColor = "var(--background-primary)";
      textArea.style.resize = "vertical";
      const buttonContainer2 = modal.contentEl.createDiv("button-container");
      buttonContainer2.style.display = "flex";
      buttonContainer2.style.justifyContent = "flex-end";
      buttonContainer2.style.gap = "10px";
      buttonContainer2.style.marginTop = "20px";
      const saveButton = buttonContainer2.createEl("button", {
        text: "\u4FDD\u5B58",
        cls: "mod-cta"
      });
      saveButton.style.backgroundColor = "var(--interactive-accent)";
      saveButton.style.color = "var(--text-on-accent)";
      const cancelButton = buttonContainer2.createEl("button", {
        text: "\u53D6\u6D88"
      });
      saveButton.addEventListener("click", async () => {
        const newText = textArea.value.trim();
        if (!newText) {
          new import_obsidian.Notice("\u5907\u6CE8\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A");
          return;
        }
        await this.plugin.saveSettings();
        this.updateAllCalloutCounts(calloutId);
        modal.close();
        new import_obsidian.Notice("\u5907\u6CE8\u5DF2\u66F4\u65B0");
      });
      cancelButton.addEventListener("click", () => {
        modal.close();
      });
      setTimeout(() => {
        textArea.value = message.text;
        textArea.focus();
      }, 0);
      modal.open();
    };
    const deleteButton = this.createButton(buttonContainer, "\u5220\u9664", "#ff4444");
    deleteButton.onclick = async (e) => {
      e.preventDefault();
      e.stopPropagation();
      messageData.messages.splice(index, 1);
      this.displayMessages();
      await this.plugin.saveSettings();
      this.updateAllCalloutCounts(calloutId);
      new import_obsidian.Notice("\u5907\u6CE8\u5DF2\u5220\u9664");
    };
    const contentEl = messageEl.createEl("div", {
      cls: "callout-message-content",
      text: message.text
    });
    contentEl.style.color = calloutConfig.textColor;
    messageEl.createEl("div", {
      cls: "callout-message-timestamp",
      text: message.timestamp
    });
    return messageEl;
  }
  // 新增：处理编辑操作
  async handleEdit(e, message, messageEl, index, messageData) {
    e.preventDefault();
    e.stopPropagation();
    const calloutId = this.currentCalloutId;
    if (!calloutId)
      return;
    const modal = new import_obsidian.Modal(this.app);
    modal.titleEl.setText("\u7F16\u8F91 Callout \u5907\u6CE8");
    modal.containerEl.addClass("callout-message-modal");
    const textAreaContainer = modal.contentEl.createDiv("callout-message-textarea-container");
    textAreaContainer.style.margin = "20px 0";
    const textArea = textAreaContainer.createEl("textarea", {
      attr: {
        placeholder: "\u8BF7\u8F93\u5165 Callout \u5907\u6CE8\u4FE1\u606F..."
      },
      cls: "callout-message-textarea",
      value: message.text
    });
    textArea.style.width = "100%";
    textArea.style.minHeight = "150px";
    textArea.style.padding = "10px";
    textArea.style.borderRadius = "4px";
    textArea.style.border = "1px solid var(--background-modifier-border)";
    textArea.style.backgroundColor = "var(--background-primary)";
    textArea.style.resize = "vertical";
    const buttonContainer = modal.contentEl.createDiv("button-container");
    buttonContainer.style.display = "flex";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.gap = "10px";
    buttonContainer.style.marginTop = "20px";
    const saveButton = buttonContainer.createEl("button", {
      text: "\u4FDD\u5B58",
      cls: "mod-cta"
    });
    saveButton.style.backgroundColor = "var(--interactive-accent)";
    saveButton.style.color = "var(--text-on-accent)";
    const cancelButton = buttonContainer.createEl("button", {
      text: "\u53D6\u6D88"
    });
    saveButton.addEventListener("click", async () => {
      const newText = textArea.value.trim();
      if (!newText) {
        new import_obsidian.Notice("\u5907\u6CE8\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A");
        return;
      }
      messageData.messages[index].text = newText;
      messageData.messages[index].timestamp = new Date().toLocaleString();
      await this.plugin.saveSettings();
      this.refreshView();
      modal.close();
      new import_obsidian.Notice("\u5907\u6CE8\u5DF2\u66F4\u65B0");
    });
    cancelButton.addEventListener("click", () => {
      modal.close();
    });
    setTimeout(() => {
      textArea.value = message.text;
      textArea.focus();
    }, 0);
    modal.open();
  }
  // 新增：处理删除操作
  async handleDelete(e, index, messageData, calloutId) {
    e.preventDefault();
    e.stopPropagation();
    messageData.messages.splice(index, 1);
    await this.plugin.saveSettings();
    this.updateMessageCount(calloutId, messageData.messages.length);
    this.refreshView();
    new import_obsidian.Notice("\u6D88\u606F\u5DF2\u5220\u9664");
  }
  // 新增：更新消息计数
  updateMessageCount(calloutId, count) {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (!activeView)
      return;
    const callouts = activeView.contentEl.querySelectorAll(".callout");
    callouts.forEach((callout) => {
      if (callout instanceof HTMLElement) {
        const id = this.getCalloutIdFromElement(callout);
        if (id === calloutId) {
          const countSpan = callout.querySelector(".callout-message-count");
          if (countSpan)
            countSpan.textContent = count.toString();
        }
      }
    });
  }
  // 工具方法：创建按钮
  createButton(container, text, color) {
    const button = container.createEl("button", {
      text,
      cls: `callout-message-${text.toLowerCase()}-button`
    });
    Object.assign(button.style, {
      backgroundColor: color,
      color: "#ffffff",
      border: "none",
      borderRadius: "4px",
      padding: "4px 8px",
      cursor: "pointer",
      marginRight: text === "\u7F16\u8F91" ? "8px" : "0"
    });
    return button;
  }
  showEmptyMessage(message) {
    if (this.viewMode === "single" && !this.currentCalloutId) {
      new import_obsidian.Notice("\u70B9\u51FB Callout \u53F3\u4E0A\u89D2\u7684\u6570\u5B57\u6765\u67E5\u770B\u5355\u4E2A Callout \u7684\u5907\u6CE8");
      return;
    }
    this.messageContainer.createEl("div", {
      cls: "callout-message-empty",
      text: message
    });
  }
  getCalloutConfigForMessage(calloutId) {
    const currentScene = this.plugin.settings.scenes.find(
      (scene) => scene.id === this.plugin.settings.currentSceneId
    );
    if (currentScene) {
      const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
      if (markdownView) {
        const callouts = markdownView.contentEl.querySelectorAll(".callout");
        for (const callout of Array.from(callouts)) {
          if (callout instanceof HTMLElement) {
            const id = this.plugin.getCalloutId(callout);
            if (id === calloutId) {
              const titleEl = callout.querySelector(".callout-title");
              if (titleEl) {
                const titleText = titleEl.textContent || "";
                const config = currentScene.callouts.find((c) => titleText.includes(c.name));
                if (config) {
                  return config;
                }
              }
            }
          }
        }
      }
    }
    return (currentScene == null ? void 0 : currentScene.callouts[0]) || this.plugin.settings.scenes[0].callouts[0];
  }
  scrollToCallout(calloutId) {
    const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (!markdownView)
      return;
    const callouts = markdownView.contentEl.querySelectorAll(".callout");
    for (const callout of Array.from(callouts)) {
      if (callout instanceof HTMLElement) {
        const id = this.getCalloutIdFromElement(callout);
        if (id === calloutId) {
          this.highlightCallout(callout);
          callout.scrollIntoView({ behavior: "smooth", block: "center" });
          break;
        }
      }
    }
  }
  highlightCallout(callout) {
    callout.addClass("callout-highlight");
    setTimeout(() => {
      callout.removeClass("callout-highlight");
    }, 2e3);
  }
  adjustColor(color, opacity) {
    if (color.startsWith("#")) {
      const r = parseInt(color.slice(1, 3), 16);
      const g = parseInt(color.slice(3, 5), 16);
      const b = parseInt(color.slice(5, 7), 16);
      return `rgba(${r}, ${g}, ${b}, ${opacity})`;
    }
    return color;
  }
  getViewType() {
    return CALL_OUT_MESSAGE_VIEW;
  }
  getDisplayText() {
    return "Callout \u5907\u6CE8";
  }
  getIcon() {
    return "message-circle";
  }
  // 添加导出 PDF 方法
  async exportToPDF() {
    if (!await this.plugin.checkActivation())
      return;
    try {
      const previewContent = document.createElement("div");
      previewContent.className = "export-preview-container";
      const messages = this.plugin.settings.messages;
      let hasContent = false;
      const messagesToShow = Array.from(this.messageContainer.querySelectorAll(".callout-message-item")).map((item) => {
        const titleEl = item.querySelector(".callout-title-text");
        const contentEl = item.querySelector(".callout-message-content");
        const timeEl = item.querySelector(".callout-message-timestamp");
        const color = window.getComputedStyle(item).borderLeftColor;
        return {
          title: (titleEl == null ? void 0 : titleEl.textContent) || "",
          content: (contentEl == null ? void 0 : contentEl.textContent) || "",
          time: (timeEl == null ? void 0 : timeEl.textContent) || "",
          color
        };
      });
      if (messagesToShow.length === 0) {
        new import_obsidian.Notice("\u6CA1\u6709\u53EF\u5BFC\u51FA\u7684 Callout \u5907\u6CE8");
        return;
      }
      messagesToShow.forEach((message) => {
        hasContent = true;
        const calloutDiv = document.createElement("div");
        calloutDiv.className = "callout";
        calloutDiv.style.borderLeftColor = message.color;
        calloutDiv.style.backgroundColor = this.adjustColor(message.color, 0.1);
        const titleDiv = document.createElement("div");
        titleDiv.className = "callout-title";
        titleDiv.style.color = message.color;
        titleDiv.textContent = message.title;
        calloutDiv.appendChild(titleDiv);
        const contentDiv = document.createElement("div");
        contentDiv.className = "callout-content";
        contentDiv.textContent = message.content;
        calloutDiv.appendChild(contentDiv);
        const timeDiv = document.createElement("div");
        timeDiv.className = "callout-timestamp";
        timeDiv.textContent = message.time;
        calloutDiv.appendChild(timeDiv);
        previewContent.appendChild(calloutDiv);
      });
      const previewModal = new import_obsidian.Modal(this.app);
      previewModal.titleEl.setText("\u5BFC\u51FA\u9884\u89C8");
      previewModal.contentEl.addClass("export-preview-modal");
      const previewContainer = previewModal.contentEl.createDiv("export-preview-container");
      previewContainer.style.maxHeight = "70vh";
      previewContainer.style.overflow = "auto";
      previewContainer.style.padding = "20px";
      previewContainer.style.backgroundColor = "var(--background-primary)";
      previewContainer.style.borderRadius = "8px";
      previewContainer.style.border = "1px solid var(--background-modifier-border)";
      const clonedMessages = Array.from(this.messageContainer.children).map((child) => {
        const clone = child.cloneNode(true);
        const buttons = clone.querySelectorAll(".callout-message-buttons");
        buttons.forEach((button) => button.remove());
        const editButtons = clone.querySelectorAll(".callout-message-edit-button");
        const deleteButtons = clone.querySelectorAll(".callout-message-delete-button");
        editButtons.forEach((button) => button.remove());
        deleteButtons.forEach((button) => button.remove());
        return clone;
      });
      const printStyles = `
                <style>
                    ${this.getObsidianStyles()}
                    /* \u786E\u4FDD\u6253\u5370\u65F6\u9690\u85CF\u6240\u6709\u6309\u94AE */
                    .callout-message-buttons,
                    .callout-message-edit-button,
                    .callout-message-delete-button {
                        display: none !important;
                    }
                    
                    /* \u4F18\u5316\u6253\u5370\u5E03\u5C40 */
                    .callout-message-item {
                        page-break-inside: avoid;
                        margin: 10px 0;
                        padding: 12px;
                        border-radius: 4px;
                    }
                    
                    .callout-message-title {
                        margin-bottom: 8px;
                        font-weight: bold;
                    }
                    
                    .callout-message-content {
                        margin: 8px 0;
                    }
                    
                    .callout-message-timestamp {
                        font-size: 0.8em;
                        color: #666;
                        text-align: right;
                        margin-top: 8px;
                    }
                </style>
            `;
      const printContent = `
                <html>
                    <head>
                        <title>Callout \u5907\u6CE8\u5BFC\u51FA</title>
                        ${printStyles}
                    </head>
                    <body>
                        <div class="export-preview-container">
                            ${previewContainer.innerHTML}
                        </div>
                    </body>
                </html>
            `;
      const activeFile = this.app.workspace.getActiveFile();
      if (activeFile) {
        const titleContainer = previewContainer.createDiv("note-title-container");
        titleContainer.style.textAlign = "center";
        titleContainer.style.padding = "15px 0";
        titleContainer.style.marginBottom = "25px";
        titleContainer.style.borderBottom = "2px solid var(--interactive-accent)";
        const titleText = titleContainer.createEl("h2", {
          text: activeFile.basename,
          cls: "note-title"
        });
        titleText.style.margin = "0";
        titleText.style.color = "var(--text-accent)";
        titleText.style.fontSize = "1.5em";
        titleText.style.fontWeight = "600";
        titleText.style.letterSpacing = "0.5px";
        titleText.style.fontFamily = "var(--font-interface)";
      }
      clonedMessages.forEach((clone) => {
        previewContainer.appendChild(clone);
      });
      const buttonContainer = previewModal.contentEl.createDiv("export-preview-buttons");
      buttonContainer.style.marginTop = "20px";
      buttonContainer.style.display = "flex";
      buttonContainer.style.justifyContent = "flex-end";
      buttonContainer.style.gap = "10px";
      const exportButton = buttonContainer.createEl("button", {
        text: "\u786E\u8BA4\u5BFC\u51FA",
        cls: "mod-cta"
      });
      const cancelButton = buttonContainer.createEl("button", {
        text: "\u53D6\u6D88"
      });
      exportButton.addEventListener("click", async () => {
        try {
          const remote = require("@electron/remote");
          if (!remote) {
            new import_obsidian.Notice("\u65E0\u6CD5\u8BBF\u95EE\u7CFB\u7EDF\u5BF9\u8BDD\u6846");
            return;
          }
          const { filePath, canceled } = await remote.dialog.showSaveDialog({
            title: "\u5BFC\u51FA PDF",
            defaultPath: "Callout\u7B14\u8BB0.pdf",
            filters: [{ name: "PDF \u6587\u4EF6", extensions: ["pdf"] }]
          });
          if (canceled || !filePath) {
            return;
          }
          const win = new remote.BrowserWindow({
            width: 800,
            height: 600,
            show: false,
            webPreferences: {
              nodeIntegration: true
            }
          });
          const printContent2 = `
                        <html>
                            <head>
                                <title>Callout \u5907\u6CE8\u5BFC\u51FA</title>
                                ${printStyles}
                            </head>
                            <body>
                                <div class="export-preview-container">
                                    ${previewContainer.innerHTML}
                                </div>
                            </body>
                        </html>
                    `;
          win.loadURL("data:text/html;charset=utf-8," + encodeURIComponent(printContent2));
          win.webContents.on("did-finish-load", async () => {
            try {
              const data = await win.webContents.printToPDF({
                marginsType: 1,
                printBackground: true,
                printSelectionOnly: false,
                landscape: false
              });
              require("fs").writeFile(filePath, data, (error) => {
                if (error) {
                  console.error("PDF \u5BFC\u51FA\u5931\u8D25:", error);
                  new import_obsidian.Notice("PDF \u5BFC\u51FA\u5931\u8D25");
                } else {
                  new import_obsidian.Notice("PDF \u5BFC\u51FA\u6210\u529F\uFF01");
                }
                win.close();
              });
            } catch (error) {
              console.error("PDF \u751F\u6210\u5931\u8D25:", error);
              new import_obsidian.Notice("PDF \u751F\u6210\u5931\u8D25");
              win.close();
            }
          });
          previewModal.close();
        } catch (error) {
          console.error("Export error:", error);
          new import_obsidian.Notice("\u5BFC\u51FA PDF \u5931\u8D25");
        }
      });
      cancelButton.addEventListener("click", () => {
        previewModal.close();
      });
      previewModal.open();
    } catch (error) {
      console.error("Export error:", error);
      new import_obsidian.Notice("\u5BFC\u51FA PDF \u5931\u8D25");
    }
  }
  // 添加获取 Obsidian 样式的辅助方法
  getObsidianStyles() {
    const styles = window.getComputedStyle(document.documentElement);
    let cssVars = ":root {\n";
    for (let i = 0; i < styles.length; i++) {
      const prop = styles[i];
      if (prop.startsWith("--")) {
        cssVars += `  ${prop}: ${styles.getPropertyValue(prop)};
`;
      }
    }
    cssVars += "}\n";
    return `
            ${cssVars}
            body {
                font-family: var(--font-text);
                background-color: var(--background-primary);
                color: var(--text-normal);
                padding: 20px;
                margin: 0;
            }
            .export-preview-container {
                max-width: 800px;
                margin: 0 auto;
            }
            .callout-message-item {
                margin: 10px 0;
                padding: 12px;
                border-radius: 4px;
                position: relative;
            }
            .callout-message-title {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 8px;
            }
            .callout-message-content {
                margin: 8px 0;
            }
            .callout-message-timestamp {
                font-size: 0.8em;
                color: var(--text-muted);
                text-align: right;
                margin-top: 8px;
            }
        `;
  }
  // 在 CalloutMessageView 类中添加显示笔记名称的方法
  displayNoteTitle() {
    const existingTitle = this.containerEl.querySelector(".note-title-container");
    if (existingTitle) {
      existingTitle.remove();
    }
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile)
      return;
    const titleContainer = this.containerEl.createDiv("note-title-container");
    titleContainer.style.textAlign = "center";
    titleContainer.style.padding = "15px 0";
    titleContainer.style.marginBottom = "25px";
    titleContainer.style.borderBottom = "2px solid var(--interactive-accent)";
    titleContainer.style.position = "sticky";
    titleContainer.style.top = "0";
    titleContainer.style.backgroundColor = "var(--background-primary)";
    titleContainer.style.zIndex = "1";
    titleContainer.style.boxShadow = "0 2px 8px rgba(0, 0, 0, 0.1)";
    const titleText = titleContainer.createEl("h2", {
      text: activeFile.basename,
      cls: "note-title"
    });
    titleText.style.margin = "0";
    titleText.style.color = "var(--text-accent)";
    titleText.style.fontSize = "1.5em";
    titleText.style.fontWeight = "600";
    titleText.style.letterSpacing = "0.5px";
    titleText.style.fontFamily = "var(--font-interface)";
    if (this.messageContainer) {
      this.containerEl.insertBefore(titleContainer, this.messageContainer);
    }
  }
  // 添加 getCalloutIdFromElement 方法
  getCalloutIdFromElement(callout) {
    const span = callout.querySelector("span[data-callout-id]");
    if (span) {
      return span.getAttribute("data-callout-id");
    }
    return null;
  }
  // 新增：视图刷新方法
  refreshView() {
    this.messageContainer.empty();
    this.displayMessages();
  }
  // 添加更新所有相关消息计数的方法
  updateAllCalloutCounts(calloutId) {
    const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (!markdownView)
      return;
    const callouts = markdownView.contentEl.querySelectorAll(".callout");
    callouts.forEach((callout) => {
      if (callout instanceof HTMLElement) {
        const id = this.plugin.getCalloutId(callout);
        if (id === calloutId) {
          this.plugin.updateCalloutMessageCount(callout);
        }
      }
    });
  }
};
var CalloutMessageSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.cleanupFunctions = [];
    this.plugin = plugin;
  }
  display() {
    var _a;
    const { containerEl } = this;
    containerEl.empty();
    const navContainer = containerEl.createDiv("nav-container");
    navContainer.style.display = "flex";
    navContainer.style.borderBottom = "2px solid var(--background-modifier-border)";
    navContainer.style.marginBottom = "24px";
    navContainer.style.padding = "0 10px";
    navContainer.style.gap = "10px";
    const tabs = [
      { id: "basic", text: "\u57FA\u7840\u8BBE\u7F6E" },
      { id: "icon", text: "\u56FE\u6807\u88C5\u9970" },
      { id: "license", text: "\u6388\u6743" },
      { id: "about", text: "\u5173\u4E8E" }
    ];
    const contentContainer = containerEl.createDiv("content-container");
    const contents = {
      basic: contentContainer.createDiv("basic-settings-content"),
      icon: contentContainer.createDiv("icon-settings-content"),
      license: contentContainer.createDiv("license-content"),
      about: contentContainer.createDiv("about-content")
    };
    tabs.forEach((tab) => {
      const tabButton = navContainer.createEl("button", {
        text: tab.text,
        cls: "nav-tab"
      });
      tabButton.style.padding = "8px 16px";
      tabButton.style.border = "none";
      tabButton.style.borderRadius = "4px 4px 0 0";
      tabButton.style.backgroundColor = "transparent";
      tabButton.style.cursor = "pointer";
      tabButton.style.color = "var(--text-muted)";
      tabButton.style.fontSize = "14px";
      tabButton.style.fontWeight = "bold";
      tabButton.onclick = () => {
        Object.values(contents).forEach((content) => content.style.display = "none");
        contents[tab.id].style.display = "block";
        navContainer.querySelectorAll(".nav-tab").forEach((el) => {
          el.style.backgroundColor = "transparent";
          el.style.color = "var(--text-muted)";
        });
        tabButton.style.backgroundColor = "var(--background-secondary)";
        tabButton.style.color = "var(--text-accent)";
      };
    });
    contents.basic.style.display = "block";
    (_a = navContainer.querySelector(".nav-tab")) == null ? void 0 : _a.click();
    this.renderBasicContent(contents.basic);
    this.renderIconSettings(contents.icon);
    this.renderLicenseContent(contents.license);
    this.renderAboutContent(contents.about);
    const element = navContainer.querySelector(".nav-tab");
    if (element instanceof HTMLElement) {
      element.click();
    }
  }
  // 渲染图标设置
  renderIconSettings(container) {
    const iconSettingsContainer = container.createDiv("icon-settings-container");
    new import_obsidian.Setting(iconSettingsContainer).setName("\u542F\u7528 Callout Prism \u6837\u5F0F").setDesc("\u662F\u5426\u542F\u7528 Prism \u6837\u5F0F\u7F8E\u5316 Callout").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.usePrismStyle).onChange(async (value) => {
        this.plugin.settings.usePrismStyle = value;
        await this.plugin.saveSettings();
        this.plugin.togglePrismStyle(value);
      });
    });
    new import_obsidian.Setting(iconSettingsContainer).setName("\u5F53\u524D\u56FE\u6807\u6837\u5F0F").setDesc("\u9009\u62E9\u8981\u4F7F\u7528\u7684\u56FE\u6807\u6837\u5F0F").addDropdown((dropdown) => {
      const icons = {
        1: "\u6837\u5F0F1",
        2: "\u6837\u5F0F2",
        3: "\u6837\u5F0F3",
        4: "\u6837\u5F0F4",
        5: "\u6837\u5F0F5"
      };
      Object.entries(icons).forEach(([value, name]) => {
        dropdown.addOption(value, name);
      });
      dropdown.setValue(this.plugin.settings.iconSettings.type.toString());
      dropdown.onChange(async (value) => {
        this.plugin.settings.iconSettings.type = parseInt(value);
        await this.plugin.saveSettings();
        this.plugin.refreshAllIcons();
        updatePreview();
      });
    });
    new import_obsidian.Setting(iconSettingsContainer).setName("\u56FE\u6807\u5927\u5C0F").setDesc("\u8C03\u6574\u56FE\u6807\u7684\u5927\u5C0F\uFF08\u50CF\u7D20\uFF09").addSlider((slider) => {
      slider.setLimits(16, 48, 2).setValue(this.plugin.settings.iconSettings.size).setDynamicTooltip().onChange(async (value) => {
        this.plugin.settings.iconSettings.size = value;
        await this.plugin.saveSettings();
        this.plugin.refreshAllIcons();
        updatePreview();
      });
    });
    const positionContainer = iconSettingsContainer.createDiv("position-settings");
    positionContainer.createEl("h4", { text: "\u56FE\u6807\u4F4D\u7F6E\u8C03\u6574", cls: "setting-category" });
    new import_obsidian.Setting(positionContainer).setName("\u9876\u90E8\u95F4\u8DDD").setDesc("\u8C03\u6574\u56FE\u6807\u8DDD\u79BB\u9876\u90E8\u7684\u8DDD\u79BB\uFF08\u50CF\u7D20\uFF09").addSlider((slider) => {
      slider.setLimits(0, 32, 2).setValue(this.plugin.settings.iconSettings.position.top).setDynamicTooltip().onChange(async (value) => {
        this.plugin.settings.iconSettings.position.top = value;
        await this.plugin.saveSettings();
        this.plugin.refreshAllIcons();
        updatePreview();
      });
    });
    new import_obsidian.Setting(positionContainer).setName("\u53F3\u4FA7\u95F4\u8DDD").setDesc("\u8C03\u6574\u56FE\u6807\u8DDD\u79BB\u53F3\u4FA7\u7684\u8DDD\u79BB\uFF08\u50CF\u7D20\uFF09").addSlider((slider) => {
      slider.setLimits(8, 100, 2).setValue(this.plugin.settings.iconSettings.position.right).setDynamicTooltip().onChange(async (value) => {
        this.plugin.settings.iconSettings.position.right = value;
        await this.plugin.saveSettings();
        this.plugin.refreshAllIcons();
        updatePreview();
      });
    });
    const previewContainer = iconSettingsContainer.createDiv("icon-preview-container");
    previewContainer.createEl("h4", { text: "\u56FE\u6807\u9884\u89C8", cls: "setting-category" });
    const calloutPreview = previewContainer.createDiv("callout");
    calloutPreview.addClass("callout");
    calloutPreview.style.position = "relative";
    calloutPreview.style.margin = "10px 0";
    calloutPreview.style.setProperty("--icon-size", `${this.plugin.settings.iconSettings.size}px`);
    calloutPreview.style.setProperty("--icon-top-position", `${this.plugin.settings.iconSettings.position.top}px`);
    calloutPreview.style.setProperty("--icon-right-position", `${this.plugin.settings.iconSettings.position.right}px`);
    const calloutTitle = calloutPreview.createDiv("callout-title");
    calloutTitle.innerHTML = '<div class="callout-title-inner">\u9884\u89C8 Callout</div>';
    const calloutContent = calloutPreview.createDiv("callout-content");
    calloutContent.innerHTML = "\u8FD9\u662F\u4E00\u4E2A\u7528\u4E8E\u9884\u89C8\u56FE\u6807\u6837\u5F0F\u7684 Callout";
    const iconContainer = document.createElement("div");
    iconContainer.className = "callout-message-icon-container";
    const icon = document.createElement("div");
    icon.className = "callout-message-icon";
    icon.innerHTML = this.plugin.getIconSvg(this.plugin.settings.iconSettings.type);
    icon.style.width = `${this.plugin.settings.iconSettings.size}px`;
    icon.style.height = `${this.plugin.settings.iconSettings.size}px`;
    iconContainer.style.top = `${this.plugin.settings.iconSettings.position.top}px`;
    iconContainer.style.right = `${this.plugin.settings.iconSettings.position.right}px`;
    const countSpan = document.createElement("span");
    countSpan.className = "callout-message-count";
    countSpan.textContent = "0";
    iconContainer.appendChild(icon);
    iconContainer.appendChild(countSpan);
    calloutPreview.appendChild(iconContainer);
    const updatePreview = () => {
      calloutPreview.style.setProperty("--icon-size", `${this.plugin.settings.iconSettings.size}px`);
      calloutPreview.style.setProperty("--icon-top-position", `${this.plugin.settings.iconSettings.position.top}px`);
      calloutPreview.style.setProperty("--icon-right-position", `${this.plugin.settings.iconSettings.position.right}px`);
      icon.style.width = `${this.plugin.settings.iconSettings.size}px`;
      icon.style.height = `${this.plugin.settings.iconSettings.size}px`;
      iconContainer.style.top = `${this.plugin.settings.iconSettings.position.top}px`;
      iconContainer.style.right = `${this.plugin.settings.iconSettings.position.right}px`;
      icon.innerHTML = this.plugin.getIconSvg(this.plugin.settings.iconSettings.type);
    };
    return updatePreview;
  }
  updatePreviewIcon(iconElement) {
    const iconType = this.plugin.settings.iconSettings.type;
    iconElement.empty();
    switch (iconType) {
      case 1:
        iconElement.innerHTML = `<svg viewBox="0 0 24 24" fill="#4A90E2"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/></svg>`;
        break;
      case 2:
        iconElement.innerHTML = `<svg viewBox="0 0 24 24" fill="#2ECC71"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>`;
        break;
      case 3:
        iconElement.innerHTML = `<svg viewBox="0 0 24 24" fill="#FF69B4"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>`;
        break;
      case 4:
        iconElement.innerHTML = `<svg viewBox="0 0 24 24" fill="#FF9800"><circle cx="12" cy="12" r="10"/></svg>`;
        break;
      case 5:
        iconElement.innerHTML = `<svg viewBox="0 0 24 24" fill="#9E9E9E"><rect x="3" y="3" width="18" height="18" rx="2"/></svg>`;
        break;
    }
  }
  // 渲染授权内容
  renderLicenseContent(container) {
    const licenseHeader = container.createDiv("license-header");
    licenseHeader.createEl("h1", { text: "\u63D2\u4EF6\u6388\u6743" }).style.color = "#ff6b6b";
    const statusContainer = licenseHeader.createDiv("license-status-container");
    statusContainer.style.margin = "20px 0";
    statusContainer.style.padding = "15px";
    statusContainer.style.borderRadius = "8px";
    statusContainer.style.backgroundColor = this.plugin.settings.isActivated ? "#e8f5e9" : "#ffebee";
    statusContainer.style.border = `1px solid ${this.plugin.settings.isActivated ? "#4caf50" : "#f44336"}`;
    const statusIcon = statusContainer.createSpan("license-status-icon");
    statusIcon.setText(this.plugin.settings.isActivated ? "\u2705" : "\u274C");
    const statusText = statusContainer.createSpan("license-status-text");
    statusText.setText(this.plugin.settings.isActivated ? " \u5DF2\u6388\u6743\uFF0C\u8BF7\u91CD\u542F" : " \u672A\u6388\u6743");
    statusText.style.marginLeft = "8px";
    statusText.style.color = this.plugin.settings.isActivated ? "#2e7d32" : "#c62828";
    const restartButton = statusContainer.createEl("button", {
      text: "\u91CD\u542F Obsidian",
      cls: "restart-obsidian-button"
    });
    restartButton.style.marginLeft = "20px";
    restartButton.style.padding = "4px 12px";
    restartButton.style.backgroundColor = "#4caf50";
    restartButton.style.color = "white";
    restartButton.style.border = "none";
    restartButton.style.borderRadius = "4px";
    restartButton.style.cursor = "pointer";
    restartButton.addEventListener("click", () => {
      const electron = require("electron");
      const window2 = electron.remote.getCurrentWindow();
      window2.reload();
    });
    const activationContainer = container.createDiv("license-activation-container");
    activationContainer.style.marginTop = "20px";
    activationContainer.style.padding = "20px";
    activationContainer.style.backgroundColor = "var(--background-secondary)";
    activationContainer.style.borderRadius = "8px";
    const inputContainer = activationContainer.createDiv("license-input-container");
    inputContainer.createEl("h3", { text: "\u8F93\u5165\u6FC0\u6D3B\u7801" });
    const input = inputContainer.createEl("input", {
      type: "text",
      placeholder: "\u8BF7\u8F93\u5165\u6FC0\u6D3B\u7801"
    });
    input.style.width = "100%";
    input.style.padding = "8px";
    input.style.marginTop = "10px";
    input.style.borderRadius = "4px";
    input.style.border = "1px solid var(--background-modifier-border)";
    input.value = this.plugin.settings.licenseKey;
    input.addEventListener("change", async (e) => {
      const target = e.target;
      this.plugin.settings.licenseKey = target.value;
      await this.plugin.saveSettings();
    });
    const activateButton = activationContainer.createEl("button", {
      text: "\u6FC0\u6D3B\u63D2\u4EF6",
      cls: "mod-cta"
    });
    activateButton.style.marginTop = "15px";
    activateButton.style.width = "100%";
    activateButton.addEventListener("click", async () => {
      const isValid = await this.plugin.validateLicense(this.plugin.settings.licenseKey);
      if (isValid) {
        this.plugin.settings.isActivated = true;
        await this.plugin.saveSettings();
        const restartContainer = activationContainer.createDiv("restart-container");
        restartContainer.style.marginTop = "20px";
        restartContainer.style.padding = "15px";
        restartContainer.style.backgroundColor = "#e8f5e9";
        restartContainer.style.borderRadius = "8px";
        restartContainer.style.border = "1px solid #4caf50";
        restartContainer.style.textAlign = "center";
        const restartText = restartContainer.createEl("p", {
          text: "\u6FC0\u6D3B\u6210\u529F\uFF01\u8BF7\u91CD\u542F Obsidian \u4EE5\u542F\u7528\u6240\u6709\u529F\u80FD\u3002"
        });
        restartText.style.margin = "0 0 15px 0";
        restartText.style.color = "#2e7d32";
        const restartButton2 = restartContainer.createEl("button", {
          text: "\u91CD\u542F Obsidian",
          cls: "mod-cta"
        });
        restartButton2.style.backgroundColor = "#4caf50";
        restartButton2.addEventListener("click", () => {
          const electron = require("electron");
          const window2 = electron.remote.getCurrentWindow();
          window2.reload();
        });
        new import_obsidian.Notice("\u6FC0\u6D3B\u6210\u529F\uFF01");
        this.display();
      } else {
        new import_obsidian.Notice("\u6FC0\u6D3B\u7801\u65E0\u6548\uFF01");
      }
    });
    const trialStatusContainer = activationContainer.createDiv("trial-status-container");
    trialStatusContainer.style.marginTop = "15px";
    trialStatusContainer.style.padding = "15px";
    trialStatusContainer.style.backgroundColor = "var(--background-primary)";
    trialStatusContainer.style.borderRadius = "8px";
    trialStatusContainer.style.border = "1px solid var(--background-modifier-border)";
    trialStatusContainer.style.position = "relative";
    if (this.plugin.settings.hasUsedTrial) {
      if (this.plugin.settings.trialEndTime && Date.now() < this.plugin.settings.trialEndTime) {
        const now = Date.now();
        const remainingTime = this.plugin.settings.trialEndTime - now;
        const remainingMinutes = Math.ceil(remainingTime / (1e3 * 60));
        const remainingSeconds = Math.ceil(remainingTime / 1e3);
        const timeContainer = trialStatusContainer.createDiv("trial-time-container");
        timeContainer.style.textAlign = "center";
        timeContainer.style.marginBottom = "10px";
        const timeDisplay = timeContainer.createEl("div", {
          text: `\u5269\u4F59\u8BD5\u7528\u65F6\u95F4\uFF1A${remainingMinutes}\u5206${remainingSeconds % 60}\u79D2`,
          cls: "trial-time-display"
        });
        timeDisplay.style.fontSize = "16px";
        timeDisplay.style.fontWeight = "bold";
        timeDisplay.style.color = "#4caf50";
        const progressContainer = trialStatusContainer.createDiv("trial-progress-container");
        progressContainer.style.height = "6px";
        progressContainer.style.backgroundColor = "#e0e0e0";
        progressContainer.style.borderRadius = "3px";
        progressContainer.style.overflow = "hidden";
        progressContainer.style.marginTop = "10px";
        const progress = progressContainer.createDiv("trial-progress");
        const percentage = remainingTime / (6 * 60 * 60 * 1e3) * 100;
        progress.style.width = `${percentage}%`;
        progress.style.height = "100%";
        progress.style.backgroundColor = "#4caf50";
        progress.style.transition = "width 1s linear";
        const updateTimer = setInterval(() => {
          const currentTime = Date.now();
          const newRemainingTime = this.plugin.settings.trialEndTime - currentTime;
          if (newRemainingTime <= 0) {
            clearInterval(updateTimer);
            this.display();
            return;
          }
          const newMinutes = Math.floor(newRemainingTime / (1e3 * 60));
          const newSeconds = Math.floor(newRemainingTime / 1e3 % 60);
          timeDisplay.textContent = `\u5269\u4F59\u8BD5\u7528\u65F6\u95F4\uFF1A${newMinutes}\u5206${newSeconds}\u79D2`;
          const newPercentage = newRemainingTime / (6 * 60 * 60 * 1e3) * 100;
          progress.style.width = `${newPercentage}%`;
        }, 1e3);
        this.register(() => clearInterval(updateTimer));
      } else {
        const statusText2 = trialStatusContainer.createEl("div", {
          text: "\u8BD5\u7528\u5DF2\u7ED3\u675F\uFF0C\u5378\u8F7D\u63D2\u4EF6\u5E76\u91CD\u65B0\u5B89\u88C5\u53EF\u91CD\u65B0\u83B7\u5F97\u8BD5\u7528\u673A\u4F1A",
          cls: "trial-status-text"
        });
        statusText2.style.color = "#f44336";
        statusText2.style.textAlign = "center";
        statusText2.style.fontWeight = "bold";
      }
    } else {
      const statusText2 = trialStatusContainer.createEl("div", {
        text: "\u672A\u5F00\u59CB\u8BD5\u7528\uFF08\u5378\u8F7D\u91CD\u88C5\u53EF\u91CD\u65B0\u83B7\u5F97\u8BD5\u7528\u673A\u4F1A\uFF09",
        cls: "trial-status-text"
      });
      statusText2.style.color = "var(--text-muted)";
      statusText2.style.textAlign = "center";
    }
    const trialButton = activationContainer.createEl("button", {
      text: "\u63D2\u4EF6\u8BD5\u7528",
      cls: "mod-cta"
    });
    trialButton.style.width = "100%";
    trialButton.style.marginTop = "15px";
    trialButton.style.backgroundColor = "#4caf50";
    trialButton.style.color = "#ffffff";
    trialButton.style.padding = "8px";
    trialButton.style.borderRadius = "4px";
    trialButton.style.cursor = "pointer";
    trialButton.style.border = "none";
    trialButton.style.fontSize = "14px";
    trialButton.style.fontWeight = "bold";
    trialButton.addEventListener("click", async () => {
      if (this.plugin.settings.hasUsedTrial) {
        new import_obsidian.Notice("\u8BD5\u7528\u673A\u4F1A\u5DF2\u7528\u5B8C\uFF0C\u8BF7\u6FC0\u6D3B\u63D2\u4EF6\u7EE7\u7EED\u4F7F\u7528\uFF01");
        return;
      }
      const startTime = Date.now();
      const endTime = startTime + 6 * 60 * 60 * 1e3;
      this.plugin.settings.trialEndTime = endTime;
      this.plugin.settings.hasUsedTrial = true;
      await this.plugin.saveSettings();
      await this.plugin.onunload();
      await this.plugin.onload();
      new import_obsidian.Notice("\u5DF2\u5F00\u542F6\u5C0F\u65F6\u8BD5\u7528\u671F\uFF01\u6240\u6709\u529F\u80FD\u5DF2\u542F\u7528");
      this.display();
      const checkTrialInterval = setInterval(async () => {
        const now = Date.now();
        if (now >= endTime) {
          clearInterval(checkTrialInterval);
          await this.plugin.onunload();
          this.plugin.disablePluginFeatures();
          new import_obsidian.Notice("\u8BD5\u7528\u671F\u5DF2\u7ED3\u675F\uFF0C\u8BF7\u6FC0\u6D3B\u63D2\u4EF6\u7EE7\u7EED\u4F7F\u7528\uFF01");
          this.display();
        }
      }, 1e3);
      this.register(() => clearInterval(checkTrialInterval));
    });
  }
  // 修改 renderAboutContent 方法
  renderAboutContent(container) {
    container.createEl("h1", { text: "\u5173\u4E8E\u63D2\u4EF6" }).style.color = "#ff6b6b";
    const descriptionContainer = container.createEl("div");
    descriptionContainer.createEl("span", {
      text: "\u8FD9\u662F\u4E00\u4E2A\u7528\u4E8E\u5728 Obsidian \u4E2D\u4E3A Callout \u6DFB\u52A0\u989D\u5916\u5907\u6CE8\u529F\u80FD\u7684\u63D2\u4EF6\uFF0C"
    });
    const warningText = descriptionContainer.createEl("span", {
      text: '\uFFFD\uFFFD\uFFFD\u6CE8\u610F\u8BE5\u63D2\u4EF6\u5BF9\u4E8ECallout\u7B14\u8BB0\u7C7B\u5B58\u5728\u8F83\u5927\u7684HTML"\u7B14\u8BB0\u6C61\u67D3"\uFF0C\u4F7F\u7528\u524D\u8BF7\u77E5\u6089\u3002'
    });
    warningText.style.color = "#ff0000";
    container.createEl("p", { text: "\u7248\u672C: 1.2.0" });
    container.createEl("p", { text: "\u4F5C\u8005: \u4E00\u624B\u70C2\u724C\u6253\u5F97\u7A00\u70C2" });
    const hr1 = container.createEl("hr");
    hr1.style.margin = "20px 0";
    const followTitle = container.createEl("h1", { text: "\u6B22\u8FCE\u6CE8" });
    followTitle.style.color = "#4169E1";
    const bilibiliLink = container.createEl("a", {
      text: "B\u7AD9: \u4E00\u624B\u70C2\u724C\u6253\u5F97\u7A00\u70C2",
      href: "https://space.bilibili.com/397511870?spm_id_from=333.1365.0.0"
    });
    bilibiliLink.style.color = "#00A1D6";
    bilibiliLink.style.display = "block";
    bilibiliLink.style.marginBottom = "10px";
    bilibiliLink.style.textDecoration = "underline";
    bilibiliLink.style.textUnderlineOffset = "2px";
    bilibiliLink.style.cursor = "pointer";
    const xiaohongshuLink = container.createEl("a", {
      text: "\u5C0F\u7EA2\u4E66: \u4E00\u624B\u70C2\u724C\u6253\u5F97\u7A00\u70C2",
      href: "https://www.xiaohongshu.com/user/profile/6377b528000000001f01e2ef"
    });
    xiaohongshuLink.style.color = "#FE2C55";
    xiaohongshuLink.style.display = "block";
    xiaohongshuLink.style.marginBottom = "20px";
    xiaohongshuLink.style.textDecoration = "underline";
    xiaohongshuLink.style.textUnderlineOffset = "2px";
    xiaohongshuLink.style.cursor = "pointer";
    const img = container.createEl("img", {
      attr: {
        src: "https://zhangjiangchong.oss-cn-chengdu.aliyuncs.com/2.png",
        alt: "\u5173\u6CE8\u4E8C\u7EF4\u7801"
      }
    });
    img.style.maxWidth = "100%";
    img.style.height = "auto";
    img.style.display = "block";
    img.style.margin = "10px auto";
    const hr2 = container.createEl("hr");
    hr2.style.margin = "20px 0";
    const sponsorTitle = container.createEl("h1", { text: "\u8D5E\u52A9\u652F\u6301" });
    sponsorTitle.style.color = "#4169E1";
    const trialText = container.createEl("p", {
      text: "\u6B64\u63D2\u4EF6\u5141\u8BB8\u767D\u5AD6\uFF0C\u8BD5\u7528\u65F6\u95F4\u7ED3\u675F\u4EE5\u540E\uFF0C\u91CD\u65B0\u5B89\u88C5\u63D2\u4EF6\u5373\u53EF\u7EE7\u7EED\u8BD5\u7528"
    });
    trialText.style.textAlign = "center";
    trialText.style.margin = "10px 0";
    trialText.style.color = "#666666";
    trialText.style.fontSize = "0.9em";
    const sponsorText = container.createEl("p", {
      text: "\u8BF7\u4F5C\u8005\u559D\u4E00\u74F6\u77FF\u6CC9\u6C34"
    });
    sponsorText.style.textAlign = "center";
    sponsorText.style.margin = "10px 0";
    const sponsorImg = container.createEl("img", {
      attr: {
        src: "https://zhangjiangchong.oss-cn-chengdu.aliyuncs.com/20241204142159.png",
        alt: "\u8D5E\u52A9\u4E8C\u7EF4\u7801"
      }
    });
    sponsorImg.style.maxWidth = "100%";
    sponsorImg.style.height = "auto";
    sponsorImg.style.display = "block";
    sponsorImg.style.margin = "10px auto";
  }
  // 添加场景渲染相关的方法
  renderScenes() {
    this.renderSceneTabs();
    this.renderCurrentSceneContent();
    this.updateSceneDropdowns();
  }
  // 渲染场景标签
  renderSceneTabs() {
    if (!this.sceneTabContainer)
      return;
    const addButton = this.sceneTabContainer.querySelector(".scene-tab-button");
    this.sceneTabContainer.empty();
    if (addButton)
      this.sceneTabContainer.appendChild(addButton);
    this.plugin.settings.scenes.forEach((scene) => {
      const tabContainer = this.createSceneTab(scene);
      this.sceneTabContainer.appendChild(tabContainer);
    });
  }
  // 创建单个场景标签
  createSceneTab(scene) {
    const tabContainer = createEl("div", { cls: "scene-tab-container" });
    tabContainer.style.display = "flex";
    tabContainer.style.alignItems = "center";
    tabContainer.style.gap = "4px";
    const editButton = tabContainer.createEl("button", {
      text: "\u270E",
      cls: "scene-tab-edit"
    });
    editButton.style.padding = "4px 8px";
    editButton.style.cursor = "pointer";
    editButton.style.border = "none";
    editButton.style.borderRadius = "4px";
    editButton.style.backgroundColor = "transparent";
    const sceneTab = tabContainer.createEl("button", {
      text: scene.name,
      cls: "scene-tab"
    });
    if (scene.id === this.plugin.settings.currentSceneId) {
      sceneTab.addClass("scene-tab-active");
    }
    if (scene.id !== "default") {
      const deleteButton = this.createSceneDeleteButton(scene);
      tabContainer.appendChild(deleteButton);
    }
    editButton.onclick = (e) => {
      e.stopPropagation();
      this.showSceneNameEditModal(scene);
    };
    sceneTab.onclick = async () => {
      this.plugin.settings.currentSceneId = scene.id;
      await this.plugin.saveSettings();
      this.renderScenes();
    };
    return tabContainer;
  }
  // 创建场景删除按钮
  createSceneDeleteButton(scene) {
    const deleteButton = createEl("button", {
      text: "\xD7",
      cls: "scene-tab-delete"
    });
    deleteButton.onclick = async (e) => {
      e.stopPropagation();
      if (this.plugin.settings.scenes.length <= 1) {
        new import_obsidian.Notice("\u81F3\u5C11\u9700\u8981\u4FDD\u7559\u4E00\u4E2A\u573A\u666F");
        return;
      }
      this.plugin.settings.scenes = this.plugin.settings.scenes.filter((s) => s.id !== scene.id);
      if (this.plugin.settings.currentSceneId === scene.id) {
        this.plugin.settings.currentSceneId = this.plugin.settings.scenes[0].id;
      }
      await this.plugin.saveSettings();
      this.renderScenes();
      new import_obsidian.Notice(`\u5DF2\u5220\u9664\u573A\u666F\uFF1A${scene.name}`);
    };
    return deleteButton;
  }
  // 渲染当前场景内容
  renderCurrentSceneContent() {
    if (!this.sceneContentContainer)
      return;
    const currentScene = this.plugin.settings.scenes.find(
      (scene) => scene.id === this.plugin.settings.currentSceneId
    );
    if (!currentScene)
      return;
    this.sceneContentContainer.empty();
    const sceneActionsContainer = this.sceneContentContainer.createDiv("scene-actions-container");
    sceneActionsContainer.style.marginBottom = "20px";
    const addCalloutButton = this.sceneContentContainer.createEl("button", {
      text: "\u6DFB\u52A0\u65B0\u7684\u7B14\u8BB0\u578B",
      cls: "mod-cta"
    });
    addCalloutButton.style.marginTop = "20px";
    addCalloutButton.style.width = "100%";
    addCalloutButton.style.marginBottom = "20px";
    const copyFromButton = sceneActionsContainer.createEl("button", {
      text: "\u4ECE\u5176\u4ED6\u573A\u666F\u590D\u5236\u914D\u7F6E",
      cls: "mod-cta"
    });
    copyFromButton.style.marginBottom = "20px";
    copyFromButton.onclick = () => {
      const modal = new SceneCopyModal(this.app, this.plugin, currentScene, async (sourceSceneId) => {
        const sourceScene = this.plugin.settings.scenes.find((s) => s.id === sourceSceneId);
        if (sourceScene) {
          currentScene.callouts = JSON.parse(JSON.stringify(sourceScene.callouts));
          await this.plugin.saveSettings();
          this.renderCurrentSceneContent();
        }
      });
      modal.open();
    };
    addCalloutButton.onclick = async () => {
      const newCallout = {
        type: "note",
        color: "#808080",
        name: `\u7B14\u8BB0\u7C7B\u578B${currentScene.callouts.length + 1}`,
        textColor: "#000000",
        backgroundColor: "#ffffff"
      };
      currentScene.callouts.push(newCallout);
      await this.plugin.saveSettings();
      this.renderCurrentSceneContent();
    };
    currentScene.callouts.forEach((callout, index) => {
      if (index > 0) {
        const hr = this.sceneContentContainer.createEl("hr");
        hr.style.margin = "20px 0";
      }
      const calloutContainer = this.sceneContentContainer.createDiv("callout-setting-container");
      calloutContainer.style.backgroundColor = "var(--background-secondary)";
      calloutContainer.style.padding = "15px";
      calloutContainer.style.borderRadius = "8px";
      calloutContainer.style.marginBottom = "20px";
      const headerContainer = calloutContainer.createDiv("callout-header");
      headerContainer.style.display = "flex";
      headerContainer.style.justifyContent = "space-between";
      headerContainer.style.alignItems = "center";
      headerContainer.style.marginBottom = "15px";
      headerContainer.createEl("h3", {
        text: `\u7B14\u8BB0\u7C7B\u578B${index + 1}`,
        cls: "callout-header-title"
      });
      if (index > 0) {
        const deleteButton = headerContainer.createEl("button", {
          text: "\u5220\u9664",
          cls: "mod-warning"
        });
        deleteButton.onclick = async () => {
          currentScene.callouts = currentScene.callouts.filter((_, i) => i !== index);
          await this.plugin.saveSettings();
          this.renderCurrentSceneContent();
        };
      }
      this.addCalloutSettings(calloutContainer, callout);
    });
  }
  // 添加 Callout 设置
  addCalloutSettings(container, callout) {
    new import_obsidian.Setting(container).setName("\u6587\u5B57\u989C\u8272").setDesc("\u8BBE\u7F6E\u6587\u5B57\u7684\u989C\u8272").addText((text) => text.setValue(callout.textColor).setPlaceholder("#000000").then((textComponent) => {
      const colorPicker = createEl("input", {
        type: "color",
        value: callout.textColor
      });
      colorPicker.style.marginRight = "8px";
      textComponent.inputEl.before(colorPicker);
      colorPicker.oninput = (e) => {
        const target = e.target;
        textComponent.setValue(target.value);
        callout.textColor = target.value;
        this.plugin.saveSettings();
      };
      textComponent.inputEl.oninput = (e) => {
        const target = e.target;
        colorPicker.value = target.value;
      };
    }).onChange(async (value) => {
      callout.textColor = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(container).setName("Callout \u989C\u8272").setDesc("\u8BBE\u7F6E Callout \u7684\u989C\u8272").addText((text) => text.setValue(callout.color).setPlaceholder("#000000").then((textComponent) => {
      const colorPicker = createEl("input", {
        type: "color",
        value: callout.color
      });
      colorPicker.style.marginRight = "8px";
      textComponent.inputEl.before(colorPicker);
      colorPicker.oninput = (e) => {
        const target = e.target;
        textComponent.setValue(target.value);
        callout.color = target.value;
        this.plugin.saveSettings();
      };
      textComponent.inputEl.oninput = (e) => {
        const target = e.target;
        colorPicker.value = target.value;
      };
    }).onChange(async (value) => {
      callout.color = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(container).setName("Callout \u540D\u79F0").setDesc("\u8BBE\u7F6E Callout \u7684\u663E\u793A\u540D\u79F0").addText((text) => text.setValue(callout.name).setPlaceholder("\u9ED8\u8BA4").onChange(async (value) => {
      callout.name = value.trim() || "\u9ED8\u8BA4";
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(container).setName("Callout \u7C7B\u578B").setDesc("\u8BBE\u7F6E Callout \u7684\u7C7B\u578B\u6807\u8BC6").addText((text) => text.setValue(callout.type).setPlaceholder("note").onChange(async (value) => {
      callout.type = value.trim() || "note";
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(container).setName("\u80CC\u666F\u989C\u8272").setDesc("\u8BBE\u7F6E Callout \u7684\u80CC\u666F\u989C\u8272").addText((text) => text.setValue(callout.backgroundColor).setPlaceholder("#ffffff").then((textComponent) => {
      const colorPicker = createEl("input", {
        type: "color",
        value: callout.backgroundColor
      });
      colorPicker.style.marginRight = "8px";
      textComponent.inputEl.before(colorPicker);
      colorPicker.oninput = (e) => {
        const target = e.target;
        textComponent.setValue(target.value);
        callout.backgroundColor = target.value;
        this.plugin.saveSettings();
      };
      textComponent.inputEl.oninput = (e) => {
        const target = e.target;
        colorPicker.value = target.value;
      };
    }).onChange(async (value) => {
      callout.backgroundColor = value;
      await this.plugin.saveSettings();
    }));
  }
  // 添加新场景
  async addNewScene() {
    const newScene = {
      id: `scene-${Date.now()}`,
      name: `\u573A\u666F${this.plugin.settings.scenes.length + 1}`,
      // 确保使用正确的中文字符
      callouts: []
    };
    this.plugin.settings.scenes.push(newScene);
    this.plugin.settings.currentSceneId = newScene.id;
    await this.plugin.saveSettings();
    this.renderScenes();
  }
  // 更新场景下拉菜单
  updateSceneDropdowns() {
    if (this.sceneDropdown) {
      this.sceneDropdown.selectEl.empty();
      this.plugin.settings.scenes.forEach((scene) => {
        this.sceneDropdown.addOption(scene.id, scene.name);
      });
      this.sceneDropdown.setValue(this.plugin.settings.currentSceneId);
    }
  }
  showSceneNameEditModal(scene) {
    const modal = new SceneNameModal(this.app, scene.name, async (newName) => {
      scene.name = newName;
      await this.plugin.saveSettings();
      this.renderScenes();
      if (this.sceneDropdown) {
        this.updateSceneDropdowns();
      }
    });
    modal.open();
  }
  register(cleanup) {
    this.cleanupFunctions.push(cleanup);
  }
  // 在类的 hide 方法中清理
  hide() {
    this.cleanupFunctions.forEach((cleanup) => cleanup());
    this.cleanupFunctions = [];
  }
  renderBasicContent(container) {
    const sceneSelectContainer = container.createDiv("scene-select-container");
    sceneSelectContainer.style.marginTop = "24px";
    sceneSelectContainer.style.padding = "12px";
    sceneSelectContainer.style.backgroundColor = "var(--background-secondary)";
    sceneSelectContainer.style.borderRadius = "8px";
    sceneSelectContainer.createEl("h4", {
      text: "\u573A\u666F\u7BA1\u7406",
      cls: "setting-category"
    });
    this.sceneTabContainer = sceneSelectContainer.createDiv("scene-tabs");
    this.sceneTabContainer.style.display = "flex";
    this.sceneTabContainer.style.flexWrap = "wrap";
    this.sceneTabContainer.style.gap = "8px";
    this.sceneTabContainer.style.marginBottom = "16px";
    const addSceneButton = this.sceneTabContainer.createEl("button", {
      text: "+ \u65B0\u573A\u666F",
      cls: "scene-tab-button"
    });
    addSceneButton.addEventListener("click", () => this.addNewScene());
    new import_obsidian.Setting(sceneSelectContainer).setName("\u5F53\u524D\u5DE5\u4F5C\u573A\u666F").setDesc("\u9009\u62E9\u8981\u4F7F\u7528\u7684\u5DE5\u4F5C\u573A\u666F").addDropdown((dropdown) => {
      this.sceneDropdown = dropdown;
      this.plugin.settings.scenes.forEach((scene) => {
        dropdown.addOption(scene.id, scene.name);
      });
      dropdown.setValue(this.plugin.settings.currentSceneId);
      dropdown.onChange(async (value) => {
        this.plugin.settings.currentSceneId = value;
        await this.plugin.saveSettings();
        this.renderScenes();
      });
    });
    const globalIconContainer = container.createDiv("global-icon-settings-container");
    globalIconContainer.style.marginBottom = "24px";
    globalIconContainer.style.padding = "12px";
    globalIconContainer.style.backgroundColor = "var(--background-secondary)";
    globalIconContainer.style.borderRadius = "8px";
    globalIconContainer.createEl("h4", {
      text: "\u5168\u5C40\u56FE\u6807\u663E\u793A",
      cls: "setting-category"
    });
    new import_obsidian.Setting(globalIconContainer).setName("\u663E\u793A\u5168\u5C40\u56FE\u6807").setDesc("\u662F\u5426\u5728\u6240\u6709 Callout \u53F3\u4E0A\u89D2\u663E\u793A\u56FE\u6807").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showGlobalIcons).onChange(async (value) => {
        this.plugin.settings.showGlobalIcons = value;
        await this.plugin.saveSettings();
        if (this.plugin.updateAllOpenNotes) {
          this.plugin.updateAllOpenNotes();
        }
      });
    });
    const tipContainer = globalIconContainer.createDiv("global-icon-tip");
    tipContainer.style.marginTop = "12px";
    tipContainer.style.padding = "8px";
    tipContainer.style.backgroundColor = "var(--background-primary)";
    tipContainer.style.border = "1px solid var(--background-modifier-border)";
    tipContainer.style.borderRadius = "4px";
    tipContainer.style.fontSize = "0.9em";
    tipContainer.style.color = "var(--text-muted)";
    tipContainer.createEl("p", {
      text: '\u5C5E\u6027\u4E2D\u7684\u58F0\u660E\u4F18\u5148\u8BE5\u6309\u94AE\uFF0C\u5F53\u5F00\u542F\u5168\u5C40\u56FE\u6807\uFF0C\u4F60\u5728\u5C5E\u6027\u4E2D\u58F0\u660E\u5173\u95ED\uFF0CCallout\u53F3\u4E0A\u89D2\u7684\u56FE\u6807\u4E5F\u4F1A\u6D88\u5931\uFF0C\u53CD\u4E4B\u4EA6\u7136\u3002\u5C5E\u6027\u58F0\u660E\u5F62\u5982"Callout extra message display\uFF1AYes/No"\u3002'
    }).style.margin = "0";
    this.sceneContentContainer = sceneSelectContainer.createDiv("scene-content");
    this.sceneContentContainer.style.marginTop = "16px";
    this.renderScenes();
  }
  updatePreviewIcon(iconElement) {
    const iconType = this.plugin.settings.iconSettings.type;
    iconElement.empty();
    switch (iconType) {
      case 1:
        iconElement.innerHTML = `<svg viewBox="0 0 24 24" fill="#4A90E2"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/></svg>`;
        break;
      case 2:
        iconElement.innerHTML = `<svg viewBox="0 0 24 24" fill="#2ECC71"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>`;
        break;
      case 3:
        iconElement.innerHTML = `<svg viewBox="0 0 24 24" fill="#FF69B4"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>`;
        break;
      case 4:
        iconElement.innerHTML = `<svg viewBox="0 0 24 24" fill="#FF9800"><circle cx="12" cy="12" r="10"/></svg>`;
        break;
      case 5:
        iconElement.innerHTML = `<svg viewBox="0 0 24 24" fill="#9E9E9E"><rect x="3" y="3" width="18" height="18" rx="2"/></svg>`;
        break;
    }
  }
};
var CalloutSelectionModal = class extends import_obsidian.Modal {
  constructor(app, plugin, editor) {
    super(app);
    this.plugin = plugin;
    this.editor = editor;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("callout-selection-modal");
    contentEl.createEl("h2", { text: "\u9009\u62E9\u7B14\u8BB0\u7C7B\u578B" });
    const calloutList = contentEl.createDiv("callout-list");
    const currentScene = this.plugin.settings.scenes.find(
      (scene) => scene.id === this.plugin.settings.currentSceneId
    );
    if (!currentScene) {
      contentEl.createEl("p", { text: "\u627E\u4E0D\u5230\u573A\u666F\u914D\u7F6E" });
      return;
    }
    currentScene.callouts.forEach((callout, index) => {
      const calloutItem = calloutList.createDiv("callout-list-item");
      const preview = calloutItem.createDiv("callout-preview");
      preview.style.borderLeft = `4px solid ${callout.color}`;
      preview.style.backgroundColor = this.adjustColor(callout.color, 0.1);
      const title = preview.createEl("h3", { text: callout.name });
      title.style.color = callout.color;
      calloutItem.addEventListener("click", () => {
        this.transformToCallout(callout);
        this.close();
      });
      calloutItem.addEventListener("mouseenter", () => {
        calloutItem.addClass("callout-list-item-hover");
      });
      calloutItem.addEventListener("mouseleave", () => {
        calloutItem.removeClass("callout-list-item-hover");
      });
    });
  }
  // 修改 transformToCallout 方法，直接接受 callout 配置
  transformToCallout(callout) {
    const selection = this.editor.getSelection();
    if (!selection) {
      new import_obsidian.Notice("\u8BF7\u5148\u9009\u62E9\u8981\u8F6C\u6362\u7684\u6587\u672C");
      return;
    }
    const calloutId = `callout-${Date.now()}-${Math.random().toString(36).substring(2, 8)}`;
    const formattedText = `> [!${callout.type}] **<font color="${callout.color}">${callout.name}</font>**
> <span style="background:${callout.backgroundColor}" data-callout-id="${calloutId}"><font color="${callout.textColor}">${selection}</font></span>

`;
    const cursor = this.editor.getCursor();
    this.editor.replaceSelection(formattedText);
    this.editor.setCursor({
      line: cursor.line + 3,
      ch: 0
    });
    new import_obsidian.Notice(`\u6587\u672C\u5DF2\u8F6C\u6362\u4E3A ${callout.name} \u683C\u5F0F\uFF01`);
  }
  adjustColor(color, opacity) {
    if (color.startsWith("#")) {
      const r = parseInt(color.slice(1, 3), 16);
      const g = parseInt(color.slice(3, 5), 16);
      const b = parseInt(color.slice(5, 7), 16);
      return `rgba(${r}, ${g}, ${b}, ${opacity})`;
    }
    return color;
  }
};
var SceneNameModal = class extends import_obsidian.Modal {
  constructor(app, currentName, onSubmit) {
    super(app);
    this.onSubmit = onSubmit;
    this.nameInput = createEl("input", {
      type: "text",
      value: currentName
    });
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("scene-name-modal");
    contentEl.createEl("h3", { text: "\u7F16\u8F91\u573A\u666F\u540D\u79F0" });
    this.nameInput.style.width = "100%";
    this.nameInput.style.marginBottom = "20px";
    contentEl.appendChild(this.nameInput);
    const buttonContainer = contentEl.createDiv("scene-name-modal-buttons");
    buttonContainer.style.display = "flex";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.gap = "10px";
    const saveButton = buttonContainer.createEl("button", {
      text: "\u4FDD\u5B58",
      cls: "mod-cta"
    });
    const cancelButton = buttonContainer.createEl("button", {
      text: "\u53D6\u6D88"
    });
    saveButton.addEventListener("click", () => {
      const newName = this.nameInput.value.trim();
      if (newName) {
        this.onSubmit(newName);
        this.close();
      } else {
        new import_obsidian.Notice("\u573A\u666F\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");
      }
    });
    cancelButton.addEventListener("click", () => this.close());
  }
};
var SceneCopyModal = class extends import_obsidian.Modal {
  constructor(app, plugin, targetScene, onSubmit) {
    super(app);
    this.plugin = plugin;
    this.targetScene = targetScene;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("scene-copy-modal");
    contentEl.createEl("h3", { text: "\u4ECE\u5176\u4ED6\u573A\u666F\u590D\u5236\u914D\u7F6E" });
    const sceneList = contentEl.createDiv("scene-copy-list");
    sceneList.style.marginTop = "20px";
    sceneList.style.marginBottom = "20px";
    this.plugin.settings.scenes.forEach((scene) => {
      if (scene.id !== this.targetScene.id) {
        const sceneItem = sceneList.createDiv("scene-copy-item");
        sceneItem.style.padding = "10px";
        sceneItem.style.cursor = "pointer";
        sceneItem.style.borderRadius = "4px";
        sceneItem.style.marginBottom = "8px";
        sceneItem.style.backgroundColor = "var(--background-secondary)";
        sceneItem.createEl("span", { text: scene.name });
        sceneItem.addEventListener("click", () => {
          this.onSubmit(scene.id);
          this.close();
        });
        sceneItem.addEventListener("mouseenter", () => {
          sceneItem.style.backgroundColor = "var(--background-modifier-hover)";
        });
        sceneItem.addEventListener("mouseleave", () => {
          sceneItem.style.backgroundColor = "var(--background-secondary)";
        });
      }
    });
    const cancelButton = contentEl.createEl("button", {
      text: "\u53D6\u6D88",
      cls: "scene-copy-cancel"
    });
    cancelButton.style.display = "block";
    cancelButton.style.marginLeft = "auto";
    cancelButton.addEventListener("click", () => this.close());
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBQbHVnaW4sIFdvcmtzcGFjZUxlYWYsIE1hcmtkb3duVmlldywgTm90aWNlLCBNb2RhbCwgVmlldywgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgRWRpdG9yLCBNZW51LCBNZW51SXRlbSB9IGZyb20gJ29ic2lkaWFuJztcblxuLy8gXHU2MjY5XHU1QzU1IE1lbnUgXHU3QzdCXHU1NzhCXG5kZWNsYXJlIG1vZHVsZSAnb2JzaWRpYW4nIHtcbiAgICBpbnRlcmZhY2UgTWVudSB7XG4gICAgICAgIGFkZFN1Ym1lbnUoKTogTWVudTtcbiAgICAgICAgc2hvd0F0TW91c2VFdmVudChldmVudDogTW91c2VFdmVudCk6IHZvaWQ7XG4gICAgfVxuICAgIGludGVyZmFjZSBNZW51SXRlbSB7XG4gICAgICAgIG9uQ2xpY2soY2FsbGJhY2s6IChldmVudDogTW91c2VFdmVudCkgPT4gdm9pZCk6IHRoaXM7XG4gICAgfVxufVxuXG4vLyBcdTYzRDJcdTRFRjZcdThCQkVcdTdGNkVcbmludGVyZmFjZSBDYWxsb3V0Q29uZmlnIHtcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgY29sb3I6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgdGV4dENvbG9yOiBzdHJpbmc7XG4gICAgYmFja2dyb3VuZENvbG9yOiBzdHJpbmc7XG59XG5cbi8vIFx1OTk5Nlx1NTE0OFx1NEZFRVx1NjUzOVx1OTE0RFx1N0Y2RVx1NjNBNVx1NTNFMyxcdTZERkJcdTUyQTBcdTU3M0FcdTY2NkZcdTc2RjhcdTUxNzNcdTc2ODRcdTVCOUFcdTRFNDlcbmludGVyZmFjZSBTY2VuZUNvbmZpZyB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgY2FsbG91dHM6IENhbGxvdXRDb25maWdbXTtcbn1cblxuaW50ZXJmYWNlIEljb25TZXR0aW5ncyB7XG4gICAgdHlwZTogbnVtYmVyOyAgLy8gXHU1NkZFXHU2ODA3XHU3QzdCXHU1NzhCIDEtNVxuICAgIHNpemU6IG51bWJlcjsgIC8vIFx1NTZGRVx1NjgwN1x1NTkyN1x1NUMwRlx1RkYwQ1x1NTM1NVx1NEY0RHB4XG4gICAgcG9zaXRpb246IHtcbiAgICAgICAgdG9wOiBudW1iZXI7ICAvLyBcdTc2RjhcdTVCRjlcdTk4NzZcdTkwRThcdTRGNERcdTdGNkVcdUZGMENcdTUzNTVcdTRGNERweFxuICAgICAgICByaWdodDogbnVtYmVyOyAgLy8gXHU3NkY4XHU1QkY5XHU1M0YzXHU0RkE3XHU0RjREXHU3RjZFXHVGRjBDXHU1MzU1XHU0RjREcHhcbiAgICB9O1xufVxuXG5pbnRlcmZhY2UgUGx1Z2luU2V0dGluZ3Mge1xuICAgIGN1cnJlbnRTY2VuZUlkOiBzdHJpbmc7XG4gICAgc2NlbmVzOiBBcnJheTx7XG4gICAgICAgIGlkOiBzdHJpbmc7XG4gICAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgICAgY2FsbG91dHM6IEFycmF5PHtcbiAgICAgICAgICAgIGlkOiBzdHJpbmc7XG4gICAgICAgICAgICBuYW1lOiBzdHJpbmc7XG4gICAgICAgICAgICB0eXBlOiBzdHJpbmc7XG4gICAgICAgICAgICBjb2xvcjogc3RyaW5nO1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBzdHJpbmc7XG4gICAgICAgICAgICB0ZXh0Q29sb3I6IHN0cmluZztcbiAgICAgICAgfT47XG4gICAgfT47XG4gICAgaWNvblNldHRpbmdzOiBJY29uU2V0dGluZ3M7XG4gICAgaXNBY3RpdmF0ZWQ6IGJvb2xlYW47XG4gICAgbGljZW5zZUtleTogc3RyaW5nO1xuICAgIF9sYXN0SW5zdGFsbFRpbWU6IG51bWJlcjtcbiAgICBoYXNVc2VkVHJpYWw6IGJvb2xlYW47XG4gICAgdHJpYWxFbmRUaW1lOiBudW1iZXIgfCBudWxsO1xuICAgIHNob3dHbG9iYWxJY29uczogYm9vbGVhbjsgIC8vIFx1NkRGQlx1NTJBMFx1OEZEOVx1NEUwMFx1ODg0Q1xuICAgIHVzZVByaXNtU3R5bGU6IGJvb2xlYW47ICAvLyBcdTZERkJcdTUyQTBcdThGRDlcdTRFMDBcdTg4NENcbiAgICBzaG93Q2FsbG91dEljb246IGJvb2xlYW47XG4gICAgbWVzc2FnZXM6IFJlY29yZDxzdHJpbmcsIE1lc3NhZ2VEYXRhPjsgLy8gXHU2REZCXHU1MkEwXHU4RkQ5XHU0RTJBXHU3RjNBXHU1OTMxXHU3Njg0XHU1QzVFXHU2MDI3XG59XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFBsdWdpblNldHRpbmdzID0ge1xuICAgIGN1cnJlbnRTY2VuZUlkOiAnZGVmYXVsdCcsXG4gICAgc2NlbmVzOiBbe1xuICAgICAgICBpZDogJ2RlZmF1bHQnLFxuICAgICAgICBuYW1lOiAnXHU5RUQ4XHU4QkE0XHU1NzNBXHU2NjZGJyxcbiAgICAgICAgY2FsbG91dHM6IFtdXG4gICAgfV0sXG4gICAgaWNvblNldHRpbmdzOiB7XG4gICAgICAgIHR5cGU6IDEsXG4gICAgICAgIHNpemU6IDI0LFxuICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgICAgdG9wOiA4LFxuICAgICAgICAgICAgcmlnaHQ6IDE2XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGlzQWN0aXZhdGVkOiBmYWxzZSxcbiAgICBsaWNlbnNlS2V5OiAnJyxcbiAgICBfbGFzdEluc3RhbGxUaW1lOiBEYXRlLm5vdygpLFxuICAgIGhhc1VzZWRUcmlhbDogZmFsc2UsXG4gICAgdHJpYWxFbmRUaW1lOiBudWxsLFxuICAgIHNob3dHbG9iYWxJY29uczogdHJ1ZSwgIC8vIFx1NkRGQlx1NTJBMFx1OEZEOVx1NEUwMFx1ODg0Q1x1RkYwQ1x1OUVEOFx1OEJBNFx1NjYzRVx1NzkzQVx1NTZGRVx1NjgwN1xuICAgIHVzZVByaXNtU3R5bGU6IGZhbHNlLCAgLy8gXHU2REZCXHU1MkEwXHU4RkQ5XHU0RTAwXHU4ODRDXG4gICAgc2hvd0NhbGxvdXRJY29uOiB0cnVlLFxuICAgIG1lc3NhZ2VzOiB7fSxcbn07XG5cbi8vIFx1NUI5QVx1NEU0OVx1ODlDNlx1NTZGRVx1N0M3Qlx1NTc4QlxuY29uc3QgQ0FMTF9PVVRfTUVTU0FHRV9WSUVXID0gXCJjYWxsb3V0LW1lc3NhZ2Utdmlld1wiO1xuXG4vLyBcdTZERkJcdTUyQTAgTWVzc2FnZURhdGEgXHU2M0E1XHU1M0UzXHU1QjlBXHU0RTQ5XG5pbnRlcmZhY2UgTWVzc2FnZURhdGEge1xuICAgIG1lc3NhZ2VzOiBBcnJheTx7XG4gICAgICAgIHRleHQ6IHN0cmluZztcbiAgICAgICAgdGltZXN0YW1wOiBzdHJpbmc7XG4gICAgfT47XG59XG5cbi8vIFx1NTcyOFx1NjU4N1x1NEVGNlx1OTg3Nlx1OTBFOFx1NkRGQlx1NTJBMFx1N0M3Qlx1NTc4Qlx1NUI5QVx1NEU0OVxuaW50ZXJmYWNlIERyb3Bkb3duQ29tcG9uZW50IHtcbiAgICBzZWxlY3RFbDogSFRNTFNlbGVjdEVsZW1lbnQ7XG4gICAgc2V0VmFsdWUodmFsdWU6IHN0cmluZyk6IHRoaXM7XG4gICAgZ2V0VmFsdWUoKTogc3RyaW5nO1xuICAgIGFkZE9wdGlvbih2YWx1ZTogc3RyaW5nLCBkaXNwbGF5OiBzdHJpbmcpOiB0aGlzO1xuICAgIG9uQ2hhbmdlKGNhbGxiYWNrOiAodmFsdWU6IHN0cmluZykgPT4gYW55KTogdGhpcztcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FsbG91dEV4dHJhTWVzc2FnZVBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gICAgc2V0dGluZ3M6IFBsdWdpblNldHRpbmdzO1xuICAgIHByaXZhdGUgbWVzc2FnZUljb25PYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlcjtcbiAgICBtZXNzYWdlVmlldzogQ2FsbG91dE1lc3NhZ2VWaWV3O1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU1MjFEXHU1OUNCXHU1MzE2XHU2ODM3XHU1RjBGXG4gICAgICAgIHRoaXMudG9nZ2xlUHJpc21TdHlsZSh0aGlzLnNldHRpbmdzLnVzZVByaXNtU3R5bGUpO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1OEJCRVx1N0Y2RVx1NjgwN1x1N0I3RVx1OTg3NVx1RkYwOFx1NTNFQVx1OTcwMFx1ODk4MVx1NEUwMFx1NkIyMVx1RkYwOVxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IENhbGxvdXRNZXNzYWdlU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1Njc0M1x1OTY1MFx1NzJCNlx1NjAwMVxuICAgICAgICBjb25zdCBoYXNQZXJtaXNzaW9uID0gYXdhaXQgdGhpcy5jaGVja0FjdGl2YXRpb24oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTNFQVx1NjcwOVx1NTcyOFx1NjcwOVx1Njc0M1x1OTY1MFx1NjVGNlx1NjI0RFx1NTJBMFx1OEY3RFx1NTI5Rlx1ODBGRFxuICAgICAgICBpZiAoaGFzUGVybWlzc2lvbikge1xuICAgICAgICAgICAgLy8gXHU1MjFEXHU1OUNCXHU1MzE2XHU4OUMyXHU1QkRGXHU1NjY4XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VJY29uT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVET01DaGFuZ2VzKG11dGF0aW9ucyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gXHU2Q0U4XHU1MThDXHU4OUM2XHU1NkZFXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgICAgICAgICAgICBDQUxMX09VVF9NRVNTQUdFX1ZJRVcsXG4gICAgICAgICAgICAgICAgKGxlYWYpID0+IG5ldyBDYWxsb3V0TWVzc2FnZVZpZXcobGVhZiwgdGhpcylcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIFx1NzZEMVx1NTQyQ1x1NURFNVx1NEY1Q1x1NTMzQVx1NTNEOFx1NTMxNlxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignYWN0aXZlLWxlYWYtY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0T2JzZXJ2aW5nKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIFx1NzZEMVx1NTQyQ1x1NjU4N1x1NEVGNlx1NjI1M1x1NUYwMFxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZS1vcGVuJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0T2JzZXJ2aW5nKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTQ3RFx1NEVFNFxuICAgICAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgICAgICBpZDogJ3RyYW5zZm9ybS10by1jYWxsb3V0JyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnXHU1QzA2XHU5MDA5XHU0RTJEXHU2NTg3XHU2NzJDXHU4RjZDXHU2MzYyXHU0RTNBIENhbGxvdXQnLFxuICAgICAgICAgICAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1Ub0NhbGxvdXQoZWRpdG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAvLyBcdTY1MzlcdThGREJcdTUyMzdcdTY1QjBcdTU0N0RcdTRFRTRcbiAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICBpZDogJ3JlZnJlc2gtY2FsbG91dC1tZXNzYWdlcycsXG4gICAgbmFtZTogJ1x1NTIzN1x1NjVCMCBDYWxsb3V0IFx1NTkwN1x1NkNFOCcsXG4gICAgY2hlY2tDYWxsYmFjazogKGNoZWNraW5nOiBib29sZWFuKSA9PiB7XG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NkQzQlx1NTJBOFx1NzY4NCBNYXJrZG93biBcdTg5QzZcdTU2RkVcbiAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICAgIGlmICghYWN0aXZlVmlldykgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgIGlmICghY2hlY2tpbmcpIHtcbiAgICAgICAgICAgIC8vIFx1NUI5RVx1OTY0NVx1NjI2N1x1ODg0Q1x1NTQ3RFx1NEVFNFxuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAvLyBcdTUyMzdcdTY1QjBcdTVGNTNcdTUyNERcdTdCMTRcdThCQjBcdTRFMkRcdTc2ODRcdTYyNDBcdTY3MDkgQ2FsbG91dFxuICAgICAgICAgICAgICAgIGNvbnN0IGNhbGxvdXRzID0gYWN0aXZlVmlldy5jb250ZW50RWwucXVlcnlTZWxlY3RvckFsbCgnLmNhbGxvdXQnKTtcbiAgICAgICAgICAgICAgICBjYWxsb3V0cy5mb3JFYWNoKGNhbGxvdXQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbG91dCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNhbGxvdXRNZXNzYWdlQ291bnQoY2FsbG91dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vIFx1NTIzN1x1NjVCMFx1NkQ4OFx1NjA2Rlx1ODlDNlx1NTZGRVxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShDQUxMX09VVF9NRVNTQUdFX1ZJRVcpWzBdPy52aWV3IGFzIENhbGxvdXRNZXNzYWdlVmlldztcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZVZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZVZpZXcucmVmcmVzaFZpZXcoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdDYWxsb3V0IFx1NTkwN1x1NkNFOFx1NURGMlx1NTIzN1x1NjVCMCcpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTUyMzdcdTY1QjBcdTU5MzFcdThEMjU6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NTIzN1x1NjVCMFx1NTkzMVx1OEQyNVx1RkYwQ1x1OEJGN1x1NjdFNVx1NzcwQlx1NjNBN1x1NTIzNlx1NTNGMFx1NEU4Nlx1ODlFM1x1OEJFNlx1NjBDNScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufSk7XG5cbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTNGM1x1OTUyRVx1ODNEQ1x1NTM1NVxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlckNvbnRleHRNZW51KCk7XG5cbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NEZBN1x1OEZCOVx1NjgwRlx1NTZGRVx1NjgwN1xuICAgICAgICAgICAgdGhpcy5hZGRSaWJib25JY29uKFxuICAgICAgICAgICAgICAgICdtZXNzYWdlLWNpcmNsZScsXG4gICAgICAgICAgICAgICAgJ0NhbGxvdXQgXHU1OTA3XHU2Q0U4JyxcbiAgICAgICAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFx1OTk5Nlx1NTE0OFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NURGMlx1N0VDRlx1NUI1OFx1NTcyOFx1NzZGOFx1NUU5NFx1NzY4NFx1ODlDNlx1NTZGRVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0xlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoQ0FMTF9PVVRfTUVTU0FHRV9WSUVXKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ0xlYXZlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTVERjJcdTVCNThcdTU3MjhcdUZGMENcdTc2RjRcdTYzQTVcdTZGQzBcdTZEM0JcdTdCMkNcdTRFMDBcdTRFMkFcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGV4aXN0aW5nTGVhdmVzWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NEUwRFx1NUI1OFx1NTcyOFx1RkYwQ1x1NTIxQlx1NUVGQVx1NjVCMFx1NzY4NFxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IENBTExfT1VUX01FU1NBR0VfVklFVyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcblxuXG5cbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjYzRVx1NzkzQVx1NjI0MFx1NjcwOSBDYWxsb3V0IFx1N0IxNFx1OEJCMFx1NzY4NFx1NEZBN1x1OEZCOVx1NjgwRlx1NjMwOVx1OTRBRVxuICAgICAgICAgICAgdGhpcy5hZGRSaWJib25JY29uKFxuICAgICAgICAgICAgICAgICdsaXN0JyxcbiAgICAgICAgICAgICAgICAnXHU2NjNFXHU3OTNBXHU2MjQwXHU2NzA5IENhbGxvdXQgXHU3QjE0XHU4QkIwJyxcbiAgICAgICAgICAgICAgICBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nTGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShDQUxMX09VVF9NRVNTQUdFX1ZJRVcpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbGVhZjogV29ya3NwYWNlTGVhZjtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ0xlYXZlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWFmID0gZXhpc3RpbmdMZWF2ZXNbMF07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobGVhZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogQ0FMTF9PVVRfTUVTU0FHRV9WSUVXLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChsZWFmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VWaWV3ID0gbGVhZi52aWV3IGFzIENhbGxvdXRNZXNzYWdlVmlldztcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VWaWV3LnN3aXRjaFRvQWxsTW9kZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgLy8gXHU1RjAwXHU1OUNCXHU4OUMyXHU1QkRGIERPTSBcdTUzRDhcdTUzMTZcbiAgICAgICAgICAgIHRoaXMuc3RhcnRPYnNlcnZpbmcoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1NzlGQlx1OTY2NFx1OEZEOVx1NEUwMFx1ODg0Q1x1RkYwQ1x1NTZFMFx1NEUzQVx1NURGMlx1N0VDRlx1NkRGQlx1NTJBMFx1OEZDN1x1OEJCRVx1N0Y2RVx1NjgwN1x1N0I3RVx1OTg3NVx1NEU4NlxuICAgICAgICAvLyB0aGlzLmFkZFNldHRpbmdUYWIobmV3IFNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NzZEMVx1NTQyQ1x1OEJCRVx1N0Y2RVx1NTNEOFx1NTMxNlxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2Nzcy1jaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDYWxsb3V0SWNvblZpc2liaWxpdHkoKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTUyMURcdTU5Q0JcdTUzMTZcdTY1RjZcdTY2RjRcdTY1QjBcdTU2RkVcdTY4MDdcdTY2M0VcdTc5M0FcdTcyQjZcdTYwMDFcbiAgICAgICAgdGhpcy51cGRhdGVDYWxsb3V0SWNvblZpc2liaWxpdHkoKTtcbiAgICB9XG5cbiAgICBhc3luYyBvbnVubG9hZCgpIHtcbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU2MjQwXHU2NzA5XHU3NkY4XHU1MTczXHU4OUM2XHU1NkZFXG4gICAgICAgIGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoQ0FMTF9PVVRfTUVTU0FHRV9WSUVXKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1OTAxMFx1NEUyQVx1NTE3M1x1OTVFRFx1ODlDNlx1NTZGRVxuICAgICAgICBmb3IgKGNvbnN0IGxlYWYgb2YgbGVhdmVzKSB7XG4gICAgICAgICAgICBhd2FpdCBsZWFmLmRldGFjaCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgXG5cbiAgICAvLyBcdTU5MDRcdTc0MDYgRE9NIFx1NTNEOFx1NTMxNlx1NzY4NFx1NjVCMFx1NjVCOVx1NkNENVxuICAgIHByaXZhdGUgaGFuZGxlRE9NQ2hhbmdlcyhtdXRhdGlvbnM6IE11dGF0aW9uUmVjb3JkW10pIHtcbiAgICAgICAgY29uc3QgbWFya2Rvd25WaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICAgICAgaWYgKCFtYXJrZG93blZpZXcgfHwgIW1hcmtkb3duVmlldy5maWxlKSByZXR1cm47XG5cbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU2NTg3XHU0RUY2XHU3Njg0IGZyb250bWF0dGVyXG4gICAgICAgIGNvbnN0IGZpbGUgPSBtYXJrZG93blZpZXcuZmlsZTtcbiAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBjYWNoZT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTUxNjhcdTVDNDBcdThCQkVcdTdGNkVcdTU0OEMgZnJvbnRtYXR0ZXIgXHU4QkJFXHU3RjZFXG4gICAgICAgIGNvbnN0IGdsb2JhbEljb25zRW5hYmxlZCA9IHRoaXMuc2V0dGluZ3Muc2hvd0dsb2JhbEljb25zO1xuICAgICAgICBjb25zdCBmcm9udG1hdHRlckRpc3BsYXkgPSBmcm9udG1hdHRlcj8uWydDYWxsb3V0IGV4dHJhIG1lc3NhZ2UgZGlzcGxheSddO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2ODM5XHU2MzZFXHU2NzYxXHU0RUY2XHU1MUIzXHU1QjlBXHU2NjJGXHU1NDI2XHU2NjNFXHU3OTNBXHU1NkZFXHU2ODA3XG4gICAgICAgIGxldCBzaG91bGRTaG93SWNvbnMgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIGlmICghZ2xvYmFsSWNvbnNFbmFibGVkKSB7XG4gICAgICAgICAgICAvLyBcdTUxNjhcdTVDNDBcdTU2RkVcdTY4MDdcdTUxNzNcdTk1RURcdTY1RjZcdUZGMENcdTUzRUFcdTY3MDlcdTU3MjggZnJvbnRtYXR0ZXIgXHU2NjBFXHU3ODZFXHU4QkJFXHU3RjZFIFllcyBcdTY1RjZcdTYyNERcdTY2M0VcdTc5M0FcbiAgICAgICAgICAgIHNob3VsZFNob3dJY29ucyA9IGZyb250bWF0dGVyRGlzcGxheSA9PT0gJ1llcyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBcdTUxNjhcdTVDNDBcdTU2RkVcdTY4MDdcdTVGMDBcdTU0MkZcdTY1RjZcdUZGMENcdTk2NjRcdTk3NUUgZnJvbnRtYXR0ZXIgXHU2NjBFXHU3ODZFXHU4QkJFXHU3RjZFIE5vXHVGRjBDXHU1NDI2XHU1MjE5XHU5MEZEXHU2NjNFXHU3OTNBXG4gICAgICAgICAgICBzaG91bGRTaG93SWNvbnMgPSBmcm9udG1hdHRlckRpc3BsYXkgIT09ICdObyc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTRFMERcdTVFOTRcdThCRTVcdTY2M0VcdTc5M0FcdTU2RkVcdTY4MDdcdUZGMENcdTUxNDhcdTc5RkJcdTk2NjRcdTYyNDBcdTY3MDlcdTczQjBcdTY3MDlcdTc2ODRcdTU2RkVcdTY4MDdcbiAgICAgICAgaWYgKCFzaG91bGRTaG93SWNvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSWNvbnMgPSBtYXJrZG93blZpZXcuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYWxsb3V0LW1lc3NhZ2UtaWNvbi1jb250YWluZXInKTtcbiAgICAgICAgICAgIGV4aXN0aW5nSWNvbnMuZm9yRWFjaChpY29uID0+IGljb24ucmVtb3ZlKCkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHU1OTA0XHU3NDA2IERPTSBcdTUzRDhcdTUzMTZcdUZGMENcdTZERkJcdTUyQTBcdTU2RkVcdTY4MDdcbiAgICAgICAgZm9yIChjb25zdCBtdXRhdGlvbiBvZiBtdXRhdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGFkZGVkTm9kZXMgPSBBcnJheS5mcm9tKG11dGF0aW9uLmFkZGVkTm9kZXMpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIGFkZGVkTm9kZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhbGxvdXRzID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCcuY2FsbG91dCcpO1xuICAgICAgICAgICAgICAgICAgICBjYWxsb3V0cy5mb3JFYWNoKGNhbGxvdXQgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNhbGxvdXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCAmJiAhY2FsbG91dC5xdWVyeVNlbGVjdG9yKCcuY2FsbG91dC1tZXNzYWdlLWljb24nKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkTWVzc2FnZUljb25Ub0NhbGxvdXQoY2FsbG91dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1NEZFRVx1NjUzOSBhZGRNZXNzYWdlSWNvblRvQ2FsbG91dCBcdTY1QjlcdTZDRDVcbiAgICBwcml2YXRlIGFkZE1lc3NhZ2VJY29uVG9DYWxsb3V0KGNhbGxvdXQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NURGMlx1N0VDRlx1NUI1OFx1NTcyOFx1NTZGRVx1NjgwN1xuICAgICAgICBjb25zdCBleGlzdGluZ0NvbnRhaW5lciA9IGNhbGxvdXQucXVlcnlTZWxlY3RvcignLmNhbGxvdXQtbWVzc2FnZS1pY29uLWNvbnRhaW5lcicpO1xuICAgICAgICBpZiAoZXhpc3RpbmdDb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxvdXRJZCA9IHRoaXMuZ2V0Q2FsbG91dElkKGNhbGxvdXQpO1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZURhdGEgPSB0aGlzLnNldHRpbmdzLm1lc3NhZ2VzW2NhbGxvdXRJZF07XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlQ291bnQgPSBtZXNzYWdlRGF0YT8ubWVzc2FnZXM/Lmxlbmd0aCB8fCAwO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBjb3VudFNwYW4gPSBleGlzdGluZ0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuY2FsbG91dC1tZXNzYWdlLWNvdW50Jyk7XG4gICAgICAgICAgICBpZiAoY291bnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgY291bnRTcGFuLnRleHRDb250ZW50ID0gbWVzc2FnZUNvdW50LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpY29uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGljb25Db250YWluZXIuY2xhc3NOYW1lID0gJ2NhbGxvdXQtbWVzc2FnZS1pY29uLWNvbnRhaW5lcic7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGljb24uY2xhc3NOYW1lID0gJ2NhbGxvdXQtbWVzc2FnZS1pY29uJztcbiAgICAgICAgaWNvbi5pbm5lckhUTUwgPSB0aGlzLmdldEljb25TdmcodGhpcy5zZXR0aW5ncy5pY29uU2V0dGluZ3MudHlwZSk7XG4gICAgICAgIGljb24udGl0bGUgPSAnXHU3MEI5XHU1MUZCXHU2REZCXHU1MkEwXHU2MjE2XHU3RjE2XHU4RjkxXHU2RDg4XHU2MDZGJztcbiAgICAgICAgXG4gICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NjgzN1x1NUYwRlxuICAgICAgICBjYWxsb3V0LnN0eWxlLnNldFByb3BlcnR5KCctLWljb24tc2l6ZScsIGAke3RoaXMuc2V0dGluZ3MuaWNvblNldHRpbmdzLnNpemV9cHhgKTtcbiAgICAgICAgY2FsbG91dC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1pY29uLXRvcC1wb3NpdGlvbicsIGAke3RoaXMuc2V0dGluZ3MuaWNvblNldHRpbmdzLnBvc2l0aW9uLnRvcH1weGApO1xuICAgICAgICBjYWxsb3V0LnN0eWxlLnNldFByb3BlcnR5KCctLWljb24tcmlnaHQtcG9zaXRpb24nLCBgJHt0aGlzLnNldHRpbmdzLmljb25TZXR0aW5ncy5wb3NpdGlvbi5yaWdodH1weGApO1xuICAgICAgICBcbiAgICAgICAgaWNvbi5zdHlsZS53aWR0aCA9IGAke3RoaXMuc2V0dGluZ3MuaWNvblNldHRpbmdzLnNpemV9cHhgO1xuICAgICAgICBpY29uLnN0eWxlLmhlaWdodCA9IGAke3RoaXMuc2V0dGluZ3MuaWNvblNldHRpbmdzLnNpemV9cHhgO1xuICAgICAgICBpY29uQ29udGFpbmVyLnN0eWxlLnRvcCA9IGAke3RoaXMuc2V0dGluZ3MuaWNvblNldHRpbmdzLnBvc2l0aW9uLnRvcH1weGA7XG4gICAgICAgIGljb25Db250YWluZXIuc3R5bGUucmlnaHQgPSBgJHt0aGlzLnNldHRpbmdzLmljb25TZXR0aW5ncy5wb3NpdGlvbi5yaWdodH1weGA7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTU2RkVcdTY4MDdcdTc2ODRcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjYgLSBcdTY2M0VcdTc5M0FcdThGOTNcdTUxNjVcdTY4NDZcbiAgICAgICAgaWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmNoZWNrQWN0aXZhdGlvbigpKSkgcmV0dXJuO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBjYWxsb3V0SWQgPSB0aGlzLmdldENhbGxvdXRJZChjYWxsb3V0KTtcbiAgICAgICAgICAgIHRoaXMuc2hvd01lc3NhZ2VJbnB1dChjYWxsb3V0KTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpY29uQ29udGFpbmVyLmFwcGVuZENoaWxkKGljb24pO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2RDg4XHU2MDZGXHU2NTcwXHU5MUNGXHU2NjNFXHU3OTNBXG4gICAgICAgIGNvbnN0IGNhbGxvdXRJZCA9IHRoaXMuZ2V0Q2FsbG91dElkKGNhbGxvdXQpO1xuICAgICAgICBjb25zdCBtZXNzYWdlRGF0YSA9IHRoaXMuc2V0dGluZ3MubWVzc2FnZXNbY2FsbG91dElkXTtcbiAgICAgICAgY29uc3QgbWVzc2FnZUNvdW50ID0gbWVzc2FnZURhdGE/Lm1lc3NhZ2VzPy5sZW5ndGggfHwgMDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNvdW50U3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgY291bnRTcGFuLmNsYXNzTmFtZSA9ICdjYWxsb3V0LW1lc3NhZ2UtY291bnQnO1xuICAgICAgICBjb3VudFNwYW4udGV4dENvbnRlbnQgPSBtZXNzYWdlQ291bnQudG9TdHJpbmcoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NjU3MFx1NUI1N1x1NzY4NFx1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNiAtIFx1NjYzRVx1NzkzQVx1NEZBN1x1OEZCOVx1NjgwRlxuICAgICAgICBjb3VudFNwYW4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5jaGVja0FjdGl2YXRpb24oKSkpIHJldHVybjtcblxuICAgICAgICAgICAgY29uc3QgY2FsbG91dElkID0gdGhpcy5nZXRDYWxsb3V0SWQoY2FsbG91dCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NjIxNlx1NTIxQlx1NUVGQVx1NkQ4OFx1NjA2Rlx1ODlDNlx1NTZGRVxuICAgICAgICAgICAgbGV0IG1lc3NhZ2VWaWV3OiBDYWxsb3V0TWVzc2FnZVZpZXcgfCBudWxsID0gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nTGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShDQUxMX09VVF9NRVNTQUdFX1ZJRVcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdMZWF2ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxlYWYgPSBleGlzdGluZ0xlYXZlc1swXTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlVmlldyA9IGxlYWYudmlldyBhcyBDYWxsb3V0TWVzc2FnZVZpZXc7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VWaWV3LnN3aXRjaFRvU2luZ2xlTW9kZShjYWxsb3V0SWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpO1xuICAgICAgICAgICAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogQ0FMTF9PVVRfTUVTU0FHRV9WSUVXLFxuICAgICAgICAgICAgICAgICAgICBhY3RpdmU6IHRydWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG4gICAgICAgICAgICAgICAgbWVzc2FnZVZpZXcgPSBsZWFmLnZpZXcgYXMgQ2FsbG91dE1lc3NhZ2VWaWV3O1xuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlVmlldykge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlVmlldy5zd2l0Y2hUb1NpbmdsZU1vZGUoY2FsbG91dElkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaWNvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChjb3VudFNwYW4pO1xuICAgICAgICBjYWxsb3V0LmFwcGVuZENoaWxkKGljb25Db250YWluZXIpO1xuICAgICAgICBjYWxsb3V0LnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcbiAgICB9XG5cbiAgICAvLyBcdTRGRUVcdTY1MzkgdXBkYXRlQ2FsbG91dE1lc3NhZ2VDb3VudCBcdTY1QjlcdTZDRDVcbiAgICBwdWJsaWMgdXBkYXRlQ2FsbG91dE1lc3NhZ2VDb3VudChjYWxsb3V0OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCBjYWxsb3V0SWQgPSB0aGlzLmdldENhbGxvdXRJZChjYWxsb3V0KTtcbiAgICAgICAgY29uc3QgbWVzc2FnZURhdGEgPSB0aGlzLnNldHRpbmdzLm1lc3NhZ2VzW2NhbGxvdXRJZF07XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VDb3VudCA9IG1lc3NhZ2VEYXRhPy5tZXNzYWdlcz8ubGVuZ3RoIHx8IDA7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjb250YWluZXIgPSBjYWxsb3V0LnF1ZXJ5U2VsZWN0b3IoJy5jYWxsb3V0LW1lc3NhZ2UtaWNvbi1jb250YWluZXInKTtcbiAgICAgICAgaWYgKGNvbnRhaW5lciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICBjb25zdCBjb3VudFNwYW4gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmNhbGxvdXQtbWVzc2FnZS1jb3VudCcpO1xuICAgICAgICAgICAgaWYgKGNvdW50U3Bhbikge1xuICAgICAgICAgICAgICAgIGNvdW50U3Bhbi50ZXh0Q29udGVudCA9IG1lc3NhZ2VDb3VudC50b1N0cmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHU1RjM5XHU2ODQ2XHU2NjNFXHU3OTNBXHU4RjkzXHU1MTY1XHU1QkI5XG4gICAgcHJpdmF0ZSBhc3luYyBzaG93TWVzc2FnZUlucHV0KGNhbGxvdXQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGlmICghKGF3YWl0IHRoaXMuY2hlY2tBY3RpdmF0aW9uKCkpKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGNhbGxvdXRJZCA9IHRoaXMuZ2V0Q2FsbG91dElkKGNhbGxvdXQpO1xuICAgICAgICBjb25zdCBzYXZlZE1lc3NhZ2UgPSB0aGlzLnNldHRpbmdzLm1lc3NhZ2VzW2NhbGxvdXRJZF0gfHwgJyc7IFxuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBNZXNzYWdlSW5wdXRNb2RhbCh0aGlzLmFwcCwgdGhpcywgY2FsbG91dElkKTtcbiAgICAgICAgbW9kYWwub3BlbigpO1xuICAgIH1cblxuICAgIC8vIFx1ODNCN1x1NTNENiBjYWxsb3V0IFx1NzY4NCBJRFx1RkYwQ1x1NzUyOFx1NEU4RVx1NEZERFx1NUI1OFx1NkQ4OFx1NjA2RlxuICAgIHByaXZhdGUgZ2V0Q2FsbG91dElkKGNhbGxvdXQ6IEhUTUxFbGVtZW50KTogc3RyaW5nIHtcbiAgICAgICAgY29uc3QgZm9vdG5vdGUgPSBjYWxsb3V0LnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKT8uZ2V0QXR0cmlidXRlKCdkYXRhLWNhbGxvdXQtaWQnKTtcbiAgICAgICAgaWYgKGZvb3Rub3RlKSB7XG4gICAgICAgICAgICByZXR1cm4gZm9vdG5vdGU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IHJhbmRvbVN0ciA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA4KTtcbiAgICAgICAgY29uc3QgbmV3SWQgPSBgY2FsbG91dC0ke3RpbWVzdGFtcH0tJHtyYW5kb21TdHJ9YDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHNwYW4gPSBjYWxsb3V0LnF1ZXJ5U2VsZWN0b3IoJ3NwYW4nKTtcbiAgICAgICAgaWYgKHNwYW4pIHtcbiAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKCdkYXRhLWNhbGxvdXQtaWQnLCBuZXdJZCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld0lkO1xuICAgIH1cblxuICAgIC8vIFx1NTJBMFx1OEY3RFx1NjNEMlx1NEVGNlx1OEJCRVxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcbiAgICAgICAgY29uc3Qgc2F2ZWREYXRhID0gYXdhaXQgdGhpcy5sb2FkRGF0YSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5XHU0RkREXHU1QjU4XHU3Njg0XHU2NTcwXHU2MzZFXHVGRjBDXHU4QkY0XHVGRkZEXHVGRkZEXHVGRkZEXHU2NjJGXHU1MTY4XHU2NUIwXHU1Qjg5XHU4OEM1XHU2MjE2XHU1QjhDXHU1MTY4XHU1Mzc4XHU4RjdEXHU1NDBFXHU5MUNEXHU4OEM1XG4gICAgICAgIGlmICghc2F2ZWREYXRhKSB7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUyk7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLl9sYXN0SW5zdGFsbFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5oYXNVc2VkVHJpYWwgPSBmYWxzZTsgIC8vIFx1OTFDRFx1N0Y2RVx1OEJENVx1NzUyOFx1NzJCNlx1NjAwMVxuICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy50cmlhbEVuZFRpbWUgPSBudWxsO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2OEMwXHU2RDRCXHU1MjMwXHU2M0QyXHU5OTk2XHU2QjIxXHU1Qjg5XHU4OEM1XHU2MjE2XHU5MUNEXHU2NUIwXHVGRkZEXHVGRkZEXHVGRkZEXHVGRkZEXHVGRkZEXHVGRkZEXHVGRkZEXHU4OEM1XHVGRjBDXHU1REYyXHU1NDJGXHU3NTI4XHU4QkQ1XHVGRkZEXHVGRkZEXHVGRkZEXHVGRkZEXHU1MjlGXHVGRkZEXHVGRkZEJyk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2NzA5XHU0RkREXHU1QjU4XHU3Njg0XHU2NTcwXHU2MzZFXHVGRjBDXHU3NkY0XHU2M0E1XHU0RjdGXHU3NTI4XG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBzYXZlZERhdGEpO1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xuICAgIH1cblxuICAgIC8vIFx1NUI1OFx1NjNEMlx1NEVGNlx1OEJCRVx1N0Y2RVxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcbiAgICB9XG5cbiAgICAvLyBcdTZERkJcdTUyQTBcdTRGQTdcdThGQjlcdTY4MEZcdTU2RkVcdTY4MDdcbiAgICBhZGRTaWRlYmFySWNvbigpIHtcbiAgICAgICAgY29uc3Qgc2lkZWJhckljb25FbCA9IHRoaXMuYWRkUmliYm9uSWNvbihcbiAgICAgICAgICAgICdtZXNzYWdlLWNpcmNsZScsICAvLyBcdTRGN0ZcdTc1MjhcdTRFMDBcdTgxRjRcdTY4MDdcbiAgICAgICAgICAgICdPcGVuIENhbGxvdXQgRXh0cmEgTWVzc2FnZScsXG4gICAgICAgICAgICAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZVZpZXcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcbiAgICAgICAgc2lkZWJhckljb25FbC5hZGRDbGFzcygnY2FsbG91dC1zaWRlYmFyLWljb24nKTtcbiAgICB9XG5cbiAgICAvLyBcdTZGQzBcdTZEM0JcdTgxRUFcdTVCOUFcdTRFNDlcdTg5QzZcdTU2RkVcbiAgICBhc3luYyBhY3RpdmF0ZVZpZXcoKSB7XG4gICAgICAgIC8vIFx1NTE0OFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NURGMlx1N0VDRlx1NUI1OFx1NTcyOFx1ODlDNlx1NTZGRVxuICAgICAgICBjb25zdCBleGlzdGluZ0xlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoQ0FMTF9PVVRfTUVTU0FHRV9WSUVXKTtcbiAgICAgICAgbGV0IGxlYWY6IFdvcmtzcGFjZUxlYWY7XG5cbiAgICAgICAgaWYgKGV4aXN0aW5nTGVhdmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NURGMlx1NUI1OFx1NTcyOFx1ODlDNlx1NTZGRVx1RkYwQ1x1NzZGNFx1NjNBNVx1NEY3Rlx1NzUyOFx1N0IyQ1x1NEUwMFx1NEUyQVxuICAgICAgICAgICAgbGVhZiA9IGV4aXN0aW5nTGVhdmVzWzBdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NEUwRFx1NUI1OFx1NTcyOFx1RkYwQ1x1NTcyOFx1NTNGM1x1NEZBN1x1NTIxQlx1NUVGQVx1NjVCMFx1ODlDNlx1NTZGRVxuICAgICAgICAgICAgLy8gXHU3ODZFXHU0RkREXHU1M0YzXHU0RkE3XHU4RkI5XHU2ODBGXHU1QjU4XHU1NzI4XG4gICAgICAgICAgICBpZiAoIXRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZih0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU0RkE3XHU4RkI5XHU2ODBGXG4gICAgICAgICAgICBjb25zdCByaWdodFNwbGl0ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChyaWdodFNwbGl0KSB7XG4gICAgICAgICAgICAgICAgbGVhZiA9IHJpZ2h0U3BsaXQ7XG4gICAgICAgICAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU4OUM2XHU1NkZFXHU3QzdCXHU1NzhCXG4gICAgICAgICAgICAgICAgYXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBDQUxMX09VVF9NRVNTQUdFX1ZJRVcsXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2NUUwXHU2Q0Q1XHU1MjFCXHU1RUZBXHU4OUM2XHU1NkZFJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU4OUM2XHU1NkZFXHU2ODA3XHU5ODk4XHU1NDhDXHU1NkZFXHU2ODA3XG4gICAgICAgIGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBDYWxsb3V0TWVzc2FnZVZpZXcpIHtcbiAgICAgICAgICAgIGxlYWYudmlldy5nZXRJY29uID0gKCkgPT4gJ21lc3NhZ2UtY2lyY2xlJztcbiAgICAgICAgICAgIGxlYWYudmlldy5nZXREaXNwbGF5VGV4dCA9ICgpID0+ICdDYWxsb3V0IFx1NTkwN1x1NkNFOCc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTZGQzBcdTZEM0JcdTVFNzZcdTY2M0VcdTc5M0FcdTg5QzZcdTU2RkVcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcblxuICAgICAgICAvLyBcdTdBQ0JcdTUzNzNcdTY2M0VcdTc5M0FcdTVGNTNcdTUyNERcdTY1ODdcdTY4NjNcdTc2ODQgQ2FsbG91dCBcdTZEODhcdTYwNkZcbiAgICAgICAgICAgICAgICBpZiAobGVhZi52aWV3IGluc3RhbmNlb2YgQ2FsbG91dE1lc3NhZ2VWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgIGxlYWYudmlldy5kaXNwbGF5TWVzc2FnZXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAvLyBcdTZDRThcdTUxOEMgVHJhbnNmb3JtIHRvIENhbGxvdXQgXHU1NDdEXHU0RUU0XG4gICAgYXN5bmMgdHJhbnNmb3JtVG9DYWxsb3V0KGVkaXRvcjogRWRpdG9yLCBjYWxsb3V0SW5kZXg6IG51bWJlciA9IDApIHtcbiAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5jaGVja0FjdGl2YXRpb24oKSkpIHJldHVybjtcbiAgICAgICAgY29uc3Qgc2VsZWN0aW9uID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgICAgICBpZiAoIXNlbGVjdGlvbikge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU4OTgxXHU4RjZDXHU2MzYyXHU3Njg0XHU2NTg3XHU2NzJDJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdUZGRkRcdUZGRkRcdTUyNERcdTU3M0FcdTY2NkZcdTc2ODQgY2FsbG91dHNcbiAgICAgICAgY29uc3QgY3VycmVudFNjZW5lID0gdGhpcy5zZXR0aW5ncy5zY2VuZXMuZmluZChcbiAgICAgICAgICAgIHNjZW5lID0+IHNjZW5lLmlkID09PSB0aGlzLnNldHRpbmdzLmN1cnJlbnRTY2VuZUlkXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWN1cnJlbnRTY2VuZSB8fCAhY3VycmVudFNjZW5lLmNhbGxvdXRzW2NhbGxvdXRJbmRleF0pIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NjcyQVx1NjI3RVx1NTIzMFx1NUJGOVx1NUU5NFx1NzY4NCBDYWxsb3V0IFx1OTE0RFx1N0Y2RScpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2FsbG91dCA9IGN1cnJlbnRTY2VuZS5jYWxsb3V0c1tjYWxsb3V0SW5kZXhdO1xuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgICAgICBjb25zdCByYW5kb21TdHIgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgNik7XG4gICAgICAgIGNvbnN0IGNhbGxvdXRJZCA9IGBjYWxsb3V0LSR7dGltZXN0YW1wfS0ke3JhbmRvbVN0cn1gO1xuXG4gICAgICAgIC8vIFx1NTE0OFx1NUMwNlx1OTAwOVx1NEUyRFx1NzY4NFx1NjU4N1x1NjcyQ1x1NjZGRlx1NjM2Mlx1NEUzQVx1NUUyNlx1OTg5Q1x1ODI3Mlx1NzY4NFx1NjU4N1x1NjcyQ1xuICAgICAgICBlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihgPGZvbnQgY29sb3I9XCIke2NhbGxvdXQudGV4dENvbG9yfVwiPiR7c2VsZWN0aW9ufTwvZm9udD5gKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NjVCMFx1NzY4NFx1OTAwOVx1NEUyRFx1NjU4N1x1NjcyQ1x1RkYwOFx1NzNCMFx1NTcyOFx1NTMwNVx1NTQyQlx1NEU4Nlx1OTg5Q1x1ODI3Mlx1NjgwN1x1N0I3RVx1RkYwOVxuICAgICAgICBjb25zdCBjb2xvcmVkVGV4dCA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTE4RFx1NUMwNlx1NUUyNlx1OTg5Q1x1ODI3Mlx1NzY4NFx1NjU4N1x1NjcyQ1x1OEY2Q1x1NjM2MiBDYWxsb3V0XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZFRleHQgPSBgPiBbISR7Y2FsbG91dC50eXBlfV0gKio8Zm9udCBjb2xvcj1cIiR7Y2FsbG91dC5jb2xvcn1cIj4ke2NhbGxvdXQubmFtZX08L2ZvbnQ+KipcXG4+IDxzcGFuIHN0eWxlPVwiYmFja2dyb3VuZDoke2NhbGxvdXQuY29sb3J9XCIgZGF0YS1jYWxsb3V0LWlkPVwiJHtjYWxsb3V0SWR9XCI+PGZvbnQgY29sb3I9XCIke2NhbGxvdXQudGV4dENvbG9yfVwiPiR7Y29sb3JlZFRleHR9PC9mb250Pjwvc3Bhbj5cXG5cXG5gO1xuICAgICAgICBcbiAgICAgICAgZWRpdG9yLnJlcGxhY2VTZWxlY3Rpb24oZm9ybWF0dGVkVGV4dCk7XG4gICAgICAgIG5ldyBOb3RpY2UoYFx1NjU4N1x1NjcyQ1x1NURGMlx1OEY2Q1x1NjM2Mlx1NEUzQSAke2NhbGxvdXQubmFtZX0gXHU2ODNDXHVGRjAxYCk7XG4gICAgfVxuXG4gICAgLy8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU3RjE2XHU4RjkxXHU1NjY4XHU1QjlFXHVGRkZEXHVGRkZEXG4gICAgZ2V0RWRpdG9yKCkge1xuICAgICAgICBjb25zdCBhY3RpdmVWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICAgICAgaWYgKCFhY3RpdmVWaWV3KSByZXR1cm4gbnVsbDtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NEZFRVx1NTkwRCBzb3VyY2VNb2RlIFx1NEUwRFx1NUI1OFx1NTcyOFx1NzY4NFx1OTg5OFxuICAgICAgICBjb25zdCBlZGl0b3IgPSBhY3RpdmVWaWV3LmVkaXRvcjtcbiAgICAgICAgcmV0dXJuIGVkaXRvcjtcbiAgICB9XG5cbiAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTkwMDlcdTRFMkRcdTY3MkNcbiAgICBnZXRTZWxlY3RlZFRleHQoZWRpdG9yOiBFZGl0b3IpOiBzdHJpbmcge1xuICAgICAgICBpZiAoIWVkaXRvci5nZXRTZWxlY3Rpb24oKSkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RMaW5lVW5kZXJDdXJzb3IoZWRpdG9yKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgIH1cblxuICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NkNBMVx1NjcwOVx1NjcyQ1x1OTAwOVx1NEUyRFx1RkYwQ1x1NTIxOVx1OTAwOVx1NjJFOVx1NTE0OVx1NjgwN1x1NjI0MFx1NTcyOFx1ODg0Q1xuICAgIHNlbGVjdExpbmVVbmRlckN1cnNvcihlZGl0b3I6IEVkaXRvcikge1xuICAgICAgICBjb25zdCBjdXJzb3IgPSBlZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgICAgIGNvbnN0IGxpbmUgPSBlZGl0b3IuZ2V0TGluZShjdXJzb3IubGluZSk7XG4gICAgICAgIGVkaXRvci5zZXRTZWxlY3Rpb24oXG4gICAgICAgICAgICB7IGxpbmU6IGN1cnNvci5saW5lLCBjaDogMCB9LFxuICAgICAgICAgICAgeyBsaW5lOiBjdXJzb3IubGluZSwgY2g6IGxpbmUubGVuZ3RoIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBcdTg5QzJcdTVCREYgRE9NIFx1NTNEOFxuICAgIHByaXZhdGUgYXN5bmMgc3RhcnRPYnNlcnZpbmcoKSB7XG4gICAgICAgIC8vIFx1NjVBRFx1NUYwMFx1NEU0Qlx1NTI0RFx1NzY4NFx1ODlDMlx1NUJERlx1NTY2OFxuICAgICAgICB0aGlzLm1lc3NhZ2VJY29uT2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKTtcblxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTY2MkZcdTU0MjZcdTY3MDlcdTY3NDNcdTk2NTBcdTRGN0ZcdTc1MjhcdTYzRDJcdTRFRjZcbiAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5jaGVja0FjdGl2YXRpb24oKSkpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG1hcmtkb3duVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICAgIGlmICghbWFya2Rvd25WaWV3IHx8ICFtYXJrZG93blZpZXcuZmlsZSkgcmV0dXJuO1xuXG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NEVGNlx1NzY4NCBmcm9udG1hdHRlclxuICAgICAgICBjb25zdCBmaWxlID0gbWFya2Rvd25WaWV3LmZpbGU7XG4gICAgICAgIGNvbnN0IGNhY2hlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICAgIGNvbnN0IGZyb250bWF0dGVyID0gY2FjaGU/LmZyb250bWF0dGVyO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU1MTY4XHU1QzQwXHU4QkJFXHU3RjZFXHU1NDhDIGZyb250bWF0dGVyIFx1OEJCRVx1N0Y2RVxuICAgICAgICBjb25zdCBnbG9iYWxJY29uc0VuYWJsZWQgPSB0aGlzLnNldHRpbmdzLnNob3dHbG9iYWxJY29ucztcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXJEaXNwbGF5ID0gZnJvbnRtYXR0ZXI/LlsnQ2FsbG91dCBleHRyYSBtZXNzYWdlIGRpc3BsYXknXTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NjM2RVx1Njc2MVx1NEVGNlx1NTFCM1x1NUI5QVx1NjYyRlx1NTQyNlx1NjYzRVx1NzkzQVx1NTZGRVx1NjgwN1xuICAgICAgICBsZXQgc2hvdWxkU2hvd0ljb25zID0gZmFsc2U7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWdsb2JhbEljb25zRW5hYmxlZCkge1xuICAgICAgICAgICAgLy8gXHU1MTY4XHU1QzQwXHU1NkZFXHU2ODA3XHU1MTczXHU5NUVEXHU2NUY2XHVGRjBDXHU1M0VBXHU2NzA5XHU1NzI4IGZyb250bWF0dGVyIFx1NjYwRVx1Nzg2RVx1OEJCRVx1N0Y2RSBZZXMgXHU2NUY2XHU2MjREXHU2NjNFXHU3OTNBXG4gICAgICAgICAgICBzaG91bGRTaG93SWNvbnMgPSBmcm9udG1hdHRlckRpc3BsYXkgPT09ICdZZXMnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gXHU1MTY4XHU1QzQwXHU1NkZFXHU2ODA3XHU1RjAwXHU1NDJGXHU2NUY2XHVGRjBDXHU5NjY0XHU5NzVFIGZyb250bWF0dGVyIFx1NjYwRVx1Nzg2RVx1OEJCRVx1N0Y2RSBOb1x1RkYwQ1x1NTQyNlx1NTIxOVx1OTBGRFx1NjYzRVx1NzkzQVxuICAgICAgICAgICAgc2hvdWxkU2hvd0ljb25zID0gZnJvbnRtYXR0ZXJEaXNwbGF5ICE9PSAnTm8nO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY29udGVudEVsID0gbWFya2Rvd25WaWV3LmNvbnRlbnRFbDtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NEUwRFx1NUU5NFx1OEJFNVx1NjYzRVx1NzkzQVx1NTZGRVx1NjgwN1x1RkYwQ1x1NzlGQlx1OTY2NFx1NjI0MFx1NjcwOVx1NzNCMFx1NjcwOVx1NzY4NFx1NTZGRVx1NjgwN1xuICAgICAgICBpZiAoIXNob3VsZFNob3dJY29ucykge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdJY29ucyA9IGNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FsbG91dC1tZXNzYWdlLWljb24tY29udGFpbmVyJyk7XG4gICAgICAgICAgICBleGlzdGluZ0ljb25zLmZvckVhY2goaWNvbiA9PiBpY29uLnJlbW92ZSgpKTtcbiAgICAgICAgICAgIHJldHVybjsgIC8vIFx1NEUwRFx1NTQyRlx1NTJBOFx1ODlDMlx1NUJERlx1NTY2OFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1RTk0XHU4QkU1XHU2NjNFXHU3OTNBXHU1NkZFXHU2ODA3XHVGRjBDXHU1MjE5XHU2QjYzXHU1RTM4XHU4OUMyXHU1QkRGXHU1NDhDXHU2REZCXHU1MkEwXHU1NkZFXHU2ODA3XG4gICAgICAgIHRoaXMubWVzc2FnZUljb25PYnNlcnZlci5vYnNlcnZlKGNvbnRlbnRFbCwge1xuICAgICAgICAgICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgICAgICAgICAgc3VidHJlZTogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdTUzMTZcdTczQjBcdTY3MDlcdUZGRkRcdUZGRkQgY2FsbG91dHNcbiAgICAgICAgY29uc3QgY2FsbG91dHMgPSBjb250ZW50RWwucXVlcnlTZWxlY3RvckFsbCgnLmNhbGxvdXQnKTtcbiAgICAgICAgY2FsbG91dHMuZm9yRWFjaChjYWxsb3V0ID0+IHtcbiAgICAgICAgICAgIGlmIChjYWxsb3V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZE1lc3NhZ2VJY29uVG9DYWxsb3V0KGNhbGxvdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdTZERkJcdTUyQTBcdTRFMDBcdTRFMkFcdTY1QjBcdTY1QjlcdTZDRDVcdTY3NjVcdTY2RjRcdTY1QjBcdTYyNDBcdTY3MDlcdTYyNTNcdTVGMDBcdTc2ODRcdTdCMTRcdThCQjBcbiAgICBwcml2YXRlIHVwZGF0ZUFsbE9wZW5Ob3RlcygpIHtcbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU2MjQwXHU2NzA5XHU2MjUzXHU1RjAwXHU3Njg0XHU3QjE0XHU4QkIwXHU4OUM2XHU1NkZFXG4gICAgICAgIGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ21hcmtkb3duJyk7XG4gICAgICAgIGxlYXZlcy5mb3JFYWNoKGxlYWYgPT4ge1xuICAgICAgICAgICAgY29uc3QgdmlldyA9IGxlYWYudmlldztcbiAgICAgICAgICAgIGlmICh2aWV3IGluc3RhbmNlb2YgTWFya2Rvd25WaWV3KSB7XG4gICAgICAgICAgICAgICAgLy8gXHU1QkY5XHU2QkNGXHU0RTJBXHU4OUM2XHU1NkZFXHU5MUNEXHVGRkZEXHVGRkZEXHVGRkZEXHU4RkQwXHU4ODRDIHN0YXJ0T2JzZXJ2aW5nXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydE9ic2VydmluZygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdGVyQ29udGV4dE1lbnUoKSB7XG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignZWRpdG9yLW1lbnUnLCAobWVudTogTWVudSwgZWRpdG9yOiBFZGl0b3IpID0+IHtcbiAgICAgICAgICAgICAgICBtZW51LmFkZEl0ZW0oKGl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5zZXRUaXRsZSgnXHU2MjExXHU3Njg0XHU3QjE0XHU4QkIwXHU3QzdCXHU1NzhCJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRJY29uKCdxdW90ZS1nbHlwaCcpXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0U2VjdGlvbignYS1teS1ub3RlcycpXG4gICAgICAgICAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5jaGVja0FjdGl2YXRpb24oKSkpIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBDYWxsb3V0U2VsZWN0aW9uTW9kYWwodGhpcy5hcHAsIHRoaXMsIGVkaXRvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWwub3BlbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBtZW51LmFkZFNlcGFyYXRvcigpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBhc3luYyB2YWxpZGF0ZUxpY2Vuc2Uoa2V5OiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgLy8gXHU1QjlBXHU0RTQ5XHU2NzA5XHU2NTQ4XHU3Njg0XHU2RkMwXHU2RDNCXHU3ODAxXG4gICAgICAgIGNvbnN0IHZhbGlkTGljZW5zZUtleSA9ICdMOVozLUtKMlYtUDRBNi1RVDFZLU01QjAtUjhONy1EWDNXLUg2VTktRkMwTS1WMkcxJztcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NzlGQlx1OTY2NFx1OEY5M1x1NTE2NVx1NEUyRFx1NjI0MFx1NjcwOVx1N0E3QVx1NjgzQ1x1NTQ4Q1x1OEZERVx1NUI1N1x1N0IyNlxuICAgICAgICBjb25zdCBjbGVhbklucHV0ID0ga2V5LnJlcGxhY2UoL1tcXHMtXS9nLCAnJyk7XG4gICAgICAgIGNvbnN0IGNsZWFuVmFsaWQgPSB2YWxpZExpY2Vuc2VLZXkucmVwbGFjZSgvW1xccy1dL2csICcnKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBjbGVhbklucHV0ID09PSBjbGVhblZhbGlkO1xuICAgIH1cblxuICAgIC8vIFx1NEZFRVx1RkZGRFx1RkZGRFx1RkZGRFx1RkZGRFx1RkZGRFx1NjNEMlx1NEVGNlx1NTI5Rlx1ODBGRFx1NjVCOVx1NkNENVx1RkYwQ1x1NkRGQlx1NTJBMFx1NjM4OFx1Njc0M1x1NjhDMFx1NjdFNVxuICAgIHB1YmxpYyBhc3luYyBjaGVja0FjdGl2YXRpb24oKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgICAgIC8vIFx1NTE0OFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NURGMlx1NkZDMFx1NkQzQlxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5saWNlbnNlS2V5ICYmIChhd2FpdCB0aGlzLnZhbGlkYXRlTGljZW5zZSh0aGlzLnNldHRpbmdzLmxpY2Vuc2VLZXkpKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1OEJENVx1NzUyOFx1NzJCNlx1NjAwMVxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy50cmlhbEVuZFRpbWUpIHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBpZiAobm93IDwgdGhpcy5zZXR0aW5ncy50cmlhbEVuZFRpbWUpIHtcbiAgICAgICAgICAgICAgICAvLyBcdTU3MjhcdThCRDVcdTc1MjhcdTY3MUZcdTUxODVcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gXHU4QkQ1XHU3NTI4XHU2NzFGXHU1REYyXHU4RkM3XG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy50cmlhbEVuZFRpbWUgPSBudWxsO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlUGx1Z2luRmVhdHVyZXMoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZU1lc3NhZ2VDb3VudChjYWxsb3V0OiBIVE1MRWxlbWVudCwgY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCBjYWxsb3V0SWQgPSB0aGlzLmdldENhbGxvdXRJZChjYWxsb3V0KTtcbiAgICAgICAgY29uc3QgbWVzc2FnZURhdGEgPSB0aGlzLnNldHRpbmdzLm1lc3NhZ2VzW2NhbGxvdXRJZF07XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VDb3VudCA9IG1lc3NhZ2VEYXRhPy5tZXNzYWdlcz8ubGVuZ3RoIHx8IDA7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjb3VudFNwYW4gPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmNhbGxvdXQtbWVzc2FnZS1jb3VudCcpO1xuICAgICAgICBpZiAoY291bnRTcGFuKSB7XG4gICAgICAgICAgICBjb3VudFNwYW4udGV4dENvbnRlbnQgPSBtZXNzYWdlQ291bnQudG9TdHJpbmcoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1NTcyOCBDYWxsb3V0TWVzc2FnZVBsdWdpbiBcdTdDN0JcdTRFMkRcdTZERkJcdTUyQTBcdTc5ODFcdTc1MjhcdTUyOUZcdTgwRkRcdTc2ODRcdTY1QjlcdTZDRDVcbiAgICBwcml2YXRlIGRpc2FibGVQbHVnaW5GZWF0dXJlcygpIHtcbiAgICAgICAgLy8gXHU2NUFEXHU1RjAwIERPTSBcdTg5QzJcdTVCREZcdTU2NjhcbiAgICAgICAgdGhpcy5tZXNzYWdlSWNvbk9ic2VydmVyPy5kaXNjb25uZWN0KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTc5RkJcdTk2NjRcdTYyNDBcdTY3MDlcdTZEODhcdTYwNkZcdTU2RkVcdTY4MDdcbiAgICAgICAgY29uc3QgbWFya2Rvd25WaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICAgICAgaWYgKG1hcmtkb3duVmlldykge1xuICAgICAgICAgICAgY29uc3QgaWNvbnMgPSBtYXJrZG93blZpZXcuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYWxsb3V0LW1lc3NhZ2UtaWNvbi1jb250YWluZXInKTtcbiAgICAgICAgICAgIGljb25zLmZvckVhY2goaWNvbiA9PiBpY29uLnJlbW92ZSgpKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU0RkE3XHU4RkI5XHU2ODBGXHU4OUM2XHU1NkZFXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUoQ0FMTF9PVVRfTUVTU0FHRV9WSUVXKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NzlGQlx1OTY2NFx1NTNGM1x1OTUyRVx1ODNEQ1x1NTM1NVxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UudHJpZ2dlcignZWRpdG9yLW1lbnUnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NkUwNVx1OTY2NFx1NTQ3RFx1NEVFNCAtIFx1NEZFRVx1NjUzOVx1OEZEOVx1OTFDQ1xuICAgICAgICBjb25zdCBjb21tYW5kSWQgPSAndHJhbnNmb3JtLXRvLWNhbGxvdXQnO1xuICAgICAgICBpZiAodGhpcy5hcHAuY29tbWFuZHMuY29tbWFuZHNbY29tbWFuZElkXSkge1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuYXBwLmNvbW1hbmRzLmNvbW1hbmRzW2NvbW1hbmRJZF07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0SWNvblN2Zyh0eXBlOiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBpY29uczogUmVjb3JkPG51bWJlciwgc3RyaW5nPiA9IHtcbiAgICAgICAgICAgIDE6ICc8c3ZnIHQ9XCIxNzMzMzA0ODg4OTEwXCIgY2xhc3M9XCJpY29uXCIgdmlld0JveD1cIjAgMCAxMDI0IDEwMjRcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHAtaWQ9XCIyODI5XCIgd2lkdGg9XCIyMDBcIiBoZWlnaHQ9XCIyMDBcIj48cGF0aCBkPVwiTTUwNy4yOTc5NTkgODYyLjA0MDgxNmMtNTIuMjQ0ODk4IDAtMTAyLjkyMjQ0OS05LjQwNDA4Mi0xNTEuNTEwMjA0LTI3LjY4OTc5NmwtMTE2LjUwNjEyMiAyNS42Yy0yNC4wMzI2NTMgNS4yMjQ0OS00Ni40OTc5NTkgMC02MC42MDQwODItMTQuNjI4NTcxLTE0LjYyODU3MS0xNC42Mjg1NzEtMTkuODUzMDYxLTM2LjU3MTQyOS0xNC42Mjg1NzEtNjAuNjA0MDgybDE3LjI0MDgxNi03Ny44NDQ4OThjLTQzLjM2MzI2NS01Ny40NjkzODgtNjYuMzUxMDItMTIyLjc3NTUxLTY2LjM1MTAyLTE5MC42OTM4NzdDMTE0LjkzODc3NiAzMjAuNzgzNjczIDI5MS4wMDQwODIgMTYxLjk1OTE4NCA1MDcuMjk3OTU5IDE2MS45NTkxODRjMTA3LjYyNDQ5IDAgMjA4LjQ1NzE0MyAzNi4wNDg5OCAyODMuNjg5Nzk2IDEwMS44Nzc1NTFDODY3LjI2NTMwNiAzMzAuNzEwMjA0IDkwOS4wNjEyMjQgNDIwLjA0ODk4IDkwOS4wNjEyMjQgNTE2LjE3OTU5MmMwIDE5MC42OTM4NzgtMTgwLjI0NDg5OCAzNDUuODYxMjI0LTQwMS43NjMyNjUgMzQ1Ljg2MTIyNHpcIiBmaWxsPVwiIzdCRDRFRlwiIHAtaWQ9XCIyODMwXCI+PC9wYXRoPjxwYXRoIGQ9XCJNNTEyIDU4MS40ODU3MTRjLTM4LjEzODc3NiAwLTY5LjQ4NTcxNC0zMS4zNDY5MzktNjkuNDg1NzE0LTY5LjQ4NTcxNHMzMS4zNDY5MzktNjkuNDg1NzE0IDY5LjQ4NTcxNC02OS40ODU3MTQgNjkuNDg1NzE0IDMxLjM0NjkzOSA2OS40ODU3MTQgNjkuNDg1NzE0LTMxLjM0NjkzOSA2OS40ODU3MTQtNjkuNDg1NzE0IDY5LjQ4NTcxNHpNNzEwLjUzMDYxMiA1ODEuNDg1NzE0Yy0zOC4xMzg3NzYgMC02OS40ODU3MTQtMzEuMzQ2OTM5LTY5LjQ4NTcxNC02OS40ODU3MTRzMzEuMzQ2OTM5LTY5LjQ4NTcxNCA2OS40ODU3MTQtNjkuNDg1NzE0IDY5LjQ4NTcxNCAzMS4zNDY5MzkgNjkuNDg1NzE1IDY5LjQ4NTcxNC0zMS4zNDY5MzkgNjkuNDg1NzE0LTY5LjQ4NTcxNSA2OS40ODU3MTR6TTMxMy40NjkzODggNTgxLjQ4NTcxNGMtMzguMTM4Nzc2IDAtNjkuNDg1NzE0LTMxLjM0NjkzOS02OS40ODU3MTUtNjkuNDg1NzE0czMxLjM0NjkzOS02OS40ODU3MTQgNjkuNDg1NzE1LTY5LjQ4NTcxNCA2OS40ODU3MTQgMzEuMzQ2OTM5IDY5LjQ4NTcxNCA2OS40ODU3MTQtMzEuMzQ2OTM5IDY5LjQ4NTcxNC02OS40ODU3MTQgNjkuNDg1NzE0elwiIGZpbGw9XCIjMjc4RENBXCIgcC1pZD1cIjI4MzFcIj48L3BhdGg+PC9zdmc+JyxcbiAgICAgICAgICAgIDI6ICc8c3ZnIHQ9XCIxNzMzMzA1MTY0NzU2XCIgY2xhc3M9XCJpY29uXCIgdmlld0JveD1cIjAgMCAxMDI0IDEwMjRcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHAtaWQ9XCI0MDg0XCIgd2lkdGg9XCIyMDBcIiBoZWlnaHQ9XCIyMDBcIj48cGF0aCBkPVwiTTkxMy4zMyAxNDQuMTV2NTc3LjU3SDU5MC44NWMtOC45NCAwLTE3LjQxIDIuNTgtMjQuNTggNy4xMkwzMDQuNzIgODU0Ljk3di04Ny4yNGMwLTI1LjQxLTIwLjYtNDYtNDYtNDZIMTA5LjMzVjE0NC4xNWg4MDRtMjUuNDItNDZIODMuOTJjLTExLjM3IDAtMjAuNTggOS4yMi0yMC41OCAyMC41OHY2MjguNDFjMCAxMS4zNyA5LjIyIDIwLjU4IDIwLjU4IDIwLjU4aDE3NC44djE2MC40OUw1OTEuMTcgNzY3LjlsLTAuMzEtMC4xOGgzNDcuOWMxMS4zNyAwIDIwLjU4LTkuMjIgMjAuNTgtMjAuNTh2LTYyOC40Yy0wLjAxLTExLjM3LTkuMjItMjAuNTktMjAuNTktMjAuNTl6XCIgZmlsbD1cIiM1QkU3QzRcIiBwLWlkPVwiNDA4NVwiPjwvcGF0aD48cGF0aCBkPVwiTTcyMC41NCA0NjguNTFIMzAyLjEyYy0xMi43IDAtMjMtMTAuMy0yMy0yM3MxMC4zLTIzIDIzLTIzaDQxOC40MmMxMi43IDAgMjMgMTAuMyAyMyAyM3MtMTAuMjkgMjMtMjMgMjN6XCIgZmlsbD1cIiM3QTU3RDFcIiBwLWlkPVwiNDA4NlwiPjwvcGF0aD48cGF0aCBkPVwiTTUxMS4zMyA2NzcuNzJjLTEyLjcgMC0yMy0xMC4zLTIzLTIzVjIzNi4zYzAtMTIuNyAxMC4zLTIzIDIzLTIzczIzIDEwLjMgMjMgMjN2NDE4LjQyYzAgMTIuNzEtMTAuMjkgMjMtMjMgMjN6XCIgZmlsbD1cIiM3QTU3RDFcIiBwLWlkPVwiNDA4N1wiPjwvcGF0aD48cGF0aCBkPVwiTTc0NS44MSAyMDAuNzFoLTQxLjk3Yy02LjYzIDAtMTItNS4zNy0xMi0xMnM1LjM3LTEyIDEyLTEyaDQxLjk3YzYuNjMgMCAxMiA1LjM3IDEyIDEycy01LjM3IDEyLTEyIDEyek04NjEuMzkgMzUxLjgxYy02LjYzIDAtMTItNS4zNy0xMi0xMlYyMjcuMzdjMC0xNC43LTExLjk2LTI2LjY3LTI2LjY3LTI2LjY3aC0yNC4zOGMtNi42MyAwLTEyLTUuMzctMTItMTJzNS4zNy0xMiAxMi0xMmgyNC4zOGMyNy45NCAwIDUwLjY3IDIyLjczIDUwLjY3IDUwLjY3djExMi40NGMwIDYuNjMtNS4zOCAxMi0xMiAxMnpcIiBmaWxsPVwiIzVCRTdDNFwiIHAtaWQ9XCI0MDg4XCI+PC9wYXRoPjwvc3ZnPicsXG4gICAgICAgICAgICAzOiAnPHN2ZyB0PVwiMTczMzMwNTE4Mzc4M1wiIGNsYXNzPVwiaWNvblwiIHZpZXdCb3g9XCIwIDAgMTAyNCAxMDI0XCIgdmVyc2lvbj1cIjEuMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBwLWlkPVwiNDI0OVwiIHdpZHRoPVwiMjAwXCIgaGVpZ2h0PVwiMjAwXCI+PHBhdGggZD1cIk04OTIuODQgNDEwLjA3SDQ1OS45N2MtOS4yMSAwLTE2LjY3IDcuNDQtMTYuNjcgMTYuNjN2MzMzYzAgOS4yMiA3LjQ2IDE2LjYzIDE2LjY3IDE2LjYzaDI2Ni4zOGwxMTYuNTQgNjYuNjN2LTY2LjYzaDQ5Ljk1YzkuMjEgMCAxNi42Ny03LjQxIDE2LjY3LTE2LjYzdi0zMzNjMC05LjE5LTcuNDYtMTYuNjMtMTYuNjctMTYuNjN6XCIgZmlsbD1cIiNFQzg3QzBcIiBwLWlkPVwiNDI1MFwiPjwvcGF0aD48cGF0aCBkPVwiTTQ1OS45NyA0MTAuMDdjLTkuMjEgMC0xNi42NyA3LjQ0LTE2LjY3IDE2LjYzdjIxNi40N2gyNDkuNzVjOS4yMSAwIDE2LjY3LTcuNDYgMTYuNjctMTYuNjhWNDEwLjA3SDQ1OS45N3pcIiBmaWxsPVwiI0Q3NzBBRFwiIHAtaWQ9XCI0MjUxXCI+PC9wYXRoPjxwYXRoIGQ9XCJNNjU5Ljc2IDE3Ni45NkgxMjYuOTVjLTkuMjEgMC0xNi42MyA3LjQ2LTE2LjYzIDE2LjY2djM5OS42MWMwIDkuMTcgNy40MyAxNi42MyAxNi42MyAxNi42M2g0OS45NXY5OS45bDE3OS44MS05OS45aDMwMy4wNWM5LjE4IDAgMTYuNjMtNy40NiAxNi42My0xNi42M1YxOTMuNjJjMC4wMS05LjItNy40NC0xNi42Ni0xNi42My0xNi42NnpcIiBmaWxsPVwiI0FDOTJFQlwiIHAtaWQ9XCI0MjUyXCI+PC9wYXRoPjxwYXRoIGQ9XCJNNDQ4Ljg3IDI3Ni44NmMtMjEuNzQgMC00MS40IDguOTQtNTUuNSAyMy4zMy0xNC4xMS0xNC4zOS0zMy43Ni0yMy4zMy01NS41MS0yMy4zMy00Mi45IDAtNzcuNjkgMzQuNzktNzcuNjkgNzcuNyAwIDg4LjggMTMzLjIgMTY2LjQ4IDEzMy4yIDE2Ni40OHMxMzMuMTkgNzcuNjggMTMzLjE5IDE2Ni40OGMwIDQyLjkxLTM0Ljc4IDc3LjctNzcuNjkgNzcuN3pcIiBmaWxsPVwiI0Y1RjdGQVwiIHAtaWQ9XCI0MjUzXCI+PC9wYXRoPjxwYXRoIGQ9XCJNNDQ4Ljg3IDI3Ni44NmMtNS43MiAwLTExLjI5IDAuNjMtMTYuNjYgMS44MSAzNC45MSA3LjYyIDYxLjA2IDM4LjY5IDYxLjA2IDc1LjkgMCA2OS4xNy04MC44MyAxMzEuNjEtMTE2LjU2IDE1NS44MiAxMC4xNSA2Ljg4IDE2LjY2IDEwLjY2IDE2LjY2IDEwLjY2czEzMy4xOS03Ny42OCAxMzMuMTktMTY2LjQ4YzAtNDIuOTItMzQuNzgtNzcuNzEtNzcuNjktNzcuNzF6XCIgb3BhY2l0eT1cIi4xXCIgcC1pZD1cIjQyNTRcIj48L3BhdGg+PC9zdmc+JyxcbiAgICAgICAgICAgIDQ6ICc8c3ZnIHQ9XCIxNzMzMzA1MjM4OTU1XCIgY2xhc3M9XCJpY29uXCIgdmlld0JveD1cIjAgMCAxMDI0IDEwMjRcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHAtaWQ9XCI3NTYwXCIgd2lkdGg9XCIyMDBcIiBoZWlnaHQ9XCIyMDBcIj48cGF0aCBkPVwiTTUxMiA1MTJtLTUxMiAwYTUxMiA1MTIgMCAxIDAgMTAyNCAwIDUxMiA1MTIgMCAxIDAtMTAyNCAwWlwiIGZpbGw9XCIjRkY5RDU0XCIgcC1pZD1cIjc1NjFcIj48L3BhdGg+PHBhdGggZD1cIk0xNDAuNDg0NCAyNDEuOTU1ODg2YTQ2LjU1MTkzIDEwMS42OTY1NTcgMjkuNzUgMSAwIDgwLjgzMjY2MSA0Ni4xOTk2NzIgNDYuNTUxOTMgMTAxLjY5NjU1NyAyOS43NSAxIDAtODAuODMyNjYxLTQ2LjE5OTY3MlpcIiBmaWxsPVwiI0ZGRkZGRlwiIHAtaWQ9XCI3NTYyXCI+PC9wYXRoPjxwYXRoIGQ9XCJNOTMuNDk1NjUyIDQzMS44NjA4N20tMjIuMjYwODY5IDBhMjIuMjYwODcgMjIuMjYwODcgMCAxIDAgNDQuNTIxNzM5IDAgMjIuMjYwODcgMjIuMjYwODcgMCAxIDAtNDQuNTIxNzM5IDBaXCIgZmlsbD1cIiNGRkZGRkZcIiBwLWlkPVwiNzU2M1wiPjwvcGF0aD48cGF0aCBkPVwiTTgzMi41NTY1MjIgODU3LjA0MzQ3OGEyNC40ODY5NTcgMjQuNDg2OTU3IDAgMSAwIDAtNDguOTczOTEzIDI0LjQ4Njk1NyAyNC40ODY5NTcgMCAwIDAgMCA0OC45NzM5MTN6IG0wIDI0LjQ4Njk1N2E0OC45NzM5MTMgNDguOTczOTEzIDAgMSAwIDAtOTcuOTQ3ODI2IDQ4Ljk3MzkxMyA0OC45NzM5MTMgMCAwIDAgMCA5Ny45NDc4MjZ6XCIgZmlsbD1cIiNGRkZGRkZcIiBwLWlkPVwiNzU2NFwiPjwvcGF0aD48cGF0aCBkPVwiTTczNS4zOTIyNzggMzIwLjU1NjUyMkgyOTcuNTEyMDdDMjc1Ljc4NTQ2MSAzMjAuNTU2NTIyIDI1OC4yMjYwODcgMzM4LjMyOTYgMjU4LjIyNjA4NyAzNjAuMzE0NDM1djMxMi40ODAyNzhjMCAyMS45NzU5MyAxNy41NTkzNzQgMzkuNzQ5MDA5IDM5LjI4NTk4MyAzOS43NDkwMDloNjMuMDI0OTczbDEwLjY4NTIxOCA0Ny45NDEwMDhjNC45Njg2MjYgMjIuMjE2MzQ4IDMxLjgzMzA0MyAzMC42OTMyODcgNDguMzUwNjA5IDE1LjE5OTcyMmw2Ny41ODQtNjMuMTMxODI2aDI0OC4yMzU0MDhjMjEuNzI2NjA5IDAgMzkuMjg1OTgzLTE3Ljc4MTk4MyAzOS4yODU5ODMtMzkuNzU3OTEzVjM2MC4zMTQ0MzVDNzc0LjY3ODI2MSAzMzguMzgzMDI2IDc1Ny4wNTY1NTcgMzIwLjU1NjUyMiA3MzUuMzkyMjc4IDMyMC41NTY1MjJ6TTQwMS40OTcwNDMgNTM0LjY0Mzc1N2MtMTguMzc4NTc0IDAtMzMuMjEzMjE3LTE1LjA4Mzk2NS0zMy4yMTMyMTctMzMuNjEzOTE0czE0Ljg5Njk3NC0zMy42MTM5MTMgMzMuMjEzMjE3LTMzLjYxMzkxM2MxOC4zNjk2NyAwIDMzLjIxMzIxNyAxNS4wODM5NjUgMzMuMjEzMjE4IDMzLjYxMzkxM3MtMTQuODQzNTQ4IDMzLjYxMzkxMy0zMy4yMTMyMTggMzMuNjEzOTE0eiBtMTIwLjk2NTU2NiAyLjM0MTg0M2MtMTguMzY5NjcgMC0zMy4yMTMyMTctMTUuMDgzOTY1LTMzLjIxMzIxOC0zMy42MTM5MTMgMC0xOC41Mzg4NTIgMTQuODk2OTc0LTMzLjYyMjgxNyAzMy4yMTMyMTgtMzMuNjIyODE3IDE4LjM2OTY3IDAgMzMuMjEzMjE3IDE1LjA4Mzk2NSAzMy4yMTMyMTcgMzMuNjIyODE3IDAgMTguNTIxMDQzLTE0Ljg0MzU0OCAzMy42MTM5MTMtMzMuMjEzMjE3IDMzLjYxMzkxM3ogbTEyMC45NjU1NjUgMGMtMTguMzY5NjcgMC0zMy4yMTMyMTctMTUuMDgzOTY1LTMzLjIxMzIxNy0zMy42MTM5MTMgMC0xOC41Mzg4NTIgMTQuODk2OTc0LTMzLjYyMjgxNyAzMy4yMTMyMTctMzMuNjIyODE3IDE4LjM2OTY3IDAgMzMuMjEzMjE3IDE1LjA4Mzk2NSAzMy4yMTMyMTcgMzMuNjIyODE3IDAgMTguNTIxMDQzLTE0Ljg0MzU0OCAzMy42MTM5MTMtMzMuMjEzMjE3IDMzLjYxMzkxM3pcIiBmaWxsPVwiI0ZGRkZGRlwiIHAtaWQ9XCI3NTY1XCI+PC9wYXRoPjwvc3ZnPicsXG4gICAgICAgICAgICA1OiAnPHN2ZyB0PVwiMTczMzMwNTI2NjU0N1wiIGNsYXNzPVwiaWNvblwiIHZpZXdCb3g9XCIwIDAgMTAyNCAxMDI0XCIgdmVyc2lvbj1cIjEuMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBwLWlkPVwiODkxOFwiIHdpZHRoPVwiMjAwXCIgaGVpZ2h0PVwiMjAwXCI+PHBhdGggZD1cIk01MTIgNzM2bC0xOTIgMTkydi0xOTJIMTI4YTMyIDMyIDAgMCAxLTMyLTMyVjEyOGEzMiAzMiAwIDAgMSAzMi0zMmg3NjhhMzIgMzIgMCAwIDEgMzIgMzJ2NTc2YTMyIDMyIDAgMCAxLTMyIDMySDUxMnpcIiBmaWxsPVwiI0ZGRkZGRlwiIHAtaWQ9XCI4OTE5XCI+PC9wYXRoPjxwYXRoIGQ9XCJNNTEyIDczNmwtMTkyIDE5MnYtMTkySDEyOGEzMiAzMiAwIDAgMS0zMi0zMlYxMjhhMzIgMzIgMCAwIDEgMzItMzJoNzY4YTMyIDMyIDAgMCAxIDMyIDMydjU3NmEzMiAzMiAwIDAgMS0zMiAzMkg1MTJ6IG0tMTYwIDExNC43NTJMNDk4Ljc1MiA3MDRIODk2VjEyOEgxMjh2NTc2aDIyNHYxNDYuNzUyelwiIGZpbGw9XCIjNUQ2RDdFXCIgcC1pZD1cIjg5MjBcIj48L3BhdGg+PHBhdGggZD1cIk0yMjQgMzg0aDU3NnYzMkgyMjR2LTMyeiBtMCA5Nmg1NzZ2MzJIMjI0di0zMnogbTAgOTZoMzIwdjMySDIyNHYtMzJ6XCIgZmlsbD1cIiM4MDhGQTFcIiBwLWlkPVwiODkyMVwiPjwvcGF0aD48cGF0aCBkPVwiTTIyNCAyMjRoNTc2djE5MkgyMjR6XCIgZmlsbD1cIiNDNDlGNzRcIiBwLWlkPVwiODkyMlwiPjwvcGF0aD48L3N2Zz4nXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBpY29uc1t0eXBlXSB8fCBpY29uc1sxXTtcbiAgICB9XG5cbiAgICAvLyBcdTRGRUVcdTY1MzkgcmVmcmVzaEFsbEljb25zIFx1NjVCOVx1NkNENVxuICAgIHB1YmxpYyByZWZyZXNoQWxsSWNvbnMoKSB7XG4gICAgICAgIGNvbnN0IG1hcmtkb3duVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICAgIGlmICghbWFya2Rvd25WaWV3KSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgY2FsbG91dHMgPSBtYXJrZG93blZpZXcuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYWxsb3V0Jyk7XG4gICAgICAgIGNhbGxvdXRzLmZvckVhY2goY2FsbG91dCA9PiB7XG4gICAgICAgICAgICBpZiAoY2FsbG91dCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU3M0IwXHU2NzA5XHU3Njg0XHU1NkZFXHU2ODA3XG4gICAgICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdJY29uID0gY2FsbG91dC5xdWVyeVNlbGVjdG9yKCcuY2FsbG91dC1tZXNzYWdlLWljb24tY29udGFpbmVyJyk7XG4gICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nSWNvbikge1xuICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0ljb24ucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMCBDU1MgXHU1M0Q4XHU5MUNGXG4gICAgICAgICAgICAgICAgY2FsbG91dC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1pY29uLXNpemUnLCBgJHt0aGlzLnNldHRpbmdzLmljb25TZXR0aW5ncy5zaXplfXB4YCk7XG4gICAgICAgICAgICAgICAgY2FsbG91dC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1pY29uLXRvcC1wb3NpdGlvbicsIGAke3RoaXMuc2V0dGluZ3MuaWNvblNldHRpbmdzLnBvc2l0aW9uLnRvcH1weGApO1xuICAgICAgICAgICAgICAgIGNhbGxvdXQuc3R5bGUuc2V0UHJvcGVydHkoJy0taWNvbi1yaWdodC1wb3NpdGlvbicsIGAke3RoaXMuc2V0dGluZ3MuaWNvblNldHRpbmdzLnBvc2l0aW9uLnJpZ2h0fXB4YCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gXHVGRkZEXHVGRkZEXHU2NUIwXHU2REZCXHU1MkEwXHU1NkZFXHU2ODA3XG4gICAgICAgICAgICAgICAgdGhpcy5hZGRNZXNzYWdlSWNvblRvQ2FsbG91dChjYWxsb3V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlb3BlbkN1cnJlbnROb3RlID0gYXN5bmMgKCk6IFByb21pc2U8dm9pZD4gPT4ge1xuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTZEM0JcdTUyQThcdTc2ODRcdTdCMTRcdThCQjBcdTg5QzZcdTU2RkVcbiAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICAgIGlmICghYWN0aXZlVmlldykgcmV0dXJuO1xuICAgIFxuICAgICAgICAvLyBcdTRGRERcdTVCNThcdTVGNTNcdTUyNERcdTY1ODdcdTRFRjZcbiAgICAgICAgY29uc3QgY3VycmVudEZpbGUgPSBhY3RpdmVWaWV3LmZpbGU7XG4gICAgICAgIGlmICghY3VycmVudEZpbGUpIHJldHVybjtcbiAgICBcbiAgICAgICAgLy8gXHU0RkREXHU1QjU4XHU2NkY0XHU1OTFBXHU3MkI2XHU2MDAxXHU0RkUxXHU2MDZGXG4gICAgICAgIGNvbnN0IGlzSW5FZGl0TW9kZSA9IGFjdGl2ZVZpZXcuZ2V0TW9kZSgpID09PSAnc291cmNlJzsgLy8gXHU2NjJGXHU1NDI2XHU1NzI4XHU3RjE2XHU4RjkxXHU2QTIxXHU1RjBGXG4gICAgICAgIGNvbnN0IHNjcm9sbEluZm8gPSBhY3RpdmVWaWV3LmN1cnJlbnRNb2RlPy5nZXRTY3JvbGwoKTsgLy8gXHU4M0I3XHU1M0Q2XHU2RURBXHU1MkE4XHU0RjREXHU3RjZFXG4gICAgICAgIGNvbnN0IGN1cnNvciA9IGlzSW5FZGl0TW9kZSA/IGFjdGl2ZVZpZXcuZWRpdG9yPy5nZXRDdXJzb3IoKSA6IG51bGw7IC8vIFx1NTk4Mlx1Njc5Q1x1NTcyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1RkYwQ1x1NEZERFx1NUI1OFx1NTE0OVx1NjgwN1x1NEY0RFx1N0Y2RVxuICAgIFxuICAgICAgICAvLyBcdTYyNjdcdTg4NENcdTUxNzNcdTk1RURcdTVGNTNcdTUyNERcdTY4MDdcdTdCN0VcdTk4NzVcdTc2ODRcdTU0N0RcdTRFRTRcbiAgICAgICAgYXdhaXQgdGhpcy5hcHAuY29tbWFuZHMuZXhlY3V0ZUNvbW1hbmRCeUlkKCd3b3Jrc3BhY2U6Y2xvc2UnKTtcbiAgICBcbiAgICAgICAgLy8gXHU0RjdGXHU3NTI4IFByb21pc2UgXHU2NzY1XHU1OTA0XHU3NDA2XHU1RjAyXHU2QjY1XHU2NENEXHU0RjVDXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgc2V0VGltZW91dChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU0RTAwXHU0RTJBXHU2NUIwXHU3Njg0XHU1M0Y2XHU1QjUwXHVGRjA4XHU2ODA3XHU3QjdFXHU5ODc1XHVGRjA5XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZih0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1NzI4XHU2NUIwXHU3Njg0XHU1M0Y2XHU1QjUwXHU0RTJEXHU2MjUzXHU1RjAwXHU2NTg3XHU0RUY2XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGxlYWYub3BlbkZpbGUoY3VycmVudEZpbGUpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU3QjQ5XHU1Rjg1XHU2NTg3XHU0RUY2XHU1MkEwXHU4RjdEXHU1QjhDXHU2MjEwXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU2MDYyXHU1OTBEXHU3RjE2XHU4RjkxL1x1OTg4NFx1ODlDOFx1NkEyMVx1NUYwRlxuICAgICAgICAgICAgICAgICAgICAvLyBcdTYwNjJcdTU5MERcdTdGMTZcdThGOTEvXHU5ODg0XHU4OUM4XHU2QTIxXHU1RjBGXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0luRWRpdE1vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbWFya2Rvd24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiB7IG1vZGU6ICdzb3VyY2UnIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdtYXJrZG93bicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHsgbW9kZTogJ3ByZXZpZXcnIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3VmlldyA9IGxlYWYudmlldyBhcyBNYXJrZG93blZpZXc7XG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NjA2Mlx1NTkwRFx1NkVEQVx1NTJBOFx1NEY0RFx1N0Y2RVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNjcm9sbEluZm8pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3Vmlldy5jdXJyZW50TW9kZT8uYXBwbHlTY3JvbGwoc2Nyb2xsSW5mbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwKTsgLy8gXHU1ODlFXHU1MkEwXHU1RUY2XHU2NUY2XHU3ODZFXHU0RkREIERPTSBcdTVERjJcdTVCOENcdTUxNjhcdTUyQTBcdThGN0RcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NTcyOFx1N0YxNlx1OEY5MVx1NkEyMVx1NUYwRlx1NEUxNFx1NjcwOVx1NTE0OVx1NjgwN1x1NEY0RFx1N0Y2RVx1RkYwQ1x1NjA2Mlx1NTkwRFx1NTE0OVx1NjgwN1x1NEY0RFx1N0Y2RVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzSW5FZGl0TW9kZSAmJiBjdXJzb3IgJiYgbmV3Vmlldy5lZGl0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWaWV3LmVkaXRvci5zZXRDdXJzb3IoY3Vyc29yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NkZDMFx1NkQzQlx1OEZEOVx1NEUyQVx1NTNGNlx1NUI1MFxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYobGVhZik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDEwMCk7IC8vIFx1NTg5RVx1NTJBMFx1NUVGNlx1OEZERlx1NjVGNlx1OTVGNFxuICAgIFxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1x1OTFDRFx1NjVCMFx1NjI1M1x1NUYwMFx1NjU4N1x1NEVGNlx1NTkzMVx1OEQyNTonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1OTFDRFx1NjVCMFx1NjI1M1x1NUYwMFx1NjU4N1x1NEVGNlx1NTkzMVx1OEQyNScpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgMTAwKTsvLyBcdTU4OUVcdTUyQTBcdTVFRjZcdThGREZcdTY1RjZcdTk1RjRcbiAgICBcbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG5cblxuICAgIC8vIFx1NEZFRVx1NjUzOSB0b2dnbGVQcmlzbVN0eWxlIFx1NjVCOVx1NkNENVxuICAgIHByaXZhdGUgdG9nZ2xlUHJpc21TdHlsZShlbmFibGVkOiBib29sZWFuKSB7XG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NjgzOVx1NTE0M1x1N0QyMFxuICAgICAgICBjb25zdCByb290RWxlbWVudCA9IGRvY3VtZW50LmJvZHk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZW5hYmxlZCkge1xuICAgICAgICAgICAgLy8gXHU0RkVFXHU2NTM5XHU2ODM3XHU1RjBGXHU2ODA3XHU3QjdFXHU1MTg1XHU1QkI5XHVGRjBDXHU2REZCXHU1MkEwICFpbXBvcnRhbnQgXHU2NzY1XHU3ODZFXHU0RkREXHU2ODM3XHU1RjBGXHU0RjE4XHU1MTQ4XHU3RUE3XG4gICAgICAgICAgICBjb25zdCBzdHlsZVRhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgICAgICAgICBzdHlsZVRhZy5pZCA9ICdjYWxsb3V0LXByaXNtLXN0eWxlcyc7XG4gICAgICAgICAgICBzdHlsZVRhZy50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgICAgICAgICBib2R5Om5vdCgucHQtZGlzYWJsZS1jYWxsb3V0LXN0eWxpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgLS1jYWxsb3V0LXBhZGRpbmc6IDRweDtcbiAgICAgICAgICAgICAgICAgICAgLS1jYWxsb3V0LXJhZGl1czogdmFyKC0tcmFkaXVzLW0pO1xuICAgICAgICAgICAgICAgICAgICAtLWNhbGxvdXQtYmFja2dyb3VuZC1hbHBoYTogMjAlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGJvZHk6bm90KC5wdC1kaXNhYmxlLWNhbGxvdXQtc3R5bGluZykgLmNhbGxvdXQge1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB1bnNldDtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLmNhbGxvdXQtbWVzc2FnZS1pY29uLWNvbnRhaW5lciB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgICB6LWluZGV4OiA5OTk5ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlciAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgICBnYXA6IDRweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXIgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IGFsbCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC5jYWxsb3V0LW1lc3NhZ2UtaWNvbiB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlciAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlciAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogYWxsICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgICAgIHotaW5kZXg6IDk5OTkgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKiBcdTZERkJcdTUyQTBcdTY1QjBcdTc2ODRcdTY4MzdcdTVGMEZcdTg5QzRcdTUyMTlcdTY3NjVcdTc0MDZcdTUyQThcdTYwMDFcdTVDM0FcdTVCRjhcdTU0OENcdTRGNERcdTdGNkUgKi9cbiAgICAgICAgICAgICAgICAuY2FsbG91dC1tZXNzYWdlLWljb24tY29udGFpbmVyW3N0eWxlKj1cInRvcFwiXSxcbiAgICAgICAgICAgICAgICAuY2FsbG91dC1tZXNzYWdlLWljb24tY29udGFpbmVyW3N0eWxlKj1cInJpZ2h0XCJdIHtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiB2YXIoLS1pY29uLXRvcC1wb3NpdGlvbikgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IHZhcigtLWljb24tcmlnaHQtcG9zaXRpb24pICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLmNhbGxvdXQtbWVzc2FnZS1pY29uW3N0eWxlKj1cIndpZHRoXCJdLFxuICAgICAgICAgICAgICAgIC5jYWxsb3V0LW1lc3NhZ2UtaWNvbltzdHlsZSo9XCJoZWlnaHRcIl0ge1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogdmFyKC0taWNvbi1zaXplKSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHZhcigtLWljb24tc2l6ZSkgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAuY2FsbG91dC1tZXNzYWdlLWNvdW50IHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWZsZXggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlciAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlciAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS10ZXh0LWFjY2VudCkgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IHdoaXRlICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjBweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDIwcHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlciAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogYWxsICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgICAgIHotaW5kZXg6IDk5OTkgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAuY2FsbG91dDpob3ZlciAuY2FsbG91dC1tZXNzYWdlLWljb24tY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiB2aXNpYmxlICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLndvcmtzcGFjZS1sZWFmLWNvbnRlbnRbZGF0YS10eXBlPVwibWFya2Rvd25cIl0gLmNhbGxvdXQtbWVzc2FnZS1pY29uLWNvbnRhaW5lciB7XG4gICAgICAgICAgICAgICAgICAgIHotaW5kZXg6IDk5OTkgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAuY2FsbG91dC1tZXNzYWdlLWljb24tY29udGFpbmVyOjpiZWZvcmUge1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnJztcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgICAgICAgICB0b3A6IC01cHg7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAtNXB4O1xuICAgICAgICAgICAgICAgICAgICBib3R0b206IC01cHg7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IC01cHg7XG4gICAgICAgICAgICAgICAgICAgIHotaW5kZXg6IC0xO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC5jYWxsb3V0LXRpdGxlIHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgICAgICAgICB6LWluZGV4OiA1O1xuICAgICAgICAgICAgICAgICAgICBnYXA6IHVuc2V0O1xuICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAzNnB4O1xuICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZDtcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLW0pO1xuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKHZhcigtLWNhbGxvdXQtY29sb3IpLCAwLjA1KTtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IGF1dG87XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLmNhbGxvdXQtdGl0bGU6ZW1wdHkgKyAuY2FsbG91dC1jb250ZW50IHtcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogdmFyKC0tc2l6ZS00LTEpIHZhcigtLXNpemUtNC0zKTtcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXRvcC1zdHlsZTogc29saWQ7XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci10b3Atd2lkdGg6IDFweDtcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLW0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC5jYWxsb3V0LXRpdGxlLWlubmVyIHtcbiAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogdmFyKC0tc2l6ZS00LTEpIDA7XG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMCB2YXIoLS1zaXplLTQtMSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLmNhbGxvdXQtaWNvbiB7XG4gICAgICAgICAgICAgICAgICAgIGFsaWduLXNlbGY6IHVuc2V0O1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDAgdmFyKC0tc2l6ZS00LTEpIDAgdmFyKC0tc2l6ZS00LTIpO1xuICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1yYWRpdXMtbSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLmNhbGxvdXQtZm9sZCB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgICAgIGFsaWduLXNlbGY6IHVuc2V0O1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiB1bnNldDtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IGF1dG87XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLmNhbGxvdXQtY29udGVudCB7XG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IHZhcigtLXNpemUtNC01KSB2YXIoLS1zaXplLTQtMykgdmFyKC0tc2l6ZS00LTEpIHZhcigtLXNpemUtNC0zKTtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogLTE2cHg7XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1yaWdodDogMXB4IHNvbGlkIHJnYmEodmFyKC0tY2FsbG91dC1jb2xvcikpO1xuICAgICAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgcmdiYSh2YXIoLS1jYWxsb3V0LWNvbG9yKSk7XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1sZWZ0OiAxcHggc29saWQgcmdiYSh2YXIoLS1jYWxsb3V0LWNvbG9yKSk7XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiB2YXIoLS1yYWRpdXMtbSk7XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6IHZhcigtLXJhZGl1cy1tKTtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSh2YXIoLS1jYWxsb3V0LWNvbG9yKSwgMCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLmNhbGxvdXQgcCB7XG4gICAgICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAnUGFsYXRpbm8nLCAnS2FpJywgJ1x1Njk3N1x1NEY1MycsIHNlcmlmO1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC5jYWxsb3V0LWhpZ2hsaWdodCB7XG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogaGlnaGxpZ2h0LXB1bHNlIDJzIGVhc2UtaW4tb3V0O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIEBrZXlmcmFtZXMgaGlnaGxpZ2h0LXB1bHNlIHtcbiAgICAgICAgICAgICAgICAgICAgMCUge1xuICAgICAgICAgICAgICAgICAgICAgICAgYm94LXNoYWRvdzogMCAwIDAgMCByZ2JhKHZhcigtLXRleHQtYWNjZW50LXJnYiksIDAuNCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgNzAlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCAwIDEwcHggcmdiYSh2YXIoLS10ZXh0LWFjY2VudC1yZ2IpLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAxMDAlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCAwIDAgcmdiYSh2YXIoLS10ZXh0LWFjY2VudC1yZ2IpLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8qIFx1NkRGQlx1NTJBMFx1NjI0MFx1NjcwOSBDYWxsb3V0IFx1N0M3Qlx1NTc4Qlx1NzY4NFx1NjgzN1x1NUYwRiAqL1xuICAgICAgICAgICAgICAgICR7dGhpcy5nZXRDYWxsb3V0VHlwZVN0eWxlcygpfVxuICAgICAgICAgICAgYDtcbiAgICAgICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVUYWcpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU2ODM3XHU1RjBGXHU2ODA3XHU3QjdFXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ1N0eWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhbGxvdXQtcHJpc20tc3R5bGVzJyk7XG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdTdHlsZSkge1xuICAgICAgICAgICAgICAgIGV4aXN0aW5nU3R5bGUucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTIzN1x1NjVCMFx1NjI0MFx1NjcwOVx1NTZGRVx1NjgwN1x1NEVFNVx1Nzg2RVx1NEZERFx1NUI4M1x1NEVFQ1x1Nzg2RVx1NjYzRVx1NzkzQVxuICAgICAgICB0aGlzLnJlZnJlc2hBbGxJY29ucygpO1xuICAgIH1cblxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NEUwMFx1NEUyQVx1NjVCMFx1NjVCOVx1NkNENVx1Njc2NVx1NzUxRlx1NjIxMFx1NjI0MFx1NjcwOSBDYWxsb3V0IFx1N0M3Qlx1NTc4Qlx1NzY4NFx1NjgzN1x1NUYwRlxuICAgIHByaXZhdGUgZ2V0Q2FsbG91dFR5cGVTdHlsZXMoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIGBcbiAgICAgICAgICAgIC8qIFR5cGUgMSAtIE5vdGUgKi9cbiAgICAgICAgICAgIGJvZHk6bm90KC5wdC1kaXNhYmxlLWNhbGxvdXQtc3R5bGluZykgLmNhbGxvdXRbZGF0YS1jYWxsb3V0PVwibm90ZVwiXSA+IC5jYWxsb3V0LXRpdGxlIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tY29sb3ItZ3JleS10ZXh0KTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1jb2xvci1ncmV5LWJhc2UpO1xuICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItZ3JleS10aW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJvZHk6bm90KC5wdC1kaXNhYmxlLWNhbGxvdXQtc3R5bGluZykgLmNhbGxvdXRbZGF0YS1jYWxsb3V0PVwibm90ZVwiXSA+IC5jYWxsb3V0LWNvbnRlbnQge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IGhzbGEodmFyKC0tY29sb3ItZ3JleS1iYXNlLWhzbCksIHZhcigtLWNhbGxvdXQtYmFja2dyb3VuZC1hbHBoYSkpO1xuICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tY29sb3ItZ3JleS10aW50KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLyogVHlwZSAyIC0gQWJzdHJhY3QvU3VtbWFyeS9UTERSICovXG4gICAgICAgICAgICBib2R5Om5vdCgucHQtZGlzYWJsZS1jYWxsb3V0LXN0eWxpbmcpIC5jYWxsb3V0OmlzKFtkYXRhLWNhbGxvdXQ9XCJhYnN0cmFjdFwiXSxbZGF0YS1jYWxsb3V0PVwic3VtbWFyeVwiXSxbZGF0YS1jYWxsb3V0PVwidGxkclwiXSkgPiAuY2FsbG91dC10aXRsZSB7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLWN5YW4tdGV4dCk7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItY3lhbi1iYXNlKTtcbiAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLWN5YW4tdGludCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBib2R5Om5vdCgucHQtZGlzYWJsZS1jYWxsb3V0LXN0eWxpbmcpIC5jYWxsb3V0OmlzKFtkYXRhLWNhbGxvdXQ9XCJhYnN0cmFjdFwiXSxbZGF0YS1jYWxsb3V0PVwic3VtbWFyeVwiXSxbZGF0YS1jYWxsb3V0PVwidGxkclwiXSkgPiAuY2FsbG91dC1jb250ZW50IHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBoc2xhKHZhcigtLWNvbG9yLWN5YW4tYmFzZS1oc2wpLCB2YXIoLS1jYWxsb3V0LWJhY2tncm91bmQtYWxwaGEpKTtcbiAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLWN5YW4tdGludCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIFx1N0VFN1x1N0VFRFx1NTJBMFx1NTE3Nlx1NEVENlx1N0M3Qlx1NTc4Qlx1NzY4NFx1NjgzN1x1NUYwRi4uLiAqL1xuICAgICAgICAgICAgLyogXHU4RkQ5XHU5MUNDXHU1M0VGXHU0RUU1XHU3RUU3XHU3RUVEXHU2REZCXHU1MkEwXHU1MTc2XHU0RUQ2XHU3QzdCXHU1NzhCXHU3Njg0XHU2ODM3XHU1RjBGXHVGRjBDXHU0RTBFXHU1MzlGXHU1OUNCIENTUyBcdTRGRERcdTYzMDFcdTRFMDBcdTgxRjQgKi9cbiAgICAgICAgYDtcbiAgICB9XG5cbiAgICAvLyBcdTZERkJcdTUyQTBcdTY2RjRcdTY1QjBcdTU2RkVcdTY4MDdcdTY2M0VcdTc5M0FcdTcyQjZcdTYwMDFcdTc2ODRcdTY1QjlcdTZDRDVcbiAgICBwcml2YXRlIHVwZGF0ZUNhbGxvdXRJY29uVmlzaWJpbGl0eSgpIHtcbiAgICAgICAgY29uc3QgYm9keUNsYXNzZXMgPSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdDtcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3Muc2hvd0NhbGxvdXRJY29uKSB7XG4gICAgICAgICAgICBib2R5Q2xhc3Nlcy5hZGQoJ3Nob3ctY2FsbG91dC1pY29uJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBib2R5Q2xhc3Nlcy5yZW1vdmUoJ3Nob3ctY2FsbG91dC1pY29uJyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIFx1NUYzOVx1OEY5M1x1NTE2NVx1Njg0Nlx1NzY4NCBNb2RhbFxuY2xhc3MgTWVzc2FnZUlucHV0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcGx1Z2luOiBDYWxsb3V0RXh0cmFNZXNzYWdlUGx1Z2luO1xuICAgIGNhbGxvdXRJZDogc3RyaW5nO1xuICAgIGlucHV0RWw6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gICAgbWVzc2FnZUluZGV4OiBudW1iZXI7ICAvLyBcdTZERkJcdTUyQTBcdTZEODhcdTYwNkZcdTdEMjJcdTVGMTVcdTVDNUVcdTYwMjdcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IENhbGxvdXRFeHRyYU1lc3NhZ2VQbHVnaW4sIGNhbGxvdXRJZDogc3RyaW5nLCBtZXNzYWdlSW5kZXg/OiBudW1iZXIpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuY2FsbG91dElkID0gY2FsbG91dElkO1xuICAgICAgICB0aGlzLm1lc3NhZ2VJbmRleCA9IG1lc3NhZ2VJbmRleDsgIC8vIFx1NEZERFx1NUI1OFx1NkQ4OFx1NjA2Rlx1N0QyMlx1NUYxNVxuICAgICAgICB0aGlzLmlucHV0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ21lc3NhZ2UtaW5wdXQtbW9kYWwnKTtcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHU3RjE2XHU4RjkxIENhbGxvdXQgXHU1OTA3XHU2Q0U4JyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjYyRlx1N0YxNlx1OEY5MVx1NzNCMFx1NjcwOVx1NkQ4OFx1NjA2Rlx1RkYwQ1x1NTIxOVx1NTg2Qlx1NTE0NVx1NURGMlx1NjcwOVx1NTE4NVx1NUJCOVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMubWVzc2FnZUluZGV4ID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZURhdGEgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tZXNzYWdlc1t0aGlzLmNhbGxvdXRJZF07XG4gICAgICAgICAgICBpZiAobWVzc2FnZURhdGE/Lm1lc3NhZ2VzPy5bdGhpcy5tZXNzYWdlSW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pbnB1dEVsLnZhbHVlID0gbWVzc2FnZURhdGEubWVzc2FnZXNbdGhpcy5tZXNzYWdlSW5kZXhdLnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuaW5wdXRFbC5yb3dzID0gMTA7XG4gICAgICAgIHRoaXMuaW5wdXRFbC5wbGFjZWhvbGRlciA9ICdcdThCRjdcdThGOTNcdTUxNjUgQ2FsbG91dCBcdTU5MDdcdTZDRThcdTRGRTFcdTYwNkYuLi4nO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7IFxuICAgICAgICAgICAgY2xzOiAnbWVzc2FnZS1pbnB1dC1tb2RhbC1idXR0b25zJyBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdcdTRGRERcdTVCNTgnLFxuICAgICAgICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHU1M0Q2XHU2RDg4JyBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2F2ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2F2ZU1lc3NhZ2UoKTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcblxuICAgICAgICBjb250ZW50RWwuYXBwZW5kQ2hpbGQodGhpcy5pbnB1dEVsKTtcbiAgICAgICAgY29udGVudEVsLmFwcGVuZENoaWxkKGJ1dHRvbkNvbnRhaW5lcik7XG4gICAgfVxuXG4gICAgYXN5bmMgc2F2ZU1lc3NhZ2UoKSB7XG4gICAgICAgIGNvbnN0IHRleHQgPSB0aGlzLmlucHV0RWwudmFsdWUudHJpbSgpO1xuICAgICAgICBpZiAoIXRleHQpIHJldHVybjtcblxuICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLm1lc3NhZ2VzW3RoaXMuY2FsbG91dElkXSkge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubWVzc2FnZXNbdGhpcy5jYWxsb3V0SWRdID0ge1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbXVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKTtcblxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTdGMTZcdThGOTFcdTczQjBcdTY3MDlcdTZEODhcdTYwNkZcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm1lc3NhZ2VJbmRleCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1lc3NhZ2VzW3RoaXMuY2FsbG91dElkXS5tZXNzYWdlc1t0aGlzLm1lc3NhZ2VJbmRleF0gPSB7XG4gICAgICAgICAgICAgICAgdGV4dCxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTY1QjBcdTZEODhcdTYwNkZcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1lc3NhZ2VzW3RoaXMuY2FsbG91dElkXS5tZXNzYWdlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0ZXh0LFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblxuICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTZEODhcdTYwNkZcdThCQTFcdTY1NzBcdTY2M0VcdTc5M0FcbiAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICAgIGlmIChhY3RpdmVWaWV3KSB7XG4gICAgICAgICAgICBjb25zdCBjYWxsb3V0ID0gYWN0aXZlVmlldy5jb250ZW50RWwucXVlcnlTZWxlY3RvcihcbiAgICAgICAgICAgICAgICBgW2RhdGEtY2FsbG91dC1pZD1cIiR7dGhpcy5jYWxsb3V0SWR9XCJdYFxuICAgICAgICAgICAgKT8uY2xvc2VzdCgnLmNhbGxvdXQnKTtcbiAgICAgICAgICAgIGlmIChjYWxsb3V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi51cGRhdGVDYWxsb3V0TWVzc2FnZUNvdW50KGNhbGxvdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHU1MjM3XHU2NUIwXHU2RDg4XHU2MDZGXHU4OUM2XHU1NkZFXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VWaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShDQUxMX09VVF9NRVNTQUdFX1ZJRVcpWzBdPy52aWV3IGFzIENhbGxvdXRNZXNzYWdlVmlldztcbiAgICAgICAgaWYgKG1lc3NhZ2VWaWV3KSB7XG4gICAgICAgICAgICBtZXNzYWdlVmlldy5kaXNwbGF5TWVzc2FnZXMoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBcdTdCNDlcdTVGODVcdTkxQ0RcdTY1QjBcdTYyNTNcdTVGMDBcdTdCMTRcdThCQjBcdTVCOENcdTYyMTBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnJlb3BlbkN1cnJlbnROb3RlKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdcdTkxQ0RcdTY1QjBcdTYyNTNcdTVGMDBcdTdCMTRcdThCQjBcdTU5MzFcdThEMjU6JywgZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLmNsb3NlKCk7IC8vIFx1NTE3M1x1OTVFRFx1NkEyMVx1NjAwMVx1Njg0NlxuICAgIH1cblxuXG4gICAgcHJpdmF0ZSB1cGRhdGVBbGxDYWxsb3V0Q291bnRzKGNhbGxvdXRJZDogc3RyaW5nKSB7XG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NjI0MFx1NjcwOVx1NzZGOFx1NTE3M1x1NzY4NCBDYWxsb3V0IFx1NTE0M1x1N0QyMFxuICAgICAgICBjb25zdCBtYXJrZG93blZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICBpZiAoIW1hcmtkb3duVmlldykgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IGNhbGxvdXRzID0gbWFya2Rvd25WaWV3LmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FsbG91dCcpO1xuICAgICAgICBjYWxsb3V0cy5mb3JFYWNoKGNhbGxvdXQgPT4ge1xuICAgICAgICAgICAgaWYgKGNhbGxvdXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy5wbHVnaW4uZ2V0Q2FsbG91dElkKGNhbGxvdXQpO1xuICAgICAgICAgICAgICAgIGlmIChpZCA9PT0gY2FsbG91dElkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGNhbGxvdXQucXVlcnlTZWxlY3RvcignLmNhbGxvdXQtbWVzc2FnZS1pY29uLWNvbnRhaW5lcicpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29udGFpbmVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnVwZGF0ZU1lc3NhZ2VDb3VudChjYWxsb3V0LCBjb250YWluZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufVxuXG4vLyBcdTUzRjNcdTRGQTdcdTk3NjJcdTY3N0ZcdTU2RkVcdUZGMENcdTY2M0VcdTc5M0EgQ2FsbG91dCBcdTZEODhcdTYwNkZcbmV4cG9ydCBjbGFzcyBDYWxsb3V0TWVzc2FnZVZpZXcgZXh0ZW5kcyBWaWV3IHtcbiAgICBwcml2YXRlIGN1cnJlbnRDYWxsb3V0SWQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAgIHByaXZhdGUgdmlld01vZGU6ICdhbGwnIHwgJ3NpbmdsZScgPSAnYWxsJztcbiAgICBwcml2YXRlIG1lc3NhZ2VDb250YWluZXI6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgYnV0dG9uQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgICBwbHVnaW46IENhbGxvdXRFeHRyYU1lc3NhZ2VQbHVnaW47XG5cbiAgICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IENhbGxvdXRFeHRyYU1lc3NhZ2VQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIobGVhZik7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmVtcHR5KCk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLmluaXRpYWxpemVCdXR0b25zKCk7XG4gICAgICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCdjYWxsb3V0LW1lc3NhZ2VzLWNvbnRhaW5lcicpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU3NkQxXHU1NDJDXHU2RDNCXHU1MkE4XHU4OUM2XHU1NkZFXHU1M0Q4XHU1MzE2XG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignYWN0aXZlLWxlYWYtY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZXdNb2RlID09PSAnYWxsJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlNZXNzYWdlcygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gXHU3NkQxXHU1NDJDXHU3RjE2XHU4RjkxXHU1NjY4XHU1MTg1XHU1QkI5XHU1M0Q4XHU1MzE2XG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignZWRpdG9yLWNoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgIC8vIFx1NkRGQlx1NTJBMFx1NUVGNlx1NjVGNlx1NEVFNVx1Nzg2RVx1NEZERCBET00gXHU2NkY0XHU2NUIwXHU1QjhDXHU2MjEwXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZXdNb2RlID09PSAnYWxsJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5TWVzc2FnZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIFx1NzZEMVx1NTQyQ1x1NjU4N1x1NEVGNlx1NjI1M1x1NUYwMFxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQoXG4gICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub24oJ2ZpbGUtb3BlbicsICgpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52aWV3TW9kZSA9PT0gJ2FsbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5TWVzc2FnZXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjVCMFx1NzY4NFx1NEU4Qlx1NEVGNlx1NzZEMVx1NTQyQ1x1RkYxQVx1NzZEMVx1NTQyQyBET00gXHU1M0Q4XHU1MzE2XG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignbGF5b3V0LWNoYW5nZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmlld01vZGUgPT09ICdhbGwnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlNZXNzYWdlcygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gXHU1MjFEXHU1OUNCXHU1MzE2XHU2NjNFXHU3OTNBXHU1RjUzXHU1MjREXHU3QjE0XHU4QkIwXHU3Njg0XHU2RDg4XHU2MDZGXG4gICAgICAgIGlmICh0aGlzLnZpZXdNb2RlID09PSAnYWxsJykge1xuICAgICAgICAgICAgdGhpcy5kaXNwbGF5TWVzc2FnZXMoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdGlhbGl6ZUJ1dHRvbnMoKSB7XG4gICAgICAgIHRoaXMuYnV0dG9uQ29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoJ3ZpZXctYnV0dG9ucy1yb3cnKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGFsbEJ1dHRvbiA9IHRoaXMuYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICBjbHM6IHRoaXMudmlld01vZGUgPT09ICdhbGwnID8gJ21vZC1jdGEnIDogJydcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFcdTVCQjlcdTU2NjhcdTY3NjVcdTU3ODJcdTc2RjRcdTYzOTJcdTUyMTdcdTY1ODdcdTY3MkNcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGVudCA9IGFsbEJ1dHRvbi5jcmVhdGVEaXYoe1xuICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgIHN0eWxlOiAnZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgYWxpZ24taXRlbXM6IGNlbnRlcjsgZ2FwOiA0cHg7J1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NEUzQlx1ODk4MVx1NjU4N1x1NjcyQ1xuICAgICAgICBjb25zdCBtYWluVGV4dCA9IGJ1dHRvbkNvbnRlbnQuY3JlYXRlRGl2KCk7XG4gICAgICAgIG1haW5UZXh0LnRleHRDb250ZW50ID0gJ1x1NjYzRVx1NzkzQVx1NjIxNlx1NTIzN1x1NjVCMFx1NjI0MFx1NjcwOWNhbGxvdXRcdTdCMTRcdThCQjAnO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU3RUEyXHU4MjcyXHU1MkEwXHU3Qzk3XHU3Njg0XHU2M0QwXHU3OTNBXHU2NTg3XHU2NzJDXHVGRjA4XHU2NUIwXHU4RDc3XHU0RTAwXHU4ODRDXHVGRjA5XG4gICAgICAgIGNvbnN0IHRpcFRleHQgPSBidXR0b25Db250ZW50LmNyZWF0ZURpdigpO1xuICAgICAgICB0aXBUZXh0LmlubmVySFRNTCA9ICc8c3Ryb25nIHN0eWxlPVwiY29sb3I6IHJlZDsgZm9udC1zaXplOiAwLjllbTtcIj5cdTI3MDVcdTcwQjlcdTUxRkJcdTdCMTRcdThCQjBcdTc1NENcdTk3NjJcdTRFRkJcdTYxMEZcdTUzM0FcdTU3REY8L3N0cm9uZz4nO1xuXG4vLyBcdTdCMkNcdTRFOENcdTRFMkFcdTYzMDlcdTk0QUVcbmNvbnN0IHNpbmdsZUJ1dHRvbiA9IHRoaXMuYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgY2xzOiB0aGlzLnZpZXdNb2RlID09PSAnc2luZ2xlJyA/ICdtb2QtY3RhJyA6ICcnXG59KTtcblxuLy8gXHU0RTNBXHU3QjJDXHU0RThDXHU0RTJBXHU2MzA5XHU5NEFFXHU1MjFCXHU1RUZBXHU3NkY4XHU1NDBDXHU2ODM3XHU1RjBGXHU3Njg0XHU1QkI5XHU1NjY4XG5jb25zdCBzaW5nbGVCdXR0b25Db250ZW50ID0gc2luZ2xlQnV0dG9uLmNyZWF0ZURpdih7XG4gICAgYXR0cjoge1xuICAgICAgICBzdHlsZTogJ2Rpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGdhcDogNHB4OydcbiAgICB9XG59KTtcblxuLy8gXHU2REZCXHU1MkEwXHU0RTNCXHU4OTgxXHU2NTg3XHU2NzJDXG5jb25zdCBzaW5nbGVNYWluVGV4dCA9IHNpbmdsZUJ1dHRvbkNvbnRlbnQuY3JlYXRlRGl2KCk7XG5zaW5nbGVNYWluVGV4dC50ZXh0Q29udGVudCA9ICdcdTY2M0VcdTc5M0FcdTYyMTZcdTUyMzdcdTY1QjBcdTUzNTVcdTRFMkFDYWxsb3V0XHU3QjE0XHU4QkIwJztcblxuLy8gXHU2REZCXHU1MkEwXHU3RUZGXHU4MjcyXHU1MkEwXHU3Qzk3XHU3Njg0XHU2M0QwXHU3OTNBXHU2NTg3XHU2NzJDXHVGRjA4XHU2NUIwXHU4RDc3XHU0RTAwXHU4ODRDXHVGRjA5XG5jb25zdCBzaW5nbGVUaXBUZXh0ID0gc2luZ2xlQnV0dG9uQ29udGVudC5jcmVhdGVEaXYoKTtcbnNpbmdsZVRpcFRleHQuaW5uZXJIVE1MID0gJzxzdHJvbmcgc3R5bGU9XCJjb2xvcjogIzJlY2M3MTsgZm9udC1zaXplOiAwLjllbTtcIj5cdUQ4M0RcdURDOTlcdTcwQjlcdTUxRkJcdTdCMTRcdThCQjBcdTUzRjNcdTRFMEFcdTg5RDJcdTc2ODRcdTY1NzBcdTVCNTc8L3N0cm9uZz4nO1xuXG4gICAgICAgIGFsbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3dpdGNoVG9BbGxNb2RlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNpbmdsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRDYWxsb3V0SWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN3aXRjaFRvU2luZ2xlTW9kZSh0aGlzLmN1cnJlbnRDYWxsb3V0SWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTcwQjlcdTUxRkIgQ2FsbG91dCBcdTUzRjNcdTRFMEFcdTg5RDJcdTc2ODRcdTY1NzBcdTVCNTdcdTY3NjVcdTY3RTVcdTc3MEJcdTUzNTVcdTRFMkEgQ2FsbG91dCBcdTc2ODRcdTU5MDdcdTZDRTgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1QkZDXHU1MUZBXHU2MzA5XHU5NEFFXHU4ODRDXG4gICAgICAgIGNvbnN0IGV4cG9ydEJ1dHRvblJvdyA9IHRoaXMuYnV0dG9uQ29udGFpbmVyLmNyZWF0ZURpdignZXhwb3J0LWJ1dHRvbi1yb3cnKTtcbiAgICAgICAgY29uc3QgZXhwb3J0QnV0dG9uID0gZXhwb3J0QnV0dG9uUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnXHU1QkZDXHU1MUZBXHU3QjE0XHU4QkIwJyxcbiAgICAgICAgICAgIGNsczogJ2V4cG9ydC1idXR0b24nXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV4cG9ydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZXhwb3J0VG9QREYoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHU0RkVFXHU2NTM5IHN3aXRjaFZpZXdNb2RlIFx1NjVCOVx1NkNENVxuICAgIHB1YmxpYyBzd2l0Y2hWaWV3TW9kZShtb2RlOiAnYWxsJyB8ICdzaW5nbGUnLCBhY3RpdmVCdXR0b246IEhUTUxFbGVtZW50LCBpbmFjdGl2ZUJ1dHRvbjogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy52aWV3TW9kZSA9IG1vZGU7XG4gICAgICAgIGFjdGl2ZUJ1dHRvbi5hZGRDbGFzcygnbW9kLWN0YScpO1xuICAgICAgICBpbmFjdGl2ZUJ1dHRvbi5yZW1vdmVDbGFzcygnbW9kLWN0YScpO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5tZXNzYWdlQ29udGFpbmVyLmVtcHR5KCk7XG4gICAgICAgIGlmIChtb2RlID09PSAnc2luZ2xlJykge1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudENhbGxvdXRJZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheU1lc3NhZ2VzKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NzBCOVx1NTFGQiBDYWxsb3V0IFx1NTNGM1x1NEUwQVx1ODlEMlx1NzY4NFx1NjU3MFx1NUI1N1x1Njc2NVx1NjdFNVx1NzcwQlx1NTM1NVx1NEUyQSBDYWxsb3V0IFx1NzY4NFx1NTkwN1x1NkNFOCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdhbGwnKSB7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlNZXNzYWdlcygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHU0RkVFXHU2NTM5IHN3aXRjaFRvQWxsTW9kZSBcdTY1QjlcdTZDRDVcbiAgICBwdWJsaWMgc3dpdGNoVG9BbGxNb2RlKCkge1xuICAgICAgICB0aGlzLnZpZXdNb2RlID0gJ2FsbCc7XG4gICAgICAgIHRoaXMuY3VycmVudENhbGxvdXRJZCA9IG51bGw7IC8vIFx1OTFDRFx1ODk4MVx1RkYxQVx1NkUwNVx1OTY2NFx1NUY1M1x1NTI0RFx1OTAwOVx1NEUyRFx1NzY4NCBDYWxsb3V0XG4gICAgICAgIHRoaXMudXBkYXRlQnV0dG9uU3RhdGVzKCk7XG4gICAgICAgIHRoaXMucmVmcmVzaFZpZXcoKTtcbiAgICB9XG5cbiAgICAvLyBcdTRGRUVcdTY1Mzkgc3dpdGNoVG9TaW5nbGVNb2RlIFx1NjVCOVx1NkNENVxuICAgIHB1YmxpYyBzd2l0Y2hUb1NpbmdsZU1vZGUoY2FsbG91dElkPzogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMudmlld01vZGUgPSAnc2luZ2xlJztcbiAgICAgICAgdGhpcy5jdXJyZW50Q2FsbG91dElkID0gY2FsbG91dElkO1xuICAgICAgICB0aGlzLnVwZGF0ZUJ1dHRvblN0YXRlcygpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2RTA1XHU3QTdBXHU2RDg4XHU2MDZGXHU1QkI5XHU1NjY4XG4gICAgICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFjYWxsb3V0SWQpIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NzBCOVx1NTFGQiBDYWxsb3V0IFx1NTNGM1x1NEUwQVx1ODlEMlx1NzY4NFx1NjU3MFx1NUI1N1x1Njc2NVx1NjdFNVx1NzcwQlx1NTM1NVx1NEUyQSBDYWxsb3V0IFx1NzY4NFx1NTkwN1x1NkNFOCcpO1xuICAgICAgICAgICAgcmV0dXJuOyAvLyBcdTRFMERcdTY2M0VcdTc5M0FcdTk3NjJcdTY3N0ZcdTY1ODdcdTVCNTdcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU2RDg4XHU2MDZGXHU2NTcwXHU2MzZFXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VEYXRhID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubWVzc2FnZXNbY2FsbG91dElkXTtcbiAgICAgICAgaWYgKG1lc3NhZ2VEYXRhPy5tZXNzYWdlcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJNZXNzYWdlcyhjYWxsb3V0SWQsIG1lc3NhZ2VEYXRhKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd0VtcHR5TWVzc2FnZSgnXHU4QkU1IENhbGxvdXQgXHU2NjgyXHU2NUUwXHU1OTA3XHU2Q0U4Jyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgc2V0Q3VycmVudENhbGxvdXQoY2FsbG91dElkOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50Q2FsbG91dElkID0gY2FsbG91dElkO1xuICAgICAgICB0aGlzLnZpZXdNb2RlID0gJ3NpbmdsZSc7XG4gICAgICAgIHRoaXMudXBkYXRlQnV0dG9uU3RhdGVzKCk7XG4gICAgICAgIHRoaXMuZGlzcGxheU1lc3NhZ2VzKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVCdXR0b25TdGF0ZXMoKSB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbnMgPSB0aGlzLmJ1dHRvbkNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKTtcbiAgICAgICAgYnV0dG9uc1swXS50b2dnbGVDbGFzcygnbW9kLWN0YScsIHRoaXMudmlld01vZGUgPT09ICdhbGwnKTtcbiAgICAgICAgYnV0dG9uc1sxXS50b2dnbGVDbGFzcygnbW9kLWN0YScsIHRoaXMudmlld01vZGUgPT09ICdzaW5nbGUnKTtcbiAgICB9XG5cbiAgICAvLyBcdTRGRUVcdTY1MzkgZGlzcGxheU1lc3NhZ2VzIFx1NjVCOVx1NkNENVxuICAgIHB1YmxpYyBkaXNwbGF5TWVzc2FnZXMoKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICBpZiAoIWFjdGl2ZVZpZXcpIHJldHVybjtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NkUwNVx1N0E3QVx1NkQ4OFx1NjA2Rlx1NUJCOVx1NTY2OFxuICAgICAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NjU4N1x1Njg2M1x1NEUyRFx1NjI0MFx1NjcwOVx1NzY4NCBDYWxsb3V0IFx1NTE0M1x1N0QyMFxuICAgICAgICBjb25zdCBjYWxsb3V0cyA9IGFjdGl2ZVZpZXcuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYWxsb3V0Jyk7XG4gICAgICAgIGNvbnN0IGN1cnJlbnRDYWxsb3V0SWRzID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTY1MzZcdTk2QzZcdTYyNDBcdTY3MDkgQ2FsbG91dCBcdTc2ODQgSURcbiAgICAgICAgY2FsbG91dHMuZm9yRWFjaChjYWxsb3V0ID0+IHtcbiAgICAgICAgICAgIGlmIChjYWxsb3V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHRoaXMuZ2V0Q2FsbG91dElkRnJvbUVsZW1lbnQoY2FsbG91dCk7XG4gICAgICAgICAgICAgICAgaWYgKGlkKSBjdXJyZW50Q2FsbG91dElkcy5hZGQoaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBtZXNzYWdlcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm1lc3NhZ2VzO1xuICAgICAgICBcbiAgICAgICAgaWYgKHRoaXMudmlld01vZGUgPT09ICdzaW5nbGUnICYmIHRoaXMuY3VycmVudENhbGxvdXRJZCkge1xuICAgICAgICAgICAgLy8gXHU1MzU1XHU0RTJBIENhbGxvdXQgXHU2NjNFXHU3OTNBXHU2QTIxXHU1RjBGXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlRGF0YSA9IG1lc3NhZ2VzW3RoaXMuY3VycmVudENhbGxvdXRJZF07XG4gICAgICAgICAgICBpZiAobWVzc2FnZURhdGE/Lm1lc3NhZ2VzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJNZXNzYWdlcyh0aGlzLmN1cnJlbnRDYWxsb3V0SWQsIG1lc3NhZ2VEYXRhKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RW1wdHlNZXNzYWdlKCdcdThCRTUgQ2FsbG91dCBcdTY2ODJcdTY1RTBcdTU5MDdcdTZDRTgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnZpZXdNb2RlID09PSAnYWxsJykge1xuICAgICAgICAgICAgLy8gXHU2NjNFXHU3OTNBXHU2MjQwXHU2NzA5IENhbGxvdXQgXHU3Njg0XHU2RDg4XHU2MDZGXG4gICAgICAgICAgICBsZXQgaGFzTWVzc2FnZXMgPSBmYWxzZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU5MDREXHU1Mzg2XHU1RjUzXHU1MjREXHU2NTg3XHU2ODYzXHU0RTJEXHU3Njg0XHU2MjQwXHU2NzA5IENhbGxvdXRcbiAgICAgICAgICAgIGN1cnJlbnRDYWxsb3V0SWRzLmZvckVhY2goY2FsbG91dElkID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlRGF0YSA9IG1lc3NhZ2VzW2NhbGxvdXRJZF07XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VEYXRhPy5tZXNzYWdlcz8ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBcdTRFM0FcdTZCQ0ZcdTRFMkEgQ2FsbG91dCBcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFcdTUyMDZcdTdFQzRcdTVCQjlcdTU2NjhcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ3JvdXBDb250YWluZXIgPSB0aGlzLm1lc3NhZ2VDb250YWluZXIuY3JlYXRlRGl2KCdjYWxsb3V0LW1lc3NhZ2UtZ3JvdXAnKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTIwNlx1N0VDNFx1NjgwN1x1OTg5OFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cFRpdGxlID0gZ3JvdXBDb250YWluZXIuY3JlYXRlRGl2KCdjYWxsb3V0LW1lc3NhZ2UtZ3JvdXAtdGl0bGUnKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FsbG91dENvbmZpZyA9IHRoaXMuZ2V0Q2FsbG91dENvbmZpZ0Zvck1lc3NhZ2UoY2FsbG91dElkKTtcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBUaXRsZS5zdHlsZS5jb2xvciA9IGNhbGxvdXRDb25maWcuY29sb3I7XG4gICAgICAgICAgICAgICAgICAgIGdyb3VwVGl0bGUuc3R5bGUuYm9yZGVyQm90dG9tID0gYDJweCBzb2xpZCAke2NhbGxvdXRDb25maWcuY29sb3J9YDtcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBUaXRsZS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMTBweCc7XG4gICAgICAgICAgICAgICAgICAgIGdyb3VwVGl0bGUuc3R5bGUucGFkZGluZ0JvdHRvbSA9ICc1cHgnO1xuICAgICAgICAgICAgICAgICAgICBncm91cFRpdGxlLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XG4gICAgICAgICAgICAgICAgICAgIGdyb3VwVGl0bGUudGV4dENvbnRlbnQgPSBgJHtjYWxsb3V0Q29uZmlnLm5hbWV9IFx1NzY4NFx1NTkwN1x1NkNFOGA7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2RTMyXHU2N0QzXHU4QkU1IENhbGxvdXQgXHU3Njg0XHU2MjQwXHU2NzA5XHU2RDg4XHU2MDZGXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VEYXRhLm1lc3NhZ2VzLmZvckVhY2goKG1lc3NhZ2UsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlRWwgPSB0aGlzLmNyZWF0ZU1lc3NhZ2VFbGVtZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxvdXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VEYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxvdXRDb25maWdcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cENvbnRhaW5lci5hcHBlbmRDaGlsZChtZXNzYWdlRWwpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGhhc01lc3NhZ2VzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5XHU0RUZCXHU0RjU1XHU2RDg4XHU2MDZGXHVGRjBDXHU2NjNFXHU3OTNBXHU3QTdBXHU2RDg4XHU2MDZGXHU2M0QwXHU3OTNBXG4gICAgICAgICAgICBpZiAoIWhhc01lc3NhZ2VzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93RW1wdHlNZXNzYWdlKCdcdTVGNTNcdTUyNERcdTY1ODdcdTY4NjNcdTRFMkRcdTZDQTFcdTY3MDkgQ2FsbG91dCBcdTU5MDdcdTZDRTgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1NjVCMFx1NTg5RVx1RkYxQVx1NkQ4OFx1NjA2Rlx1NkUzMlx1NjdEM1x1NjVCOVx1NkNENVxuICAgIHByaXZhdGUgcmVuZGVyTWVzc2FnZXMoY2FsbG91dElkOiBzdHJpbmcsIG1lc3NhZ2VEYXRhOiBNZXNzYWdlRGF0YSkge1xuICAgICAgICBpZiAoIW1lc3NhZ2VEYXRhPy5tZXNzYWdlcykgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2RTA1XHU3QTdBXHU3M0IwXHU2NzA5XHU1MTg1XHU1QkI5XG4gICAgICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2IENhbGxvdXQgXHU5MTREXHU3RjZFXG4gICAgICAgIGNvbnN0IGNhbGxvdXRDb25maWcgPSB0aGlzLmdldENhbGxvdXRDb25maWdGb3JNZXNzYWdlKGNhbGxvdXRJZCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTZFMzJcdTY3RDNcdTZCQ0ZcdTY3NjFcdTZEODhcdTYwNkZcbiAgICAgICAgbWVzc2FnZURhdGEubWVzc2FnZXMuZm9yRWFjaCgobWVzc2FnZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VFbCA9IHRoaXMuY3JlYXRlTWVzc2FnZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgY2FsbG91dElkLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgICAgbWVzc2FnZURhdGEsXG4gICAgICAgICAgICAgICAgY2FsbG91dENvbmZpZ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChtZXNzYWdlRWwpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdTY1QjBcdTU4OUVcdUZGMUFcdTUzNTVcdTRFMkFcdTZEODhcdTYwNkZcdTUxNDNcdTdEMjBcdTUyMUJcdTVFRkFcdTY1QjlcdTZDRDVcbiAgICBwcml2YXRlIGNyZWF0ZU1lc3NhZ2VFbGVtZW50KFxuICAgICAgICBjYWxsb3V0SWQ6IHN0cmluZywgXG4gICAgICAgIG1lc3NhZ2U6IHsgdGV4dDogc3RyaW5nOyB0aW1lc3RhbXA6IHN0cmluZyB9LCBcbiAgICAgICAgaW5kZXg6IG51bWJlcixcbiAgICAgICAgbWVzc2FnZURhdGE6IE1lc3NhZ2VEYXRhLFxuICAgICAgICBjYWxsb3V0Q29uZmlnOiBDYWxsb3V0Q29uZmlnXG4gICAgKTogSFRNTEVsZW1lbnQge1xuICAgICAgICBjb25zdCBtZXNzYWdlRWwgPSBjcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdjYWxsb3V0LW1lc3NhZ2UtaXRlbScgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdThCQkVcdTdGNkVcdTY4MzdcdTVGMEZcbiAgICAgICAgT2JqZWN0LmFzc2lnbihtZXNzYWdlRWwuc3R5bGUsIHtcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpcy5hZGp1c3RDb2xvcihjYWxsb3V0Q29uZmlnLmNvbG9yLCAwLjEpLFxuICAgICAgICAgICAgYm9yZGVyTGVmdDogYDRweCBzb2xpZCAke2NhbGxvdXRDb25maWcuY29sb3J9YCxcbiAgICAgICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsXG4gICAgICAgICAgICBtYXJnaW46ICcxMHB4IDAnLFxuICAgICAgICAgICAgcGFkZGluZzogJzEycHgnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjgwN1x1OTg5OFx1NTMzQVx1NTdERlxuICAgICAgICBjb25zdCB0aXRsZUVsID0gbWVzc2FnZUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2NhbGxvdXQtbWVzc2FnZS10aXRsZScgfSk7XG4gICAgICAgIGNvbnN0IHRpdGxlVGV4dCA9IHRpdGxlRWwuY3JlYXRlRWwoJ3NwYW4nLCB7XG4gICAgICAgICAgICB0ZXh0OiBjYWxsb3V0Q29uZmlnLm5hbWUsXG4gICAgICAgICAgICBjbHM6ICdjYWxsb3V0LXRpdGxlLXRleHQnXG4gICAgICAgIH0pO1xuICAgICAgICB0aXRsZVRleHQuc3R5bGUuY29sb3IgPSBjYWxsb3V0Q29uZmlnLmNvbG9yO1xuICAgICAgICB0aXRsZVRleHQuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcblxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTYzMDlcdTk0QUVcdTVCQjlcdTU2NjhcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gdGl0bGVFbC5jcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdjYWxsb3V0LW1lc3NhZ2UtYnV0dG9ucycgfSk7XG5cbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU3RjE2XHU4RjkxXHU2MzA5XHU5NEFFXG4gICAgICAgIGNvbnN0IGVkaXRCdXR0b24gPSB0aGlzLmNyZWF0ZUJ1dHRvbihidXR0b25Db250YWluZXIsICdcdTdGMTZcdThGOTEnLCBjYWxsb3V0Q29uZmlnLmNvbG9yKTtcbiAgICAgICAgZWRpdEJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcbiAgICAgICAgICAgIG1vZGFsLnRpdGxlRWwuc2V0VGV4dCgnXHU3RjE2XHU4RjkxIENhbGxvdXQgXHU1OTA3XHU2Q0U4Jyk7XG4gICAgICAgICAgICBtb2RhbC5jb250YWluZXJFbC5hZGRDbGFzcygnY2FsbG91dC1tZXNzYWdlLW1vZGFsJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjU4N1x1NjcyQ1x1NTMzQVx1NTdERlx1NUJCOVx1NTY2OFxuICAgICAgICAgICAgY29uc3QgdGV4dEFyZWFDb250YWluZXIgPSBtb2RhbC5jb250ZW50RWwuY3JlYXRlRGl2KCdjYWxsb3V0LW1lc3NhZ2UtdGV4dGFyZWEtY29udGFpbmVyJyk7XG4gICAgICAgICAgICB0ZXh0QXJlYUNvbnRhaW5lci5zdHlsZS5tYXJnaW4gPSAnMjBweCAwJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2NTg3XHU2NzJDXHU1MzNBXHU1N0RGXG4gICAgICAgICAgICBjb25zdCB0ZXh0QXJlYSA9IHRleHRBcmVhQ29udGFpbmVyLmNyZWF0ZUVsKCd0ZXh0YXJlYScsIHtcbiAgICAgICAgICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnXHU4QkY3XHU4RjkzXHU1MTY1IENhbGxvdXQgXHU1OTA3XHU2Q0U4XHU0RkUxXHU2MDZGLi4uJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2xzOiAnY2FsbG91dC1tZXNzYWdlLXRleHRhcmVhJyxcbiAgICAgICAgICAgICAgICB2YWx1ZTogbWVzc2FnZS50ZXh0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1QjlFXHU2NUY2XHU2NkY0XHU2NUIwXHU3NkQxXHU1NDJDXG4gICAgICAgICAgICB0ZXh0QXJlYS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdUZXh0ID0gdGV4dEFyZWEudmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgICAgIGlmIChuZXdUZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NUI5RVx1NjVGNlx1NjZGNFx1NjVCMFx1NkQ4OFx1NjA2Rlx1NTE4NVx1NUJCOVxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlRGF0YS5tZXNzYWdlc1tpbmRleF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiBuZXdUZXh0LFxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKClcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NUI5RVx1NjVGNlx1NjZGNFx1NjVCMFx1ODlDNlx1NTZGRVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlNZXNzYWdlcygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdThCQkVcdTdGNkVcdTY1ODdcdTY3MkNcdTUzM0FcdTU3REZcdTY4MzdcdTVGMEZcbiAgICAgICAgICAgIHRleHRBcmVhLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICAgICAgdGV4dEFyZWEuc3R5bGUubWluSGVpZ2h0ID0gJzE1MHB4JztcbiAgICAgICAgICAgIHRleHRBcmVhLnN0eWxlLnBhZGRpbmcgPSAnMTBweCc7XG4gICAgICAgICAgICB0ZXh0QXJlYS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNHB4JztcbiAgICAgICAgICAgIHRleHRBcmVhLnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpJztcbiAgICAgICAgICAgIHRleHRBcmVhLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpJztcbiAgICAgICAgICAgIHRleHRBcmVhLnN0eWxlLnJlc2l6ZSA9ICd2ZXJ0aWNhbCc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjMwOVx1OTRBRVx1NUJCOVx1NTY2OFxuICAgICAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gbW9kYWwuY29udGVudEVsLmNyZWF0ZURpdignYnV0dG9uLWNvbnRhaW5lcicpO1xuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnZmxleC1lbmQnO1xuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmdhcCA9ICcxMHB4JztcbiAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3AgPSAnMjBweCc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NEZERFx1NUI1OFx1NjMwOVx1OTRBRVxuICAgICAgICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgICAgIHRleHQ6ICdcdTRGRERcdTVCNTgnLFxuICAgICAgICAgICAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNhdmVCdXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWludGVyYWN0aXZlLWFjY2VudCknO1xuICAgICAgICAgICAgc2F2ZUJ1dHRvbi5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW9uLWFjY2VudCknO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTUzRDZcdTZEODhcdTYzMDlcdTk0QUVcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgICAgIHRleHQ6ICdcdTUzRDZcdTZEODgnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU0RkREXHU1QjU4XHU2MzA5XHU5NEFFXHU3MEI5XHU1MUZCXHU0RThCXHU0RUY2XG4gICAgICAgICAgICBzYXZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1RleHQgPSB0ZXh0QXJlYS52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFuZXdUZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NTkwN1x1NkNFOFx1NTE4NVx1NUJCOVx1NEUwRFx1ODBGRFx1NEUzQVx1N0E3QScpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFx1NjcwMFx1N0VDOFx1NEZERFx1NUI1OFx1OEJCRVx1N0Y2RVxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NkQ4OFx1NjA2Rlx1OEJBMVx1NjU3MFxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQWxsQ2FsbG91dENvdW50cyhjYWxsb3V0SWQpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFx1NTE3M1x1OTVFRFx1NkEyMVx1NjAwMVx1Njg0NlxuICAgICAgICAgICAgICAgIG1vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1OTA3XHU2Q0U4XHU1REYyXHU2NkY0XHU2NUIwJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU1M0Q2XHU2RDg4XHU2MzA5XHU5NEFFXHU3MEI5XHU1MUZCXHU0RThCXHU0RUY2XG4gICAgICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTc4NkVcdTRGRERcdTUxODVcdTVCQjlcdTg4QUJcdThCQkVcdTdGNkVcdTVFNzZcdTgwNUFcdTcxMjZcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRleHRBcmVhLnZhbHVlID0gbWVzc2FnZS50ZXh0O1xuICAgICAgICAgICAgICAgIHRleHRBcmVhLmZvY3VzKCk7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbW9kYWwub3BlbigpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NTIyMFx1OTY2NFx1NjMwOVx1OTRBRVxuICAgICAgICBjb25zdCBkZWxldGVCdXR0b24gPSB0aGlzLmNyZWF0ZUJ1dHRvbihidXR0b25Db250YWluZXIsICdcdTUyMjBcdTk2NjQnLCAnI2ZmNDQ0NCcpO1xuICAgICAgICBkZWxldGVCdXR0b24ub25jbGljayA9IGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgICAgICAvLyBcdTdBQ0JcdTUzNzNcdTRFQ0VcdTY1NzBcdTdFQzRcdTRFMkRcdTc5RkJcdTk2NjRcdTZEODhcdTYwNkZcbiAgICAgICAgICAgIG1lc3NhZ2VEYXRhLm1lc3NhZ2VzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1N0FDQlx1NTM3M1x1NjZGNFx1NjVCMFx1ODlDNlx1NTZGRVxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5TWVzc2FnZXMoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU3MTM2XHU1NDBFXHU0RkREXHU1QjU4XHU4QkJFXHU3RjZFXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU2RDg4XHU2MDZGXHU4QkExXHU2NTcwXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUFsbENhbGxvdXRDb3VudHMoY2FsbG91dElkKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1OTA3XHU2Q0U4XHU1REYyXHU1MjIwXHU5NjY0Jyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU1MTg1XHU1QkI5XHU1MzNBXHU1N0RGXG4gICAgICAgIGNvbnN0IGNvbnRlbnRFbCA9IG1lc3NhZ2VFbC5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgY2xzOiAnY2FsbG91dC1tZXNzYWdlLWNvbnRlbnQnLFxuICAgICAgICAgICAgdGV4dDogbWVzc2FnZS50ZXh0XG4gICAgICAgIH0pO1xuICAgICAgICBjb250ZW50RWwuc3R5bGUuY29sb3IgPSBjYWxsb3V0Q29uZmlnLnRleHRDb2xvcjtcblxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTY1RjZcdTk1RjRcdTYyMzNcbiAgICAgICAgbWVzc2FnZUVsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgICAgICBjbHM6ICdjYWxsb3V0LW1lc3NhZ2UtdGltZXN0YW1wJyxcbiAgICAgICAgICAgIHRleHQ6IG1lc3NhZ2UudGltZXN0YW1wXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBtZXNzYWdlRWw7XG4gICAgfVxuXG4gICAgLy8gXHU2NUIwXHU1ODlFXHVGRjFBXHU1OTA0XHU3NDA2XHU3RjE2XHU4RjkxXHU2NENEXHU0RjVDXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVFZGl0KFxuICAgICAgICBlOiBNb3VzZUV2ZW50LFxuICAgICAgICBtZXNzYWdlOiB7IHRleHQ6IHN0cmluZzsgdGltZXN0YW1wOiBzdHJpbmcgfSxcbiAgICAgICAgbWVzc2FnZUVsOiBIVE1MRWxlbWVudCxcbiAgICAgICAgaW5kZXg6IG51bWJlcixcbiAgICAgICAgbWVzc2FnZURhdGE6IE1lc3NhZ2VEYXRhXG4gICAgKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNEQgY2FsbG91dElkXG4gICAgICAgIGNvbnN0IGNhbGxvdXRJZCA9IHRoaXMuY3VycmVudENhbGxvdXRJZDtcbiAgICAgICAgaWYgKCFjYWxsb3V0SWQpIHJldHVybjtcblxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFcdTdCODBcdTUzNTVcdTc2ODRcdTZBMjFcdTYwMDFcdTY4NDZcdTY3NjVcdTdGMTZcdThGOTFcdTZEODhcdTYwNkZcbiAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuICAgICAgICBtb2RhbC50aXRsZUVsLnNldFRleHQoJ1x1N0YxNlx1OEY5MSBDYWxsb3V0IFx1NTkwN1x1NkNFOCcpO1xuICAgICAgICBtb2RhbC5jb250YWluZXJFbC5hZGRDbGFzcygnY2FsbG91dC1tZXNzYWdlLW1vZGFsJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTY1ODdcdTY3MkNcdTUzM0FcdTU3REZcdTVCQjlcdTU2NjhcbiAgICAgICAgY29uc3QgdGV4dEFyZWFDb250YWluZXIgPSBtb2RhbC5jb250ZW50RWwuY3JlYXRlRGl2KCdjYWxsb3V0LW1lc3NhZ2UtdGV4dGFyZWEtY29udGFpbmVyJyk7XG4gICAgICAgIHRleHRBcmVhQ29udGFpbmVyLnN0eWxlLm1hcmdpbiA9ICcyMHB4IDAnO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2NTg3XHU2NzJDXHU1MzNBXHU1N0RGXHU1RTc2XHU3ODZFXHU0RkREXHU4QkJFXHU3RjZFXHU1MzlGXHU2NzA5XHU1MTg1XHU1QkI5XG4gICAgICAgIGNvbnN0IHRleHRBcmVhID0gdGV4dEFyZWFDb250YWluZXIuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnXHU4QkY3XHU4RjkzXHU1MTY1IENhbGxvdXQgXHU1OTA3XHU2Q0U4XHU0RkUxXHU2MDZGLi4uJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNsczogJ2NhbGxvdXQtbWVzc2FnZS10ZXh0YXJlYScsXG4gICAgICAgICAgICB2YWx1ZTogbWVzc2FnZS50ZXh0XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU2NTg3XHU2NzJDXHU1MzNBXHU1N0RGXHU2ODM3XHU1RjBGXG4gICAgICAgIHRleHRBcmVhLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICB0ZXh0QXJlYS5zdHlsZS5taW5IZWlnaHQgPSAnMTUwcHgnO1xuICAgICAgICB0ZXh0QXJlYS5zdHlsZS5wYWRkaW5nID0gJzEwcHgnO1xuICAgICAgICB0ZXh0QXJlYS5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNHB4JztcbiAgICAgICAgdGV4dEFyZWEuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xuICAgICAgICB0ZXh0QXJlYS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KSc7XG4gICAgICAgIHRleHRBcmVhLnN0eWxlLnJlc2l6ZSA9ICd2ZXJ0aWNhbCc7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTYzMDlcdTk0QUVcdTVCQjlcdTU2NjhcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gbW9kYWwuY29udGVudEVsLmNyZWF0ZURpdignYnV0dG9uLWNvbnRhaW5lcicpO1xuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2ZsZXgtZW5kJztcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmdhcCA9ICcxMHB4JztcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICcyMHB4JztcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NEZERFx1NUI1OFx1NjMwOVx1OTRBRVxuICAgICAgICBjb25zdCBzYXZlQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnXHU0RkREXHU1QjU4JyxcbiAgICAgICAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgICAgIH0pO1xuICAgICAgICBzYXZlQnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpJztcbiAgICAgICAgc2F2ZUJ1dHRvbi5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW9uLWFjY2VudCknO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU1M0Q2XHU2RDg4XHU2MzA5XHU5NEFFXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgdGV4dDogJ1x1NTNENlx1NkQ4OCdcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTRGRERcdTVCNThcdTYzMDlcdTk0QUVcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcbiAgICAgICAgc2F2ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1RleHQgPSB0ZXh0QXJlYS52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICBpZiAoIW5ld1RleHQpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTU5MDdcdTZDRThcdTUxODVcdTVCQjlcdTRFMERcdTgwRkRcdTRFM0FcdTdBN0EnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NkQ4OFx1NjA2Rlx1NTE4NVx1NUJCOVxuICAgICAgICAgICAgbWVzc2FnZURhdGEubWVzc2FnZXNbaW5kZXhdLnRleHQgPSBuZXdUZXh0O1xuICAgICAgICAgICAgbWVzc2FnZURhdGEubWVzc2FnZXNbaW5kZXhdLnRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU0RkREXHU1QjU4XHU4QkJFXHU3RjZFXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU1MjM3XHU2NUIwXHU4OUM2XHU1NkZFXG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NTE3M1x1OTVFRFx1NkEyMVx1NjAwMVx1Njg0NlxuICAgICAgICAgICAgbW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NTkwN1x1NkNFOFx1NURGMlx1NjZGNFx1NjVCMCcpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTNENlx1NkQ4OFx1NjMwOVx1OTRBRVx1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlxuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBtb2RhbC5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1Nzg2RVx1NEZERFx1NTE4NVx1NUJCOVx1ODhBQlx1OEJCRVx1N0Y2RVxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRleHRBcmVhLnZhbHVlID0gbWVzc2FnZS50ZXh0O1xuICAgICAgICAgICAgdGV4dEFyZWEuZm9jdXMoKTtcbiAgICAgICAgfSwgMCk7XG4gICAgICAgIFxuICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgfVxuXG4gICAgLy8gXHU2NUIwXHU1ODlFXHVGRjFBXHU1OTA0XHU3NDA2XHU1MjIwXHU5NjY0XHU2NENEXHU0RjVDXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVEZWxldGUoXG4gICAgICAgIGU6IE1vdXNlRXZlbnQsXG4gICAgICAgIGluZGV4OiBudW1iZXIsXG4gICAgICAgIG1lc3NhZ2VEYXRhOiBNZXNzYWdlRGF0YSxcbiAgICAgICAgY2FsbG91dElkOiBzdHJpbmdcbiAgICApIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIG1lc3NhZ2VEYXRhLm1lc3NhZ2VzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU2RDg4XHU2MDZGXHU4QkExXHU2NTcwXG4gICAgICAgIHRoaXMudXBkYXRlTWVzc2FnZUNvdW50KGNhbGxvdXRJZCwgbWVzc2FnZURhdGEubWVzc2FnZXMubGVuZ3RoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTIzN1x1NjVCMFx1ODlDNlx1NTZGRVxuICAgICAgICB0aGlzLnJlZnJlc2hWaWV3KCk7XG4gICAgICAgIG5ldyBOb3RpY2UoJ1x1NkQ4OFx1NjA2Rlx1NURGMlx1NTIyMFx1OTY2NCcpO1xuICAgIH1cblxuICAgIC8vIFx1NjVCMFx1NTg5RVx1RkYxQVx1NjZGNFx1NjVCMFx1NkQ4OFx1NjA2Rlx1OEJBMVx1NjU3MFxuICAgIHByaXZhdGUgdXBkYXRlTWVzc2FnZUNvdW50KGNhbGxvdXRJZDogc3RyaW5nLCBjb3VudDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICBpZiAoIWFjdGl2ZVZpZXcpIHJldHVybjtcblxuICAgICAgICBjb25zdCBjYWxsb3V0cyA9IGFjdGl2ZVZpZXcuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYWxsb3V0Jyk7XG4gICAgICAgIGNhbGxvdXRzLmZvckVhY2goY2FsbG91dCA9PiB7XG4gICAgICAgICAgICBpZiAoY2FsbG91dCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLmdldENhbGxvdXRJZEZyb21FbGVtZW50KGNhbGxvdXQpO1xuICAgICAgICAgICAgICAgIGlmIChpZCA9PT0gY2FsbG91dElkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvdW50U3BhbiA9IGNhbGxvdXQucXVlcnlTZWxlY3RvcignLmNhbGxvdXQtbWVzc2FnZS1jb3VudCcpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY291bnRTcGFuKSBjb3VudFNwYW4udGV4dENvbnRlbnQgPSBjb3VudC50b1N0cmluZygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHU1REU1XHU1MTc3XHU2NUI5XHU2Q0Q1XHVGRjFBXHU1MjFCXHU1RUZBXHU2MzA5XHU5NEFFXG4gICAgcHJpdmF0ZSBjcmVhdGVCdXR0b24oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgdGV4dDogc3RyaW5nLCBjb2xvcjogc3RyaW5nKTogSFRNTEJ1dHRvbkVsZW1lbnQge1xuICAgICAgICBjb25zdCBidXR0b24gPSBjb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQsXG4gICAgICAgICAgICBjbHM6IGBjYWxsb3V0LW1lc3NhZ2UtJHt0ZXh0LnRvTG93ZXJDYXNlKCl9LWJ1dHRvbmBcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBPYmplY3QuYXNzaWduKGJ1dHRvbi5zdHlsZSwge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBjb2xvcixcbiAgICAgICAgICAgIGNvbG9yOiAnI2ZmZmZmZicsXG4gICAgICAgICAgICBib3JkZXI6ICdub25lJyxcbiAgICAgICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsXG4gICAgICAgICAgICBwYWRkaW5nOiAnNHB4IDhweCcsXG4gICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICAgICAgIG1hcmdpblJpZ2h0OiB0ZXh0ID09PSAnXHU3RjE2XHU4RjkxJyA/ICc4cHgnIDogJzAnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBidXR0b247XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBzaG93RW1wdHlNZXNzYWdlKG1lc3NhZ2U6IHN0cmluZykge1xuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTUzNTVcdTRFMkFcdTZBMjFcdTVGMEZcdTRFMTRcdTZDQTFcdTY3MDlcdTkwMDlcdTYyRTkgQ2FsbG91dFx1RkYwQ1x1NTNFQVx1NjYzRVx1NzkzQVx1OTAxQVx1NzdFNVx1RkYwQ1x1NEUwRFx1NjYzRVx1NzkzQVx1OTc2Mlx1Njc3Rlx1NjU4N1x1NUI1N1xuICAgICAgICBpZiAodGhpcy52aWV3TW9kZSA9PT0gJ3NpbmdsZScgJiYgIXRoaXMuY3VycmVudENhbGxvdXRJZCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU3MEI5XHU1MUZCIENhbGxvdXQgXHU1M0YzXHU0RTBBXHU4OUQyXHU3Njg0XHU2NTcwXHU1QjU3XHU2NzY1XHU2N0U1XHU3NzBCXHU1MzU1XHU0RTJBIENhbGxvdXQgXHU3Njg0XHU1OTA3XHU2Q0U4Jyk7XG4gICAgICAgICAgICByZXR1cm47IC8vIFx1NzZGNFx1NjNBNVx1OEZENFx1NTZERVx1RkYwQ1x1NEUwRFx1NjYzRVx1NzkzQVx1OTc2Mlx1Njc3Rlx1NjU4N1x1NUI1N1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBcdTUxNzZcdTRFRDZcdTYwQzVcdTUxQjVcdUZGMDhcdTU5ODJcdTZDQTFcdTY3MDlcdTU5MDdcdTZDRThcdTdCNDlcdUZGMDlcdTYyNERcdTY2M0VcdTc5M0FcdTk3NjJcdTY3N0ZcdTY1ODdcdTVCNTdcbiAgICAgICAgdGhpcy5tZXNzYWdlQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgICAgICBjbHM6ICdjYWxsb3V0LW1lc3NhZ2UtZW1wdHknLFxuICAgICAgICAgICAgdGV4dDogbWVzc2FnZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGdldENhbGxvdXRDb25maWdGb3JNZXNzYWdlKGNhbGxvdXRJZDogc3RyaW5nKTogQ2FsbG91dENvbmZpZyB7XG4gICAgICAgIC8vIFx1NEVDRVx1NUY1M1x1NTI0RFx1NTczQVx1NjY2Rlx1NEUyRFx1ODNCN1x1NTNENiBDYWxsb3V0IFx1OTE0RFx1N0Y2RVxuICAgICAgICBjb25zdCBjdXJyZW50U2NlbmUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY2VuZXMuZmluZChcbiAgICAgICAgICAgIHNjZW5lID0+IHNjZW5lLmlkID09PSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXJyZW50U2NlbmVJZFxuICAgICAgICApO1xuXG4gICAgICAgIGlmIChjdXJyZW50U2NlbmUpIHtcbiAgICAgICAgICAgIC8vIFx1NEVDRSBjYWxsb3V0SWQgXHU0RTJEXHU4M0I3XHU1M0Q2XHU1QkY5XHU1RTk0XHU3Njg0IENhbGxvdXQgXHU1MTg1XHU1QkI5XG4gICAgICAgICAgICBjb25zdCBtYXJrZG93blZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICAgICAgaWYgKG1hcmtkb3duVmlldykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhbGxvdXRzID0gbWFya2Rvd25WaWV3LmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FsbG91dCcpO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgY2FsbG91dCBvZiBBcnJheS5mcm9tKGNhbGxvdXRzKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbG91dCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHRoaXMucGx1Z2luLmdldENhbGxvdXRJZChjYWxsb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZCA9PT0gY2FsbG91dElkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2IENhbGxvdXQgXHU3Njg0XHU2ODA3XHU5ODk4XHU2NTg3XHU2NzJDXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGl0bGVFbCA9IGNhbGxvdXQucXVlcnlTZWxlY3RvcignLmNhbGxvdXQtdGl0bGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodGl0bGVFbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aXRsZVRleHQgPSB0aXRsZUVsLnRleHRDb250ZW50IHx8ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTU3MjhcdTVGNTNcdTUyNERcdTU3M0FcdTY2NkZcdTc2ODRcdTkxNERcdTdGNkVcdTRFMkRcdTY3RTVcdTYyN0VcdTUzMzlcdTkxNERcdTc2ODQgQ2FsbG91dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb25maWcgPSBjdXJyZW50U2NlbmUuY2FsbG91dHMuZmluZChjID0+IHRpdGxlVGV4dC5pbmNsdWRlcyhjLm5hbWUpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpZztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5XHU2MjdFXHU1MjMwXHU1MzM5XHU5MTREXHU3Njg0XHU5MTREXHU3RjZFXHVGRjBDXHU4RkQ0XHU1NkRFXHU1RjUzXHU1MjREXHU1NzNBXHU2NjZGXHU3Njg0XHU3QjJDXHU0RTAwXHU0RTJBXHU5MTREXHU3RjZFXHU2MjE2XHU5RUQ4XHU4QkE0XHU5MTREXHU3RjZFXG4gICAgICAgIHJldHVybiBjdXJyZW50U2NlbmU/LmNhbGxvdXRzWzBdIHx8IHRoaXMucGx1Z2luLnNldHRpbmdzLnNjZW5lc1swXS5jYWxsb3V0c1swXTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNjcm9sbFRvQ2FsbG91dChjYWxsb3V0SWQ6IHN0cmluZykge1xuICAgICAgICBjb25zdCBtYXJrZG93blZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICBpZiAoIW1hcmtkb3duVmlldykgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IGNhbGxvdXRzID0gbWFya2Rvd25WaWV3LmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FsbG91dCcpO1xuICAgICAgICBmb3IgKGNvbnN0IGNhbGxvdXQgb2YgQXJyYXkuZnJvbShjYWxsb3V0cykpIHtcbiAgICAgICAgICAgIGlmIChjYWxsb3V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHRoaXMuZ2V0Q2FsbG91dElkRnJvbUVsZW1lbnQoY2FsbG91dCk7XG4gICAgICAgICAgICAgICAgaWYgKGlkID09PSBjYWxsb3V0SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU5QUQ4XHU0RUFFXHU2NjNFXHU3OTNBXHU2MjdFXHU1MjMwXHU3Njg0IGNhbGxvdXRcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWdobGlnaHRDYWxsb3V0KGNhbGxvdXQpO1xuICAgICAgICAgICAgICAgICAgICAvLyBcdTZFREFcdTUyQThcdTUyMzAgY2FsbG91dFxuICAgICAgICAgICAgICAgICAgICBjYWxsb3V0LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6ICdzbW9vdGgnLCBibG9jazogJ2NlbnRlcicgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgaGlnaGxpZ2h0Q2FsbG91dChjYWxsb3V0OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjYWxsb3V0LmFkZENsYXNzKCdjYWxsb3V0LWhpZ2hsaWdodCcpO1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGNhbGxvdXQucmVtb3ZlQ2xhc3MoJ2NhbGxvdXQtaGlnaGxpZ2h0Jyk7XG4gICAgICAgIH0sIDIwMDApO1xuICAgIH1cblxuICAgIHByaXZhdGUgYWRqdXN0Q29sb3IoY29sb3I6IHN0cmluZywgb3BhY2l0eTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKGNvbG9yLnN0YXJ0c1dpdGgoJyMnKSkge1xuICAgICAgICAgICAgY29uc3QgciA9IHBhcnNlSW50KGNvbG9yLnNsaWNlKDEsIDMpLCAxNik7XG4gICAgICAgICAgICBjb25zdCBnID0gcGFyc2VJbnQoY29sb3Iuc2xpY2UoMywgNSksIDE2KTtcbiAgICAgICAgICAgIGNvbnN0IGIgPSBwYXJzZUludChjb2xvci5zbGljZSg1LCA3KSwgMTYpO1xuICAgICAgICAgICAgcmV0dXJuIGByZ2JhKCR7cn0sICR7Z30sICR7Yn0sICR7b3BhY2l0eX0pYDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sb3I7XG4gICAgfVxuXG4gICAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuIENBTExfT1VUX01FU1NBR0VfVklFVztcbiAgICB9XG5cbiAgICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gJ0NhbGxvdXQgXHU1OTA3XHU2Q0U4JztcbiAgICB9XG5cbiAgICBnZXRJY29uKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiAnbWVzc2FnZS1jaXJjbGUnO1xuICAgIH1cblxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NjVCMFx1NjVCOVx1NkNENVx1NEVFNVx1NjUyRlx1NjMwMVx1NUJGQ1x1ODIyQVxuICAgIG5hdmlnYXRpb24gPSB0cnVlO1xuXG4gICAgLy8gXHU2REZCXHU1MkEwXHU1QkZDXHU1MUZBIFBERiBcdTY1QjlcdTZDRDVcbiAgICBwcml2YXRlIGFzeW5jIGV4cG9ydFRvUERGKCkge1xuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLnBsdWdpbi5jaGVja0FjdGl2YXRpb24oKSkpIHJldHVybjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1OTg4NFx1ODlDOFx1NUJCOVx1NTY2OFxuICAgICAgICAgICAgY29uc3QgcHJldmlld0NvbnRlbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIHByZXZpZXdDb250ZW50LmNsYXNzTmFtZSA9ICdleHBvcnQtcHJldmlldy1jb250YWluZXInO1xuXG4gICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTY2M0VcdTc5M0FcdTc2ODRcdTZEODhcdTYwNkZcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubWVzc2FnZXM7XG4gICAgICAgICAgICBsZXQgaGFzQ29udGVudCA9IGZhbHNlO1xuXG4gICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTg5QzZcdTU2RkVcdTRFMkRcdTY2M0VcdTc5M0FcdTc2ODRcdTZEODhcdTYwNkZcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VzVG9TaG93ID0gQXJyYXkuZnJvbSh0aGlzLm1lc3NhZ2VDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmNhbGxvdXQtbWVzc2FnZS1pdGVtJykpLm1hcChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0aXRsZUVsID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcuY2FsbG91dC10aXRsZS10ZXh0Jyk7XG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudEVsID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcuY2FsbG91dC1tZXNzYWdlLWNvbnRlbnQnKTtcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lRWwgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5jYWxsb3V0LW1lc3NhZ2UtdGltZXN0YW1wJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgY29sb3IgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShpdGVtKS5ib3JkZXJMZWZ0Q29sb3I7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGVFbD8udGV4dENvbnRlbnQgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnRFbD8udGV4dENvbnRlbnQgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IHRpbWVFbD8udGV4dENvbnRlbnQgfHwgJycsXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBjb2xvclxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VzVG9TaG93Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NkNBMVx1NjcwOVx1NTNFRlx1NUJGQ1x1NTFGQVx1NzY4NCBDYWxsb3V0IFx1NTkwN1x1NkNFOCcpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU1QkZDXHU1MUZBXHU1MTg1XHU1QkI5XG4gICAgICAgICAgICBtZXNzYWdlc1RvU2hvdy5mb3JFYWNoKG1lc3NhZ2UgPT4ge1xuICAgICAgICAgICAgICAgIGhhc0NvbnRlbnQgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgY2FsbG91dERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIGNhbGxvdXREaXYuY2xhc3NOYW1lID0gJ2NhbGxvdXQnO1xuICAgICAgICAgICAgICAgIGNhbGxvdXREaXYuc3R5bGUuYm9yZGVyTGVmdENvbG9yID0gbWVzc2FnZS5jb2xvcjtcbiAgICAgICAgICAgICAgICBjYWxsb3V0RGl2LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuYWRqdXN0Q29sb3IobWVzc2FnZS5jb2xvciwgMC4xKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgdGl0bGVEaXYuY2xhc3NOYW1lID0gJ2NhbGxvdXQtdGl0bGUnO1xuICAgICAgICAgICAgICAgIHRpdGxlRGl2LnN0eWxlLmNvbG9yID0gbWVzc2FnZS5jb2xvcjtcbiAgICAgICAgICAgICAgICB0aXRsZURpdi50ZXh0Q29udGVudCA9IG1lc3NhZ2UudGl0bGU7XG4gICAgICAgICAgICAgICAgY2FsbG91dERpdi5hcHBlbmRDaGlsZCh0aXRsZURpdik7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgY29udGVudERpdi5jbGFzc05hbWUgPSAnY2FsbG91dC1jb250ZW50JztcbiAgICAgICAgICAgICAgICBjb250ZW50RGl2LnRleHRDb250ZW50ID0gbWVzc2FnZS5jb250ZW50O1xuICAgICAgICAgICAgICAgIGNhbGxvdXREaXYuYXBwZW5kQ2hpbGQoY29udGVudERpdik7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgdGltZURpdi5jbGFzc05hbWUgPSAnY2FsbG91dC10aW1lc3RhbXAnO1xuICAgICAgICAgICAgICAgIHRpbWVEaXYudGV4dENvbnRlbnQgPSBtZXNzYWdlLnRpbWU7XG4gICAgICAgICAgICAgICAgY2FsbG91dERpdi5hcHBlbmRDaGlsZCh0aW1lRGl2KTtcblxuICAgICAgICAgICAgICAgIHByZXZpZXdDb250ZW50LmFwcGVuZENoaWxkKGNhbGxvdXREaXYpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1OTg4NFx1ODlDOFx1NkEyMVx1NjAwMVx1Njg0NlxuICAgICAgICAgICAgY29uc3QgcHJldmlld01vZGFsID0gbmV3IE1vZGFsKHRoaXMuYXBwKTtcbiAgICAgICAgICAgIHByZXZpZXdNb2RhbC50aXRsZUVsLnNldFRleHQoJ1x1NUJGQ1x1NTFGQVx1OTg4NFx1ODlDOCcpO1xuICAgICAgICAgICAgcHJldmlld01vZGFsLmNvbnRlbnRFbC5hZGRDbGFzcygnZXhwb3J0LXByZXZpZXctbW9kYWwnKTtcblxuICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU0RTAwXHU0RTJBXHU2NUIwXHU3Njg0XHU5ODg0XHU4OUM4XHU1QkI5XHU1NjY4XHVGRjBDXHU3NkY0XHU2M0E1XHU1OTBEXHU1MjM2XHU1RjUzXHU1MjREIHZpZXcgXHU3Njg0XHU1MTg1XHU1QkI5XHU1NDhDXHU2ODM3XHU1RjBGXG4gICAgICAgICAgICBjb25zdCBwcmV2aWV3Q29udGFpbmVyID0gcHJldmlld01vZGFsLmNvbnRlbnRFbC5jcmVhdGVEaXYoJ2V4cG9ydC1wcmV2aWV3LWNvbnRhaW5lcicpO1xuICAgICAgICAgICAgcHJldmlld0NvbnRhaW5lci5zdHlsZS5tYXhIZWlnaHQgPSAnNzB2aCc7XG4gICAgICAgICAgICBwcmV2aWV3Q29udGFpbmVyLnN0eWxlLm92ZXJmbG93ID0gJ2F1dG8nO1xuICAgICAgICAgICAgcHJldmlld0NvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gJzIwcHgnO1xuICAgICAgICAgICAgcHJldmlld0NvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KSc7XG4gICAgICAgICAgICBwcmV2aWV3Q29udGFpbmVyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc4cHgnO1xuICAgICAgICAgICAgcHJldmlld0NvbnRhaW5lci5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XG5cbiAgICAgICAgICAgIC8vIFx1NEZFRVx1NjUzOVx1NTE0Qlx1OTY4Nlx1NkQ4OFx1NjA2Rlx1NjVGNlx1NzY4NFx1NTkwNFx1NzQwNlx1OTAzQlx1OEY5MVxuICAgICAgICAgICAgY29uc3QgY2xvbmVkTWVzc2FnZXMgPSBBcnJheS5mcm9tKHRoaXMubWVzc2FnZUNvbnRhaW5lci5jaGlsZHJlbikubWFwKGNoaWxkID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBjbG9uZSA9IChjaGlsZCBhcyBIVE1MRWxlbWVudCkuY2xvbmVOb2RlKHRydWUpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFx1NzlGQlx1OTY2NFx1NjI0MFx1NjcwOVx1N0YxNlx1OEY5MVx1NTQ4Q1x1NTIyMFx1OTY2NFx1NjMwOVx1OTRBRVxuICAgICAgICAgICAgICAgIGNvbnN0IGJ1dHRvbnMgPSBjbG9uZS5xdWVyeVNlbGVjdG9yQWxsKCcuY2FsbG91dC1tZXNzYWdlLWJ1dHRvbnMnKTtcbiAgICAgICAgICAgICAgICBidXR0b25zLmZvckVhY2goYnV0dG9uID0+IGJ1dHRvbi5yZW1vdmUoKSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU1MTc2XHU0RUQ2XHU1M0VGXHU4MEZEXHU3Njg0XHU0RUE0XHU0RTkyXHU1MTQzXHU3RDIwXG4gICAgICAgICAgICAgICAgY29uc3QgZWRpdEJ1dHRvbnMgPSBjbG9uZS5xdWVyeVNlbGVjdG9yQWxsKCcuY2FsbG91dC1tZXNzYWdlLWVkaXQtYnV0dG9uJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVsZXRlQnV0dG9ucyA9IGNsb25lLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYWxsb3V0LW1lc3NhZ2UtZGVsZXRlLWJ1dHRvbicpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGVkaXRCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IGJ1dHRvbi5yZW1vdmUoKSk7XG4gICAgICAgICAgICAgICAgZGVsZXRlQnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiBidXR0b24ucmVtb3ZlKCkpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBjbG9uZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTYyNTNcdTUzNzBcdTY4MzdcdTVGMEZcbiAgICAgICAgICAgIGNvbnN0IHByaW50U3R5bGVzID0gYFxuICAgICAgICAgICAgICAgIDxzdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgJHt0aGlzLmdldE9ic2lkaWFuU3R5bGVzKCl9XG4gICAgICAgICAgICAgICAgICAgIC8qIFx1Nzg2RVx1NEZERFx1NjI1M1x1NTM3MFx1NjVGNlx1OTY5MFx1ODVDRlx1NjI0MFx1NjcwOVx1NjMwOVx1OTRBRSAqL1xuICAgICAgICAgICAgICAgICAgICAuY2FsbG91dC1tZXNzYWdlLWJ1dHRvbnMsXG4gICAgICAgICAgICAgICAgICAgIC5jYWxsb3V0LW1lc3NhZ2UtZWRpdC1idXR0b24sXG4gICAgICAgICAgICAgICAgICAgIC5jYWxsb3V0LW1lc3NhZ2UtZGVsZXRlLWJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIC8qIFx1NEYxOFx1NTMxNlx1NjI1M1x1NTM3MFx1NUUwM1x1NUM0MCAqL1xuICAgICAgICAgICAgICAgICAgICAuY2FsbG91dC1tZXNzYWdlLWl0ZW0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZS1icmVhay1pbnNpZGU6IGF2b2lkO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAuY2FsbG91dC1tZXNzYWdlLXRpdGxlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAuY2FsbG91dC1tZXNzYWdlLWNvbnRlbnQge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiA4cHggMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLmNhbGxvdXQtbWVzc2FnZS10aW1lc3RhbXAge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAwLjhlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjNjY2O1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogcmlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgYDtcblxuICAgICAgICAgICAgLy8gXHU0RkVFXHU2NTM5XHU2MjUzXHU1MzcwXHU1MTg1XHU1QkI5XHU3Njg0XHU3NTFGXHU2MjEwXG4gICAgICAgICAgICBjb25zdCBwcmludENvbnRlbnQgPSBgXG4gICAgICAgICAgICAgICAgPGh0bWw+XG4gICAgICAgICAgICAgICAgICAgIDxoZWFkPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHRpdGxlPkNhbGxvdXQgXHU1OTA3XHU2Q0U4XHU1QkZDXHU1MUZBPC90aXRsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICR7cHJpbnRTdHlsZXN9XG4gICAgICAgICAgICAgICAgICAgIDwvaGVhZD5cbiAgICAgICAgICAgICAgICAgICAgPGJvZHk+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZXhwb3J0LXByZXZpZXctY29udGFpbmVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtwcmV2aWV3Q29udGFpbmVyLmlubmVySFRNTH1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2JvZHk+XG4gICAgICAgICAgICAgICAgPC9odG1sPlxuICAgICAgICAgICAgYDtcblxuICAgICAgICAgICAgLy8gXHU1M0Q2XHU1RjUzXHU1MjREXHU3QjE0XHU4QkIwXHU2ODA3XHU5ODk4XG4gICAgICAgICAgICBjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcbiAgICAgICAgICAgIGlmIChhY3RpdmVGaWxlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGl0bGVDb250YWluZXIgPSBwcmV2aWV3Q29udGFpbmVyLmNyZWF0ZURpdignbm90ZS10aXRsZS1jb250YWluZXInKTtcbiAgICAgICAgICAgICAgICB0aXRsZUNvbnRhaW5lci5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgICAgICAgICB0aXRsZUNvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gJzE1cHggMCc7XG4gICAgICAgICAgICAgICAgdGl0bGVDb250YWluZXIuc3R5bGUubWFyZ2luQm90dG9tID0gJzI1cHgnO1xuICAgICAgICAgICAgICAgIHRpdGxlQ29udGFpbmVyLnN0eWxlLmJvcmRlckJvdHRvbSA9ICcycHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KSc7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB0aXRsZVRleHQgPSB0aXRsZUNvbnRhaW5lci5jcmVhdGVFbCgnaDInLCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGFjdGl2ZUZpbGUuYmFzZW5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ25vdGUtdGl0bGUnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGl0bGVUZXh0LnN0eWxlLm1hcmdpbiA9ICcwJztcbiAgICAgICAgICAgICAgICB0aXRsZVRleHQuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1hY2NlbnQpJztcbiAgICAgICAgICAgICAgICB0aXRsZVRleHQuc3R5bGUuZm9udFNpemUgPSAnMS41ZW0nO1xuICAgICAgICAgICAgICAgIHRpdGxlVGV4dC5zdHlsZS5mb250V2VpZ2h0ID0gJzYwMCc7XG4gICAgICAgICAgICAgICAgdGl0bGVUZXh0LnN0eWxlLmxldHRlclNwYWNpbmcgPSAnMC41cHgnO1xuICAgICAgICAgICAgICAgIHRpdGxlVGV4dC5zdHlsZS5mb250RmFtaWx5ID0gJ3ZhcigtLWZvbnQtaW50ZXJmYWNlKSc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTE0Qlx1OTY4Nlx1NzY4NFx1NkQ4OFx1NjA2Rlx1NTIzMFx1OTg4NFx1ODlDOFx1NUJCOVxuICAgICAgICAgICAgY2xvbmVkTWVzc2FnZXMuZm9yRWFjaChjbG9uZSA9PiB7XG4gICAgICAgICAgICAgICAgcHJldmlld0NvbnRhaW5lci5hcHBlbmRDaGlsZChjbG9uZSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2MzA5XHU5NEFFXHU1QkI5XHU1NjY4XG4gICAgICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBwcmV2aWV3TW9kYWwuY29udGVudEVsLmNyZWF0ZURpdignZXhwb3J0LXByZXZpZXctYnV0dG9ucycpO1xuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICcyMHB4JztcbiAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2ZsZXgtZW5kJztcbiAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5nYXAgPSAnMTBweCc7XG5cbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NUJGQ1x1NTFGQVx1NjMwOVx1OTRBRVxuICAgICAgICAgICAgY29uc3QgZXhwb3J0QnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogJ1x1Nzg2RVx1OEJBNFx1NUJGQ1x1NTFGQScsXG4gICAgICAgICAgICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTUzRDZcdTZEODhcdTYzMDlcdTk0QUVcbiAgICAgICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgICAgIHRleHQ6ICdcdTUzRDZcdTZEODgnXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gXHU0RkVFXHU2NTM5XHU1QkZDXHU1MUZBXHU2MzA5XHU5NEFFXHU3MEI5XHU1MUZCXHU0RThCXHU0RUY2XHVGRjBDXHU0RjdGXHU3NTI4XHU1MTRCXHU5Njg2XHU3Njg0XHU1MTg1XHU1QkI5XHU3NTFGXHU2MjEwIFBERlxuICAgICAgICAgICAgZXhwb3J0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVtb3RlID0gcmVxdWlyZSgnQGVsZWN0cm9uL3JlbW90ZScpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlbW90ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2NUUwXHU2Q0Q1XHU4QkJGXHU5NUVFXHU3Q0ZCXHU3RURGXHU1QkY5XHU4QkREXHU2ODQ2Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IGZpbGVQYXRoLCBjYW5jZWxlZCB9ID0gYXdhaXQgcmVtb3RlLmRpYWxvZy5zaG93U2F2ZURpYWxvZyh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1x1NUJGQ1x1NTFGQSBQREYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFBhdGg6ICdDYWxsb3V0XHU3QjE0XHU4QkIwLnBkZicsXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJzOiBbeyBuYW1lOiAnUERGIFx1NjU4N1x1NEVGNicsIGV4dGVuc2lvbnM6IFsncGRmJ10gfV1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNhbmNlbGVkIHx8ICFmaWxlUGF0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2luID0gbmV3IHJlbW90ZS5Ccm93c2VyV2luZG93KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA4MDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDYwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3c6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgd2ViUHJlZmVyZW5jZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlSW50ZWdyYXRpb246IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gXHU0RjdGXHU3NTI4XHU1MTRCXHU5Njg2XHU3Njg0XHU1MTg1XHU1QkI5XHU1MjFCXHU1RUZBXHU2MjUzXHU1MzcwXHU1MTg1XHU1QkI5XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByaW50Q29udGVudCA9IGBcbiAgICAgICAgICAgICAgICAgICAgICAgIDxodG1sPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoZWFkPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGl0bGU+Q2FsbG91dCBcdTU5MDdcdTZDRThcdTVCRkNcdTUxRkE8L3RpdGxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3ByaW50U3R5bGVzfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaGVhZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImV4cG9ydC1wcmV2aWV3LWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtwcmV2aWV3Q29udGFpbmVyLmlubmVySFRNTH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9ib2R5PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9odG1sPlxuICAgICAgICAgICAgICAgICAgICBgO1xuXG4gICAgICAgICAgICAgICAgICAgIHdpbi5sb2FkVVJMKCdkYXRhOnRleHQvaHRtbDtjaGFyc2V0PXV0Zi04LCcgKyBlbmNvZGVVUklDb21wb25lbnQocHJpbnRDb250ZW50KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgd2luLndlYkNvbnRlbnRzLm9uKCdkaWQtZmluaXNoLWxvYWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB3aW4ud2ViQ29udGVudHMucHJpbnRUb1BERih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbnNUeXBlOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludEJhY2tncm91bmQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50U2VsZWN0aW9uT25seTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhbmRzY2FwZTogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmUoJ2ZzJykud3JpdGVGaWxlKGZpbGVQYXRoLCBkYXRhLCAoZXJyb3I6IEVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignUERGIFx1NUJGQ1x1NTFGQVx1NTkzMVx1OEQyNTonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdQREYgXHU1QkZDXHU1MUZBXHU1OTMxXHU4RDI1Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdQREYgXHU1QkZDXHU1MUZBXHU2MjEwXHU1MjlGXHVGRjAxJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1BERiBcdTc1MUZcdTYyMTBcdTU5MzFcdThEMjU6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1BERiBcdTc1MUZcdTYyMTBcdTU5MzFcdThEMjUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW4uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcHJldmlld01vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXhwb3J0IGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1QkZDXHU1MUZBIFBERiBcdTU5MzFcdThEMjUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHByZXZpZXdNb2RhbC5jbG9zZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHByZXZpZXdNb2RhbC5vcGVuKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFeHBvcnQgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1QkZDXHU1MUZBIFBERiBcdTU5MzFcdThEMjUnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1NkRGQlx1NTJBMFx1ODNCN1x1NTNENiBPYnNpZGlhbiBcdTY4MzdcdTVGMEZcdTc2ODRcdThGODVcdTUyQTlcdTY1QjlcdTZDRDVcbiAgICBwcml2YXRlIGdldE9ic2lkaWFuU3R5bGVzKCk6IHN0cmluZyB7XG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NEUzQlx1OTg5OFx1NzY4NFx1NjI0MFx1NjcwOSBDU1MgXHU1M0Q4XHU5MUNGXG4gICAgICAgIGNvbnN0IHN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7XG4gICAgICAgIGxldCBjc3NWYXJzID0gJzpyb290IHtcXG4nO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgcHJvcCA9IHN0eWxlc1tpXTtcbiAgICAgICAgICAgIGlmIChwcm9wLnN0YXJ0c1dpdGgoJy0tJykpIHtcbiAgICAgICAgICAgICAgICBjc3NWYXJzICs9IGAgICR7cHJvcH06ICR7c3R5bGVzLmdldFByb3BlcnR5VmFsdWUocHJvcCl9O1xcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY3NzVmFycyArPSAnfVxcbic7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1RkM1XHU4OTgxXHU3Njg0XHU2ODM3XHU1RjBGXHU4OUM0XHU1MjE5XG4gICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAke2Nzc1ZhcnN9XG4gICAgICAgICAgICBib2R5IHtcbiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogdmFyKC0tZm9udC10ZXh0KTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuZXhwb3J0LXByZXZpZXctY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDgwMHB4O1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmNhbGxvdXQtbWVzc2FnZS1pdGVtIHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDEwcHggMDtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuY2FsbG91dC1tZXNzYWdlLXRpdGxlIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5jYWxsb3V0LW1lc3NhZ2UtY29udGVudCB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiA4cHggMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5jYWxsb3V0LW1lc3NhZ2UtdGltZXN0YW1wIHtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuOGVtO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICAgICAgICB9XG4gICAgICAgIGA7XG4gICAgfVxuXG4gICAgLy8gXHU1NzI4IENhbGxvdXRNZXNzYWdlVmlldyBcdTdDN0JcdTRFMkRcdTZERkJcdTUyQTBcdTY2M0VcdTc5M0FcdTdCMTRcdThCQjBcdTU0MERcdTc5RjBcdTc2ODRcdTY1QjlcdTZDRDVcbiAgICBwcml2YXRlIGRpc3BsYXlOb3RlVGl0bGUoKSB7XG4gICAgICAgIC8vIFx1NkUwNVx1OTY2NFx1NURGMlx1NjcwOVx1NzY4NFx1NjgwN1x1OTg5OFxuICAgICAgICBjb25zdCBleGlzdGluZ1RpdGxlID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcubm90ZS10aXRsZS1jb250YWluZXInKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nVGl0bGUpIHtcbiAgICAgICAgICAgIGV4aXN0aW5nVGl0bGUucmVtb3ZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTZEM0JcdTUyQThcdTc2ODRcdTdCMTRcdThCQjBcbiAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGlmICghYWN0aXZlRmlsZSkgcmV0dXJuO1xuXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjgwN1x1OTg5OFx1NUJCOVx1NTY2OFxuICAgICAgICBjb25zdCB0aXRsZUNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCdub3RlLXRpdGxlLWNvbnRhaW5lcicpO1xuICAgICAgICB0aXRsZUNvbnRhaW5lci5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgdGl0bGVDb250YWluZXIuc3R5bGUucGFkZGluZyA9ICcxNXB4IDAnO1xuICAgICAgICB0aXRsZUNvbnRhaW5lci5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMjVweCc7XG4gICAgICAgIHRpdGxlQ29udGFpbmVyLnN0eWxlLmJvcmRlckJvdHRvbSA9ICcycHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KSc7XG4gICAgICAgIHRpdGxlQ29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ3N0aWNreSc7XG4gICAgICAgIHRpdGxlQ29udGFpbmVyLnN0eWxlLnRvcCA9ICcwJztcbiAgICAgICAgdGl0bGVDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtcHJpbWFyeSknO1xuICAgICAgICB0aXRsZUNvbnRhaW5lci5zdHlsZS56SW5kZXggPSAnMSc7XG4gICAgICAgIHRpdGxlQ29udGFpbmVyLnN0eWxlLmJveFNoYWRvdyA9ICcwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpJztcblxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTY4MDdcdTk4OThcdTY1ODdcdTY3MkNcbiAgICAgICAgY29uc3QgdGl0bGVUZXh0ID0gdGl0bGVDb250YWluZXIuY3JlYXRlRWwoJ2gyJywge1xuICAgICAgICAgICAgdGV4dDogYWN0aXZlRmlsZS5iYXNlbmFtZSxcbiAgICAgICAgICAgIGNsczogJ25vdGUtdGl0bGUnXG4gICAgICAgIH0pO1xuICAgICAgICB0aXRsZVRleHQuc3R5bGUubWFyZ2luID0gJzAnO1xuICAgICAgICB0aXRsZVRleHQuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1hY2NlbnQpJztcbiAgICAgICAgdGl0bGVUZXh0LnN0eWxlLmZvbnRTaXplID0gJzEuNWVtJztcbiAgICAgICAgdGl0bGVUZXh0LnN0eWxlLmZvbnRXZWlnaHQgPSAnNjAwJztcbiAgICAgICAgdGl0bGVUZXh0LnN0eWxlLmxldHRlclNwYWNpbmcgPSAnMC41cHgnO1xuICAgICAgICB0aXRsZVRleHQuc3R5bGUuZm9udEZhbWlseSA9ICd2YXIoLS1mb250LWludGVyZmFjZSknO1xuXG4gICAgICAgIC8vIFx1NUMwNlx1NjgwN1x1OTg5OFx1NUJCOVx1NTY2OFx1NjNEMlx1NTE2NVx1NTIzMFx1NkQ4OFx1NjA2Rlx1NUJCOVx1NTY2OFx1NEU0Qlx1NTI0RFxuICAgICAgICBpZiAodGhpcy5tZXNzYWdlQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmluc2VydEJlZm9yZSh0aXRsZUNvbnRhaW5lciwgdGhpcy5tZXNzYWdlQ29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1NkRGQlx1NTJBMCBnZXRDYWxsb3V0SWRGcm9tRWxlbWVudCBcdTY1QjlcdTZDRDVcbiAgICBwcml2YXRlIGdldENhbGxvdXRJZEZyb21FbGVtZW50KGNhbGxvdXQ6IEhUTUxFbGVtZW50KTogc3RyaW5nIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IHNwYW4gPSBjYWxsb3V0LnF1ZXJ5U2VsZWN0b3IoJ3NwYW5bZGF0YS1jYWxsb3V0LWlkXScpO1xuICAgICAgICBpZiAoc3Bhbikge1xuICAgICAgICAgICAgcmV0dXJuIHNwYW4uZ2V0QXR0cmlidXRlKCdkYXRhLWNhbGxvdXQtaWQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBcdTY1QjBcdTU4OUVcdUZGMUFcdTg5QzZcdTU2RkVcdTUyMzdcdTY1QjBcdTY1QjlcdTZDRDVcbiAgICBwdWJsaWMgcmVmcmVzaFZpZXcoKSB7XG4gICAgICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICB0aGlzLmRpc3BsYXlNZXNzYWdlcygpO1xuICAgIH1cblxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NjZGNFx1NjVCMFx1NjI0MFx1NjcwOVx1NzZGOFx1NTE3M1x1NkQ4OFx1NjA2Rlx1OEJBMVx1NjU3MFx1NzY4NFx1NjVCOVx1NkNENVxuICAgIHByaXZhdGUgdXBkYXRlQWxsQ2FsbG91dENvdW50cyhjYWxsb3V0SWQ6IHN0cmluZykge1xuICAgICAgICBjb25zdCBtYXJrZG93blZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICBpZiAoIW1hcmtkb3duVmlldykgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IGNhbGxvdXRzID0gbWFya2Rvd25WaWV3LmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FsbG91dCcpO1xuICAgICAgICBjYWxsb3V0cy5mb3JFYWNoKGNhbGxvdXQgPT4ge1xuICAgICAgICAgICAgaWYgKGNhbGxvdXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy5wbHVnaW4uZ2V0Q2FsbG91dElkKGNhbGxvdXQpO1xuICAgICAgICAgICAgICAgIGlmIChpZCA9PT0gY2FsbG91dElkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnVwZGF0ZUNhbGxvdXRNZXNzYWdlQ291bnQoY2FsbG91dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5cbi8vIFx1OEJCRVx1N0Y2RVx1OTc2Mlx1NzY4NFx1N0M3Qlx1NTE0MVx1OEJCOFx1NzUyOFx1NjIzN1x1OEMwM1x1NjU3NFx1NjNEMlx1NEVGNlx1NzY4NFx1N0Y2RVxuY2xhc3MgQ2FsbG91dE1lc3NhZ2VTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG4gICAgcGx1Z2luOiBDYWxsb3V0RXh0cmFNZXNzYWdlUGx1Z2luO1xuICAgIHByaXZhdGUgc2NlbmVEcm9wZG93bjogRHJvcGRvd25Db21wb25lbnQ7XG4gICAgcHJpdmF0ZSBzY2VuZVRhYkNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBzY2VuZUNvbnRlbnRDb250YWluZXI6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgY2xlYW51cEZ1bmN0aW9uczogQXJyYXk8KCkgPT4gdm9pZD4gPSBbXTtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IENhbGxvdXRFeHRyYU1lc3NhZ2VQbHVnaW4pIHtcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG5cbiAgICBkaXNwbGF5KCk6IHZvaWQge1xuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuICAgICAgICBjb250YWluZXJFbC5lbXB0eSgpO1xuXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1OTg3Nlx1OTBFOFx1NUJGQ1x1ODIyQVx1NjgwRlxuICAgICAgICBjb25zdCBuYXZDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ25hdi1jb250YWluZXInKTtcbiAgICAgICAgbmF2Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgIG5hdkNvbnRhaW5lci5zdHlsZS5ib3JkZXJCb3R0b20gPSAnMnB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XG4gICAgICAgIG5hdkNvbnRhaW5lci5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMjRweCc7XG4gICAgICAgIG5hdkNvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gJzAgMTBweCc7XG4gICAgICAgIG5hdkNvbnRhaW5lci5zdHlsZS5nYXAgPSAnMTBweCc7XG5cbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2ODA3XHU3QjdFXG4gICAgICAgIGNvbnN0IHRhYnMgPSBbXG4gICAgICAgICAgICB7IGlkOiAnYmFzaWMnLCB0ZXh0OiAnXHU1N0ZBXHU3ODQwXHU4QkJFXHU3RjZFJyB9LFxuICAgICAgICAgICAgeyBpZDogJ2ljb24nLCB0ZXh0OiAnXHU1NkZFXHU2ODA3XHU4OEM1XHU5OTcwJyB9LFxuICAgICAgICAgICAgeyBpZDogJ2xpY2Vuc2UnLCB0ZXh0OiAnXHU2Mzg4XHU2NzQzJyB9LFxuICAgICAgICAgICAgeyBpZDogJ2Fib3V0JywgdGV4dDogJ1x1NTE3M1x1NEU4RScgfVxuICAgICAgICBdO1xuXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NTE4NVx1NUJCOVx1NUJCOVx1NTY2OFxuICAgICAgICBjb25zdCBjb250ZW50Q29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCdjb250ZW50LWNvbnRhaW5lcicpO1xuICAgICAgICBjb25zdCBjb250ZW50czogUmVjb3JkPHN0cmluZywgSFRNTERpdkVsZW1lbnQ+ID0ge1xuICAgICAgICAgICAgYmFzaWM6IGNvbnRlbnRDb250YWluZXIuY3JlYXRlRGl2KCdiYXNpYy1zZXR0aW5ncy1jb250ZW50JyksXG4gICAgICAgICAgICBpY29uOiBjb250ZW50Q29udGFpbmVyLmNyZWF0ZURpdignaWNvbi1zZXR0aW5ncy1jb250ZW50JyksXG4gICAgICAgICAgICBsaWNlbnNlOiBjb250ZW50Q29udGFpbmVyLmNyZWF0ZURpdignbGljZW5zZS1jb250ZW50JyksXG4gICAgICAgICAgICBhYm91dDogY29udGVudENvbnRhaW5lci5jcmVhdGVEaXYoJ2Fib3V0LWNvbnRlbnQnKVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NjgwN1x1N0I3RVx1NjgzN1x1NUYwRlx1NTQ4Q1x1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlxuICAgICAgICB0YWJzLmZvckVhY2godGFiID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRhYkJ1dHRvbiA9IG5hdkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgICAgIHRleHQ6IHRhYi50ZXh0LFxuICAgICAgICAgICAgICAgIGNsczogJ25hdi10YWInXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGFiQnV0dG9uLnN0eWxlLnBhZGRpbmcgPSAnOHB4IDE2cHgnO1xuICAgICAgICAgICAgdGFiQnV0dG9uLnN0eWxlLmJvcmRlciA9ICdub25lJztcbiAgICAgICAgICAgIHRhYkJ1dHRvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNHB4IDRweCAwIDAnO1xuICAgICAgICAgICAgdGFiQnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd0cmFuc3BhcmVudCc7XG4gICAgICAgICAgICB0YWJCdXR0b24uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICAgICAgdGFiQnV0dG9uLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcbiAgICAgICAgICAgIHRhYkJ1dHRvbi5zdHlsZS5mb250U2l6ZSA9ICcxNHB4JztcbiAgICAgICAgICAgIHRhYkJ1dHRvbi5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0YWJCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAvLyBcdTk2OTBcdTg1Q0ZcdTYyNDBcdTY3MDlcdTUxODVcdTVCQjlcbiAgICAgICAgICAgICAgICBPYmplY3QudmFsdWVzKGNvbnRlbnRzKS5mb3JFYWNoKGNvbnRlbnQgPT4gY29udGVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnKTtcbiAgICAgICAgICAgICAgICAvLyBcdTY2M0VcdTc5M0FcdTVGNTNcdTUyNERcdTY4MDdcdTdCN0VcdTUxODVcdTVCQjlcbiAgICAgICAgICAgICAgICBjb250ZW50c1t0YWIuaWRdLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NjgwN1x1N0I3RVx1NjgzN1x1NUYwRlxuICAgICAgICAgICAgICAgIG5hdkNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcubmF2LXRhYicpLmZvckVhY2goZWwgPT4ge1xuICAgICAgICAgICAgICAgICAgICAoZWwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd0cmFuc3BhcmVudCc7XG4gICAgICAgICAgICAgICAgICAgIChlbCBhcyBIVE1MRWxlbWVudCkuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1tdXRlZCknO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHRhYkJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpJztcbiAgICAgICAgICAgICAgICB0YWJCdXR0b24uc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1hY2NlbnQpJztcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1OUVEOFx1OEJBNFx1NjYzRVx1NzkzQVx1NTdGQVx1Nzg0MFx1OEJCRVx1N0Y2RVxuICAgICAgICBjb250ZW50cy5iYXNpYy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgbmF2Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5uYXYtdGFiJyk/LmNsaWNrKCk7XG5cbiAgICAgICAgLy8gXHU2RTMyXHU2N0QzXHU1N0ZBXHU3ODQwXHU4QkJFXHU3RjZFXHU1MTg1XHU1QkI5XG4gICAgICAgIHRoaXMucmVuZGVyQmFzaWNDb250ZW50KGNvbnRlbnRzLmJhc2ljKTtcblxuICAgICAgICAvLyBcdTZFMzJcdTY3RDNcdTU2RkVcdTY4MDdcdThCQkVcdTdGNkVcdTUxODVcdTVCQjlcbiAgICAgICAgdGhpcy5yZW5kZXJJY29uU2V0dGluZ3MoY29udGVudHMuaWNvbik7XG5cbiAgICAgICAgLy8gXHU2RTMyXHU2N0QzXHU2Mzg4XHU2NzQzXHU1MTg1XHU1QkI5XG4gICAgICAgIHRoaXMucmVuZGVyTGljZW5zZUNvbnRlbnQoY29udGVudHMubGljZW5zZSk7XG5cbiAgICAgICAgLy8gXHU1MTczXHU0RThFXHU1MTg1XHU1QkI5XG4gICAgICAgIHRoaXMucmVuZGVyQWJvdXRDb250ZW50KGNvbnRlbnRzLmFib3V0KTtcblxuICAgICAgICAvLyBcdTU3MjhcdTk3MDBcdTg5ODFcdTg5RTZcdTUzRDFcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcdTc2ODRcdTU3MzBcdTY1QjlcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IG5hdkNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcubmF2LXRhYicpO1xuICAgICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICBlbGVtZW50LmNsaWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdTZFMzJcdTY3RDNcdTU2RkVcdTY4MDdcdThCQkVcdTdGNkVcbiAgICBwcml2YXRlIHJlbmRlckljb25TZXR0aW5ncyhjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTZGRVx1NjgwN1x1OEJCRVx1N0Y2RVx1NTMzQVx1NTdERlxuICAgICAgICBjb25zdCBpY29uU2V0dGluZ3NDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KCdpY29uLXNldHRpbmdzLWNvbnRhaW5lcicpO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMCBQcmlzbSBcdTY4MzdcdTVGMEZcdThCQkVcdTdGNkVcbiAgICAgICAgbmV3IFNldHRpbmcoaWNvblNldHRpbmdzQ29udGFpbmVyKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1NTQyRlx1NzUyOCBDYWxsb3V0IFByaXNtIFx1NjgzN1x1NUYwRicpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU2NjJGXHU1NDI2XHU1NDJGXHU3NTI4IFByaXNtIFx1NjgzN1x1NUYwRlx1N0Y4RVx1NTMxNiBDYWxsb3V0JylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcbiAgICAgICAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZVByaXNtU3R5bGUpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZVByaXNtU3R5bGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1MjA3XHU2MzYyIFByaXNtIFx1NjgzN1x1NUYwRlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udG9nZ2xlUHJpc21TdHlsZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU1RjUzXHU1MjREXHU0RjdGXHU3NTI4XHU2ODM3XHU1RjBGXG4gICAgICAgIG5ldyBTZXR0aW5nKGljb25TZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTVGNTNcdTUyNERcdTU2RkVcdTY4MDdcdTY4MzdcdTVGMEYnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1OTAwOVx1NjJFOVx1ODk4MVx1NEY3Rlx1NzUyOFx1NzY4NFx1NTZGRVx1NjgwN1x1NjgzN1x1NUYwRicpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGljb25zID0ge1xuICAgICAgICAgICAgICAgICAgICAxOiAnXHU2ODM3XHU1RjBGMScsXG4gICAgICAgICAgICAgICAgICAgIDI6ICdcdTY4MzdcdTVGMEYyJyxcbiAgICAgICAgICAgICAgICAgICAgMzogJ1x1NjgzN1x1NUYwRjMnLFxuICAgICAgICAgICAgICAgICAgICA0OiAnXHU2ODM3XHU1RjBGNCcsXG4gICAgICAgICAgICAgICAgICAgIDU6ICdcdTY4MzdcdTVGMEY1J1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMoaWNvbnMpLmZvckVhY2goKFt2YWx1ZSwgbmFtZV0pID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKHZhbHVlLCBuYW1lKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uU2V0dGluZ3MudHlwZS50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvblNldHRpbmdzLnR5cGUgPSBwYXJzZUludCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5yZWZyZXNoQWxsSWNvbnMoKTsgLy8gXHU3QUNCXHU1MzczXHU1MjM3XHU2NUIwXHU2MjQwXHU2NzA5XHU1NkZFXHU2ODA3XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoKTsgLy8gXHU2NkY0XHU2NUIwXHU5ODg0XHU4OUM4XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTU2RkVcdTY4MDdcdTU5MjdcdTVDMEZcdThCQkVcdTdGNkVcbiAgICAgICAgbmV3IFNldHRpbmcoaWNvblNldHRpbmdzQ29udGFpbmVyKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1NTZGRVx1NjgwN1x1NTkyN1x1NUMwRicpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU4QzAzXHU2NTc0XHU1NkZFXHU2ODA3XHU3Njg0XHU1OTI3XHU1QzBGXHVGRjA4XHU1MENGXHU3RDIwXHVGRjA5JylcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHtcbiAgICAgICAgICAgICAgICBzbGlkZXJcbiAgICAgICAgICAgICAgICAgICAgLnNldExpbWl0cygxNiwgNDgsIDIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uU2V0dGluZ3Muc2l6ZSlcbiAgICAgICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvblNldHRpbmdzLnNpemUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ucmVmcmVzaEFsbEljb25zKCk7IC8vIFx1NkRGQlx1NTJBMFx1OEZEOVx1ODg0Q1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUHJldmlldygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NTZGRVx1NjgwN1x1NEY0RFx1N0Y2RVx1OEJCRVx1N0Y2RVxuICAgICAgICBjb25zdCBwb3NpdGlvbkNvbnRhaW5lciA9IGljb25TZXR0aW5nc0NvbnRhaW5lci5jcmVhdGVEaXYoJ3Bvc2l0aW9uLXNldHRpbmdzJyk7XG4gICAgICAgIHBvc2l0aW9uQ29udGFpbmVyLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ1x1NTZGRVx1NjgwN1x1NEY0RFx1N0Y2RVx1OEMwM1x1NjU3NCcsIGNsczogJ3NldHRpbmctY2F0ZWdvcnknIH0pO1xuXG4gICAgICAgIC8vIFx1OTg3Nlx1OTBFOFx1NEY0RFx1N0Y2RVxuICAgICAgICBuZXcgU2V0dGluZyhwb3NpdGlvbkNvbnRhaW5lcilcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTk4NzZcdTkwRThcdTk1RjRcdThEREQnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1OEMwM1x1NjU3NFx1NTZGRVx1NjgwN1x1OERERFx1NzlCQlx1OTg3Nlx1OTBFOFx1NzY4NFx1OERERFx1NzlCQlx1RkYwOFx1NTBDRlx1N0QyMFx1RkYwOScpXG4gICAgICAgICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiB7XG4gICAgICAgICAgICAgICAgc2xpZGVyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMCwgMzIsIDIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uU2V0dGluZ3MucG9zaXRpb24udG9wKVxuICAgICAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uU2V0dGluZ3MucG9zaXRpb24udG9wID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnJlZnJlc2hBbGxJY29ucygpOyAvLyBcdTZERkJcdTUyQTBcdThGRDlcdTg4NENcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTUzRjNcdTRGQTdcdTRGNERcdTdGNkVcbiAgICAgICAgbmV3IFNldHRpbmcocG9zaXRpb25Db250YWluZXIpXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHU1M0YzXHU0RkE3XHU5NUY0XHU4REREJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdThDMDNcdTY1NzRcdTU2RkVcdTY4MDdcdThERERcdTc5QkJcdTUzRjNcdTRGQTdcdTc2ODRcdThERERcdTc5QkJcdUZGMDhcdTUwQ0ZcdTdEMjBcdUZGMDknKVxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4ge1xuICAgICAgICAgICAgICAgIHNsaWRlclxuICAgICAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDgsIDEwMCwgMilcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmljb25TZXR0aW5ncy5wb3NpdGlvbi5yaWdodClcbiAgICAgICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvblNldHRpbmdzLnBvc2l0aW9uLnJpZ2h0ID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnJlZnJlc2hBbGxJY29ucygpOyAvLyBcdTZERkJcdTUyQTBcdThGRDlcdTg4NENcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTk4ODRcdTg5QzhcdTUzM0FcdTU3REZcbiAgICAgICAgY29uc3QgcHJldmlld0NvbnRhaW5lciA9IGljb25TZXR0aW5nc0NvbnRhaW5lci5jcmVhdGVEaXYoJ2ljb24tcHJldmlldy1jb250YWluZXInKTtcbiAgICAgICAgcHJldmlld0NvbnRhaW5lci5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdcdTU2RkVcdTY4MDdcdTk4ODRcdTg5QzgnLCBjbHM6ICdzZXR0aW5nLWNhdGVnb3J5JyB9KTtcblxuICAgICAgICAvLyBcdTUyMUJcdTVFRkEgQ2FsbG91dCBcdTk4ODRcdTg5QzhcbiAgICAgICAgY29uc3QgY2FsbG91dFByZXZpZXcgPSBwcmV2aWV3Q29udGFpbmVyLmNyZWF0ZURpdignY2FsbG91dCcpO1xuICAgICAgICBjYWxsb3V0UHJldmlldy5hZGRDbGFzcygnY2FsbG91dCcpO1xuICAgICAgICBjYWxsb3V0UHJldmlldy5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICAgIGNhbGxvdXRQcmV2aWV3LnN0eWxlLm1hcmdpbiA9ICcxMHB4IDAnO1xuXG4gICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1OTg4NFx1ODlDOCBDYWxsb3V0IFx1NzY4NCBDU1MgXHU1M0Q4XHU5MUNGXG4gICAgICAgIGNhbGxvdXRQcmV2aWV3LnN0eWxlLnNldFByb3BlcnR5KCctLWljb24tc2l6ZScsIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmljb25TZXR0aW5ncy5zaXplfXB4YCk7XG4gICAgICAgIGNhbGxvdXRQcmV2aWV3LnN0eWxlLnNldFByb3BlcnR5KCctLWljb24tdG9wLXBvc2l0aW9uJywgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvblNldHRpbmdzLnBvc2l0aW9uLnRvcH1weGApO1xuICAgICAgICBjYWxsb3V0UHJldmlldy5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1pY29uLXJpZ2h0LXBvc2l0aW9uJywgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvblNldHRpbmdzLnBvc2l0aW9uLnJpZ2h0fXB4YCk7XG5cbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBIENhbGxvdXQgXHU2ODA3XHU5ODk4XG4gICAgICAgIGNvbnN0IGNhbGxvdXRUaXRsZSA9IGNhbGxvdXRQcmV2aWV3LmNyZWF0ZURpdignY2FsbG91dC10aXRsZScpO1xuICAgICAgICBjYWxsb3V0VGl0bGUuaW5uZXJIVE1MID0gJzxkaXYgY2xhc3M9XCJjYWxsb3V0LXRpdGxlLWlubmVyXCI+XHU5ODg0XHU4OUM4IENhbGxvdXQ8L2Rpdj4nO1xuXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQSBDYWxsb3V0IFx1NTE4NVx1NUJCOVxuICAgICAgICBjb25zdCBjYWxsb3V0Q29udGVudCA9IGNhbGxvdXRQcmV2aWV3LmNyZWF0ZURpdignY2FsbG91dC1jb250ZW50Jyk7XG4gICAgICAgIGNhbGxvdXRDb250ZW50LmlubmVySFRNTCA9ICdcdThGRDlcdTY2MkZcdTRFMDBcdTRFMkFcdTc1MjhcdTRFOEVcdTk4ODRcdTg5QzhcdTU2RkVcdTY4MDdcdTY4MzdcdTVGMEZcdTc2ODQgQ2FsbG91dCc7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2RDg4XHU2MDZGXHU1NkZFXHU2ODA3XG4gICAgICAgIGNvbnN0IGljb25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgaWNvbkNvbnRhaW5lci5jbGFzc05hbWUgPSAnY2FsbG91dC1tZXNzYWdlLWljb24tY29udGFpbmVyJztcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgaWNvbi5jbGFzc05hbWUgPSAnY2FsbG91dC1tZXNzYWdlLWljb24nO1xuICAgICAgICBpY29uLmlubmVySFRNTCA9IHRoaXMucGx1Z2luLmdldEljb25TdmcodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvblNldHRpbmdzLnR5cGUpO1xuXG4gICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NTZGRVx1NjgwN1x1NjgzN1x1NUYwRlxuICAgICAgICBpY29uLnN0eWxlLndpZHRoID0gYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvblNldHRpbmdzLnNpemV9cHhgO1xuICAgICAgICBpY29uLnN0eWxlLmhlaWdodCA9IGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmljb25TZXR0aW5ncy5zaXplfXB4YDtcbiAgICAgICAgaWNvbkNvbnRhaW5lci5zdHlsZS50b3AgPSBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uU2V0dGluZ3MucG9zaXRpb24udG9wfXB4YDtcbiAgICAgICAgaWNvbkNvbnRhaW5lci5zdHlsZS5yaWdodCA9IGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmljb25TZXR0aW5ncy5wb3NpdGlvbi5yaWdodH1weGA7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2RDg4XHU2MDZGXHU2NTcwXHU5MUNGXHU2NjNFXHU3OTNBXG4gICAgICAgIGNvbnN0IGNvdW50U3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgY291bnRTcGFuLmNsYXNzTmFtZSA9ICdjYWxsb3V0LW1lc3NhZ2UtY291bnQnO1xuICAgICAgICBjb3VudFNwYW4udGV4dENvbnRlbnQgPSAnMCc7XG5cbiAgICAgICAgaWNvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChpY29uKTtcbiAgICAgICAgaWNvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChjb3VudFNwYW4pO1xuICAgICAgICBjYWxsb3V0UHJldmlldy5hcHBlbmRDaGlsZChpY29uQ29udGFpbmVyKTtcblxuICAgICAgICAvLyBcdTVCOUVcdTY1RjZcdTY2RjRcdTY1QjBcdTk4ODRcdTg5QzhcdTc2ODRcdTUxRkRcdTY1NzBcbiAgICAgICAgY29uc3QgdXBkYXRlUHJldmlldyA9ICgpID0+IHtcbiAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMCBDU1MgXHU1M0Q4XHU5MUNGXG4gICAgICAgICAgICBjYWxsb3V0UHJldmlldy5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1pY29uLXNpemUnLCBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uU2V0dGluZ3Muc2l6ZX1weGApO1xuICAgICAgICAgICAgY2FsbG91dFByZXZpZXcuc3R5bGUuc2V0UHJvcGVydHkoJy0taWNvbi10b3AtcG9zaXRpb24nLCBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uU2V0dGluZ3MucG9zaXRpb24udG9wfXB4YCk7XG4gICAgICAgICAgICBjYWxsb3V0UHJldmlldy5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1pY29uLXJpZ2h0LXBvc2l0aW9uJywgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvblNldHRpbmdzLnBvc2l0aW9uLnJpZ2h0fXB4YCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NTE4NVx1ODA1NFx1NjgzN1x1NUYwRlxuICAgICAgICAgICAgaWNvbi5zdHlsZS53aWR0aCA9IGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmljb25TZXR0aW5ncy5zaXplfXB4YDtcbiAgICAgICAgICAgIGljb24uc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvblNldHRpbmdzLnNpemV9cHhgO1xuICAgICAgICAgICAgaWNvbkNvbnRhaW5lci5zdHlsZS50b3AgPSBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uU2V0dGluZ3MucG9zaXRpb24udG9wfXB4YDtcbiAgICAgICAgICAgIGljb25Db250YWluZXIuc3R5bGUucmlnaHQgPSBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uU2V0dGluZ3MucG9zaXRpb24ucmlnaHR9cHhgO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpY29uLmlubmVySFRNTCA9IHRoaXMucGx1Z2luLmdldEljb25TdmcodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvblNldHRpbmdzLnR5cGUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB1cGRhdGVQcmV2aWV3OyAvLyBcdThGRDRcdTU2REVcdTY2RjRcdTY1QjBcdTUxRkRcdTY1NzBcdTRGOUJcdThCQkVcdTdGNkVcdTY2RjRcdTY1MzlcdTY1RjZcdThDMDNcdTc1MjhcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZVByZXZpZXdJY29uKGljb25FbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCBpY29uVHlwZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmljb25TZXR0aW5ncy50eXBlO1xuICAgICAgICBpY29uRWxlbWVudC5lbXB0eSgpO1xuICAgICAgICBcbiAgICAgICAgc3dpdGNoIChpY29uVHlwZSkge1xuICAgICAgICAgICAgY2FzZSAxOiAvLyBcdTg0RERcdTgyNzJcdTVCRjlcdThCRERcbiAgICAgICAgICAgICAgICBpY29uRWxlbWVudC5pbm5lckhUTUwgPSBgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIiM0QTkwRTJcIj48cGF0aCBkPVwiTTIwIDJINGMtMS4xIDAtMiAuOS0yIDJ2MThsNC00aDE0YzEuMSAwIDItLjkgMi0yVjRjMC0xLjEtLjktMi0yLTJ6XCIvPjwvc3ZnPmA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDI6IC8vIFx1N0VGRlx1ODI3Mlx1NTJBMFx1NTNGN1xuICAgICAgICAgICAgICAgIGljb25FbGVtZW50LmlubmVySFRNTCA9IGA8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwiIzJFQ0M3MVwiPjxwYXRoIGQ9XCJNMTkgMTNoLTZ2NmgtMnYtNkg1di0yaDZWNWgydjZoNnYyelwiLz48L3N2Zz5gO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzOiAvLyBcdTdDODlcdTgyNzJcdTcyMzFcdTVGQzNcbiAgICAgICAgICAgICAgICBpY29uRWxlbWVudC5pbm5lckhUTUwgPSBgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIiNGRjY5QjRcIj48cGF0aCBkPVwiTTEyIDIxLjM1bC0xLjQ1LTEuMzJDNS40IDE1LjM2IDIgMTIuMjggMiA4LjUgMiA1LjQyIDQuNDIgMyA3LjUgM2MxLjc0IDAgMy40MS44MSA0LjUgMi4wOUMxMy4wOSAzLjgxIDE0Ljc2IDMgMTYuNSAzIDE5LjU4IDMgMjIgNS40MiAyMiA4LjVjMCAzLjc4LTMuNCA2Ljg2LTguNTUgMTEuNTRMMTIgMjEuMzV6XCIvPjwvc3ZnPmA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDQ6IC8vIFx1NkE1OVx1ODI3Mlx1NTcwNlx1NUY2MlxuICAgICAgICAgICAgICAgIGljb25FbGVtZW50LmlubmVySFRNTCA9IGA8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwiI0ZGOTgwMFwiPjxjaXJjbGUgY3g9XCIxMlwiIGN5PVwiMTJcIiByPVwiMTBcIi8+PC9zdmc+YDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNTogLy8gXHU3MDcwXHU4MjcyXHU2NUI5XHU1RjYyXG4gICAgICAgICAgICAgICAgaWNvbkVsZW1lbnQuaW5uZXJIVE1MID0gYDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCIjOUU5RTlFXCI+PHJlY3QgeD1cIjNcIiB5PVwiM1wiIHdpZHRoPVwiMThcIiBoZWlnaHQ9XCIxOFwiIHJ4PVwiMlwiLz48L3N2Zz5gO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHU2RTMyXHU2N0QzXHU2Mzg4XHU2NzQzXHU1MTg1XHU1QkI5XG4gICAgcHJpdmF0ZSByZW5kZXJMaWNlbnNlQ29udGVudChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGxpY2Vuc2VIZWFkZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KCdsaWNlbnNlLWhlYWRlcicpO1xuICAgICAgICBsaWNlbnNlSGVhZGVyLmNyZWF0ZUVsKCdoMScsIHsgdGV4dDogJ1x1NjNEMlx1NEVGNlx1NjM4OFx1Njc0MycgfSkuc3R5bGUuY29sb3IgPSAnI2ZmNmI2Yic7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzdGF0dXNDb250YWluZXIgPSBsaWNlbnNlSGVhZGVyLmNyZWF0ZURpdignbGljZW5zZS1zdGF0dXMtY29udGFpbmVyJyk7XG4gICAgICAgIHN0YXR1c0NvbnRhaW5lci5zdHlsZS5tYXJnaW4gPSAnMjBweCAwJztcbiAgICAgICAgc3RhdHVzQ29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAnMTVweCc7XG4gICAgICAgIHN0YXR1c0NvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnOHB4JztcbiAgICAgICAgc3RhdHVzQ29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmlzQWN0aXZhdGVkID8gJyNlOGY1ZTknIDogJyNmZmViZWUnO1xuICAgICAgICBzdGF0dXNDb250YWluZXIuc3R5bGUuYm9yZGVyID0gYDFweCBzb2xpZCAke3RoaXMucGx1Z2luLnNldHRpbmdzLmlzQWN0aXZhdGVkID8gJyM0Y2FmNTAnIDogJyNmNDQzMzYnfWA7XG5cbiAgICAgICAgY29uc3Qgc3RhdHVzSWNvbiA9IHN0YXR1c0NvbnRhaW5lci5jcmVhdGVTcGFuKCdsaWNlbnNlLXN0YXR1cy1pY29uJyk7XG4gICAgICAgIHN0YXR1c0ljb24uc2V0VGV4dCh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pc0FjdGl2YXRlZCA/ICdcdTI3MDUnIDogJ1x1Mjc0QycpO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3RhdHVzVGV4dCA9IHN0YXR1c0NvbnRhaW5lci5jcmVhdGVTcGFuKCdsaWNlbnNlLXN0YXR1cy10ZXh0Jyk7XG4gICAgICAgIHN0YXR1c1RleHQuc2V0VGV4dCh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pc0FjdGl2YXRlZCA/ICcgXHU1REYyXHU2Mzg4XHU2NzQzXHVGRjBDXHU4QkY3XHU5MUNEXHU1NDJGJyA6ICcgXHU2NzJBXHU2Mzg4XHU2NzQzJyk7XG4gICAgICAgIHN0YXR1c1RleHQuc3R5bGUubWFyZ2luTGVmdCA9ICc4cHgnO1xuICAgICAgICBzdGF0dXNUZXh0LnN0eWxlLmNvbG9yID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuaXNBY3RpdmF0ZWQgPyAnIzJlN2QzMicgOiAnI2M2MjgyOCc7XG5cbiAgICAgICAgLy8gXHU5MUNEXHU1NDJGXHU2MzA5XHU5NEFFXG4gICAgICAgIGNvbnN0IHJlc3RhcnRCdXR0b24gPSBzdGF0dXNDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdcdTkxQ0RcdTU0MkYgT2JzaWRpYW4nLFxuICAgICAgICAgICAgY2xzOiAncmVzdGFydC1vYnNpZGlhbi1idXR0b24nXG4gICAgICAgIH0pO1xuICAgICAgICByZXN0YXJ0QnV0dG9uLnN0eWxlLm1hcmdpbkxlZnQgPSAnMjBweCc7XG4gICAgICAgIHJlc3RhcnRCdXR0b24uc3R5bGUucGFkZGluZyA9ICc0cHggMTJweCc7XG4gICAgICAgIHJlc3RhcnRCdXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyM0Y2FmNTAnO1xuICAgICAgICByZXN0YXJ0QnV0dG9uLnN0eWxlLmNvbG9yID0gJ3doaXRlJztcbiAgICAgICAgcmVzdGFydEJ1dHRvbi5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XG4gICAgICAgIHJlc3RhcnRCdXR0b24uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzRweCc7XG4gICAgICAgIHJlc3RhcnRCdXR0b24uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1OTFDRFx1NTQyRlx1NTI5Rlx1ODBGRFxuICAgICAgICByZXN0YXJ0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgY29uc3QgZWxlY3Ryb24gPSByZXF1aXJlKCdlbGVjdHJvbicpO1xuICAgICAgICAgICAgY29uc3Qgd2luZG93ID0gZWxlY3Ryb24ucmVtb3RlLmdldEN1cnJlbnRXaW5kb3coKTtcbiAgICAgICAgICAgIHdpbmRvdy5yZWxvYWQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU2RkMwXHU2RDNCXHU3ODAxXHU4RjkzXHU1MTY1XHU1MzNBXHU1N0RGXG4gICAgICAgIGNvbnN0IGFjdGl2YXRpb25Db250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KCdsaWNlbnNlLWFjdGl2YXRpb24tY29udGFpbmVyJyk7XG4gICAgICAgIGFjdGl2YXRpb25Db250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzIwcHgnO1xuICAgICAgICBhY3RpdmF0aW9uQ29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAnMjBweCc7XG4gICAgICAgIGFjdGl2YXRpb25Db250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KSc7XG4gICAgICAgIGFjdGl2YXRpb25Db250YWluZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzhweCc7XG5cbiAgICAgICAgY29uc3QgaW5wdXRDb250YWluZXIgPSBhY3RpdmF0aW9uQ29udGFpbmVyLmNyZWF0ZURpdignbGljZW5zZS1pbnB1dC1jb250YWluZXInKTtcbiAgICAgICAgaW5wdXRDb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHU4RjkzXHU1MTY1XHU2RkMwXHU2RDNCXHU3ODAxJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGlucHV0ID0gaW5wdXRDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgICAgICAgdHlwZTogJ3RleHQnLFxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdcdThCRjdcdThGOTNcdTUxNjVcdTZGQzBcdTZEM0JcdTc4MDEnXG4gICAgICAgIH0pO1xuICAgICAgICBpbnB1dC5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgaW5wdXQuc3R5bGUucGFkZGluZyA9ICc4cHgnO1xuICAgICAgICBpbnB1dC5zdHlsZS5tYXJnaW5Ub3AgPSAnMTBweCc7XG4gICAgICAgIGlucHV0LnN0eWxlLmJvcmRlclJhZGl1cyA9ICc0cHgnO1xuICAgICAgICBpbnB1dC5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XG4gICAgICAgIGlucHV0LnZhbHVlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubGljZW5zZUtleTtcblxuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBhc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmxpY2Vuc2VLZXkgPSB0YXJnZXQudmFsdWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYWN0aXZhdGVCdXR0b24gPSBhY3RpdmF0aW9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnXHU2RkMwXHU2RDNCXHU2M0QyXHU0RUY2JyxcbiAgICAgICAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgICAgIH0pO1xuICAgICAgICBhY3RpdmF0ZUJ1dHRvbi5zdHlsZS5tYXJnaW5Ub3AgPSAnMTVweCc7XG4gICAgICAgIGFjdGl2YXRlQnV0dG9uLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuXG4gICAgICAgIGFjdGl2YXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNWYWxpZCA9IGF3YWl0IHRoaXMucGx1Z2luLnZhbGlkYXRlTGljZW5zZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5saWNlbnNlS2V5KTtcbiAgICAgICAgICAgIGlmIChpc1ZhbGlkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaXNBY3RpdmF0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1OTFDRFx1NTQyRlx1NjNEMFx1NzkzQVx1NUJCOVx1NTY2OFxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3RhcnRDb250YWluZXIgPSBhY3RpdmF0aW9uQ29udGFpbmVyLmNyZWF0ZURpdigncmVzdGFydC1jb250YWluZXInKTtcbiAgICAgICAgICAgICAgICByZXN0YXJ0Q29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICcyMHB4JztcbiAgICAgICAgICAgICAgICByZXN0YXJ0Q29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAnMTVweCc7XG4gICAgICAgICAgICAgICAgcmVzdGFydENvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI2U4ZjVlOSc7XG4gICAgICAgICAgICAgICAgcmVzdGFydENvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnOHB4JztcbiAgICAgICAgICAgICAgICByZXN0YXJ0Q29udGFpbmVyLnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgIzRjYWY1MCc7XG4gICAgICAgICAgICAgICAgcmVzdGFydENvbnRhaW5lci5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcblxuICAgICAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjNEMFx1NzkzQVx1NjU4N1x1NjcyQ1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3RhcnRUZXh0ID0gcmVzdGFydENvbnRhaW5lci5jcmVhdGVFbCgncCcsIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1x1NkZDMFx1NkQzQlx1NjIxMFx1NTI5Rlx1RkYwMVx1OEJGN1x1OTFDRFx1NTQyRiBPYnNpZGlhbiBcdTRFRTVcdTU0MkZcdTc1MjhcdTYyNDBcdTY3MDlcdTUyOUZcdTgwRkRcdTMwMDInXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmVzdGFydFRleHQuc3R5bGUubWFyZ2luID0gJzAgMCAxNXB4IDAnO1xuICAgICAgICAgICAgICAgIHJlc3RhcnRUZXh0LnN0eWxlLmNvbG9yID0gJyMyZTdkMzInO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1OTFDRFx1NTQyRlx1NjMwOVx1OTRBRVxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3RhcnRCdXR0b24gPSByZXN0YXJ0Q29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdcdTkxQ0RcdTU0MkYgT2JzaWRpYW4nLFxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJlc3RhcnRCdXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyM0Y2FmNTAnO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFx1OTFDRFx1NTQyRlx1NTI5Rlx1ODBGRFxuICAgICAgICAgICAgICAgIHJlc3RhcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWxlY3Ryb24gPSByZXF1aXJlKCdlbGVjdHJvbicpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB3aW5kb3cgPSBlbGVjdHJvbi5yZW1vdGUuZ2V0Q3VycmVudFdpbmRvdygpO1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTZGQzBcdTZEM0JcdTYyMTBcdTUyOUZcdUZGMDEnKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2RkMwXHU2RDNCXHU3ODAxXHU2NUUwXHU2NTQ4XHVGRjAxJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1OEJENVx1NzUyOFx1NzJCNlx1NjAwMVx1NjYzRVx1NzkzQVx1NUJCOVx1NTY2OFxuICAgICAgICBjb25zdCB0cmlhbFN0YXR1c0NvbnRhaW5lciA9IGFjdGl2YXRpb25Db250YWluZXIuY3JlYXRlRGl2KCd0cmlhbC1zdGF0dXMtY29udGFpbmVyJyk7XG4gICAgICAgIHRyaWFsU3RhdHVzQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICcxNXB4JztcbiAgICAgICAgdHJpYWxTdGF0dXNDb250YWluZXIuc3R5bGUucGFkZGluZyA9ICcxNXB4JztcbiAgICAgICAgdHJpYWxTdGF0dXNDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtcHJpbWFyeSknO1xuICAgICAgICB0cmlhbFN0YXR1c0NvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnOHB4JztcbiAgICAgICAgdHJpYWxTdGF0dXNDb250YWluZXIuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xuICAgICAgICB0cmlhbFN0YXR1c0NvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG5cbiAgICAgICAgLy8gXHU2NjNFXHU3OTNBXHU4QkQ1XHU3NTI4XHU3MkI2XHU2MDAxXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oYXNVc2VkVHJpYWwpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy50cmlhbEVuZFRpbWUgJiYgRGF0ZS5ub3coKSA8IHRoaXMucGx1Z2luLnNldHRpbmdzLnRyaWFsRW5kVGltZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nVGltZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnRyaWFsRW5kVGltZSAtIG5vdztcbiAgICAgICAgICAgICAgICBjb25zdCByZW1haW5pbmdNaW51dGVzID0gTWF0aC5jZWlsKHJlbWFpbmluZ1RpbWUgLyAoMTAwMCAqIDYwKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nU2Vjb25kcyA9IE1hdGguY2VpbChyZW1haW5pbmdUaW1lIC8gMTAwMCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2NUY2XHU5NUY0XHU2NjNFXHU3OTNBXHU1QkI5XHU1NjY4XG4gICAgICAgICAgICAgICAgY29uc3QgdGltZUNvbnRhaW5lciA9IHRyaWFsU3RhdHVzQ29udGFpbmVyLmNyZWF0ZURpdigndHJpYWwtdGltZS1jb250YWluZXInKTtcbiAgICAgICAgICAgICAgICB0aW1lQ29udGFpbmVyLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICAgICAgICAgIHRpbWVDb250YWluZXIuc3R5bGUubWFyZ2luQm90dG9tID0gJzEwcHgnO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVEaXNwbGF5ID0gdGltZUNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiBgXHU1MjY5XHU0RjU5XHU4QkQ1XHU3NTI4XHU2NUY2XHU5NUY0XHVGRjFBJHtyZW1haW5pbmdNaW51dGVzfVx1NTIwNiR7cmVtYWluaW5nU2Vjb25kcyAlIDYwfVx1NzlEMmAsXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ3RyaWFsLXRpbWUtZGlzcGxheSdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aW1lRGlzcGxheS5zdHlsZS5mb250U2l6ZSA9ICcxNnB4JztcbiAgICAgICAgICAgICAgICB0aW1lRGlzcGxheS5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xuICAgICAgICAgICAgICAgIHRpbWVEaXNwbGF5LnN0eWxlLmNvbG9yID0gJyM0Y2FmNTAnO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1OEZEQlx1NUVBNlx1Njc2MVxuICAgICAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzQ29udGFpbmVyID0gdHJpYWxTdGF0dXNDb250YWluZXIuY3JlYXRlRGl2KCd0cmlhbC1wcm9ncmVzcy1jb250YWluZXInKTtcbiAgICAgICAgICAgICAgICBwcm9ncmVzc0NvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSAnNnB4JztcbiAgICAgICAgICAgICAgICBwcm9ncmVzc0NvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnI2UwZTBlMCc7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NDb250YWluZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzNweCc7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NDb250YWluZXIuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgICAgICAgICAgICBwcm9ncmVzc0NvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3AgPSAnMTBweCc7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3MgPSBwcm9ncmVzc0NvbnRhaW5lci5jcmVhdGVEaXYoJ3RyaWFsLXByb2dyZXNzJyk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGVyY2VudGFnZSA9IChyZW1haW5pbmdUaW1lIC8gKDYgKiA2MCAqIDYwICogMTAwMCkpICogMTAwO1xuICAgICAgICAgICAgICAgIHByb2dyZXNzLnN0eWxlLndpZHRoID0gYCR7cGVyY2VudGFnZX0lYDtcbiAgICAgICAgICAgICAgICBwcm9ncmVzcy5zdHlsZS5oZWlnaHQgPSAnMTAwJSc7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3Muc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyM0Y2FmNTAnO1xuICAgICAgICAgICAgICAgIHByb2dyZXNzLnN0eWxlLnRyYW5zaXRpb24gPSAnd2lkdGggMXMgbGluZWFyJztcblxuICAgICAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NUI5RVx1NjVGNlx1NjZGNFx1NjVCMFxuICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50VGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1JlbWFpbmluZ1RpbWUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy50cmlhbEVuZFRpbWUgLSBjdXJyZW50VGltZTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChuZXdSZW1haW5pbmdUaW1lIDw9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodXBkYXRlVGltZXIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7IC8vIFx1OTFDRFx1NkUzMlx1NjdEM1x1OEJCRVx1N0Y2RVx1OTg3NVx1OTc2MlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdNaW51dGVzID0gTWF0aC5mbG9vcihuZXdSZW1haW5pbmdUaW1lIC8gKDEwMDAgKiA2MCkpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdTZWNvbmRzID0gTWF0aC5mbG9vcigobmV3UmVtYWluaW5nVGltZSAvIDEwMDApICUgNjApO1xuICAgICAgICAgICAgICAgICAgICB0aW1lRGlzcGxheS50ZXh0Q29udGVudCA9IGBcdTUyNjlcdTRGNTlcdThCRDVcdTc1MjhcdTY1RjZcdTk1RjRcdUZGMUEke25ld01pbnV0ZXN9XHU1MjA2JHtuZXdTZWNvbmRzfVx1NzlEMmA7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdQZXJjZW50YWdlID0gKG5ld1JlbWFpbmluZ1RpbWUgLyAoNiAqIDYwICogNjAgKiAxMDAwKSkgKiAxMDA7XG4gICAgICAgICAgICAgICAgICAgIHByb2dyZXNzLnN0eWxlLndpZHRoID0gYCR7bmV3UGVyY2VudGFnZX0lYDtcbiAgICAgICAgICAgICAgICB9LCAxMDAwKTtcblxuICAgICAgICAgICAgICAgIC8vIFx1NUY1M1x1OEJCRVx1N0Y2RVx1OTg3NVx1OTc2Mlx1NTE3M1x1OTVFRFx1NjVGNlx1NkUwNVx1OTY2NFx1NUI5QVx1NjVGNlx1NTY2OFxuICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXIoKCkgPT4gY2xlYXJJbnRlcnZhbCh1cGRhdGVUaW1lcikpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGF0dXNUZXh0ID0gdHJpYWxTdGF0dXNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogJ1x1OEJENVx1NzUyOFx1NURGMlx1N0VEM1x1Njc1Rlx1RkYwQ1x1NTM3OFx1OEY3RFx1NjNEMlx1NEVGNlx1NUU3Nlx1OTFDRFx1NjVCMFx1NUI4OVx1ODhDNVx1NTNFRlx1OTFDRFx1NjVCMFx1ODNCN1x1NUY5N1x1OEJENVx1NzUyOFx1NjczQVx1NEYxQScsXG4gICAgICAgICAgICAgICAgICAgIGNsczogJ3RyaWFsLXN0YXR1cy10ZXh0J1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHN0YXR1c1RleHQuc3R5bGUuY29sb3IgPSAnI2Y0NDMzNic7XG4gICAgICAgICAgICAgICAgc3RhdHVzVGV4dC5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgICAgICAgICBzdGF0dXNUZXh0LnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBzdGF0dXNUZXh0ID0gdHJpYWxTdGF0dXNDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiAnXHU2NzJBXHU1RjAwXHU1OUNCXHU4QkQ1XHU3NTI4XHVGRjA4XHU1Mzc4XHU4RjdEXHU5MUNEXHU4OEM1XHU1M0VGXHU5MUNEXHU2NUIwXHU4M0I3XHU1Rjk3XHU4QkQ1XHU3NTI4XHU2NzNBXHU0RjFBXHVGRjA5JyxcbiAgICAgICAgICAgICAgICBjbHM6ICd0cmlhbC1zdGF0dXMtdGV4dCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc3RhdHVzVGV4dC5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG4gICAgICAgICAgICBzdGF0dXNUZXh0LnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU4QkQ1XHU3NTI4XHU2MzA5XHU5NEFFXG4gICAgICAgIGNvbnN0IHRyaWFsQnV0dG9uID0gYWN0aXZhdGlvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgdGV4dDogJ1x1NjNEMlx1NEVGNlx1OEJENVx1NzUyOCcsXG4gICAgICAgICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgICAgICB9KTtcbiAgICAgICAgdHJpYWxCdXR0b24uc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIHRyaWFsQnV0dG9uLnN0eWxlLm1hcmdpblRvcCA9ICcxNXB4JztcbiAgICAgICAgdHJpYWxCdXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyM0Y2FmNTAnO1xuICAgICAgICB0cmlhbEJ1dHRvbi5zdHlsZS5jb2xvciA9ICcjZmZmZmZmJztcbiAgICAgICAgdHJpYWxCdXR0b24uc3R5bGUucGFkZGluZyA9ICc4cHgnO1xuICAgICAgICB0cmlhbEJ1dHRvbi5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNHB4JztcbiAgICAgICAgdHJpYWxCdXR0b24uc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuICAgICAgICB0cmlhbEJ1dHRvbi5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XG4gICAgICAgIHRyaWFsQnV0dG9uLnN0eWxlLmZvbnRTaXplID0gJzE0cHgnO1xuICAgICAgICB0cmlhbEJ1dHRvbi5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xuXG4gICAgICAgIHRyaWFsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmhhc1VzZWRUcmlhbCkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1OEJENVx1NzUyOFx1NjczQVx1NEYxQVx1NURGMlx1NzUyOFx1NUI4Q1x1RkYwQ1x1OEJGN1x1NkZDMFx1NkQzQlx1NjNEMlx1NEVGNlx1N0VFN1x1N0VFRFx1NEY3Rlx1NzUyOFx1RkYwMScpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU4QkQ1XHU3NTI4XHU1RjAwXHU1OUNCXHU2NUY2XHU5NUY0XHU1NDhDXHU3RUQzXHU2NzVGXHU2NUY2XHU5NUY0XG4gICAgICAgICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgY29uc3QgZW5kVGltZSA9IHN0YXJ0VGltZSArICg2ICogNjAgKiA2MCAqIDEwMDApOyAvLyA2XHU1QzBGXHU2NUY2ID0gNiAqIDYwICogNjAgKiAxMDAwIFx1NkJFQlx1NzlEMlxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTRGRERcdTVCNThcdThCRDVcdTc1MjhcdTcyQjZcdTYwMDFcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRyaWFsRW5kVGltZSA9IGVuZFRpbWU7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5oYXNVc2VkVHJpYWwgPSB0cnVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgICAgICAgIC8vIFx1OTFDRFx1NjVCMFx1NTJBMFx1OEY3RFx1NjNEMlx1NEVGNlx1NEVFNVx1NTQyRlx1NzUyOFx1NjI0MFx1NjcwOVx1NTI5Rlx1ODBGRFxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4ub251bmxvYWQoKTsgLy8gXHU1MTQ4XHU1Mzc4XHU4RjdEXHU1RjUzXHU1MjREXHU2M0QyXHU0RUY2XHU3MkI2XHU2MDAxXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5vbmxvYWQoKTsgICAvLyBcdTkxQ0RcdTY1QjBcdTUyQTBcdThGN0RcdTYzRDJcdTRFRjZcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU2NjNFXHU3OTNBXHU1RjAwXHU1OUNCXHU4QkQ1XHU3NTI4XHU2M0QwXHU3OTNBXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdTVERjJcdTVGMDBcdTU0MkY2XHU1QzBGXHU2NUY2XHU4QkQ1XHU3NTI4XHU2NzFGXHVGRjAxXHU2MjQwXHU2NzA5XHU1MjlGXHU4MEZEXHU1REYyXHU1NDJGXHU3NTI4Jyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1OTFDRFx1NjVCMFx1NTJBMFx1OEY3RFx1OEJCRVx1N0Y2RVx1OTg3NVx1OTc2MlxuICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XG5cbiAgICAgICAgICAgIC8vIFx1NTQyRlx1NTJBOFx1NUI5QVx1NjVGNlx1NTY2OFx1NjhDMFx1NjdFNVx1OEJENVx1NzUyOFx1N0VEM1x1Njc1RlxuICAgICAgICAgICAgY29uc3QgY2hlY2tUcmlhbEludGVydmFsID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgICAgICAgICAgaWYgKG5vdyA+PSBlbmRUaW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoY2hlY2tUcmlhbEludGVydmFsKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU3OTgxXHU3NTI4XHU2MjQwXHU2NzA5XHU1MjlGXHU4MEZEXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLm9udW5sb2FkKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmRpc2FibGVQbHVnaW5GZWF0dXJlcygpO1xuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdThCRDVcdTc1MjhcdTY3MUZcdTVERjJcdTdFRDNcdTY3NUZcdUZGMENcdThCRjdcdTZGQzBcdTZEM0JcdTYzRDJcdTRFRjZcdTdFRTdcdTdFRURcdTRGN0ZcdTc1MjhcdUZGMDEnKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgMTAwMCk7XG5cbiAgICAgICAgICAgIC8vIFx1NkNFOFx1NTE4Q1x1NkUwNVx1NzQwNlx1NTFGRFx1NjU3MFxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlcigoKSA9PiBjbGVhckludGVydmFsKGNoZWNrVHJpYWxJbnRlcnZhbCkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdTRGRUVcdTY1MzkgcmVuZGVyQWJvdXRDb250ZW50IFx1NjVCOVx1NkNENVxuICAgIHByaXZhdGUgcmVuZGVyQWJvdXRDb250ZW50KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29udGFpbmVyLmNyZWF0ZUVsKCdoMScsIHsgdGV4dDogJ1x1NTE3M1x1NEU4RVx1NjNEMlx1NEVGNicgfSlcbiAgICAgICAgICAgIC5zdHlsZS5jb2xvciA9ICcjZmY2YjZiJztcblxuICAgICAgICBjb25zdCBkZXNjcmlwdGlvbkNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jyk7XG4gICAgICAgIGRlc2NyaXB0aW9uQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdcdThGRDlcdTY2MkZcdTRFMDBcdTRFMkFcdTc1MjhcdTRFOEVcdTU3MjggT2JzaWRpYW4gXHU0RTJEXHU0RTNBIENhbGxvdXQgXHU2REZCXHU1MkEwXHU5ODlEXHU1OTE2XHU1OTA3XHU2Q0U4XHU1MjlGXHU4MEZEXHU3Njg0XHU2M0QyXHU0RUY2XHVGRjBDJ1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCB3YXJuaW5nVGV4dCA9IGRlc2NyaXB0aW9uQ29udGFpbmVyLmNyZWF0ZUVsKCdzcGFuJywge1xuICAgICAgICAgICAgdGV4dDogJ1x1RkZGRFx1RkZGRFx1RkZGRFx1NkNFOFx1NjEwRlx1OEJFNVx1NjNEMlx1NEVGNlx1NUJGOVx1NEU4RUNhbGxvdXRcdTdCMTRcdThCQjBcdTdDN0JcdTVCNThcdTU3MjhcdThGODNcdTU5MjdcdTc2ODRIVE1MXCJcdTdCMTRcdThCQjBcdTZDNjFcdTY3RDNcIlx1RkYwQ1x1NEY3Rlx1NzUyOFx1NTI0RFx1OEJGN1x1NzdFNVx1NjA4OVx1MzAwMidcbiAgICAgICAgfSk7XG4gICAgICAgIHdhcm5pbmdUZXh0LnN0eWxlLmNvbG9yID0gJyNmZjAwMDAnO1xuXG4gICAgICAgIGNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1NzI0OFx1NjcyQzogMS4yLjAnIH0pO1xuICAgICAgICBjb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTRGNUNcdTgwMDU6IFx1NEUwMFx1NjI0Qlx1NzBDMlx1NzI0Q1x1NjI1M1x1NUY5N1x1N0EwMFx1NzBDMicgfSk7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1MjA2XHU5Njk0XHU3RUJGXG4gICAgICAgIGNvbnN0IGhyMSA9IGNvbnRhaW5lci5jcmVhdGVFbCgnaHInKTtcbiAgICAgICAgaHIxLnN0eWxlLm1hcmdpbiA9ICcyMHB4IDAnO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTE3M1x1NkNFOFx1OTBFOFx1NTIwNlxuICAgICAgICBjb25zdCBmb2xsb3dUaXRsZSA9IGNvbnRhaW5lci5jcmVhdGVFbCgnaDEnLCB7IHRleHQ6ICdcdTZCMjJcdThGQ0VcdTZDRTgnIH0pO1xuICAgICAgICBmb2xsb3dUaXRsZS5zdHlsZS5jb2xvciA9ICcjNDE2OUUxJztcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBCXHU3QUQ5XHU5NEZFXHU2M0E1XG4gICAgICAgIGNvbnN0IGJpbGliaWxpTGluayA9IGNvbnRhaW5lci5jcmVhdGVFbCgnYScsIHtcbiAgICAgICAgICAgIHRleHQ6ICdCXHU3QUQ5OiBcdTRFMDBcdTYyNEJcdTcwQzJcdTcyNENcdTYyNTNcdTVGOTdcdTdBMDBcdTcwQzInLFxuICAgICAgICAgICAgaHJlZjogJ2h0dHBzOi8vc3BhY2UuYmlsaWJpbGkuY29tLzM5NzUxMTg3MD9zcG1faWRfZnJvbT0zMzMuMTM2NS4wLjAnXG4gICAgICAgIH0pO1xuICAgICAgICBiaWxpYmlsaUxpbmsuc3R5bGUuY29sb3IgPSAnIzAwQTFENic7XG4gICAgICAgIGJpbGliaWxpTGluay5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgYmlsaWJpbGlMaW5rLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxMHB4JztcbiAgICAgICAgYmlsaWJpbGlMaW5rLnN0eWxlLnRleHREZWNvcmF0aW9uID0gJ3VuZGVybGluZSc7XG4gICAgICAgIGJpbGliaWxpTGluay5zdHlsZS50ZXh0VW5kZXJsaW5lT2Zmc2V0ID0gJzJweCc7XG4gICAgICAgIGJpbGliaWxpTGluay5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1QzBGXHU3RUEyXHU0RTY2XHU5NEZFXHU2M0E1XG4gICAgICAgIGNvbnN0IHhpYW9ob25nc2h1TGluayA9IGNvbnRhaW5lci5jcmVhdGVFbCgnYScsIHtcbiAgICAgICAgICAgIHRleHQ6ICdcdTVDMEZcdTdFQTJcdTRFNjY6IFx1NEUwMFx1NjI0Qlx1NzBDMlx1NzI0Q1x1NjI1M1x1NUY5N1x1N0EwMFx1NzBDMicsXG4gICAgICAgICAgICBocmVmOiAnaHR0cHM6Ly93d3cueGlhb2hvbmdzaHUuY29tL3VzZXIvcHJvZmlsZS82Mzc3YjUyODAwMDAwMDAwMWYwMWUyZWYnXG4gICAgICAgIH0pO1xuICAgICAgICB4aWFvaG9uZ3NodUxpbmsuc3R5bGUuY29sb3IgPSAnI0ZFMkM1NSc7XG4gICAgICAgIHhpYW9ob25nc2h1TGluay5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgeGlhb2hvbmdzaHVMaW5rLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcyMHB4JztcbiAgICAgICAgeGlhb2hvbmdzaHVMaW5rLnN0eWxlLnRleHREZWNvcmF0aW9uID0gJ3VuZGVybGluZSc7XG4gICAgICAgIHhpYW9ob25nc2h1TGluay5zdHlsZS50ZXh0VW5kZXJsaW5lT2Zmc2V0ID0gJzJweCc7XG4gICAgICAgIHhpYW9ob25nc2h1TGluay5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1NkZFXHU3MjQ3XG4gICAgICAgIGNvbnN0IGltZyA9IGNvbnRhaW5lci5jcmVhdGVFbCgnaW1nJywge1xuICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgIHNyYzogJ2h0dHBzOi8vemhhbmdqaWFuZ2Nob25nLm9zcy1jbi1jaGVuZ2R1LmFsaXl1bmNzLmNvbS8yLnBuZycsXG4gICAgICAgICAgICAgICAgYWx0OiAnXHU1MTczXHU2Q0U4XHU0RThDXHU3RUY0XHU3ODAxJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaW1nLnN0eWxlLm1heFdpZHRoID0gJzEwMCUnO1xuICAgICAgICBpbWcuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xuICAgICAgICBpbWcuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGltZy5zdHlsZS5tYXJnaW4gPSAnMTBweCBhdXRvJztcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTUyMDZcdTk2OTRcdTdFQkZcbiAgICAgICAgY29uc3QgaHIyID0gY29udGFpbmVyLmNyZWF0ZUVsKCdocicpO1xuICAgICAgICBocjIuc3R5bGUubWFyZ2luID0gJzIwcHggMCc7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU4RDVFXHU1MkE5XHU2NTJGXHU2MzAxXHU5MEU4XHU1MjA2XG4gICAgICAgIGNvbnN0IHNwb25zb3JUaXRsZSA9IGNvbnRhaW5lci5jcmVhdGVFbCgnaDEnLCB7IHRleHQ6ICdcdThENUVcdTUyQTlcdTY1MkZcdTYzMDEnIH0pO1xuICAgICAgICBzcG9uc29yVGl0bGUuc3R5bGUuY29sb3IgPSAnIzQxNjlFMSc7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU4QkQ1XHU3NTI4XHU4QkY0XHU2NjBFXHU2NTg3XHU2NzJDXG4gICAgICAgIGNvbnN0IHRyaWFsVGV4dCA9IGNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHtcbiAgICAgICAgICAgIHRleHQ6ICdcdTZCNjRcdTYzRDJcdTRFRjZcdTUxNDFcdThCQjhcdTc2N0RcdTVBRDZcdUZGMENcdThCRDVcdTc1MjhcdTY1RjZcdTk1RjRcdTdFRDNcdTY3NUZcdTRFRTVcdTU0MEVcdUZGMENcdTkxQ0RcdTY1QjBcdTVCODlcdTg4QzVcdTYzRDJcdTRFRjZcdTUzNzNcdTUzRUZcdTdFRTdcdTdFRURcdThCRDVcdTc1MjgnXG4gICAgICAgIH0pO1xuICAgICAgICB0cmlhbFRleHQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICAgIHRyaWFsVGV4dC5zdHlsZS5tYXJnaW4gPSAnMTBweCAwJztcbiAgICAgICAgdHJpYWxUZXh0LnN0eWxlLmNvbG9yID0gJyM2NjY2NjYnO1xuICAgICAgICB0cmlhbFRleHQuc3R5bGUuZm9udFNpemUgPSAnMC45ZW0nO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1OEQ1RVx1NTJBOVx1NjcyQ1xuICAgICAgICBjb25zdCBzcG9uc29yVGV4dCA9IGNvbnRhaW5lci5jcmVhdGVFbCgncCcsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHU4QkY3XHU0RjVDXHU4MDA1XHU1NTlEXHU0RTAwXHU3NEY2XHU3N0ZGXHU2Q0M5XHU2QzM0J1xuICAgICAgICB9KTtcbiAgICAgICAgc3BvbnNvclRleHQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICAgIHNwb25zb3JUZXh0LnN0eWxlLm1hcmdpbiA9ICcxMHB4IDAnO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1OEQ1RVx1NTJBOVx1NTZGRVx1NzI0N1xuICAgICAgICBjb25zdCBzcG9uc29ySW1nID0gY29udGFpbmVyLmNyZWF0ZUVsKCdpbWcnLCB7XG4gICAgICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICAgICAgc3JjOiAnaHR0cHM6Ly96aGFuZ2ppYW5nY2hvbmcub3NzLWNuLWNoZW5nZHUuYWxpeXVuY3MuY29tLzIwMjQxMjA0MTQyMTU5LnBuZycsXG4gICAgICAgICAgICAgICAgYWx0OiAnXHU4RDVFXHU1MkE5XHU0RThDXHU3RUY0XHU3ODAxJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc3BvbnNvckltZy5zdHlsZS5tYXhXaWR0aCA9ICcxMDAlJztcbiAgICAgICAgc3BvbnNvckltZy5zdHlsZS5oZWlnaHQgPSAnYXV0byc7XG4gICAgICAgIHNwb25zb3JJbWcuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIHNwb25zb3JJbWcuc3R5bGUubWFyZ2luID0gJzEwcHggYXV0byc7XG4gICAgfVxuXG4gICAgLy8gXHU2REZCXHU1MkEwXHU1NzNBXHU2NjZGXHU2RTMyXHU2N0QzXHU3NkY4XHU1MTczXHU3Njg0XHU2NUI5XHU2Q0Q1XG4gICAgcHJpdmF0ZSByZW5kZXJTY2VuZXMoKSB7XG4gICAgICAgIHRoaXMucmVuZGVyU2NlbmVUYWJzKCk7XG4gICAgICAgIHRoaXMucmVuZGVyQ3VycmVudFNjZW5lQ29udGVudCgpO1xuICAgICAgICB0aGlzLnVwZGF0ZVNjZW5lRHJvcGRvd25zKCk7XG4gICAgfVxuXG4gICAgLy8gXHU2RTMyXHU2N0QzXHU1NzNBXHU2NjZGXHU2ODA3XHU3QjdFXG4gICAgcHJpdmF0ZSByZW5kZXJTY2VuZVRhYnMoKSB7XG4gICAgICAgIGlmICghdGhpcy5zY2VuZVRhYkNvbnRhaW5lcikgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2RTA1XHU5NjY0XHU3M0IwXHU2NzA5XHU2ODA3XHU3QjdFXHVGRjBDXHU0RkREXHU3NTU5XHU2REZCXHU1MkEwXHU2MzA5XHU5NEFFXG4gICAgICAgIGNvbnN0IGFkZEJ1dHRvbiA9IHRoaXMuc2NlbmVUYWJDb250YWluZXIucXVlcnlTZWxlY3RvcignLnNjZW5lLXRhYi1idXR0b24nKTtcbiAgICAgICAgdGhpcy5zY2VuZVRhYkNvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICBpZiAoYWRkQnV0dG9uKSB0aGlzLnNjZW5lVGFiQ29udGFpbmVyLmFwcGVuZENoaWxkKGFkZEJ1dHRvbik7XG5cbiAgICAgICAgLy8gXHU2RTMyXHU2N0QzXHU1NzNBXHU2NjZGXHU2ODA3XHU3QjdFXG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNjZW5lcy5mb3JFYWNoKHNjZW5lID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRhYkNvbnRhaW5lciA9IHRoaXMuY3JlYXRlU2NlbmVUYWIoc2NlbmUpO1xuICAgICAgICAgICAgdGhpcy5zY2VuZVRhYkNvbnRhaW5lci5hcHBlbmRDaGlsZCh0YWJDb250YWluZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdTUyMUJcdTVFRkFcdTUzNTVcdTRFMkFcdTU3M0FcdTY2NkZcdTY4MDdcdTdCN0VcbiAgICBwcml2YXRlIGNyZWF0ZVNjZW5lVGFiKHNjZW5lOiBTY2VuZUNvbmZpZykge1xuICAgICAgICBjb25zdCB0YWJDb250YWluZXIgPSBjcmVhdGVFbCgnZGl2JywgeyBjbHM6ICdzY2VuZS10YWItY29udGFpbmVyJyB9KTtcbiAgICAgICAgdGFiQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgIHRhYkNvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG4gICAgICAgIHRhYkNvbnRhaW5lci5zdHlsZS5nYXAgPSAnNHB4JztcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1N0YxNlx1OEY5MVx1NjMwOVx1OTRBRVxuICAgICAgICBjb25zdCBlZGl0QnV0dG9uID0gdGFiQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnXHUyNzBFJyxcbiAgICAgICAgICAgIGNsczogJ3NjZW5lLXRhYi1lZGl0J1xuICAgICAgICB9KTtcbiAgICAgICAgZWRpdEJ1dHRvbi5zdHlsZS5wYWRkaW5nID0gJzRweCA4cHgnO1xuICAgICAgICBlZGl0QnV0dG9uLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgZWRpdEJ1dHRvbi5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XG4gICAgICAgIGVkaXRCdXR0b24uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzRweCc7XG4gICAgICAgIGVkaXRCdXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3RyYW5zcGFyZW50JztcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NTczQVx1NjY2Rlx1NjgwN1x1N0I3RVxuICAgICAgICBjb25zdCBzY2VuZVRhYiA9IHRhYkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgdGV4dDogc2NlbmUubmFtZSxcbiAgICAgICAgICAgIGNsczogJ3NjZW5lLXRhYidcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU0RTNBXHU1RjUzXHU1MjREXHU5MDA5XHU0RTJEXHU1NzNBXHU2NjZGXHU2REZCXHU1MkEwXHU5QUQ4XHU0RUFFXHU2ODM3XHU1RjBGXG4gICAgICAgIGlmIChzY2VuZS5pZCA9PT0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VycmVudFNjZW5lSWQpIHtcbiAgICAgICAgICAgIHNjZW5lVGFiLmFkZENsYXNzKCdzY2VuZS10YWItYWN0aXZlJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTUyMjBcdTk2NjRcdTYzMDlcdTk0QUVcdUZGMDhcdTk3NUVcdTlFRDhcdThCQTRcdTU3M0FcdTY2NkZcdUZGMDlcbiAgICAgICAgaWYgKHNjZW5lLmlkICE9PSAnZGVmYXVsdCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRoaXMuY3JlYXRlU2NlbmVEZWxldGVCdXR0b24oc2NlbmUpO1xuICAgICAgICAgICAgdGFiQ29udGFpbmVyLmFwcGVuZENoaWxkKGRlbGV0ZUJ1dHRvbik7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTdFRDFcdTVCOUFcdTRFOEJcdTRFRjZcbiAgICAgICAgZWRpdEJ1dHRvbi5vbmNsaWNrID0gKGUpID0+IHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLnNob3dTY2VuZU5hbWVFZGl0TW9kYWwoc2NlbmUpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHNjZW5lVGFiLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXJyZW50U2NlbmVJZCA9IHNjZW5lLmlkO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclNjZW5lcygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiB0YWJDb250YWluZXI7XG4gICAgfVxuXG4gICAgLy8gXHU1MjFCXHU1RUZBXHU1NzNBXHU2NjZGXHU1MjIwXHU5NjY0XHU2MzA5XHU5NEFFXG4gICAgcHJpdmF0ZSBjcmVhdGVTY2VuZURlbGV0ZUJ1dHRvbihzY2VuZTogU2NlbmVDb25maWcpIHtcbiAgICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdcdTAwRDcnLFxuICAgICAgICAgICAgY2xzOiAnc2NlbmUtdGFiLWRlbGV0ZSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGVsZXRlQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY2VuZXMubGVuZ3RoIDw9IDEpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTgxRjNcdTVDMTFcdTk3MDBcdTg5ODFcdTRGRERcdTc1NTlcdTRFMDBcdTRFMkFcdTU3M0FcdTY2NkYnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNjZW5lcyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnNjZW5lcy5maWx0ZXIocyA9PiBzLmlkICE9PSBzY2VuZS5pZCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VycmVudFNjZW5lSWQgPT09IHNjZW5lLmlkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VycmVudFNjZW5lSWQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY2VuZXNbMF0uaWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyU2NlbmVzKCk7XG4gICAgICAgICAgICBuZXcgTm90aWNlKGBcdTVERjJcdTUyMjBcdTk2NjRcdTU3M0FcdTY2NkZcdUZGMUEke3NjZW5lLm5hbWV9YCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGRlbGV0ZUJ1dHRvbjtcbiAgICB9XG5cbiAgICAvLyBcdTZFMzJcdTY3RDNcdTVGNTNcdTUyNERcdTU3M0FcdTY2NkZcdTUxODVcdTVCQjlcbiAgICBwcml2YXRlIHJlbmRlckN1cnJlbnRTY2VuZUNvbnRlbnQoKSB7XG4gICAgICAgIGlmICghdGhpcy5zY2VuZUNvbnRlbnRDb250YWluZXIpIHJldHVybjtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGN1cnJlbnRTY2VuZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnNjZW5lcy5maW5kKFxuICAgICAgICAgICAgc2NlbmUgPT4gc2NlbmUuaWQgPT09IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1cnJlbnRTY2VuZUlkXG4gICAgICAgICk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWN1cnJlbnRTY2VuZSkgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgdGhpcy5zY2VuZUNvbnRlbnRDb250YWluZXIuZW1wdHkoKTtcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTU3M0FcdTY2NkZcdTY0Q0RcdTRGNUNcdUZGRkRcdUZGRkRcdTk0QUVcdTVCQjlcdTU2NjhcbiAgICAgICAgY29uc3Qgc2NlbmVBY3Rpb25zQ29udGFpbmVyID0gdGhpcy5zY2VuZUNvbnRlbnRDb250YWluZXIuY3JlYXRlRGl2KCdzY2VuZS1hY3Rpb25zLWNvbnRhaW5lcicpO1xuICAgICAgICBzY2VuZUFjdGlvbnNDb250YWluZXIuc3R5bGUubWFyZ2luQm90dG9tID0gJzIwcHgnO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2NUIwXHU3Njg0IENhbGxvdXQgXHU2MzA5XHU5NEFFXG4gICAgICAgIGNvbnN0IGFkZENhbGxvdXRCdXR0b24gPSB0aGlzLnNjZW5lQ29udGVudENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgdGV4dDogJ1x1NkRGQlx1NTJBMFx1NjVCMFx1NzY4NFx1N0IxNFx1OEJCMFx1NTc4QicsXG4gICAgICAgICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgICAgICB9KTtcbiAgICAgICAgYWRkQ2FsbG91dEJ1dHRvbi5zdHlsZS5tYXJnaW5Ub3AgPSAnMjBweCc7XG4gICAgICAgIGFkZENhbGxvdXRCdXR0b24uc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIGFkZENhbGxvdXRCdXR0b24uc3R5bGUubWFyZ2luQm90dG9tID0gJzIwcHgnOyAgLy8gXHU2REZCXHU1MkEwXHU1RTk1XHU5MEU4XHU5NUY0XHU4REREXG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU0RUNFXHU1MTc2XHU0RUQ2XHU1NzNBXHU2NjZGXHU1OTBEXHU1MjM2XHU5MTREXHU3RjZFXHU3Njg0XHU2MzA5XHU5NEFFIC0gXHU3OUZCXHU1MjMwXHU4RkQ5XHU5MUNDXG4gICAgICAgIGNvbnN0IGNvcHlGcm9tQnV0dG9uID0gc2NlbmVBY3Rpb25zQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnXHU0RUNFXHU1MTc2XHU0RUQ2XHU1NzNBXHU2NjZGXHU1OTBEXHU1MjM2XHU5MTREXHU3RjZFJyxcbiAgICAgICAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgICAgIH0pO1xuICAgICAgICBjb3B5RnJvbUJ1dHRvbi5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMjBweCc7ICAvLyBcdTZERkJcdTUyQTBcdTVFOTVcdTkwRThcdTk1RjRcdThERERcblxuICAgICAgICBjb3B5RnJvbUJ1dHRvbi5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgU2NlbmVDb3B5TW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luLCBjdXJyZW50U2NlbmUsIGFzeW5jIChzb3VyY2VTY2VuZUlkKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc291cmNlU2NlbmUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY2VuZXMuZmluZChzID0+IHMuaWQgPT09IHNvdXJjZVNjZW5lSWQpO1xuICAgICAgICAgICAgICAgIGlmIChzb3VyY2VTY2VuZSkge1xuICAgICAgICAgICAgICAgICAgICBjdXJyZW50U2NlbmUuY2FsbG91dHMgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHNvdXJjZVNjZW5lLmNhbGxvdXRzKSk7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckN1cnJlbnRTY2VuZUNvbnRlbnQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICAgICAgfTtcblxuICAgICAgICBhZGRDYWxsb3V0QnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdDYWxsb3V0OiBDYWxsb3V0Q29uZmlnID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdub3RlJyxcbiAgICAgICAgICAgICAgICBjb2xvcjogJyM4MDgwODAnLFxuICAgICAgICAgICAgICAgIG5hbWU6IGBcdTdCMTRcdThCQjBcdTdDN0JcdTU3OEIke2N1cnJlbnRTY2VuZS5jYWxsb3V0cy5sZW5ndGggKyAxfWAsXG4gICAgICAgICAgICAgICAgdGV4dENvbG9yOiAnIzAwMDAwMCcsXG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2ZmZmZmZidcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjdXJyZW50U2NlbmUuY2FsbG91dHMucHVzaChuZXdDYWxsb3V0KTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJDdXJyZW50U2NlbmVDb250ZW50KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gXHU2RTMyXHU2N0QzIENhbGxvdXQgXHU5MTREXHU3RjZFXG4gICAgICAgIGN1cnJlbnRTY2VuZS5jYWxsb3V0cy5mb3JFYWNoKChjYWxsb3V0LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhyID0gdGhpcy5zY2VuZUNvbnRlbnRDb250YWluZXIuY3JlYXRlRWwoJ2hyJyk7XG4gICAgICAgICAgICAgICAgaHIuc3R5bGUubWFyZ2luID0gJzIwcHggMCc7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNhbGxvdXRDb250YWluZXIgPSB0aGlzLnNjZW5lQ29udGVudENvbnRhaW5lci5jcmVhdGVEaXYoJ2NhbGxvdXQtc2V0dGluZy1jb250YWluZXInKTtcbiAgICAgICAgICAgIGNhbGxvdXRDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KSc7XG4gICAgICAgICAgICBjYWxsb3V0Q29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAnMTVweCc7XG4gICAgICAgICAgICBjYWxsb3V0Q29udGFpbmVyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc4cHgnO1xuICAgICAgICAgICAgY2FsbG91dENvbnRhaW5lci5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMjBweCc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjgwN1x1OTg5OFx1NTQ4Q1x1NTIyMFx1OTY2NFx1NjMwOVx1OTRBRVx1NzY4NFx1NUJCOVx1NTY2OFxuICAgICAgICAgICAgY29uc3QgaGVhZGVyQ29udGFpbmVyID0gY2FsbG91dENvbnRhaW5lci5jcmVhdGVEaXYoJ2NhbGxvdXQtaGVhZGVyJyk7XG4gICAgICAgICAgICBoZWFkZXJDb250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgICAgIGhlYWRlckNvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdzcGFjZS1iZXR3ZWVuJztcbiAgICAgICAgICAgIGhlYWRlckNvbnRhaW5lci5zdHlsZS5hbGlnbkl0ZW1zID0gJ2NlbnRlcic7XG4gICAgICAgICAgICBoZWFkZXJDb250YWluZXIuc3R5bGUubWFyZ2luQm90dG9tID0gJzE1cHgnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBoZWFkZXJDb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyBcbiAgICAgICAgICAgICAgICB0ZXh0OiBgXHU3QjE0XHU4QkIwXHU3QzdCXHU1NzhCJHtpbmRleCArIDF9YCxcbiAgICAgICAgICAgICAgICBjbHM6ICdjYWxsb3V0LWhlYWRlci10aXRsZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoaW5kZXggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gaGVhZGVyQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdcdTUyMjBcdTk2NjQnLFxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdtb2Qtd2FybmluZydcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBkZWxldGVCdXR0b24ub25jbGljayA9IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFNjZW5lLmNhbGxvdXRzID0gY3VycmVudFNjZW5lLmNhbGxvdXRzLmZpbHRlcigoXywgaSkgPT4gaSAhPT0gaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDdXJyZW50U2NlbmVDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwIENhbGxvdXQgXHU4QkJFXHU3RjZFXG4gICAgICAgICAgICB0aGlzLmFkZENhbGxvdXRTZXR0aW5ncyhjYWxsb3V0Q29udGFpbmVyLCBjYWxsb3V0KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHU2REZCXHU1MkEwIENhbGxvdXQgXHU4QkJFXHU3RjZFXG4gICAgcHJpdmF0ZSBhZGRDYWxsb3V0U2V0dGluZ3MoY29udGFpbmVyOiBIVE1MRWxlbWVudCwgY2FsbG91dDogQ2FsbG91dENvbmZpZykge1xuICAgICAgICAvLyBcdTY1ODdcdTVCNTdcdTk4OUNcdTgyNzJcdThCQkVcdTdGNkVcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1NjU4N1x1NUI1N1x1OTg5Q1x1ODI3MicpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU4QkJFXHU3RjZFXHU2NTg3XHU1QjU3XHU3Njg0XHU5ODlDXHU4MjcyJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShjYWxsb3V0LnRleHRDb2xvcilcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJyMwMDAwMDAnKVxuICAgICAgICAgICAgICAgIC50aGVuKHRleHRDb21wb25lbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xvclBpY2tlciA9IGNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjb2xvcicsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2FsbG91dC50ZXh0Q29sb3JcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yUGlja2VyLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzhweCc7XG4gICAgICAgICAgICAgICAgICAgIHRleHRDb21wb25lbnQuaW5wdXRFbC5iZWZvcmUoY29sb3JQaWNrZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yUGlja2VyLm9uaW5wdXQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRDb21wb25lbnQuc2V0VmFsdWUodGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxvdXQudGV4dENvbG9yID0gdGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgdGV4dENvbXBvbmVudC5pbnB1dEVsLm9uaW5wdXQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yUGlja2VyLnZhbHVlID0gdGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjYWxsb3V0LnRleHRDb2xvciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gQ2FsbG91dCBcdTk4OUNcdTgyNzJcdThCQkVcdTdGNkVcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0NhbGxvdXQgXHU5ODlDXHU4MjcyJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdThCQkVcdTdGNkUgQ2FsbG91dCBcdTc2ODRcdTk4OUNcdTgyNzInKVxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKGNhbGxvdXQuY29sb3IpXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCcjMDAwMDAwJylcbiAgICAgICAgICAgICAgICAudGhlbih0ZXh0Q29tcG9uZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sb3JQaWNrZXIgPSBjcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY29sb3InLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNhbGxvdXQuY29sb3JcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yUGlja2VyLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzhweCc7XG4gICAgICAgICAgICAgICAgICAgIHRleHRDb21wb25lbnQuaW5wdXRFbC5iZWZvcmUoY29sb3JQaWNrZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yUGlja2VyLm9uaW5wdXQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRDb21wb25lbnQuc2V0VmFsdWUodGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxvdXQuY29sb3IgPSB0YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICB0ZXh0Q29tcG9uZW50LmlucHV0RWwub25pbnB1dCA9IChlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JQaWNrZXIudmFsdWUgPSB0YXJnZXQudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxvdXQuY29sb3IgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIENhbGxvdXQgXHU1NDBEXHU3OUYwXHU4QkJFXHU3RjZFXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcbiAgICAgICAgICAgIC5zZXROYW1lKCdDYWxsb3V0IFx1NTQwRFx1NzlGMCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU4QkJFXHU3RjZFIENhbGxvdXQgXHU3Njg0XHU2NjNFXHU3OTNBXHU1NDBEXHU3OUYwJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShjYWxsb3V0Lm5hbWUpXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdcdTlFRDhcdThCQTQnKSAgLy8gXHU3ODZFXHU0RkREXHU0RjdGXHU3NTI4XHU2QjYzXHU3ODZFXHU3Njg0XHU0RTJEXHU2NTg3XHU1QjU3XHU3QjI2XG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjYWxsb3V0Lm5hbWUgPSB2YWx1ZS50cmltKCkgfHwgJ1x1OUVEOFx1OEJBNCc7ICAvLyBcdTc4NkVcdTRGRERcdTRGN0ZcdTc1MjhcdTZCNjNcdTc4NkVcdTc2ODRcdTRFMkRcdTY1ODdcdTVCNTdcdTdCMjZcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIENhbGxvdXQgXHU3QzdCXHU1NzhCXHU4QkJFXHU3RjZFXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcbiAgICAgICAgICAgIC5zZXROYW1lKCdDYWxsb3V0IFx1N0M3Qlx1NTc4QicpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU4QkJFXHU3RjZFIENhbGxvdXQgXHU3Njg0XHU3QzdCXHU1NzhCXHU2ODA3XHU4QkM2JylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShjYWxsb3V0LnR5cGUpXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdub3RlJylcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxvdXQudHlwZSA9IHZhbHVlLnRyaW0oKSB8fCAnbm90ZSc7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBcdTgwQ0NcdTY2NkZcdTk4OUNcdTgyNzJcdThCQkVcdTdGNkVcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1ODBDQ1x1NjY2Rlx1OTg5Q1x1ODI3MicpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU4QkJFXHU3RjZFIENhbGxvdXQgXHU3Njg0XHU4MENDXHU2NjZGXHU5ODlDXHU4MjcyJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShjYWxsb3V0LmJhY2tncm91bmRDb2xvcilcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJyNmZmZmZmYnKVxuICAgICAgICAgICAgICAgIC50aGVuKHRleHRDb21wb25lbnQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xvclBpY2tlciA9IGNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjb2xvcicsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogY2FsbG91dC5iYWNrZ3JvdW5kQ29sb3JcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yUGlja2VyLnN0eWxlLm1hcmdpblJpZ2h0ID0gJzhweCc7XG4gICAgICAgICAgICAgICAgICAgIHRleHRDb21wb25lbnQuaW5wdXRFbC5iZWZvcmUoY29sb3JQaWNrZXIpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yUGlja2VyLm9uaW5wdXQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHRDb21wb25lbnQuc2V0VmFsdWUodGFyZ2V0LnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxvdXQuYmFja2dyb3VuZENvbG9yID0gdGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgdGV4dENvbXBvbmVudC5pbnB1dEVsLm9uaW5wdXQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yUGlja2VyLnZhbHVlID0gdGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjYWxsb3V0LmJhY2tncm91bmRDb2xvciA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgfVxuXG4gICAgLy8gXHU2REZCXHU1MkEwXHU2NUIwXHU1NzNBXHU2NjZGXG4gICAgcHJpdmF0ZSBhc3luYyBhZGROZXdTY2VuZSgpIHtcbiAgICAgICAgY29uc3QgbmV3U2NlbmU6IFNjZW5lQ29uZmlnID0ge1xuICAgICAgICAgICAgaWQ6IGBzY2VuZS0ke0RhdGUubm93KCl9YCxcbiAgICAgICAgICAgIG5hbWU6IGBcdTU3M0FcdTY2NkYke3RoaXMucGx1Z2luLnNldHRpbmdzLnNjZW5lcy5sZW5ndGggKyAxfWAsICAvLyBcdTc4NkVcdTRGRERcdTRGN0ZcdTc1MjhcdTZCNjNcdTc4NkVcdTc2ODRcdTRFMkRcdTY1ODdcdTVCNTdcdTdCMjZcbiAgICAgICAgICAgIGNhbGxvdXRzOiBbXVxuICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NlbmVzLnB1c2gobmV3U2NlbmUpO1xuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXJyZW50U2NlbmVJZCA9IG5ld1NjZW5lLmlkO1xuICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJTY2VuZXMoKTtcbiAgICB9XG5cbiAgICAvLyBcdTY2RjRcdTY1QjBcdTU3M0FcdTY2NkZcdTRFMEJcdTYyQzlcdTgzRENcdTUzNTVcbiAgICBwcml2YXRlIHVwZGF0ZVNjZW5lRHJvcGRvd25zKCkge1xuICAgICAgICBpZiAodGhpcy5zY2VuZURyb3Bkb3duKSB7XG4gICAgICAgICAgICB0aGlzLnNjZW5lRHJvcGRvd24uc2VsZWN0RWwuZW1wdHkoKTtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNjZW5lcy5mb3JFYWNoKHNjZW5lID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lRHJvcGRvd24uYWRkT3B0aW9uKHNjZW5lLmlkLCBzY2VuZS5uYW1lKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zY2VuZURyb3Bkb3duLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1cnJlbnRTY2VuZUlkKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHByaXZhdGUgc2hvd1NjZW5lTmFtZUVkaXRNb2RhbChzY2VuZTogU2NlbmVDb25maWcpIHtcbiAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgU2NlbmVOYW1lTW9kYWwodGhpcy5hcHAsIHNjZW5lLm5hbWUsIGFzeW5jIChuZXdOYW1lKSA9PiB7XG4gICAgICAgICAgICBzY2VuZS5uYW1lID0gbmV3TmFtZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJTY2VuZXMoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU0RTBCXHU2MkM5XHU4M0RDXHU1MzU1XG4gICAgICAgICAgICBpZiAodGhpcy5zY2VuZURyb3Bkb3duKSB7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTY2VuZURyb3Bkb3ducygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgbW9kYWwub3BlbigpO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0ZXIoY2xlYW51cDogKCkgPT4gdm9pZCkge1xuICAgICAgICB0aGlzLmNsZWFudXBGdW5jdGlvbnMucHVzaChjbGVhbnVwKTtcbiAgICB9XG5cbiAgICAvLyBcdTU3MjhcdTdDN0JcdTc2ODQgaGlkZSBcdTY1QjlcdTZDRDVcdTRFMkRcdTZFMDVcdTc0MDZcbiAgICBoaWRlKCkge1xuICAgICAgICB0aGlzLmNsZWFudXBGdW5jdGlvbnMuZm9yRWFjaChjbGVhbnVwID0+IGNsZWFudXAoKSk7XG4gICAgICAgIHRoaXMuY2xlYW51cEZ1bmN0aW9ucyA9IFtdO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyQmFzaWNDb250ZW50KGNvbnRhaW5lcjogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1NzNBXHU2NjZGXHU5MDA5XHU2MkU5XHU1NjY4XG4gICAgICAgIGNvbnN0IHNjZW5lU2VsZWN0Q29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdignc2NlbmUtc2VsZWN0LWNvbnRhaW5lcicpO1xuICAgICAgICBzY2VuZVNlbGVjdENvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3AgPSAnMjRweCc7XG4gICAgICAgIHNjZW5lU2VsZWN0Q29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAnMTJweCc7XG4gICAgICAgIHNjZW5lU2VsZWN0Q29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSknO1xuICAgICAgICBzY2VuZVNlbGVjdENvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnOHB4JztcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTU3M0FcdTY2NkZcdTY4MDdcdTk4OThcbiAgICAgICAgc2NlbmVTZWxlY3RDb250YWluZXIuY3JlYXRlRWwoJ2g0Jywge1xuICAgICAgICAgICAgdGV4dDogJ1x1NTczQVx1NjY2Rlx1N0JBMVx1NzQwNicsXG4gICAgICAgICAgICBjbHM6ICdzZXR0aW5nLWNhdGVnb3J5J1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTU3M0FcdTY2NkZcdTkwMDlcdTYyRTlcdTU2NjhcbiAgICAgICAgdGhpcy5zY2VuZVRhYkNvbnRhaW5lciA9IHNjZW5lU2VsZWN0Q29udGFpbmVyLmNyZWF0ZURpdignc2NlbmUtdGFicycpO1xuICAgICAgICB0aGlzLnNjZW5lVGFiQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgIHRoaXMuc2NlbmVUYWJDb250YWluZXIuc3R5bGUuZmxleFdyYXAgPSAnd3JhcCc7XG4gICAgICAgIHRoaXMuc2NlbmVUYWJDb250YWluZXIuc3R5bGUuZ2FwID0gJzhweCc7XG4gICAgICAgIHRoaXMuc2NlbmVUYWJDb250YWluZXIuc3R5bGUubWFyZ2luQm90dG9tID0gJzE2cHgnO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjVCMFx1NTczQVx1NjY2Rlx1NjMwOVx1OTRBRVxuICAgICAgICBjb25zdCBhZGRTY2VuZUJ1dHRvbiA9IHRoaXMuc2NlbmVUYWJDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICcrIFx1NjVCMFx1NTczQVx1NjY2RicsXG4gICAgICAgICAgICBjbHM6ICdzY2VuZS10YWItYnV0dG9uJ1xuICAgICAgICB9KTtcbiAgICAgICAgYWRkU2NlbmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmFkZE5ld1NjZW5lKCkpO1xuXG4gICAgICAgIC8vIFx1NUMwNlx1NUY1M1x1NTI0RFx1NURFNVx1NEY1Q1x1NTczQVx1NjY2Rlx1OEJCRVx1N0Y2RVx1NzlGQlx1NTIzMFx1OEZEOVx1OTFDQ1xuICAgICAgICBuZXcgU2V0dGluZyhzY2VuZVNlbGVjdENvbnRhaW5lcilcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTVGNTNcdTUyNERcdTVERTVcdTRGNUNcdTU3M0FcdTY2NkYnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1OTAwOVx1NjJFOVx1ODk4MVx1NEY3Rlx1NzUyOFx1NzY4NFx1NURFNVx1NEY1Q1x1NTczQVx1NjY2RicpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuICAgICAgICAgICAgICAgIC8vIFx1NEZERFx1NUI1OFx1NEUwQlx1NjJDOVx1ODNEQ1x1NTM1NVx1NUYxNVx1NzUyOFx1NEVFNVx1NEZCRlx1NTQwRVx1N0VFRFx1NjZGNFx1NjVCMFxuICAgICAgICAgICAgICAgIHRoaXMuc2NlbmVEcm9wZG93biA9IGRyb3Bkb3duO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjI0MFx1NjcwOVx1NTczQVx1NjY2Rlx1OTAwOVx1OTg3OVxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNjZW5lcy5mb3JFYWNoKHNjZW5lID0+IHtcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKHNjZW5lLmlkLCBzY2VuZS5uYW1lKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBcdThCQkVcdTdGNkVcdTVGNTNcdTUyNERcdTkwMDlcdTRFMkRcdTc2ODRcdTU3M0FcdTY2NkZcbiAgICAgICAgICAgICAgICBkcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXJyZW50U2NlbmVJZCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gXHU3NkQxXHU1NDJDXHU5MDA5XHU2MkU5XHU1M0Q4XHU1MzE2XG4gICAgICAgICAgICAgICAgZHJvcGRvd24ub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmN1cnJlbnRTY2VuZUlkID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclNjZW5lcygpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1MTY4XHU1QzQwXHU1NkZFXHU2ODA3XHU2NjNFXHU3OTNBXHU4QkJFXHU3RjZFXG4gICAgICAgIGNvbnN0IGdsb2JhbEljb25Db250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KCdnbG9iYWwtaWNvbi1zZXR0aW5ncy1jb250YWluZXInKTtcbiAgICAgICAgZ2xvYmFsSWNvbkNvbnRhaW5lci5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMjRweCc7XG4gICAgICAgIGdsb2JhbEljb25Db250YWluZXIuc3R5bGUucGFkZGluZyA9ICcxMnB4JztcbiAgICAgICAgZ2xvYmFsSWNvbkNvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpJztcbiAgICAgICAgZ2xvYmFsSWNvbkNvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnOHB4JztcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTY4MDdcdTk4OThcbiAgICAgICAgZ2xvYmFsSWNvbkNvbnRhaW5lci5jcmVhdGVFbCgnaDQnLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1NTE2OFx1NUM0MFx1NTZGRVx1NjgwN1x1NjYzRVx1NzkzQScsXG4gICAgICAgICAgICBjbHM6ICdzZXR0aW5nLWNhdGVnb3J5J1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdThCQkVcdTdGNkVcdTk4NzlcbiAgICAgICAgbmV3IFNldHRpbmcoZ2xvYmFsSWNvbkNvbnRhaW5lcilcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTY2M0VcdTc5M0FcdTUxNjhcdTVDNDBcdTU2RkVcdTY4MDcnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1NjYyRlx1NTQyNlx1NTcyOFx1NjI0MFx1NjcwOSBDYWxsb3V0IFx1NTNGM1x1NEUwQVx1ODlEMlx1NjYzRVx1NzkzQVx1NTZGRVx1NjgwNycpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93R2xvYmFsSWNvbnMpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dHbG9iYWxJY29ucyA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NjI0MFx1NjcwOVx1NjI1M1x1NUYwMFx1NzY4NFx1N0IxNFx1OEJCMFxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnVwZGF0ZUFsbE9wZW5Ob3Rlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnVwZGF0ZUFsbE9wZW5Ob3RlcygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjNEMFx1NzkzQVx1OEJFRFxuICAgICAgICBjb25zdCB0aXBDb250YWluZXIgPSBnbG9iYWxJY29uQ29udGFpbmVyLmNyZWF0ZURpdignZ2xvYmFsLWljb24tdGlwJyk7XG4gICAgICAgIHRpcENvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3AgPSAnMTJweCc7XG4gICAgICAgIHRpcENvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gJzhweCc7XG4gICAgICAgIHRpcENvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KSc7XG4gICAgICAgIHRpcENvbnRhaW5lci5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XG4gICAgICAgIHRpcENvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNHB4JztcbiAgICAgICAgdGlwQ29udGFpbmVyLnN0eWxlLmZvbnRTaXplID0gJzAuOWVtJztcbiAgICAgICAgdGlwQ29udGFpbmVyLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcbiAgICAgICAgdGlwQ29udGFpbmVyLmNyZWF0ZUVsKCdwJywge1xuICAgICAgICAgICAgdGV4dDogJ1x1NUM1RVx1NjAyN1x1NEUyRFx1NzY4NFx1NThGMFx1NjYwRVx1NEYxOFx1NTE0OFx1OEJFNVx1NjMwOVx1OTRBRVx1RkYwQ1x1NUY1M1x1NUYwMFx1NTQyRlx1NTE2OFx1NUM0MFx1NTZGRVx1NjgwN1x1RkYwQ1x1NEY2MFx1NTcyOFx1NUM1RVx1NjAyN1x1NEUyRFx1NThGMFx1NjYwRVx1NTE3M1x1OTVFRFx1RkYwQ0NhbGxvdXRcdTUzRjNcdTRFMEFcdTg5RDJcdTc2ODRcdTU2RkVcdTY4MDdcdTRFNUZcdTRGMUFcdTZEODhcdTU5MzFcdUZGMENcdTUzQ0RcdTRFNEJcdTRFQTZcdTcxMzZcdTMwMDJcdTVDNUVcdTYwMjdcdTU4RjBcdTY2MEVcdTVGNjJcdTU5ODJcIkNhbGxvdXQgZXh0cmEgbWVzc2FnZSBkaXNwbGF5XHVGRjFBWWVzL05vXCJcdTMwMDInXG4gICAgICAgIH0pLnN0eWxlLm1hcmdpbiA9ICcwJztcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTU3M0FcdTY2NkZcdTUxODVcdTVCQjlcdTVCQjlcdTU2NjhcbiAgICAgICAgdGhpcy5zY2VuZUNvbnRlbnRDb250YWluZXIgPSBzY2VuZVNlbGVjdENvbnRhaW5lci5jcmVhdGVEaXYoJ3NjZW5lLWNvbnRlbnQnKTtcbiAgICAgICAgdGhpcy5zY2VuZUNvbnRlbnRDb250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzE2cHgnO1xuXG4gICAgICAgIC8vIFx1NkUzMlx1NjdEM1x1NTczQVx1NjY2RlxuICAgICAgICB0aGlzLnJlbmRlclNjZW5lcygpO1xuICAgIH1cblxuICAgIHByaXZhdGUgdXBkYXRlUHJldmlld0ljb24oaWNvbkVsZW1lbnQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIC8vIFx1NjgzOVx1NjM2RVx1NEUwRFx1NTQwQ1x1NzY4NFx1NTZGRVx1NjgwN1x1N0M3Qlx1NTc4Qlx1OEJCRVx1N0Y2RVx1NEUwRFx1NTQwQ1x1NzY4NFx1NjgzN1x1NUYwRlxuICAgICAgICBjb25zdCBpY29uVHlwZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmljb25TZXR0aW5ncy50eXBlO1xuICAgICAgICBpY29uRWxlbWVudC5lbXB0eSgpO1xuICAgICAgICBcbiAgICAgICAgc3dpdGNoIChpY29uVHlwZSkge1xuICAgICAgICAgICAgY2FzZSAxOiAvLyBcdTg0RERcdTgyNzJcdTVCRjlcdThCRERcbiAgICAgICAgICAgICAgICBpY29uRWxlbWVudC5pbm5lckhUTUwgPSBgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIiM0QTkwRTJcIj48cGF0aCBkPVwiTTIwIDJINGMtMS4xIDAtMiAuOS0yIDJ2MThsNC00aDE0YzEuMSAwIDItLjkgMi0yVjRjMC0xLjEtLjktMi0yLTJ6XCIvPjwvc3ZnPmA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDI6IC8vIFx1N0VGRlx1ODI3Mlx1NTJBMFx1NTNGN1xuICAgICAgICAgICAgICAgIGljb25FbGVtZW50LmlubmVySFRNTCA9IGA8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwiIzJFQ0M3MVwiPjxwYXRoIGQ9XCJNMTkgMTNoLTZ2NmgtMnYtNkg1di0yaDZWNWgydjZoNnYyelwiLz48L3N2Zz5gO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAzOiAvLyBcdTdDODlcdTgyNzJcdTcyMzFcdTVGQzNcbiAgICAgICAgICAgICAgICBpY29uRWxlbWVudC5pbm5lckhUTUwgPSBgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIiNGRjY5QjRcIj48cGF0aCBkPVwiTTEyIDIxLjM1bC0xLjQ1LTEuMzJDNS40IDE1LjM2IDIgMTIuMjggMiA4LjUgMiA1LjQyIDQuNDIgMyA3LjUgM2MxLjc0IDAgMy40MS44MSA0LjUgMi4wOUMxMy4wOSAzLjgxIDE0Ljc2IDMgMTYuNSAzIDE5LjU4IDMgMjIgNS40MiAyMiA4LjVjMCAzLjc4LTMuNCA2Ljg2LTguNTUgMTEuNTRMMTIgMjEuMzV6XCIvPjwvc3ZnPmA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDQ6IC8vIFx1NkE1OVx1ODI3Mlx1NTcwNlx1NUY2MlxuICAgICAgICAgICAgICAgIGljb25FbGVtZW50LmlubmVySFRNTCA9IGA8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwiI0ZGOTgwMFwiPjxjaXJjbGUgY3g9XCIxMlwiIGN5PVwiMTJcIiByPVwiMTBcIi8+PC9zdmc+YDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgNTogLy8gXHU3MDcwXHU4MjcyXHU2NUI5XHU1RjYyXG4gICAgICAgICAgICAgICAgaWNvbkVsZW1lbnQuaW5uZXJIVE1MID0gYDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCIjOUU5RTlFXCI+PHJlY3QgeD1cIjNcIiB5PVwiM1wiIHdpZHRoPVwiMThcIiBoZWlnaHQ9XCIxOFwiIHJ4PVwiMlwiLz48L3N2Zz5gO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBcdTZERkJcdTUyQTBcdTY1QjBcdTc2ODQgTW9kYWwgXHU3QzdCXG5jbGFzcyBDYWxsb3V0U2VsZWN0aW9uTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSBwbHVnaW46IENhbGxvdXRFeHRyYU1lc3NhZ2VQbHVnaW47XG4gICAgcHJpdmF0ZSBlZGl0b3I6IEVkaXRvcjtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IENhbGxvdXRFeHRyYU1lc3NhZ2VQbHVnaW4sIGVkaXRvcjogRWRpdG9yKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmVkaXRvciA9IGVkaXRvcjtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdjYWxsb3V0LXNlbGVjdGlvbi1tb2RhbCcpO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdcdTkwMDlcdTYyRTlcdTdCMTRcdThCQjBcdTdDN0JcdTU3OEInIH0pO1xuXG4gICAgICAgIGNvbnN0IGNhbGxvdXRMaXN0ID0gY29udGVudEVsLmNyZWF0ZURpdignY2FsbG91dC1saXN0Jyk7XG5cbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU5MDA5XHU0RTJEXHU1NzNBXHU2NjZGXHU3Njg0XHU5MTREXHU3RjZFXG4gICAgICAgIGNvbnN0IGN1cnJlbnRTY2VuZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnNjZW5lcy5maW5kKFxuICAgICAgICAgICAgc2NlbmUgPT4gc2NlbmUuaWQgPT09IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1cnJlbnRTY2VuZUlkXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKCFjdXJyZW50U2NlbmUpIHtcbiAgICAgICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogJ1x1NjI3RVx1NEUwRFx1NTIzMFx1NTczQVx1NjY2Rlx1OTE0RFx1N0Y2RScgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTRGN0ZcdTc1MjhcdTVGNTNcdTUyNERcdTU3M0FcdTY2NkZcdTc2ODQgY2FsbG91dHMgXHU5MTREXHU3RjZFXG4gICAgICAgIGN1cnJlbnRTY2VuZS5jYWxsb3V0cy5mb3JFYWNoKChjYWxsb3V0LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY2FsbG91dEl0ZW0gPSBjYWxsb3V0TGlzdC5jcmVhdGVEaXYoJ2NhbGxvdXQtbGlzdC1pdGVtJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHByZXZpZXcgPSBjYWxsb3V0SXRlbS5jcmVhdGVEaXYoJ2NhbGxvdXQtcHJldmlldycpO1xuICAgICAgICAgICAgcHJldmlldy5zdHlsZS5ib3JkZXJMZWZ0ID0gYDRweCBzb2xpZCAke2NhbGxvdXQuY29sb3J9YDtcbiAgICAgICAgICAgIHByZXZpZXcuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5hZGp1c3RDb2xvcihjYWxsb3V0LmNvbG9yLCAwLjEpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCB0aXRsZSA9IHByZXZpZXcuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiBjYWxsb3V0Lm5hbWUgfSk7XG4gICAgICAgICAgICB0aXRsZS5zdHlsZS5jb2xvciA9IGNhbGxvdXQuY29sb3I7XG5cbiAgICAgICAgICAgIGNhbGxvdXRJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtVG9DYWxsb3V0KGNhbGxvdXQpOyAgLy8gXHU0RkVFXHU2NTM5XHU4RkQ5XHU5MUNDXHVGRjBDXHU3NkY0XHU2M0E1XHU0RjIwXHU5MDEyIGNhbGxvdXQgXHU5MTREXHU3RjZFXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNhbGxvdXRJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY2FsbG91dEl0ZW0uYWRkQ2xhc3MoJ2NhbGxvdXQtbGlzdC1pdGVtLWhvdmVyJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNhbGxvdXRJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY2FsbG91dEl0ZW0ucmVtb3ZlQ2xhc3MoJ2NhbGxvdXQtbGlzdC1pdGVtLWhvdmVyJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHU0RkVFXHU2NTM5IHRyYW5zZm9ybVRvQ2FsbG91dCBcdTY1QjlcdTZDRDVcdUZGMENcdTc2RjRcdTYzQTVcdTYzQTVcdTUzRDcgY2FsbG91dCBcdTkxNERcdTdGNkVcbiAgICBwcml2YXRlIHRyYW5zZm9ybVRvQ2FsbG91dChjYWxsb3V0OiBDYWxsb3V0Q29uZmlnKSB7XG4gICAgICAgIGNvbnN0IHNlbGVjdGlvbiA9IHRoaXMuZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgICAgICBpZiAoIXNlbGVjdGlvbikge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU4QkY3XHU1MTQ4XHU5MDA5XHU2MkU5XHU4OTgxXHU4RjZDXHU2MzYyXHU3Njg0XHU2NTg3XHU2NzJDJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjYWxsb3V0SWQgPSBgY2FsbG91dC0ke0RhdGUubm93KCl9LSR7TWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDgpfWA7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTRGN0ZcdTc1MjhcdTRGMjBcdTUxNjVcdUZGRkRcdUZGRkQgY2FsbG91dCBcdTkxNERcdTdGNkVcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkVGV4dCA9IGA+IFshJHtjYWxsb3V0LnR5cGV9XSAqKjxmb250IGNvbG9yPVwiJHtjYWxsb3V0LmNvbG9yfVwiPiR7Y2FsbG91dC5uYW1lfTwvZm9udD4qKlxcbj4gPHNwYW4gc3R5bGU9XCJiYWNrZ3JvdW5kOiR7Y2FsbG91dC5iYWNrZ3JvdW5kQ29sb3J9XCIgZGF0YS1jYWxsb3V0LWlkPVwiJHtjYWxsb3V0SWR9XCI+PGZvbnQgY29sb3I9XCIke2NhbGxvdXQudGV4dENvbG9yfVwiPiR7c2VsZWN0aW9ufTwvZm9udD48L3NwYW4+XFxuXFxuYDtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NTE0OVx1NjgwN1x1NEY0RFx1N0Y2RVxuICAgICAgICBjb25zdCBjdXJzb3IgPSB0aGlzLmVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NjZGRlx1NjM2Mlx1OTAwOVx1NjU4N1x1NjcyQ1x1NUU3Nlx1NkRGQlx1NTJBMFx1NEUyNFx1NEUyQVx1NjM2Mlx1ODg0Q1xuICAgICAgICB0aGlzLmVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKGZvcm1hdHRlZFRleHQpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU1QzA2XHU1MTQ5XHU2ODA3XHU3OUZCXHU1MjMwXHU2NUIwXHU4ODRDXG4gICAgICAgIHRoaXMuZWRpdG9yLnNldEN1cnNvcih7XG4gICAgICAgICAgICBsaW5lOiBjdXJzb3IubGluZSArIDMsXG4gICAgICAgICAgICBjaDogMFxuICAgICAgICB9KTtcblxuICAgICAgICBuZXcgTm90aWNlKGBcdTY1ODdcdTY3MkNcdTVERjJcdThGNkNcdTYzNjJcdTRFM0EgJHtjYWxsb3V0Lm5hbWV9IFx1NjgzQ1x1NUYwRlx1RkYwMWApO1xuICAgIH1cblxuICAgIHByaXZhdGUgYWRqdXN0Q29sb3IoY29sb3I6IHN0cmluZywgb3BhY2l0eTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKGNvbG9yLnN0YXJ0c1dpdGgoJyMnKSkge1xuICAgICAgICAgICAgY29uc3QgciA9IHBhcnNlSW50KGNvbG9yLnNsaWNlKDEsIDMpLCAxNik7XG4gICAgICAgICAgICBjb25zdCBnID0gcGFyc2VJbnQoY29sb3Iuc2xpY2UoMywgNSksIDE2KTtcbiAgICAgICAgICAgIGNvbnN0IGIgPSBwYXJzZUludChjb2xvci5zbGljZSg1LCA3KSwgMTYpO1xuICAgICAgICAgICAgcmV0dXJuIGByZ2JhKCR7cn0sICR7Z30sICR7Yn0sICR7b3BhY2l0eX0pYDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sb3I7XG4gICAgfVxufVxuXG4vLyBcdTZERkJcdTUyQTBcdTU3M0FcdTY2NkZcdTU0MERcdTc5RjBcdTdGMTZcdThGOTFcdUZGRkRcdUZGRkRcdUZGRkRcdTYwMDFcdTY4NDZcbmNsYXNzIFNjZW5lTmFtZU1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHByaXZhdGUgbmFtZUlucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xuICAgIHByaXZhdGUgb25TdWJtaXQ6IChuYW1lOiBzdHJpbmcpID0+IHZvaWQ7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgY3VycmVudE5hbWU6IHN0cmluZywgb25TdWJtaXQ6IChuYW1lOiBzdHJpbmcpID0+IHZvaWQpIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuICAgICAgICB0aGlzLm5hbWVJbnB1dCA9IGNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgIHZhbHVlOiBjdXJyZW50TmFtZVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdzY2VuZS1uYW1lLW1vZGFsJyk7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1N0YxNlx1OEY5MVx1NTczQVx1NjY2Rlx1NTQwRFx1NzlGMCcgfSk7ICAvLyBcdTc4NkVcdTRGRERcdTRGN0ZcdTc1MjhcdTZCNjNcdTc4NkVcdTc2ODRcdTRFMkRcdTY1ODdcdTVCNTdcdTdCMjZcblxuICAgICAgICB0aGlzLm5hbWVJbnB1dC5zdHlsZS53aWR0aCA9ICcxMDAlJztcbiAgICAgICAgdGhpcy5uYW1lSW5wdXQuc3R5bGUubWFyZ2luQm90dG9tID0gJzIwcHgnO1xuICAgICAgICBjb250ZW50RWwuYXBwZW5kQ2hpbGQodGhpcy5uYW1lSW5wdXQpO1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ3NjZW5lLW5hbWUtbW9kYWwtYnV0dG9ucycpO1xuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2ZsZXgtZW5kJztcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmdhcCA9ICcxMHB4JztcblxuICAgICAgICBjb25zdCBzYXZlQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnXHU0RkREXHU1QjU4JyxcbiAgICAgICAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgdGV4dDogJ1x1NTNENlx1NkQ4OCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2F2ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld05hbWUgPSB0aGlzLm5hbWVJbnB1dC52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICBpZiAobmV3TmFtZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25TdWJtaXQobmV3TmFtZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTU3M0FcdTY2NkZcdTU0MERcdTc5RjBcdTRFMERcdTgwRkRcdTRFM0FcdTdBN0EnKTsgIC8vIFx1Nzg2RVx1NEZERFx1NEY3Rlx1NzUyOFx1NkI2M1x1Nzg2RVx1NzY4NFx1NEUyRFx1NjU4N1x1NUI1N1x1N0IyNlxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuICAgIH1cbn1cblxuLy8gXHU2REZCXHU1MkEwXHU1NzNBXHU2NjZGXHU5MTREXHU3RjZFXHU1OTBEXHU1MjM2XHU2QTIxXHU2MDAxXHU2ODQ2XG5jbGFzcyBTY2VuZUNvcHlNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwcml2YXRlIHBsdWdpbjogQ2FsbG91dEV4dHJhTWVzc2FnZVBsdWdpbjtcbiAgICBwcml2YXRlIHRhcmdldFNjZW5lOiBTY2VuZUNvbmZpZztcbiAgICBwcml2YXRlIG9uU3VibWl0OiAoc291cmNlU2NlbmVJZDogc3RyaW5nKSA9PiB2b2lkO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIGFwcDogQXBwLFxuICAgICAgICBwbHVnaW46IENhbGxvdXRFeHRyYU1lc3NhZ2VQbHVnaW4sXG4gICAgICAgIHRhcmdldFNjZW5lOiBTY2VuZUNvbmZpZyxcbiAgICAgICAgb25TdWJtaXQ6IChzb3VyY2VTY2VuZUlkOiBzdHJpbmcpID0+IHZvaWRcbiAgICApIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMudGFyZ2V0U2NlbmUgPSB0YXJnZXRTY2VuZTtcbiAgICAgICAgdGhpcy5vblN1Ym1pdCA9IG9uU3VibWl0O1xuICAgIH1cblxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ3NjZW5lLWNvcHktbW9kYWwnKTtcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnXHU0RUNFXHU1MTc2XHU0RUQ2XHU1NzNBXHU2NjZGXHU1OTBEXHU1MjM2XHU5MTREXHU3RjZFJyB9KTtcblxuICAgICAgICBjb25zdCBzY2VuZUxpc3QgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdzY2VuZS1jb3B5LWxpc3QnKTtcbiAgICAgICAgc2NlbmVMaXN0LnN0eWxlLm1hcmdpblRvcCA9ICcyMHB4JztcbiAgICAgICAgc2NlbmVMaXN0LnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcyMHB4JztcblxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTU3M0FcdTY2NkZcdTUyMTdcdTg4NjhcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NlbmVzLmZvckVhY2goc2NlbmUgPT4ge1xuICAgICAgICAgICAgaWYgKHNjZW5lLmlkICE9PSB0aGlzLnRhcmdldFNjZW5lLmlkKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2NlbmVJdGVtID0gc2NlbmVMaXN0LmNyZWF0ZURpdignc2NlbmUtY29weS1pdGVtJyk7XG4gICAgICAgICAgICAgICAgc2NlbmVJdGVtLnN0eWxlLnBhZGRpbmcgPSAnMTBweCc7XG4gICAgICAgICAgICAgICAgc2NlbmVJdGVtLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgICAgICBzY2VuZUl0ZW0uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzRweCc7XG4gICAgICAgICAgICAgICAgc2NlbmVJdGVtLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICc4cHgnO1xuICAgICAgICAgICAgICAgIHNjZW5lSXRlbS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpJztcblxuICAgICAgICAgICAgICAgIHNjZW5lSXRlbS5jcmVhdGVFbCgnc3BhbicsIHsgdGV4dDogc2NlbmUubmFtZSB9KTtcblxuICAgICAgICAgICAgICAgIHNjZW5lSXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vblN1Ym1pdChzY2VuZS5pZCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHNjZW5lSXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzY2VuZUl0ZW0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItaG92ZXIpJztcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHNjZW5lSXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzY2VuZUl0ZW0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KSc7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgdGV4dDogJ1x1NTNENlx1NkQ4OCcsXG4gICAgICAgICAgICBjbHM6ICdzY2VuZS1jb3B5LWNhbmNlbCdcbiAgICAgICAgfSk7XG4gICAgICAgIGNhbmNlbEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgY2FuY2VsQnV0dG9uLnN0eWxlLm1hcmdpbkxlZnQgPSAnYXV0byc7XG4gICAgICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XG4gICAgfVxufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FB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LEdBQUc7QUFDVCxTQUFLLFNBQVM7QUFDZCxTQUFLLGNBQWM7QUFDbkIsU0FBSyxXQUFXO0FBQUEsRUFDcEI7QUFBQSxFQUVBLFNBQVM7QUFDTCxVQUFNLEVBQUUsVUFBVSxJQUFJO0FBQ3RCLGNBQVUsTUFBTTtBQUNoQixjQUFVLFNBQVMsa0JBQWtCO0FBRXJDLGNBQVUsU0FBUyxNQUFNLEVBQUUsTUFBTSx5REFBWSxDQUFDO0FBRTlDLFVBQU0sWUFBWSxVQUFVLFVBQVUsaUJBQWlCO0FBQ3ZELGNBQVUsTUFBTSxZQUFZO0FBQzVCLGNBQVUsTUFBTSxlQUFlO0FBRy9CLFNBQUssT0FBTyxTQUFTLE9BQU8sUUFBUSxXQUFTO0FBQ3pDLFVBQUksTUFBTSxPQUFPLEtBQUssWUFBWSxJQUFJO0FBQ2xDLGNBQU0sWUFBWSxVQUFVLFVBQVUsaUJBQWlCO0FBQ3ZELGtCQUFVLE1BQU0sVUFBVTtBQUMxQixrQkFBVSxNQUFNLFNBQVM7QUFDekIsa0JBQVUsTUFBTSxlQUFlO0FBQy9CLGtCQUFVLE1BQU0sZUFBZTtBQUMvQixrQkFBVSxNQUFNLGtCQUFrQjtBQUVsQyxrQkFBVSxTQUFTLFFBQVEsRUFBRSxNQUFNLE1BQU0sS0FBSyxDQUFDO0FBRS9DLGtCQUFVLGlCQUFpQixTQUFTLE1BQU07QUFDdEMsZUFBSyxTQUFTLE1BQU0sRUFBRTtBQUN0QixlQUFLLE1BQU07QUFBQSxRQUNmLENBQUM7QUFFRCxrQkFBVSxpQkFBaUIsY0FBYyxNQUFNO0FBQzNDLG9CQUFVLE1BQU0sa0JBQWtCO0FBQUEsUUFDdEMsQ0FBQztBQUVELGtCQUFVLGlCQUFpQixjQUFjLE1BQU07QUFDM0Msb0JBQVUsTUFBTSxrQkFBa0I7QUFBQSxRQUN0QyxDQUFDO0FBQUEsTUFDTDtBQUFBLElBQ0osQ0FBQztBQUVELFVBQU0sZUFBZSxVQUFVLFNBQVMsVUFBVTtBQUFBLE1BQzlDLE1BQU07QUFBQSxNQUNOLEtBQUs7QUFBQSxJQUNULENBQUM7QUFDRCxpQkFBYSxNQUFNLFVBQVU7QUFDN0IsaUJBQWEsTUFBTSxhQUFhO0FBQ2hDLGlCQUFhLGlCQUFpQixTQUFTLE1BQU0sS0FBSyxNQUFNLENBQUM7QUFBQSxFQUM3RDtBQUNKOyIsCiAgIm5hbWVzIjogWyJfYSIsICJjYWxsb3V0SWQiLCAibWVzc2FnZURhdGEiLCAibWVzc2FnZUNvdW50IiwgImNvdW50U3BhbiIsICJidXR0b25Db250YWluZXIiLCAicHJpbnRDb250ZW50IiwgIndpbmRvdyIsICJyZXN0YXJ0QnV0dG9uIiwgInN0YXR1c1RleHQiXQp9Cg==

/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  CalloutMessageView: () => CalloutMessageView,
  default: () => CalloutExtraMessagePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  currentSceneId: "default",
  scenes: [{
    id: "default",
    name: "\u9ED8\u8BA4\u573A\u666F",
    callouts: []
  }],
  iconSettings: {
    type: 1,
    size: 24,
    position: {
      top: 8,
      right: 16
    }
  },
  isActivated: false,
  licenseKey: "",
  _lastInstallTime: Date.now(),
  hasUsedTrial: false,
  trialEndTime: null,
  showGlobalIcons: true,
  // 添加这一行，默认显示图标
  usePrismStyle: false,
  // 添加这一行
  showCalloutIcon: true,
  messages: {}
};
var CALL_OUT_MESSAGE_VIEW = "callout-message-view";
var CalloutExtraMessagePlugin = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.togglePrismStyle(this.settings.usePrismStyle);
    this.addSettingTab(new CalloutMessageSettingTab(this.app, this));
    const hasPermission = await this.checkActivation();
    if (hasPermission) {
      this.messageIconObserver = new MutationObserver((mutations) => {
        this.handleDOMChanges(mutations);
      });
      this.registerView(
        CALL_OUT_MESSAGE_VIEW,
        (leaf) => new CalloutMessageView(leaf, this)
      );
      this.registerEvent(
        this.app.workspace.on("active-leaf-change", () => {
          this.startObserving();
        })
      );
      this.registerEvent(
        this.app.workspace.on("file-open", () => {
          this.startObserving();
        })
      );
      this.addCommand({
        id: "transform-to-callout",
        name: "\u5C06\u9009\u4E2D\u6587\u672C\u8F6C\u6362\u4E3A Callout",
        editorCallback: (editor) => {
          this.transformToCallout(editor);
        }
      });
      this.registerContextMenu();
      this.addRibbonIcon(
        "message-circle",
        "Callout \u5907\u6CE8",
        async () => {
          const existingLeaves = this.app.workspace.getLeavesOfType(CALL_OUT_MESSAGE_VIEW);
          if (existingLeaves.length > 0) {
            this.app.workspace.revealLeaf(existingLeaves[0]);
          } else {
            const leaf = this.app.workspace.getRightLeaf(false);
            await leaf.setViewState({
              type: CALL_OUT_MESSAGE_VIEW,
              active: true
            });
            this.app.workspace.revealLeaf(leaf);
          }
        }
      );
      this.addRibbonIcon(
        "list",
        "\u663E\u793A\u6240\u6709 Callout \u7B14\u8BB0",
        async () => {
          const existingLeaves = this.app.workspace.getLeavesOfType(CALL_OUT_MESSAGE_VIEW);
          let leaf;
          if (existingLeaves.length > 0) {
            leaf = existingLeaves[0];
          } else {
            leaf = this.app.workspace.getRightLeaf(false);
            if (leaf) {
              await leaf.setViewState({
                type: CALL_OUT_MESSAGE_VIEW,
                active: true
              });
            }
          }
          if (leaf) {
            this.app.workspace.revealLeaf(leaf);
            const messageView = leaf.view;
            messageView.switchToAllMode();
          }
        }
      );
      this.startObserving();
    }
    this.registerEvent(
      this.app.workspace.on("css-change", () => {
        this.updateCalloutIconVisibility();
      })
    );
    this.updateCalloutIconVisibility();
  }
  async onunload() {
    const leaves = this.app.workspace.getLeavesOfType(CALL_OUT_MESSAGE_VIEW);
    for (const leaf of leaves) {
      await leaf.detach();
    }
  }
  // 处理 DOM 变化的新方法
  handleDOMChanges(mutations) {
    const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (!markdownView || !markdownView.file)
      return;
    const file = markdownView.file;
    const cache = this.app.metadataCache.getFileCache(file);
    const frontmatter = cache == null ? void 0 : cache.frontmatter;
    const globalIconsEnabled = this.settings.showGlobalIcons;
    const frontmatterDisplay = frontmatter == null ? void 0 : frontmatter["Callout extra message display"];
    let shouldShowIcons = false;
    if (!globalIconsEnabled) {
      shouldShowIcons = frontmatterDisplay === "Yes";
    } else {
      shouldShowIcons = frontmatterDisplay !== "No";
    }
    if (!shouldShowIcons) {
      const existingIcons = markdownView.contentEl.querySelectorAll(".callout-message-icon-container");
      existingIcons.forEach((icon) => icon.remove());
      return;
    }
    for (const mutation of mutations) {
      const addedNodes = Array.from(mutation.addedNodes);
      for (const node of addedNodes) {
        if (node instanceof HTMLElement) {
          const callouts = node.querySelectorAll(".callout");
          callouts.forEach((callout) => {
            if (callout instanceof HTMLElement && !callout.querySelector(".callout-message-icon")) {
              this.addMessageIconToCallout(callout);
            }
          });
        }
      }
    }
  }
  // 修改 addMessageIconToCallout 方法
  addMessageIconToCallout(callout) {
    var _a, _b;
    const existingContainer = callout.querySelector(".callout-message-icon-container");
    if (existingContainer) {
      const calloutId2 = this.getCalloutId(callout);
      const messageData2 = this.settings.messages[calloutId2];
      const messageCount2 = ((_a = messageData2 == null ? void 0 : messageData2.messages) == null ? void 0 : _a.length) || 0;
      const countSpan2 = existingContainer.querySelector(".callout-message-count");
      if (countSpan2) {
        countSpan2.textContent = messageCount2.toString();
      }
      return;
    }
    const iconContainer = document.createElement("div");
    iconContainer.className = "callout-message-icon-container";
    const icon = document.createElement("div");
    icon.className = "callout-message-icon";
    icon.innerHTML = this.getIconSvg(this.settings.iconSettings.type);
    icon.title = "\u70B9\u51FB\u6DFB\u52A0\u6216\u7F16\u8F91\u6D88\u606F";
    callout.style.setProperty("--icon-size", `${this.settings.iconSettings.size}px`);
    callout.style.setProperty("--icon-top-position", `${this.settings.iconSettings.position.top}px`);
    callout.style.setProperty("--icon-right-position", `${this.settings.iconSettings.position.right}px`);
    icon.style.width = `${this.settings.iconSettings.size}px`;
    icon.style.height = `${this.settings.iconSettings.size}px`;
    iconContainer.style.top = `${this.settings.iconSettings.position.top}px`;
    iconContainer.style.right = `${this.settings.iconSettings.position.right}px`;
    icon.addEventListener("click", async (e) => {
      e.preventDefault();
      e.stopPropagation();
      if (!await this.checkActivation())
        return;
      const calloutId2 = this.getCalloutId(callout);
      this.showMessageInput(callout);
    });
    iconContainer.appendChild(icon);
    const calloutId = this.getCalloutId(callout);
    const messageData = this.settings.messages[calloutId];
    const messageCount = ((_b = messageData == null ? void 0 : messageData.messages) == null ? void 0 : _b.length) || 0;
    const countSpan = document.createElement("span");
    countSpan.className = "callout-message-count";
    countSpan.textContent = messageCount.toString();
    countSpan.addEventListener("click", async (e) => {
      e.preventDefault();
      e.stopPropagation();
      if (!await this.checkActivation())
        return;
      const calloutId2 = this.getCalloutId(callout);
      let messageView = null;
      const existingLeaves = this.app.workspace.getLeavesOfType(CALL_OUT_MESSAGE_VIEW);
      if (existingLeaves.length > 0) {
        const leaf = existingLeaves[0];
        messageView = leaf.view;
        if (messageView) {
          messageView.switchToSingleMode(calloutId2);
        }
        this.app.workspace.revealLeaf(leaf);
      } else {
        const leaf = this.app.workspace.getRightLeaf(false);
        await leaf.setViewState({
          type: CALL_OUT_MESSAGE_VIEW,
          active: true
        });
        this.app.workspace.revealLeaf(leaf);
        messageView = leaf.view;
        if (messageView) {
          messageView.switchToSingleMode(calloutId2);
        }
      }
    });
    iconContainer.appendChild(countSpan);
    callout.appendChild(iconContainer);
    callout.style.position = "relative";
  }
  // 修改 updateCalloutMessageCount 方法
  updateCalloutMessageCount(callout) {
    var _a;
    const calloutId = this.getCalloutId(callout);
    const messageData = this.settings.messages[calloutId];
    const messageCount = ((_a = messageData == null ? void 0 : messageData.messages) == null ? void 0 : _a.length) || 0;
    const container = callout.querySelector(".callout-message-icon-container");
    if (container instanceof HTMLElement) {
      const countSpan = container.querySelector(".callout-message-count");
      if (countSpan) {
        countSpan.textContent = messageCount.toString();
      }
    }
  }
  // 弹框显示输入容
  async showMessageInput(callout) {
    if (!await this.checkActivation())
      return;
    const calloutId = this.getCalloutId(callout);
    const savedMessage = this.settings.messages[calloutId] || "";
    const modal = new MessageInputModal(this.app, this, calloutId);
    modal.open();
  }
  // 获取 callout 的 ID，用于保存消息
  getCalloutId(callout) {
    var _a;
    const footnote = (_a = callout.querySelector("span")) == null ? void 0 : _a.getAttribute("data-callout-id");
    if (footnote) {
      return footnote;
    }
    const timestamp = Date.now();
    const randomStr = Math.random().toString(36).substring(2, 8);
    const newId = `callout-${timestamp}-${randomStr}`;
    const span = callout.querySelector("span");
    if (span) {
      span.setAttribute("data-callout-id", newId);
    }
    return newId;
  }
  // 加载插件设
  async loadSettings() {
    const savedData = await this.loadData();
    if (!savedData) {
      this.settings = Object.assign({}, DEFAULT_SETTINGS);
      this.settings._lastInstallTime = Date.now();
      this.settings.hasUsedTrial = false;
      this.settings.trialEndTime = null;
      new import_obsidian.Notice("\u68C0\u6D4B\u5230\u63D2\u9996\u6B21\u5B89\u88C5\u6216\u91CD\u65B0\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\uFFFD\u88C5\uFF0C\u5DF2\u542F\u7528\u8BD5\uFFFD\uFFFD\uFFFD\uFFFD\u529F\uFFFD\uFFFD");
      await this.saveSettings();
      return;
    }
    this.settings = Object.assign({}, DEFAULT_SETTINGS, savedData);
    await this.saveSettings();
  }
  // 存插件设置
  async saveSettings() {
    await this.saveData(this.settings);
  }
  // 添加侧边栏图标
  addSidebarIcon() {
    const sidebarIconEl = this.addRibbonIcon(
      "message-circle",
      // 使用一致标
      "Open Callout Extra Message",
      () => {
        this.activateView();
      }
    );
    sidebarIconEl.addClass("callout-sidebar-icon");
  }
  // 激活自定义视图
  async activateView() {
    const existingLeaves = this.app.workspace.getLeavesOfType(CALL_OUT_MESSAGE_VIEW);
    let leaf;
    if (existingLeaves.length > 0) {
      leaf = existingLeaves[0];
    } else {
      if (!this.app.workspace.getRightLeaf(false)) {
        await this.app.workspace.getRightLeaf(true);
      }
      const rightSplit = this.app.workspace.getRightLeaf(false);
      if (rightSplit) {
        leaf = rightSplit;
        await leaf.setViewState({
          type: CALL_OUT_MESSAGE_VIEW,
          active: true
        });
      } else {
        new import_obsidian.Notice("\u65E0\u6CD5\u521B\u5EFA\u89C6\u56FE");
        return;
      }
    }
    if (leaf.view instanceof CalloutMessageView) {
      leaf.view.getIcon = () => "message-circle";
      leaf.view.getDisplayText = () => "Callout \u5907\u6CE8";
    }
    this.app.workspace.revealLeaf(leaf);
    if (leaf.view instanceof CalloutMessageView) {
      leaf.view.displayMessages();
    }
  }
  // 注册 Transform to Callout 命令
  async transformToCallout(editor, calloutIndex = 0) {
    if (!await this.checkActivation())
      return;
    const selection = editor.getSelection();
    if (!selection) {
      new import_obsidian.Notice("\u8BF7\u5148\u9009\u62E9\u8981\u8F6C\u6362\u7684\u6587\u672C");
      return;
    }
    const currentScene = this.settings.scenes.find(
      (scene) => scene.id === this.settings.currentSceneId
    );
    if (!currentScene || !currentScene.callouts[calloutIndex]) {
      new import_obsidian.Notice("\u672A\u627E\u5230\u5BF9\u5E94\u7684 Callout \u914D\u7F6E");
      return;
    }
    const callout = currentScene.callouts[calloutIndex];
    const timestamp = Date.now();
    const randomStr = Math.random().toString(36).substr(2, 6);
    const calloutId = `callout-${timestamp}-${randomStr}`;
    editor.replaceSelection(`<font color="${callout.textColor}">${selection}</font>`);
    const coloredText = editor.getSelection();
    const formattedText = `> [!${callout.type}] **<font color="${callout.color}">${callout.name}</font>**
> <span style="background:${callout.color}" data-callout-id="${calloutId}"><font color="${callout.textColor}">${coloredText}</font></span>

`;
    editor.replaceSelection(formattedText);
    new import_obsidian.Notice(`\u6587\u672C\u5DF2\u8F6C\u6362\u4E3A ${callout.name} \u683C\uFF01`);
  }
  // 获取当前编辑器实��
  getEditor() {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (!activeView)
      return null;
    const editor = activeView.editor;
    return editor;
  }
  // 获取当前选中本
  getSelectedText(editor) {
    if (!editor.getSelection()) {
      this.selectLineUnderCursor(editor);
    }
    return editor.getSelection();
  }
  // 如果没有本选中，则选择光标所在行
  selectLineUnderCursor(editor) {
    const cursor = editor.getCursor();
    const line = editor.getLine(cursor.line);
    editor.setSelection(
      { line: cursor.line, ch: 0 },
      { line: cursor.line, ch: line.length }
    );
  }
  // 观察 DOM 变
  async startObserving() {
    var _a;
    (_a = this.messageIconObserver) == null ? void 0 : _a.disconnect();
    if (!await this.checkActivation()) {
      return;
    }
    const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (!markdownView || !markdownView.file)
      return;
    const file = markdownView.file;
    const cache = this.app.metadataCache.getFileCache(file);
    const frontmatter = cache == null ? void 0 : cache.frontmatter;
    const globalIconsEnabled = this.settings.showGlobalIcons;
    const frontmatterDisplay = frontmatter == null ? void 0 : frontmatter["Callout extra message display"];
    let shouldShowIcons = false;
    if (!globalIconsEnabled) {
      shouldShowIcons = frontmatterDisplay === "Yes";
    } else {
      shouldShowIcons = frontmatterDisplay !== "No";
    }
    const contentEl = markdownView.contentEl;
    if (!shouldShowIcons) {
      const existingIcons = contentEl.querySelectorAll(".callout-message-icon-container");
      existingIcons.forEach((icon) => icon.remove());
      return;
    }
    this.messageIconObserver.observe(contentEl, {
      childList: true,
      subtree: true
    });
    const callouts = contentEl.querySelectorAll(".callout");
    callouts.forEach((callout) => {
      if (callout instanceof HTMLElement) {
        this.addMessageIconToCallout(callout);
      }
    });
  }
  // 添加一个新方法来更新所有打开的笔记
  updateAllOpenNotes() {
    const leaves = this.app.workspace.getLeavesOfType("markdown");
    leaves.forEach((leaf) => {
      const view = leaf.view;
      if (view instanceof import_obsidian.MarkdownView) {
        this.startObserving();
      }
    });
  }
  registerContextMenu() {
    this.registerEvent(
      this.app.workspace.on("editor-menu", (menu, editor) => {
        menu.addItem((item) => {
          item.setTitle("\u6211\u7684\u7B14\u8BB0\u7C7B\u578B").setIcon("quote-glyph").setSection("a-my-notes").onClick(async () => {
            if (!await this.checkActivation())
              return;
            const modal = new CalloutSelectionModal(this.app, this, editor);
            modal.open();
          });
        });
        menu.addSeparator();
      })
    );
  }
  async validateLicense(key) {
    const validLicenseKey = "L9Z3-KJ2V-P4A6-QT1Y-M5B0-R8N7-DX3W-H6U9-FC0M-V2G1";
    const cleanInput = key.replace(/[\s-]/g, "");
    const cleanValid = validLicenseKey.replace(/[\s-]/g, "");
    return cleanInput === cleanValid;
  }
  // 修�����插件功能方法，添加授权检查
  async checkActivation() {
    if (this.settings.licenseKey && await this.validateLicense(this.settings.licenseKey)) {
      return true;
    }
    if (this.settings.trialEndTime) {
      const now = Date.now();
      if (now < this.settings.trialEndTime) {
        return true;
      } else {
        this.settings.trialEndTime = null;
        await this.saveSettings();
        this.disablePluginFeatures();
        return false;
      }
    }
    return false;
  }
  updateMessageCount(callout, container) {
    var _a;
    const calloutId = this.getCalloutId(callout);
    const messageData = this.settings.messages[calloutId];
    const messageCount = ((_a = messageData == null ? void 0 : messageData.messages) == null ? void 0 : _a.length) || 0;
    const countSpan = container.querySelector(".callout-message-count");
    if (countSpan) {
      countSpan.textContent = messageCount.toString();
    }
  }
  // 在 CalloutMessagePlugin 类中添加禁用功能的方法
  disablePluginFeatures() {
    var _a;
    (_a = this.messageIconObserver) == null ? void 0 : _a.disconnect();
    const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (markdownView) {
      const icons = markdownView.contentEl.querySelectorAll(".callout-message-icon-container");
      icons.forEach((icon) => icon.remove());
    }
    this.app.workspace.detachLeavesOfType(CALL_OUT_MESSAGE_VIEW);
    this.app.workspace.trigger("editor-menu");
    const commandId = "transform-to-callout";
    if (this.app.commands.commands[commandId]) {
      delete this.app.commands.commands[commandId];
    }
  }
  getIconSvg(type) {
    const icons = {
      1: '<svg t="1733304888910" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2829" width="200" height="200"><path d="M507.297959 862.040816c-52.244898 0-102.922449-9.404082-151.510204-27.689796l-116.506122 25.6c-24.032653 5.22449-46.497959 0-60.604082-14.628571-14.628571-14.628571-19.853061-36.571429-14.628571-60.604082l17.240816-77.844898c-43.363265-57.469388-66.35102-122.77551-66.35102-190.693877C114.938776 320.783673 291.004082 161.959184 507.297959 161.959184c107.62449 0 208.457143 36.04898 283.689796 101.877551C867.265306 330.710204 909.061224 420.04898 909.061224 516.179592c0 190.693878-180.244898 345.861224-401.763265 345.861224z" fill="#7BD4EF" p-id="2830"></path><path d="M512 581.485714c-38.138776 0-69.485714-31.346939-69.485714-69.485714s31.346939-69.485714 69.485714-69.485714 69.485714 31.346939 69.485714 69.485714-31.346939 69.485714-69.485714 69.485714zM710.530612 581.485714c-38.138776 0-69.485714-31.346939-69.485714-69.485714s31.346939-69.485714 69.485714-69.485714 69.485714 31.346939 69.485715 69.485714-31.346939 69.485714-69.485715 69.485714zM313.469388 581.485714c-38.138776 0-69.485714-31.346939-69.485715-69.485714s31.346939-69.485714 69.485715-69.485714 69.485714 31.346939 69.485714 69.485714-31.346939 69.485714-69.485714 69.485714z" fill="#278DCA" p-id="2831"></path></svg>',
      2: '<svg t="1733305164756" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4084" width="200" height="200"><path d="M913.33 144.15v577.57H590.85c-8.94 0-17.41 2.58-24.58 7.12L304.72 854.97v-87.24c0-25.41-20.6-46-46-46H109.33V144.15h804m25.42-46H83.92c-11.37 0-20.58 9.22-20.58 20.58v628.41c0 11.37 9.22 20.58 20.58 20.58h174.8v160.49L591.17 767.9l-0.31-0.18h347.9c11.37 0 20.58-9.22 20.58-20.58v-628.4c-0.01-11.37-9.22-20.59-20.59-20.59z" fill="#5BE7C4" p-id="4085"></path><path d="M720.54 468.51H302.12c-12.7 0-23-10.3-23-23s10.3-23 23-23h418.42c12.7 0 23 10.3 23 23s-10.29 23-23 23z" fill="#7A57D1" p-id="4086"></path><path d="M511.33 677.72c-12.7 0-23-10.3-23-23V236.3c0-12.7 10.3-23 23-23s23 10.3 23 23v418.42c0 12.71-10.29 23-23 23z" fill="#7A57D1" p-id="4087"></path><path d="M745.81 200.71h-41.97c-6.63 0-12-5.37-12-12s5.37-12 12-12h41.97c6.63 0 12 5.37 12 12s-5.37 12-12 12zM861.39 351.81c-6.63 0-12-5.37-12-12V227.37c0-14.7-11.96-26.67-26.67-26.67h-24.38c-6.63 0-12-5.37-12-12s5.37-12 12-12h24.38c27.94 0 50.67 22.73 50.67 50.67v112.44c0 6.63-5.38 12-12 12z" fill="#5BE7C4" p-id="4088"></path></svg>',
      3: '<svg t="1733305183783" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4249" width="200" height="200"><path d="M892.84 410.07H459.97c-9.21 0-16.67 7.44-16.67 16.63v333c0 9.22 7.46 16.63 16.67 16.63h266.38l116.54 66.63v-66.63h49.95c9.21 0 16.67-7.41 16.67-16.63v-333c0-9.19-7.46-16.63-16.67-16.63z" fill="#EC87C0" p-id="4250"></path><path d="M459.97 410.07c-9.21 0-16.67 7.44-16.67 16.63v216.47h249.75c9.21 0 16.67-7.46 16.67-16.68V410.07H459.97z" fill="#D770AD" p-id="4251"></path><path d="M659.76 176.96H126.95c-9.21 0-16.63 7.46-16.63 16.66v399.61c0 9.17 7.43 16.63 16.63 16.63h49.95v99.9l179.81-99.9h303.05c9.18 0 16.63-7.46 16.63-16.63V193.62c0.01-9.2-7.44-16.66-16.63-16.66z" fill="#AC92EB" p-id="4252"></path><path d="M448.87 276.86c-21.74 0-41.4 8.94-55.5 23.33-14.11-14.39-33.76-23.33-55.51-23.33-42.9 0-77.69 34.79-77.69 77.7 0 88.8 133.2 166.48 133.2 166.48s133.19 77.68 133.19 166.48c0 42.91-34.78 77.7-77.69 77.7z" fill="#F5F7FA" p-id="4253"></path><path d="M448.87 276.86c-5.72 0-11.29 0.63-16.66 1.81 34.91 7.62 61.06 38.69 61.06 75.9 0 69.17-80.83 131.61-116.56 155.82 10.15 6.88 16.66 10.66 16.66 10.66s133.19-77.68 133.19-166.48c0-42.92-34.78-77.71-77.69-77.71z" opacity=".1" p-id="4254"></path></svg>',
      4: '<svg t="1733305238955" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7560" width="200" height="200"><path d="M512 512m-512 0a512 512 0 1 0 1024 0 512 512 0 1 0-1024 0Z" fill="#FF9D54" p-id="7561"></path><path d="M140.4844 241.955886a46.55193 101.696557 29.75 1 0 80.832661 46.199672 46.55193 101.696557 29.75 1 0-80.832661-46.199672Z" fill="#FFFFFF" p-id="7562"></path><path d="M93.495652 431.86087m-22.260869 0a22.26087 22.26087 0 1 0 44.521739 0 22.26087 22.26087 0 1 0-44.521739 0Z" fill="#FFFFFF" p-id="7563"></path><path d="M832.556522 857.043478a24.486957 24.486957 0 1 0 0-48.973913 24.486957 24.486957 0 0 0 0 48.973913z m0 24.486957a48.973913 48.973913 0 1 0 0-97.947826 48.973913 48.973913 0 0 0 0 97.947826z" fill="#FFFFFF" p-id="7564"></path><path d="M735.392278 320.556522H297.51207C275.785461 320.556522 258.226087 338.3296 258.226087 360.314435v312.480278c0 21.97593 17.559374 39.749009 39.285983 39.749009h63.024973l10.685218 47.941008c4.968626 22.216348 31.833043 30.693287 48.350609 15.199722l67.584-63.131826h248.235408c21.726609 0 39.285983-17.781983 39.285983-39.757913V360.314435C774.678261 338.383026 757.056557 320.556522 735.392278 320.556522zM401.497043 534.643757c-18.378574 0-33.213217-15.083965-33.213217-33.613914s14.896974-33.613913 33.213217-33.613913c18.36967 0 33.213217 15.083965 33.213218 33.613913s-14.843548 33.613913-33.213218 33.613914z m120.965566 2.341843c-18.36967 0-33.213217-15.083965-33.213218-33.613913 0-18.538852 14.896974-33.622817 33.213218-33.622817 18.36967 0 33.213217 15.083965 33.213217 33.622817 0 18.521043-14.843548 33.613913-33.213217 33.613913z m120.965565 0c-18.36967 0-33.213217-15.083965-33.213217-33.613913 0-18.538852 14.896974-33.622817 33.213217-33.622817 18.36967 0 33.213217 15.083965 33.213217 33.622817 0 18.521043-14.843548 33.613913-33.213217 33.613913z" fill="#FFFFFF" p-id="7565"></path></svg>',
      5: '<svg t="1733305266547" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8918" width="200" height="200"><path d="M512 736l-192 192v-192H128a32 32 0 0 1-32-32V128a32 32 0 0 1 32-32h768a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H512z" fill="#FFFFFF" p-id="8919"></path><path d="M512 736l-192 192v-192H128a32 32 0 0 1-32-32V128a32 32 0 0 1 32-32h768a32 32 0 0 1 32 32v576a32 32 0 0 1-32 32H512z m-160 114.752L498.752 704H896V128H128v576h224v146.752z" fill="#5D6D7E" p-id="8920"></path><path d="M224 384h576v32H224v-32z m0 96h576v32H224v-32z m0 96h320v32H224v-32z" fill="#808FA1" p-id="8921"></path><path d="M224 224h576v192H224z" fill="#C49F74" p-id="8922"></path></svg>'
    };
    return icons[type] || icons[1];
  }
  // 修改 refreshAllIcons 方法
  refreshAllIcons() {
    const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (!markdownView)
      return;
    const callouts = markdownView.contentEl.querySelectorAll(".callout");
    callouts.forEach((callout) => {
      if (callout instanceof HTMLElement) {
        const existingIcon = callout.querySelector(".callout-message-icon-container");
        if (existingIcon) {
          existingIcon.remove();
        }
        callout.style.setProperty("--icon-size", `${this.settings.iconSettings.size}px`);
        callout.style.setProperty("--icon-top-position", `${this.settings.iconSettings.position.top}px`);
        callout.style.setProperty("--icon-right-position", `${this.settings.iconSettings.position.right}px`);
        this.addMessageIconToCallout(callout);
      }
    });
  }
  // 修改 togglePrismStyle 方法
  togglePrismStyle(enabled) {
    const rootElement = document.body;
    if (enabled) {
      const styleTag = document.createElement("style");
      styleTag.id = "callout-prism-styles";
      styleTag.textContent = `
                body:not(.pt-disable-callout-styling) {
                    --callout-padding: 4px;
                    --callout-radius: var(--radius-m);
                    --callout-background-alpha: 20%;
                }

                body:not(.pt-disable-callout-styling) .callout {
                    background-color: unset;
                    position: relative !important;
                }

                .callout-message-icon-container {
                    position: absolute !important;
                    z-index: 9999 !important;
                    display: flex !important;
                    align-items: center !important;
                    gap: 4px !important;
                    cursor: pointer !important;
                    pointer-events: all !important;
                    user-select: none !important;
                }

                .callout-message-icon {
                    display: flex !important;
                    align-items: center !important;
                    justify-content: center !important;
                    pointer-events: all !important;
                    z-index: 9999 !important;
                }

                /* \u6DFB\u52A0\u65B0\u7684\u6837\u5F0F\u89C4\u5219\u6765\u7406\u52A8\u6001\u5C3A\u5BF8\u548C\u4F4D\u7F6E */
                .callout-message-icon-container[style*="top"],
                .callout-message-icon-container[style*="right"] {
                    top: var(--icon-top-position) !important;
                    right: var(--icon-right-position) !important;
                }

                .callout-message-icon[style*="width"],
                .callout-message-icon[style*="height"] {
                    width: var(--icon-size) !important;
                    height: var(--icon-size) !important;
                }

                .callout-message-count {
                    display: inline-flex !important;
                    align-items: center !important;
                    justify-content: center !important;
                    background-color: var(--text-accent) !important;
                    color: white !important;
                    border-radius: 50% !important;
                    width: 20px !important;
                    height: 20px !important;
                    font-size: 12px !important;
                    cursor: pointer !important;
                    pointer-events: all !important;
                    z-index: 9999 !important;
                    user-select: none !important;
                }

                .callout:hover .callout-message-icon-container {
                    opacity: 1 !important;
                    visibility: visible !important;
                }

                .workspace-leaf-content[data-type="markdown"] .callout-message-icon-container {
                    z-index: 9999 !important;
                }

                .callout-message-icon-container::before {
                    content: '';
                    position: absolute;
                    top: -5px;
                    right: -5px;
                    bottom: -5px;
                    left: -5px;
                    z-index: -1;
                }

                .callout-title {
                    position: relative;
                    z-index: 5;
                    gap: unset;
                    align-items: center;
                    min-height: 36px;
                    border: 2px solid;
                    border-radius: var(--radius-m);
                    background: rgba(var(--callout-color), 0.05);
                    pointer-events: auto;
                }

                .callout-title:empty + .callout-content {
                    padding: var(--size-4-1) var(--size-4-3);
                    border-top-style: solid;
                    border-top-width: 1px;
                    border-radius: var(--radius-m);
                }

                .callout-title-inner {
                    padding: var(--size-4-1) 0;
                    margin: 0 var(--size-4-1);
                }

                .callout-icon {
                    align-self: unset;
                    margin: 0 var(--size-4-1) 0 var(--size-4-2);
                    border-radius: var(--radius-m);
                }

                .callout-fold {
                    display: flex;
                    align-self: unset;
                    margin-top: unset;
                    margin-left: auto;
                }

                .callout-content {
                    padding: var(--size-4-5) var(--size-4-3) var(--size-4-1) var(--size-4-3);
                    margin-top: -16px;
                    border-right: 1px solid rgba(var(--callout-color));
                    border-bottom: 1px solid rgba(var(--callout-color));
                    border-left: 1px solid rgba(var(--callout-color));
                    border-bottom-right-radius: var(--radius-m);
                    border-bottom-left-radius: var(--radius-m);
                    background: rgba(var(--callout-color), 0);
                }

                .callout p {
                    font-family: 'Palatino', 'Kai', '\u6977\u4F53', serif;
                    margin-top: 20px;
                    margin-bottom: 0;
                }

                .callout-highlight {
                    animation: highlight-pulse 2s ease-in-out;
                }

                @keyframes highlight-pulse {
                    0% {
                        box-shadow: 0 0 0 0 rgba(var(--text-accent-rgb), 0.4);
                    }
                    70% {
                        box-shadow: 0 0 0 10px rgba(var(--text-accent-rgb), 0);
                    }
                    100% {
                        box-shadow: 0 0 0 0 rgba(var(--text-accent-rgb), 0);
                    }
                }

                /* \u6DFB\u52A0\u6240\u6709 Callout \u7C7B\u578B\u7684\u6837\u5F0F */
                ${this.getCalloutTypeStyles()}
            `;
      document.head.appendChild(styleTag);
    } else {
      const existingStyle = document.getElementById("callout-prism-styles");
      if (existingStyle) {
        existingStyle.remove();
      }
    }
    this.refreshAllIcons();
  }
  // 添加一个新方法来生成所有 Callout 类型的样式
  getCalloutTypeStyles() {
    return `
            /* Type 1 - Note */
            body:not(.pt-disable-callout-styling) .callout[data-callout="note"] > .callout-title {
                color: var(--color-grey-text);
                background-color: var(--color-grey-base);
                border-color: var(--color-grey-tint);
            }
            body:not(.pt-disable-callout-styling) .callout[data-callout="note"] > .callout-content {
                background-color: hsla(var(--color-grey-base-hsl), var(--callout-background-alpha));
                border-color: var(--color-grey-tint);
            }

            /* Type 2 - Abstract/Summary/TLDR */
            body:not(.pt-disable-callout-styling) .callout:is([data-callout="abstract"],[data-callout="summary"],[data-callout="tldr"]) > .callout-title {
                color: var(--color-cyan-text);
                background-color: var(--color-cyan-base);
                border-color: var(--color-cyan-tint);
            }
            body:not(.pt-disable-callout-styling) .callout:is([data-callout="abstract"],[data-callout="summary"],[data-callout="tldr"]) > .callout-content {
                background-color: hsla(var(--color-cyan-base-hsl), var(--callout-background-alpha));
                border-color: var(--color-cyan-tint);
            }

            /* \u7EE7\u7EED\u52A0\u5176\u4ED6\u7C7B\u578B\u7684\u6837\u5F0F... */
            /* \u8FD9\u91CC\u53EF\u4EE5\u7EE7\u7EED\u6DFB\u52A0\u5176\u4ED6\u7C7B\u578B\u7684\u6837\u5F0F\uFF0C\u4E0E\u539F\u59CB CSS \u4FDD\u6301\u4E00\u81F4 */
        `;
  }
  // 添加更新图标显示状态的方法
  updateCalloutIconVisibility() {
    const bodyClasses = document.body.classList;
    if (this.settings.showCalloutIcon) {
      bodyClasses.add("show-callout-icon");
    } else {
      bodyClasses.remove("show-callout-icon");
    }
  }
};
var MessageInputModal = class extends import_obsidian.Modal {
  // 添加消息索引属性
  constructor(app, plugin, calloutId, messageIndex) {
    super(app);
    this.plugin = plugin;
    this.calloutId = calloutId;
    this.messageIndex = messageIndex;
    this.inputEl = document.createElement("textarea");
  }
  onOpen() {
    var _a;
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("message-input-modal");
    contentEl.createEl("h3", { text: "\u7F16\u8F91 Callout \u5907\u6CE8" });
    if (typeof this.messageIndex === "number") {
      const messageData = this.plugin.settings.messages[this.calloutId];
      if ((_a = messageData == null ? void 0 : messageData.messages) == null ? void 0 : _a[this.messageIndex]) {
        this.inputEl.value = messageData.messages[this.messageIndex].text;
      }
    }
    this.inputEl.rows = 10;
    this.inputEl.placeholder = "\u8BF7\u8F93\u5165 Callout \u5907\u6CE8\u4FE1\u606F...";
    const buttonContainer = contentEl.createEl("div", {
      cls: "message-input-modal-buttons"
    });
    const saveButton = buttonContainer.createEl("button", {
      text: "\u4FDD\u5B58",
      cls: "mod-cta"
    });
    const cancelButton = buttonContainer.createEl("button", {
      text: "\u53D6\u6D88"
    });
    saveButton.addEventListener("click", () => {
      this.saveMessage();
      this.close();
    });
    cancelButton.addEventListener("click", () => this.close());
    contentEl.appendChild(this.inputEl);
    contentEl.appendChild(buttonContainer);
  }
  async saveMessage() {
    var _a, _b;
    const text = this.inputEl.value.trim();
    if (!text)
      return;
    if (!this.plugin.settings.messages[this.calloutId]) {
      this.plugin.settings.messages[this.calloutId] = {
        messages: []
      };
    }
    const timestamp = new Date().toLocaleString();
    if (typeof this.messageIndex === "number") {
      this.plugin.settings.messages[this.calloutId].messages[this.messageIndex] = {
        text,
        timestamp
      };
    } else {
      this.plugin.settings.messages[this.calloutId].messages.push({
        text,
        timestamp
      });
    }
    await this.plugin.saveSettings();
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (activeView) {
      const callout = (_a = activeView.contentEl.querySelector(
        `[data-callout-id="${this.calloutId}"]`
      )) == null ? void 0 : _a.closest(".callout");
      if (callout instanceof HTMLElement) {
        this.plugin.updateCalloutMessageCount(callout);
      }
    }
    const messageView = (_b = this.app.workspace.getLeavesOfType(CALL_OUT_MESSAGE_VIEW)[0]) == null ? void 0 : _b.view;
    if (messageView) {
      messageView.displayMessages();
    }
  }
  updateAllCalloutCounts(calloutId) {
    const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (!markdownView)
      return;
    const callouts = markdownView.contentEl.querySelectorAll(".callout");
    callouts.forEach((callout) => {
      if (callout instanceof HTMLElement) {
        const id = this.plugin.getCalloutId(callout);
        if (id === calloutId) {
          const container = callout.querySelector(".callout-message-icon-container");
          if (container instanceof HTMLElement) {
            this.plugin.updateMessageCount(callout, container);
          }
        }
      }
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var CalloutMessageView = class extends import_obsidian.View {
  constructor(leaf, plugin) {
    super(leaf);
    this.currentCalloutId = null;
    this.viewMode = "all";
    // 添加新方法以支持导航
    this.navigation = true;
    this.plugin = plugin;
    this.containerEl.empty();
    this.initializeButtons();
    this.messageContainer = this.containerEl.createDiv("callout-messages-container");
    this.registerEvent(
      this.app.workspace.on("active-leaf-change", () => {
        if (this.viewMode === "all") {
          this.displayMessages();
        }
      })
    );
    this.registerEvent(
      this.app.workspace.on("editor-change", () => {
        setTimeout(() => {
          if (this.viewMode === "all") {
            this.displayMessages();
          }
        }, 100);
      })
    );
    this.registerEvent(
      this.app.workspace.on("file-open", () => {
        if (this.viewMode === "all") {
          this.displayMessages();
        }
      })
    );
    this.registerEvent(
      this.app.workspace.on("layout-change", () => {
        setTimeout(() => {
          if (this.viewMode === "all") {
            this.displayMessages();
          }
        }, 100);
      })
    );
    if (this.viewMode === "all") {
      this.displayMessages();
    }
  }
  initializeButtons() {
    this.buttonContainer = this.containerEl.createDiv("view-buttons-row");
    const allButton = this.buttonContainer.createEl("button", {
      text: "\u663E\u793A\u5F53\u524D\u6240\u6709 Callout \u7B14\u8BB0",
      cls: this.viewMode === "all" ? "mod-cta" : ""
    });
    const singleButton = this.buttonContainer.createEl("button", {
      text: "\u663E\u793A\u5355\u4E2A Callout \u7B14\u8BB0",
      cls: this.viewMode === "single" ? "mod-cta" : ""
    });
    allButton.addEventListener("click", () => {
      this.switchToAllMode();
    });
    singleButton.addEventListener("click", () => {
      if (this.currentCalloutId) {
        this.switchToSingleMode(this.currentCalloutId);
      } else {
        new import_obsidian.Notice("\u70B9\u51FB Callout \u53F3\u4E0A\u89D2\u7684\u6570\u5B57\u6765\u67E5\u770B\u5355\u4E2A Callout \u7684\u5907\u6CE8");
      }
    });
    const exportButtonRow = this.buttonContainer.createDiv("export-button-row");
    const exportButton = exportButtonRow.createEl("button", {
      text: "\u5BFC\u51FA\u7B14\u8BB0",
      cls: "export-button"
    });
    exportButton.addEventListener("click", () => {
      this.exportToPDF();
    });
  }
  // 修改 switchViewMode 方法
  switchViewMode(mode, activeButton, inactiveButton) {
    this.viewMode = mode;
    activeButton.addClass("mod-cta");
    inactiveButton.removeClass("mod-cta");
    this.messageContainer.empty();
    if (mode === "single") {
      if (this.currentCalloutId) {
        this.displayMessages();
      } else {
        new import_obsidian.Notice("\u70B9\u51FB Callout \u53F3\u4E0A\u89D2\u7684\u6570\u5B57\u6765\u67E5\u770B\u5355\u4E2A Callout \u7684\u5907\u6CE8");
      }
    } else if (mode === "all") {
      this.displayMessages();
    }
  }
  // 修改 switchToAllMode 方法
  switchToAllMode() {
    this.viewMode = "all";
    this.currentCalloutId = null;
    this.updateButtonStates();
    this.refreshView();
  }
  // 修改 switchToSingleMode 方法
  switchToSingleMode(calloutId) {
    var _a;
    this.viewMode = "single";
    this.currentCalloutId = calloutId;
    this.updateButtonStates();
    this.messageContainer.empty();
    if (!calloutId) {
      new import_obsidian.Notice("\u70B9\u51FB Callout \u53F3\u4E0A\u89D2\u7684\u6570\u5B57\u6765\u67E5\u770B\u5355\u4E2A Callout \u7684\u5907\u6CE8");
      return;
    }
    const messageData = this.plugin.settings.messages[calloutId];
    if (((_a = messageData == null ? void 0 : messageData.messages) == null ? void 0 : _a.length) > 0) {
      this.renderMessages(calloutId, messageData);
    } else {
      this.showEmptyMessage("\u8BE5 Callout \u6682\u65E0\u5907\u6CE8");
    }
  }
  setCurrentCallout(calloutId) {
    this.currentCalloutId = calloutId;
    this.viewMode = "single";
    this.updateButtonStates();
    this.displayMessages();
  }
  updateButtonStates() {
    const buttons = this.buttonContainer.querySelectorAll("button");
    buttons[0].toggleClass("mod-cta", this.viewMode === "all");
    buttons[1].toggleClass("mod-cta", this.viewMode === "single");
  }
  // 修改 displayMessages 方法
  displayMessages() {
    var _a;
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (!activeView)
      return;
    this.messageContainer.empty();
    const callouts = activeView.contentEl.querySelectorAll(".callout");
    const currentCalloutIds = /* @__PURE__ */ new Set();
    callouts.forEach((callout) => {
      if (callout instanceof HTMLElement) {
        const id = this.getCalloutIdFromElement(callout);
        if (id)
          currentCalloutIds.add(id);
      }
    });
    const messages = this.plugin.settings.messages;
    if (this.viewMode === "single" && this.currentCalloutId) {
      const messageData = messages[this.currentCalloutId];
      if (((_a = messageData == null ? void 0 : messageData.messages) == null ? void 0 : _a.length) > 0) {
        this.renderMessages(this.currentCalloutId, messageData);
      } else {
        this.showEmptyMessage("\u8BE5 Callout \u6682\u65E0\u5907\u6CE8");
      }
    } else if (this.viewMode === "all") {
      let hasMessages = false;
      currentCalloutIds.forEach((calloutId) => {
        var _a2;
        const messageData = messages[calloutId];
        if (((_a2 = messageData == null ? void 0 : messageData.messages) == null ? void 0 : _a2.length) > 0) {
          const groupContainer = this.messageContainer.createDiv("callout-message-group");
          const groupTitle = groupContainer.createDiv("callout-message-group-title");
          const calloutConfig = this.getCalloutConfigForMessage(calloutId);
          groupTitle.style.color = calloutConfig.color;
          groupTitle.style.borderBottom = `2px solid ${calloutConfig.color}`;
          groupTitle.style.marginBottom = "10px";
          groupTitle.style.paddingBottom = "5px";
          groupTitle.style.fontWeight = "bold";
          groupTitle.textContent = `${calloutConfig.name} \u7684\u5907\u6CE8`;
          messageData.messages.forEach((message, index) => {
            const messageEl = this.createMessageElement(
              calloutId,
              message,
              index,
              messageData,
              calloutConfig
            );
            groupContainer.appendChild(messageEl);
          });
          hasMessages = true;
        }
      });
      if (!hasMessages) {
        this.showEmptyMessage("\u5F53\u524D\u6587\u6863\u4E2D\u6CA1\u6709 Callout \u5907\u6CE8");
      }
    }
  }
  // 新增：消息渲染方法
  renderMessages(calloutId, messageData) {
    if (!(messageData == null ? void 0 : messageData.messages))
      return;
    this.messageContainer.empty();
    const calloutConfig = this.getCalloutConfigForMessage(calloutId);
    messageData.messages.forEach((message, index) => {
      const messageEl = this.createMessageElement(
        calloutId,
        message,
        index,
        messageData,
        calloutConfig
      );
      this.messageContainer.appendChild(messageEl);
    });
  }
  // 新增：单个消息元素创建方法
  createMessageElement(calloutId, message, index, messageData, calloutConfig) {
    const messageEl = createEl("div", { cls: "callout-message-item" });
    Object.assign(messageEl.style, {
      backgroundColor: this.adjustColor(calloutConfig.color, 0.1),
      borderLeft: `4px solid ${calloutConfig.color}`,
      borderRadius: "4px",
      margin: "10px 0",
      padding: "12px"
    });
    const titleEl = messageEl.createEl("div", { cls: "callout-message-title" });
    const titleText = titleEl.createEl("span", {
      text: calloutConfig.name,
      cls: "callout-title-text"
    });
    titleText.style.color = calloutConfig.color;
    titleText.style.fontWeight = "bold";
    const buttonContainer = titleEl.createEl("div", { cls: "callout-message-buttons" });
    const editButton = this.createButton(buttonContainer, "\u7F16\u8F91", calloutConfig.color);
    editButton.onclick = async (e) => {
      e.preventDefault();
      e.stopPropagation();
      const modal = new import_obsidian.Modal(this.app);
      modal.titleEl.setText("\u7F16\u8F91 Callout \u5907\u6CE8");
      modal.containerEl.addClass("callout-message-modal");
      const textAreaContainer = modal.contentEl.createDiv("callout-message-textarea-container");
      textAreaContainer.style.margin = "20px 0";
      const textArea = textAreaContainer.createEl("textarea", {
        attr: {
          placeholder: "\u8BF7\u8F93\u5165 Callout \u5907\u6CE8\u4FE1\u606F..."
        },
        cls: "callout-message-textarea",
        value: message.text
      });
      textArea.addEventListener("input", () => {
        const newText = textArea.value.trim();
        if (newText) {
          messageData.messages[index] = {
            text: newText,
            timestamp: new Date().toLocaleString()
          };
          this.displayMessages();
        }
      });
      textArea.style.width = "100%";
      textArea.style.minHeight = "150px";
      textArea.style.padding = "10px";
      textArea.style.borderRadius = "4px";
      textArea.style.border = "1px solid var(--background-modifier-border)";
      textArea.style.backgroundColor = "var(--background-primary)";
      textArea.style.resize = "vertical";
      const buttonContainer2 = modal.contentEl.createDiv("button-container");
      buttonContainer2.style.display = "flex";
      buttonContainer2.style.justifyContent = "flex-end";
      buttonContainer2.style.gap = "10px";
      buttonContainer2.style.marginTop = "20px";
      const saveButton = buttonContainer2.createEl("button", {
        text: "\u4FDD\u5B58",
        cls: "mod-cta"
      });
      saveButton.style.backgroundColor = "var(--interactive-accent)";
      saveButton.style.color = "var(--text-on-accent)";
      const cancelButton = buttonContainer2.createEl("button", {
        text: "\u53D6\u6D88"
      });
      saveButton.addEventListener("click", async () => {
        const newText = textArea.value.trim();
        if (!newText) {
          new import_obsidian.Notice("\u5907\u6CE8\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A");
          return;
        }
        await this.plugin.saveSettings();
        this.updateAllCalloutCounts(calloutId);
        modal.close();
        new import_obsidian.Notice("\u5907\u6CE8\u5DF2\u66F4\u65B0");
      });
      cancelButton.addEventListener("click", () => {
        modal.close();
      });
      setTimeout(() => {
        textArea.value = message.text;
        textArea.focus();
      }, 0);
      modal.open();
    };
    const deleteButton = this.createButton(buttonContainer, "\u5220\u9664", "#ff4444");
    deleteButton.onclick = async (e) => {
      e.preventDefault();
      e.stopPropagation();
      messageData.messages.splice(index, 1);
      this.displayMessages();
      await this.plugin.saveSettings();
      this.updateAllCalloutCounts(calloutId);
      new import_obsidian.Notice("\u5907\u6CE8\u5DF2\u5220\u9664");
    };
    const contentEl = messageEl.createEl("div", {
      cls: "callout-message-content",
      text: message.text
    });
    contentEl.style.color = calloutConfig.textColor;
    messageEl.createEl("div", {
      cls: "callout-message-timestamp",
      text: message.timestamp
    });
    return messageEl;
  }
  // 新增：处理编辑操作
  async handleEdit(e, message, messageEl, index, messageData) {
    e.preventDefault();
    e.stopPropagation();
    const calloutId = this.currentCalloutId;
    if (!calloutId)
      return;
    const modal = new import_obsidian.Modal(this.app);
    modal.titleEl.setText("\u7F16\u8F91 Callout \u5907\u6CE8");
    modal.containerEl.addClass("callout-message-modal");
    const textAreaContainer = modal.contentEl.createDiv("callout-message-textarea-container");
    textAreaContainer.style.margin = "20px 0";
    const textArea = textAreaContainer.createEl("textarea", {
      attr: {
        placeholder: "\u8BF7\u8F93\u5165 Callout \u5907\u6CE8\u4FE1\u606F..."
      },
      cls: "callout-message-textarea",
      value: message.text
    });
    textArea.style.width = "100%";
    textArea.style.minHeight = "150px";
    textArea.style.padding = "10px";
    textArea.style.borderRadius = "4px";
    textArea.style.border = "1px solid var(--background-modifier-border)";
    textArea.style.backgroundColor = "var(--background-primary)";
    textArea.style.resize = "vertical";
    const buttonContainer = modal.contentEl.createDiv("button-container");
    buttonContainer.style.display = "flex";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.gap = "10px";
    buttonContainer.style.marginTop = "20px";
    const saveButton = buttonContainer.createEl("button", {
      text: "\u4FDD\u5B58",
      cls: "mod-cta"
    });
    saveButton.style.backgroundColor = "var(--interactive-accent)";
    saveButton.style.color = "var(--text-on-accent)";
    const cancelButton = buttonContainer.createEl("button", {
      text: "\u53D6\u6D88"
    });
    saveButton.addEventListener("click", async () => {
      const newText = textArea.value.trim();
      if (!newText) {
        new import_obsidian.Notice("\u5907\u6CE8\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A");
        return;
      }
      messageData.messages[index].text = newText;
      messageData.messages[index].timestamp = new Date().toLocaleString();
      await this.plugin.saveSettings();
      this.refreshView();
      modal.close();
      new import_obsidian.Notice("\u5907\u6CE8\u5DF2\u66F4\u65B0");
    });
    cancelButton.addEventListener("click", () => {
      modal.close();
    });
    setTimeout(() => {
      textArea.value = message.text;
      textArea.focus();
    }, 0);
    modal.open();
  }
  // 新增：处理删除操作
  async handleDelete(e, index, messageData, calloutId) {
    e.preventDefault();
    e.stopPropagation();
    messageData.messages.splice(index, 1);
    await this.plugin.saveSettings();
    this.updateMessageCount(calloutId, messageData.messages.length);
    this.refreshView();
    new import_obsidian.Notice("\u6D88\u606F\u5DF2\u5220\u9664");
  }
  // 新增：更新消息计数
  updateMessageCount(calloutId, count) {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (!activeView)
      return;
    const callouts = activeView.contentEl.querySelectorAll(".callout");
    callouts.forEach((callout) => {
      if (callout instanceof HTMLElement) {
        const id = this.getCalloutIdFromElement(callout);
        if (id === calloutId) {
          const countSpan = callout.querySelector(".callout-message-count");
          if (countSpan)
            countSpan.textContent = count.toString();
        }
      }
    });
  }
  // 工具方法：创建按钮
  createButton(container, text, color) {
    const button = container.createEl("button", {
      text,
      cls: `callout-message-${text.toLowerCase()}-button`
    });
    Object.assign(button.style, {
      backgroundColor: color,
      color: "#ffffff",
      border: "none",
      borderRadius: "4px",
      padding: "4px 8px",
      cursor: "pointer",
      marginRight: text === "\u7F16\u8F91" ? "8px" : "0"
    });
    return button;
  }
  showEmptyMessage(message) {
    if (this.viewMode === "single" && !this.currentCalloutId) {
      new import_obsidian.Notice("\u70B9\u51FB Callout \u53F3\u4E0A\u89D2\u7684\u6570\u5B57\u6765\u67E5\u770B\u5355\u4E2A Callout \u7684\u5907\u6CE8");
      return;
    }
    this.messageContainer.createEl("div", {
      cls: "callout-message-empty",
      text: message
    });
  }
  getCalloutConfigForMessage(calloutId) {
    const currentScene = this.plugin.settings.scenes.find(
      (scene) => scene.id === this.plugin.settings.currentSceneId
    );
    if (currentScene) {
      const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
      if (markdownView) {
        const callouts = markdownView.contentEl.querySelectorAll(".callout");
        for (const callout of Array.from(callouts)) {
          if (callout instanceof HTMLElement) {
            const id = this.plugin.getCalloutId(callout);
            if (id === calloutId) {
              const titleEl = callout.querySelector(".callout-title");
              if (titleEl) {
                const titleText = titleEl.textContent || "";
                const config = currentScene.callouts.find((c) => titleText.includes(c.name));
                if (config) {
                  return config;
                }
              }
            }
          }
        }
      }
    }
    return (currentScene == null ? void 0 : currentScene.callouts[0]) || this.plugin.settings.scenes[0].callouts[0];
  }
  scrollToCallout(calloutId) {
    const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (!markdownView)
      return;
    const callouts = markdownView.contentEl.querySelectorAll(".callout");
    for (const callout of Array.from(callouts)) {
      if (callout instanceof HTMLElement) {
        const id = this.getCalloutIdFromElement(callout);
        if (id === calloutId) {
          this.highlightCallout(callout);
          callout.scrollIntoView({ behavior: "smooth", block: "center" });
          break;
        }
      }
    }
  }
  highlightCallout(callout) {
    callout.addClass("callout-highlight");
    setTimeout(() => {
      callout.removeClass("callout-highlight");
    }, 2e3);
  }
  adjustColor(color, opacity) {
    if (color.startsWith("#")) {
      const r = parseInt(color.slice(1, 3), 16);
      const g = parseInt(color.slice(3, 5), 16);
      const b = parseInt(color.slice(5, 7), 16);
      return `rgba(${r}, ${g}, ${b}, ${opacity})`;
    }
    return color;
  }
  getViewType() {
    return CALL_OUT_MESSAGE_VIEW;
  }
  getDisplayText() {
    return "Callout \u5907\u6CE8";
  }
  getIcon() {
    return "message-circle";
  }
  // 添加导出 PDF 方法
  async exportToPDF() {
    if (!await this.plugin.checkActivation())
      return;
    try {
      const previewContent = document.createElement("div");
      previewContent.className = "export-preview-container";
      const messages = this.plugin.settings.messages;
      let hasContent = false;
      const messagesToShow = Array.from(this.messageContainer.querySelectorAll(".callout-message-item")).map((item) => {
        const titleEl = item.querySelector(".callout-title-text");
        const contentEl = item.querySelector(".callout-message-content");
        const timeEl = item.querySelector(".callout-message-timestamp");
        const color = window.getComputedStyle(item).borderLeftColor;
        return {
          title: (titleEl == null ? void 0 : titleEl.textContent) || "",
          content: (contentEl == null ? void 0 : contentEl.textContent) || "",
          time: (timeEl == null ? void 0 : timeEl.textContent) || "",
          color
        };
      });
      if (messagesToShow.length === 0) {
        new import_obsidian.Notice("\u6CA1\u6709\u53EF\u5BFC\u51FA\u7684 Callout \u5907\u6CE8");
        return;
      }
      messagesToShow.forEach((message) => {
        hasContent = true;
        const calloutDiv = document.createElement("div");
        calloutDiv.className = "callout";
        calloutDiv.style.borderLeftColor = message.color;
        calloutDiv.style.backgroundColor = this.adjustColor(message.color, 0.1);
        const titleDiv = document.createElement("div");
        titleDiv.className = "callout-title";
        titleDiv.style.color = message.color;
        titleDiv.textContent = message.title;
        calloutDiv.appendChild(titleDiv);
        const contentDiv = document.createElement("div");
        contentDiv.className = "callout-content";
        contentDiv.textContent = message.content;
        calloutDiv.appendChild(contentDiv);
        const timeDiv = document.createElement("div");
        timeDiv.className = "callout-timestamp";
        timeDiv.textContent = message.time;
        calloutDiv.appendChild(timeDiv);
        previewContent.appendChild(calloutDiv);
      });
      const previewModal = new import_obsidian.Modal(this.app);
      previewModal.titleEl.setText("\u5BFC\u51FA\u9884\u89C8");
      previewModal.contentEl.addClass("export-preview-modal");
      const previewContainer = previewModal.contentEl.createDiv("export-preview-container");
      previewContainer.style.maxHeight = "70vh";
      previewContainer.style.overflow = "auto";
      previewContainer.style.padding = "20px";
      previewContainer.style.backgroundColor = "var(--background-primary)";
      previewContainer.style.borderRadius = "8px";
      previewContainer.style.border = "1px solid var(--background-modifier-border)";
      const clonedMessages = Array.from(this.messageContainer.children).map((child) => {
        const clone = child.cloneNode(true);
        const buttons = clone.querySelector(".callout-message-buttons");
        if (buttons) {
          buttons.remove();
        }
        return clone;
      });
      const activeFile = this.app.workspace.getActiveFile();
      if (activeFile) {
        const titleContainer = previewContainer.createDiv("note-title-container");
        titleContainer.style.textAlign = "center";
        titleContainer.style.padding = "15px 0";
        titleContainer.style.marginBottom = "25px";
        titleContainer.style.borderBottom = "2px solid var(--interactive-accent)";
        const titleText = titleContainer.createEl("h2", {
          text: activeFile.basename,
          cls: "note-title"
        });
        titleText.style.margin = "0";
        titleText.style.color = "var(--text-accent)";
        titleText.style.fontSize = "1.5em";
        titleText.style.fontWeight = "600";
        titleText.style.letterSpacing = "0.5px";
        titleText.style.fontFamily = "var(--font-interface)";
      }
      clonedMessages.forEach((clone) => {
        previewContainer.appendChild(clone);
      });
      const buttonContainer = previewModal.contentEl.createDiv("export-preview-buttons");
      buttonContainer.style.marginTop = "20px";
      buttonContainer.style.display = "flex";
      buttonContainer.style.justifyContent = "flex-end";
      buttonContainer.style.gap = "10px";
      const exportButton = buttonContainer.createEl("button", {
        text: "\u786E\u8BA4\u5BFC\u51FA",
        cls: "mod-cta"
      });
      const cancelButton = buttonContainer.createEl("button", {
        text: "\u53D6\u6D88"
      });
      exportButton.addEventListener("click", async () => {
        try {
          const remote = require("@electron/remote");
          if (!remote) {
            new import_obsidian.Notice("\u65E0\u6CD5\u8BBF\u95EE\u7CFB\u7EDF\u5BF9\u8BDD\u6846");
            return;
          }
          const { filePath, canceled } = await remote.dialog.showSaveDialog({
            title: "\u5BFC\u51FA PDF",
            defaultPath: "Callout\u7B14\u8BB0.pdf",
            filters: [{ name: "PDF \u6587\u4EF6", extensions: ["pdf"] }]
          });
          if (canceled || !filePath) {
            return;
          }
          const win = new remote.BrowserWindow({
            width: 800,
            height: 600,
            show: false,
            webPreferences: {
              nodeIntegration: true
            }
          });
          const printContent = `
                        <html>
                            <head>
                                <title>Callout \u5907\u6CE8\u5BFC\u51FA</title>
                                <style>
                                    ${this.getObsidianStyles()}
                                </style>
                            </head>
                            <body>
                                <div class="export-preview-container">
                                    ${previewContainer.innerHTML}
                                </div>
                            </body>
                        </html>
                    `;
          win.loadURL("data:text/html;charset=utf-8," + encodeURIComponent(printContent));
          win.webContents.on("did-finish-load", async () => {
            try {
              const data = await win.webContents.printToPDF({
                marginsType: 1,
                printBackground: true,
                printSelectionOnly: false,
                landscape: false
              });
              require("fs").writeFile(filePath, data, (error) => {
                if (error) {
                  console.error("PDF \u5BFC\u51FA\u5931\u8D25:", error);
                  new import_obsidian.Notice("PDF \u5BFC\u51FA\u5931\u8D25");
                } else {
                  new import_obsidian.Notice("PDF \u5BFC\u51FA\u6210\u529F\uFF01");
                }
                win.close();
              });
            } catch (error) {
              console.error("PDF \u751F\u6210\u5931\u8D25:", error);
              new import_obsidian.Notice("PDF \u751F\u6210\u5931\u8D25");
              win.close();
            }
          });
          previewModal.close();
        } catch (error) {
          console.error("Export error:", error);
          new import_obsidian.Notice("\u5BFC\u51FA PDF \u5931\u8D25");
        }
      });
      cancelButton.addEventListener("click", () => {
        previewModal.close();
      });
      previewModal.open();
    } catch (error) {
      console.error("Export error:", error);
      new import_obsidian.Notice("\u5BFC\u51FA PDF \u5931\u8D25");
    }
  }
  // 添加获取 Obsidian 样式的辅助方法
  getObsidianStyles() {
    const styles = window.getComputedStyle(document.documentElement);
    let cssVars = ":root {\n";
    for (let i = 0; i < styles.length; i++) {
      const prop = styles[i];
      if (prop.startsWith("--")) {
        cssVars += `  ${prop}: ${styles.getPropertyValue(prop)};
`;
      }
    }
    cssVars += "}\n";
    return `
            ${cssVars}
            body {
                font-family: var(--font-text);
                background-color: var(--background-primary);
                color: var(--text-normal);
                padding: 20px;
                margin: 0;
            }
            .export-preview-container {
                max-width: 800px;
                margin: 0 auto;
            }
            .callout-message-item {
                margin: 10px 0;
                padding: 12px;
                border-radius: 4px;
                position: relative;
            }
            .callout-message-title {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 8px;
            }
            .callout-message-content {
                margin: 8px 0;
            }
            .callout-message-timestamp {
                font-size: 0.8em;
                color: var(--text-muted);
                text-align: right;
                margin-top: 8px;
            }
        `;
  }
  // 在 CalloutMessageView 类中添加显示笔记名称的方法
  displayNoteTitle() {
    const existingTitle = this.containerEl.querySelector(".note-title-container");
    if (existingTitle) {
      existingTitle.remove();
    }
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile)
      return;
    const titleContainer = this.containerEl.createDiv("note-title-container");
    titleContainer.style.textAlign = "center";
    titleContainer.style.padding = "15px 0";
    titleContainer.style.marginBottom = "25px";
    titleContainer.style.borderBottom = "2px solid var(--interactive-accent)";
    titleContainer.style.position = "sticky";
    titleContainer.style.top = "0";
    titleContainer.style.backgroundColor = "var(--background-primary)";
    titleContainer.style.zIndex = "1";
    titleContainer.style.boxShadow = "0 2px 8px rgba(0, 0, 0, 0.1)";
    const titleText = titleContainer.createEl("h2", {
      text: activeFile.basename,
      cls: "note-title"
    });
    titleText.style.margin = "0";
    titleText.style.color = "var(--text-accent)";
    titleText.style.fontSize = "1.5em";
    titleText.style.fontWeight = "600";
    titleText.style.letterSpacing = "0.5px";
    titleText.style.fontFamily = "var(--font-interface)";
    if (this.messageContainer) {
      this.containerEl.insertBefore(titleContainer, this.messageContainer);
    }
  }
  // 添加 getCalloutIdFromElement 方法
  getCalloutIdFromElement(callout) {
    const span = callout.querySelector("span[data-callout-id]");
    if (span) {
      return span.getAttribute("data-callout-id");
    }
    return null;
  }
  // 新增：视图刷新方法
  refreshView() {
    this.messageContainer.empty();
    this.displayMessages();
  }
  // 添加更新所有相关消息计数的方法
  updateAllCalloutCounts(calloutId) {
    const markdownView = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    if (!markdownView)
      return;
    const callouts = markdownView.contentEl.querySelectorAll(".callout");
    callouts.forEach((callout) => {
      if (callout instanceof HTMLElement) {
        const id = this.plugin.getCalloutId(callout);
        if (id === calloutId) {
          this.plugin.updateCalloutMessageCount(callout);
        }
      }
    });
  }
};
var CalloutMessageSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.cleanupFunctions = [];
    this.plugin = plugin;
  }
  display() {
    var _a;
    const { containerEl } = this;
    containerEl.empty();
    const navContainer = containerEl.createDiv("nav-container");
    navContainer.style.display = "flex";
    navContainer.style.borderBottom = "2px solid var(--background-modifier-border)";
    navContainer.style.marginBottom = "24px";
    navContainer.style.padding = "0 10px";
    navContainer.style.gap = "10px";
    const tabs = [
      { id: "basic", text: "\u57FA\u7840\u8BBE\u7F6E" },
      { id: "icon", text: "\u56FE\u6807\u88C5\u9970" },
      { id: "license", text: "\u6388\u6743" },
      { id: "about", text: "\u5173\u4E8E" }
    ];
    const contentContainer = containerEl.createDiv("content-container");
    const contents = {
      basic: contentContainer.createDiv("basic-settings-content"),
      icon: contentContainer.createDiv("icon-settings-content"),
      license: contentContainer.createDiv("license-content"),
      about: contentContainer.createDiv("about-content")
    };
    tabs.forEach((tab) => {
      const tabButton = navContainer.createEl("button", {
        text: tab.text,
        cls: "nav-tab"
      });
      tabButton.style.padding = "8px 16px";
      tabButton.style.border = "none";
      tabButton.style.borderRadius = "4px 4px 0 0";
      tabButton.style.backgroundColor = "transparent";
      tabButton.style.cursor = "pointer";
      tabButton.style.color = "var(--text-muted)";
      tabButton.style.fontSize = "14px";
      tabButton.style.fontWeight = "bold";
      tabButton.onclick = () => {
        Object.values(contents).forEach((content) => content.style.display = "none");
        contents[tab.id].style.display = "block";
        navContainer.querySelectorAll(".nav-tab").forEach((el) => {
          el.style.backgroundColor = "transparent";
          el.style.color = "var(--text-muted)";
        });
        tabButton.style.backgroundColor = "var(--background-secondary)";
        tabButton.style.color = "var(--text-accent)";
      };
    });
    contents.basic.style.display = "block";
    (_a = navContainer.querySelector(".nav-tab")) == null ? void 0 : _a.click();
    this.renderBasicContent(contents.basic);
    this.renderIconSettings(contents.icon);
    this.renderLicenseContent(contents.license);
    this.renderAboutContent(contents.about);
    const element = navContainer.querySelector(".nav-tab");
    if (element instanceof HTMLElement) {
      element.click();
    }
  }
  // 渲染图标设置
  renderIconSettings(container) {
    const iconSettingsContainer = container.createDiv("icon-settings-container");
    new import_obsidian.Setting(iconSettingsContainer).setName("\u542F\u7528 Callout Prism \u6837\u5F0F").setDesc("\u662F\u5426\u542F\u7528 Prism \u6837\u5F0F\u7F8E\u5316 Callout").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.usePrismStyle).onChange(async (value) => {
        this.plugin.settings.usePrismStyle = value;
        await this.plugin.saveSettings();
        this.plugin.togglePrismStyle(value);
      });
    });
    new import_obsidian.Setting(iconSettingsContainer).setName("\u5F53\u524D\u56FE\u6807\u6837\u5F0F").setDesc("\u9009\u62E9\u8981\u4F7F\u7528\u7684\u56FE\u6807\u6837\u5F0F").addDropdown((dropdown) => {
      const icons = {
        1: "\u6837\u5F0F1",
        2: "\u6837\u5F0F2",
        3: "\u6837\u5F0F3",
        4: "\u6837\u5F0F4",
        5: "\u6837\u5F0F5"
      };
      Object.entries(icons).forEach(([value, name]) => {
        dropdown.addOption(value, name);
      });
      dropdown.setValue(this.plugin.settings.iconSettings.type.toString());
      dropdown.onChange(async (value) => {
        this.plugin.settings.iconSettings.type = parseInt(value);
        await this.plugin.saveSettings();
        this.plugin.refreshAllIcons();
        updatePreview();
      });
    });
    new import_obsidian.Setting(iconSettingsContainer).setName("\u56FE\u6807\u5927\u5C0F").setDesc("\u8C03\u6574\u56FE\u6807\u7684\u5927\u5C0F\uFF08\u50CF\u7D20\uFF09").addSlider((slider) => {
      slider.setLimits(16, 48, 2).setValue(this.plugin.settings.iconSettings.size).setDynamicTooltip().onChange(async (value) => {
        this.plugin.settings.iconSettings.size = value;
        await this.plugin.saveSettings();
        this.plugin.refreshAllIcons();
        updatePreview();
      });
    });
    const positionContainer = iconSettingsContainer.createDiv("position-settings");
    positionContainer.createEl("h4", { text: "\u56FE\u6807\u4F4D\u7F6E\u8C03\u6574", cls: "setting-category" });
    new import_obsidian.Setting(positionContainer).setName("\u9876\u90E8\u95F4\u8DDD").setDesc("\u8C03\u6574\u56FE\u6807\u8DDD\u79BB\u9876\u90E8\u7684\u8DDD\u79BB\uFF08\u50CF\u7D20\uFF09").addSlider((slider) => {
      slider.setLimits(0, 32, 2).setValue(this.plugin.settings.iconSettings.position.top).setDynamicTooltip().onChange(async (value) => {
        this.plugin.settings.iconSettings.position.top = value;
        await this.plugin.saveSettings();
        this.plugin.refreshAllIcons();
        updatePreview();
      });
    });
    new import_obsidian.Setting(positionContainer).setName("\u53F3\u4FA7\u95F4\u8DDD").setDesc("\u8C03\u6574\u56FE\u6807\u8DDD\u79BB\u53F3\u4FA7\u7684\u8DDD\u79BB\uFF08\u50CF\u7D20\uFF09").addSlider((slider) => {
      slider.setLimits(8, 100, 2).setValue(this.plugin.settings.iconSettings.position.right).setDynamicTooltip().onChange(async (value) => {
        this.plugin.settings.iconSettings.position.right = value;
        await this.plugin.saveSettings();
        this.plugin.refreshAllIcons();
        updatePreview();
      });
    });
    const previewContainer = iconSettingsContainer.createDiv("icon-preview-container");
    previewContainer.createEl("h4", { text: "\u56FE\u6807\u9884\u89C8", cls: "setting-category" });
    const calloutPreview = previewContainer.createDiv("callout");
    calloutPreview.addClass("callout");
    calloutPreview.style.position = "relative";
    calloutPreview.style.margin = "10px 0";
    calloutPreview.style.setProperty("--icon-size", `${this.plugin.settings.iconSettings.size}px`);
    calloutPreview.style.setProperty("--icon-top-position", `${this.plugin.settings.iconSettings.position.top}px`);
    calloutPreview.style.setProperty("--icon-right-position", `${this.plugin.settings.iconSettings.position.right}px`);
    const calloutTitle = calloutPreview.createDiv("callout-title");
    calloutTitle.innerHTML = '<div class="callout-title-inner">\u9884\u89C8 Callout</div>';
    const calloutContent = calloutPreview.createDiv("callout-content");
    calloutContent.innerHTML = "\u8FD9\u662F\u4E00\u4E2A\u7528\u4E8E\u9884\u89C8\u56FE\u6807\u6837\u5F0F\u7684 Callout";
    const iconContainer = document.createElement("div");
    iconContainer.className = "callout-message-icon-container";
    const icon = document.createElement("div");
    icon.className = "callout-message-icon";
    icon.innerHTML = this.plugin.getIconSvg(this.plugin.settings.iconSettings.type);
    icon.style.width = `${this.plugin.settings.iconSettings.size}px`;
    icon.style.height = `${this.plugin.settings.iconSettings.size}px`;
    iconContainer.style.top = `${this.plugin.settings.iconSettings.position.top}px`;
    iconContainer.style.right = `${this.plugin.settings.iconSettings.position.right}px`;
    const countSpan = document.createElement("span");
    countSpan.className = "callout-message-count";
    countSpan.textContent = "0";
    iconContainer.appendChild(icon);
    iconContainer.appendChild(countSpan);
    calloutPreview.appendChild(iconContainer);
    const updatePreview = () => {
      calloutPreview.style.setProperty("--icon-size", `${this.plugin.settings.iconSettings.size}px`);
      calloutPreview.style.setProperty("--icon-top-position", `${this.plugin.settings.iconSettings.position.top}px`);
      calloutPreview.style.setProperty("--icon-right-position", `${this.plugin.settings.iconSettings.position.right}px`);
      icon.style.width = `${this.plugin.settings.iconSettings.size}px`;
      icon.style.height = `${this.plugin.settings.iconSettings.size}px`;
      iconContainer.style.top = `${this.plugin.settings.iconSettings.position.top}px`;
      iconContainer.style.right = `${this.plugin.settings.iconSettings.position.right}px`;
      icon.innerHTML = this.plugin.getIconSvg(this.plugin.settings.iconSettings.type);
    };
    return updatePreview;
  }
  updatePreviewIcon(iconElement) {
    const iconType = this.plugin.settings.iconSettings.type;
    iconElement.empty();
    switch (iconType) {
      case 1:
        iconElement.innerHTML = `<svg viewBox="0 0 24 24" fill="#4A90E2"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/></svg>`;
        break;
      case 2:
        iconElement.innerHTML = `<svg viewBox="0 0 24 24" fill="#2ECC71"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>`;
        break;
      case 3:
        iconElement.innerHTML = `<svg viewBox="0 0 24 24" fill="#FF69B4"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>`;
        break;
      case 4:
        iconElement.innerHTML = `<svg viewBox="0 0 24 24" fill="#FF9800"><circle cx="12" cy="12" r="10"/></svg>`;
        break;
      case 5:
        iconElement.innerHTML = `<svg viewBox="0 0 24 24" fill="#9E9E9E"><rect x="3" y="3" width="18" height="18" rx="2"/></svg>`;
        break;
    }
  }
  // 渲染授权内容
  renderLicenseContent(container) {
    const licenseHeader = container.createDiv("license-header");
    licenseHeader.createEl("h1", { text: "\u63D2\u4EF6\u6388\u6743" }).style.color = "#ff6b6b";
    const statusContainer = licenseHeader.createDiv("license-status-container");
    statusContainer.style.margin = "20px 0";
    statusContainer.style.padding = "15px";
    statusContainer.style.borderRadius = "8px";
    statusContainer.style.backgroundColor = this.plugin.settings.isActivated ? "#e8f5e9" : "#ffebee";
    statusContainer.style.border = `1px solid ${this.plugin.settings.isActivated ? "#4caf50" : "#f44336"}`;
    const statusIcon = statusContainer.createSpan("license-status-icon");
    statusIcon.setText(this.plugin.settings.isActivated ? "\u2705" : "\u274C");
    const statusText = statusContainer.createSpan("license-status-text");
    statusText.setText(this.plugin.settings.isActivated ? " \u5DF2\u6388\u6743\uFF0C\u8BF7\u91CD\u542F" : " \u672A\u6388\u6743");
    statusText.style.marginLeft = "8px";
    statusText.style.color = this.plugin.settings.isActivated ? "#2e7d32" : "#c62828";
    const restartButton = statusContainer.createEl("button", {
      text: "\u91CD\u542F Obsidian",
      cls: "restart-obsidian-button"
    });
    restartButton.style.marginLeft = "20px";
    restartButton.style.padding = "4px 12px";
    restartButton.style.backgroundColor = "#4caf50";
    restartButton.style.color = "white";
    restartButton.style.border = "none";
    restartButton.style.borderRadius = "4px";
    restartButton.style.cursor = "pointer";
    restartButton.addEventListener("click", () => {
      const electron = require("electron");
      const window2 = electron.remote.getCurrentWindow();
      window2.reload();
    });
    const activationContainer = container.createDiv("license-activation-container");
    activationContainer.style.marginTop = "20px";
    activationContainer.style.padding = "20px";
    activationContainer.style.backgroundColor = "var(--background-secondary)";
    activationContainer.style.borderRadius = "8px";
    const inputContainer = activationContainer.createDiv("license-input-container");
    inputContainer.createEl("h3", { text: "\u8F93\u5165\u6FC0\u6D3B\u7801" });
    const input = inputContainer.createEl("input", {
      type: "text",
      placeholder: "\u8BF7\u8F93\u5165\u6FC0\u6D3B\u7801"
    });
    input.style.width = "100%";
    input.style.padding = "8px";
    input.style.marginTop = "10px";
    input.style.borderRadius = "4px";
    input.style.border = "1px solid var(--background-modifier-border)";
    input.value = this.plugin.settings.licenseKey;
    input.addEventListener("change", async (e) => {
      const target = e.target;
      this.plugin.settings.licenseKey = target.value;
      await this.plugin.saveSettings();
    });
    const activateButton = activationContainer.createEl("button", {
      text: "\u6FC0\u6D3B\u63D2\u4EF6",
      cls: "mod-cta"
    });
    activateButton.style.marginTop = "15px";
    activateButton.style.width = "100%";
    activateButton.addEventListener("click", async () => {
      const isValid = await this.plugin.validateLicense(this.plugin.settings.licenseKey);
      if (isValid) {
        this.plugin.settings.isActivated = true;
        await this.plugin.saveSettings();
        const restartContainer = activationContainer.createDiv("restart-container");
        restartContainer.style.marginTop = "20px";
        restartContainer.style.padding = "15px";
        restartContainer.style.backgroundColor = "#e8f5e9";
        restartContainer.style.borderRadius = "8px";
        restartContainer.style.border = "1px solid #4caf50";
        restartContainer.style.textAlign = "center";
        const restartText = restartContainer.createEl("p", {
          text: "\u6FC0\u6D3B\u6210\u529F\uFF01\u8BF7\u91CD\u542F Obsidian \u4EE5\u542F\u7528\u6240\u6709\u529F\u80FD\u3002"
        });
        restartText.style.margin = "0 0 15px 0";
        restartText.style.color = "#2e7d32";
        const restartButton2 = restartContainer.createEl("button", {
          text: "\u91CD\u542F Obsidian",
          cls: "mod-cta"
        });
        restartButton2.style.backgroundColor = "#4caf50";
        restartButton2.addEventListener("click", () => {
          const electron = require("electron");
          const window2 = electron.remote.getCurrentWindow();
          window2.reload();
        });
        new import_obsidian.Notice("\u6FC0\u6D3B\u6210\u529F\uFF01");
        this.display();
      } else {
        new import_obsidian.Notice("\u6FC0\u6D3B\u7801\u65E0\u6548\uFF01");
      }
    });
    const trialStatusContainer = activationContainer.createDiv("trial-status-container");
    trialStatusContainer.style.marginTop = "15px";
    trialStatusContainer.style.padding = "15px";
    trialStatusContainer.style.backgroundColor = "var(--background-primary)";
    trialStatusContainer.style.borderRadius = "8px";
    trialStatusContainer.style.border = "1px solid var(--background-modifier-border)";
    trialStatusContainer.style.position = "relative";
    if (this.plugin.settings.hasUsedTrial) {
      if (this.plugin.settings.trialEndTime && Date.now() < this.plugin.settings.trialEndTime) {
        const now = Date.now();
        const remainingTime = this.plugin.settings.trialEndTime - now;
        const remainingMinutes = Math.ceil(remainingTime / (1e3 * 60));
        const remainingSeconds = Math.ceil(remainingTime / 1e3);
        const timeContainer = trialStatusContainer.createDiv("trial-time-container");
        timeContainer.style.textAlign = "center";
        timeContainer.style.marginBottom = "10px";
        const timeDisplay = timeContainer.createEl("div", {
          text: `\u5269\u4F59\u8BD5\u7528\u65F6\u95F4\uFF1A${remainingMinutes}\u5206${remainingSeconds % 60}\u79D2`,
          cls: "trial-time-display"
        });
        timeDisplay.style.fontSize = "16px";
        timeDisplay.style.fontWeight = "bold";
        timeDisplay.style.color = "#4caf50";
        const progressContainer = trialStatusContainer.createDiv("trial-progress-container");
        progressContainer.style.height = "6px";
        progressContainer.style.backgroundColor = "#e0e0e0";
        progressContainer.style.borderRadius = "3px";
        progressContainer.style.overflow = "hidden";
        progressContainer.style.marginTop = "10px";
        const progress = progressContainer.createDiv("trial-progress");
        const percentage = remainingTime / (6 * 60 * 60 * 1e3) * 100;
        progress.style.width = `${percentage}%`;
        progress.style.height = "100%";
        progress.style.backgroundColor = "#4caf50";
        progress.style.transition = "width 1s linear";
        const updateTimer = setInterval(() => {
          const currentTime = Date.now();
          const newRemainingTime = this.plugin.settings.trialEndTime - currentTime;
          if (newRemainingTime <= 0) {
            clearInterval(updateTimer);
            this.display();
            return;
          }
          const newMinutes = Math.floor(newRemainingTime / (1e3 * 60));
          const newSeconds = Math.floor(newRemainingTime / 1e3 % 60);
          timeDisplay.textContent = `\u5269\u4F59\u8BD5\u7528\u65F6\u95F4\uFF1A${newMinutes}\u5206${newSeconds}\u79D2`;
          const newPercentage = newRemainingTime / (6 * 60 * 60 * 1e3) * 100;
          progress.style.width = `${newPercentage}%`;
        }, 1e3);
        this.register(() => clearInterval(updateTimer));
      } else {
        const statusText2 = trialStatusContainer.createEl("div", {
          text: "\u8BD5\u7528\u5DF2\u7ED3\u675F\uFF0C\u5378\u8F7D\u63D2\u4EF6\u5E76\u91CD\u65B0\u5B89\u88C5\u53EF\u91CD\u65B0\u83B7\u5F97\u8BD5\u7528\u673A\u4F1A",
          cls: "trial-status-text"
        });
        statusText2.style.color = "#f44336";
        statusText2.style.textAlign = "center";
        statusText2.style.fontWeight = "bold";
      }
    } else {
      const statusText2 = trialStatusContainer.createEl("div", {
        text: "\u672A\u5F00\u59CB\u8BD5\u7528\uFF08\u5378\u8F7D\u91CD\u88C5\u53EF\u91CD\u65B0\u83B7\u5F97\u8BD5\u7528\u673A\u4F1A\uFF09",
        cls: "trial-status-text"
      });
      statusText2.style.color = "var(--text-muted)";
      statusText2.style.textAlign = "center";
    }
    const trialButton = activationContainer.createEl("button", {
      text: "\u63D2\u4EF6\u8BD5\u7528",
      cls: "mod-cta"
    });
    trialButton.style.width = "100%";
    trialButton.style.marginTop = "15px";
    trialButton.style.backgroundColor = "#4caf50";
    trialButton.style.color = "#ffffff";
    trialButton.style.padding = "8px";
    trialButton.style.borderRadius = "4px";
    trialButton.style.cursor = "pointer";
    trialButton.style.border = "none";
    trialButton.style.fontSize = "14px";
    trialButton.style.fontWeight = "bold";
    trialButton.addEventListener("click", async () => {
      if (this.plugin.settings.hasUsedTrial) {
        new import_obsidian.Notice("\u8BD5\u7528\u673A\u4F1A\u5DF2\u7528\u5B8C\uFF0C\u8BF7\u6FC0\u6D3B\u63D2\u4EF6\u7EE7\u7EED\u4F7F\u7528\uFF01");
        return;
      }
      const startTime = Date.now();
      const endTime = startTime + 6 * 60 * 60 * 1e3;
      this.plugin.settings.trialEndTime = endTime;
      this.plugin.settings.hasUsedTrial = true;
      await this.plugin.saveSettings();
      await this.plugin.onunload();
      await this.plugin.onload();
      new import_obsidian.Notice("\u5DF2\u5F00\u542F6\u5C0F\u65F6\u8BD5\u7528\u671F\uFF01\u6240\u6709\u529F\u80FD\u5DF2\u542F\u7528");
      this.display();
      const checkTrialInterval = setInterval(async () => {
        const now = Date.now();
        if (now >= endTime) {
          clearInterval(checkTrialInterval);
          await this.plugin.onunload();
          this.plugin.disablePluginFeatures();
          new import_obsidian.Notice("\u8BD5\u7528\u671F\u5DF2\u7ED3\u675F\uFF0C\u8BF7\u6FC0\u6D3B\u63D2\u4EF6\u7EE7\u7EED\u4F7F\u7528\uFF01");
          this.display();
        }
      }, 1e3);
      this.register(() => clearInterval(checkTrialInterval));
    });
  }
  // 修改 renderAboutContent 方法
  renderAboutContent(container) {
    container.createEl("h1", { text: "\u5173\u4E8E\u63D2\u4EF6" }).style.color = "#ff6b6b";
    const descriptionContainer = container.createEl("div");
    descriptionContainer.createEl("span", {
      text: "\u8FD9\u662F\u4E00\u4E2A\u7528\u4E8E\u5728 Obsidian \u4E2D\u4E3A Callout \u6DFB\u52A0\u989D\u5916\u5907\u6CE8\u529F\u80FD\u7684\u63D2\u4EF6\uFF0C"
    });
    const warningText = descriptionContainer.createEl("span", {
      text: '\u8BF7\u6CE8\u610F\u8BE5\u63D2\u4EF6\u5BF9\u4E8ECallout\u7B14\u8BB0\u7C7B\u5B58\u5728\u8F83\u5927\u7684HTML"\u7B14\u8BB0\u6C61\u67D3"\uFF0C\u4F7F\u7528\u524D\u8BF7\u77E5\u6089\u3002'
    });
    warningText.style.color = "#ff0000";
    container.createEl("p", { text: "\u7248\u672C: 1.2.0" });
    container.createEl("p", { text: "\u4F5C\u8005: \u4E00\u624B\u70C2\u724C\u6253\u5F97\u7A00\u70C2" });
    const hr1 = container.createEl("hr");
    hr1.style.margin = "20px 0";
    const followTitle = container.createEl("h1", { text: "\u6B22\u8FCE\u6CE8" });
    followTitle.style.color = "#4169E1";
    const bilibiliLink = container.createEl("a", {
      text: "B\u7AD9: \u4E00\u624B\u70C2\u724C\u6253\u5F97\u7A00\u70C2",
      href: "https://space.bilibili.com/397511870?spm_id_from=333.1365.0.0"
    });
    bilibiliLink.style.color = "#00A1D6";
    bilibiliLink.style.display = "block";
    bilibiliLink.style.marginBottom = "10px";
    bilibiliLink.style.textDecoration = "underline";
    bilibiliLink.style.textUnderlineOffset = "2px";
    bilibiliLink.style.cursor = "pointer";
    const xiaohongshuLink = container.createEl("a", {
      text: "\u5C0F\u7EA2\u4E66: \u4E00\u624B\u70C2\u724C\u6253\u5F97\u7A00\u70C2",
      href: "https://www.xiaohongshu.com/user/profile/6377b528000000001f01e2ef"
    });
    xiaohongshuLink.style.color = "#FE2C55";
    xiaohongshuLink.style.display = "block";
    xiaohongshuLink.style.marginBottom = "20px";
    xiaohongshuLink.style.textDecoration = "underline";
    xiaohongshuLink.style.textUnderlineOffset = "2px";
    xiaohongshuLink.style.cursor = "pointer";
    const img = container.createEl("img", {
      attr: {
        src: "https://zhangjiangchong.oss-cn-chengdu.aliyuncs.com/2.png",
        alt: "\u5173\u6CE8\u4E8C\u7EF4\u7801"
      }
    });
    img.style.maxWidth = "100%";
    img.style.height = "auto";
    img.style.display = "block";
    img.style.margin = "10px auto";
    const hr2 = container.createEl("hr");
    hr2.style.margin = "20px 0";
    const sponsorTitle = container.createEl("h1", { text: "\u8D5E\u52A9\u652F\u6301" });
    sponsorTitle.style.color = "#4169E1";
    const trialText = container.createEl("p", {
      text: "\u6B64\u63D2\u4EF6\u5141\u8BB8\u767D\u5AD6\uFF0C\u8BD5\u7528\u65F6\u95F4\u7ED3\u675F\u4EE5\u540E\uFF0C\u91CD\u65B0\u5B89\u88C5\u63D2\u4EF6\u5373\u53EF\u7EE7\u7EED\u8BD5\u7528"
    });
    trialText.style.textAlign = "center";
    trialText.style.margin = "10px 0";
    trialText.style.color = "#666666";
    trialText.style.fontSize = "0.9em";
    const sponsorText = container.createEl("p", {
      text: "\u8BF7\u4F5C\u8005\u559D\u4E00\u74F6\u77FF\u6CC9\u6C34"
    });
    sponsorText.style.textAlign = "center";
    sponsorText.style.margin = "10px 0";
    const sponsorImg = container.createEl("img", {
      attr: {
        src: "https://zhangjiangchong.oss-cn-chengdu.aliyuncs.com/20241204142159.png",
        alt: "\u8D5E\u52A9\u4E8C\u7EF4\u7801"
      }
    });
    sponsorImg.style.maxWidth = "100%";
    sponsorImg.style.height = "auto";
    sponsorImg.style.display = "block";
    sponsorImg.style.margin = "10px auto";
  }
  // 添加场景渲染相关的方法
  renderScenes() {
    this.renderSceneTabs();
    this.renderCurrentSceneContent();
    this.updateSceneDropdowns();
  }
  // 渲染场景标签
  renderSceneTabs() {
    if (!this.sceneTabContainer)
      return;
    const addButton = this.sceneTabContainer.querySelector(".scene-tab-button");
    this.sceneTabContainer.empty();
    if (addButton)
      this.sceneTabContainer.appendChild(addButton);
    this.plugin.settings.scenes.forEach((scene) => {
      const tabContainer = this.createSceneTab(scene);
      this.sceneTabContainer.appendChild(tabContainer);
    });
  }
  // 创建单个场景标签
  createSceneTab(scene) {
    const tabContainer = createEl("div", { cls: "scene-tab-container" });
    tabContainer.style.display = "flex";
    tabContainer.style.alignItems = "center";
    tabContainer.style.gap = "4px";
    const editButton = tabContainer.createEl("button", {
      text: "\u270E",
      cls: "scene-tab-edit"
    });
    editButton.style.padding = "4px 8px";
    editButton.style.cursor = "pointer";
    editButton.style.border = "none";
    editButton.style.borderRadius = "4px";
    editButton.style.backgroundColor = "transparent";
    const sceneTab = tabContainer.createEl("button", {
      text: scene.name,
      cls: "scene-tab"
    });
    if (scene.id === this.plugin.settings.currentSceneId) {
      sceneTab.addClass("scene-tab-active");
    }
    if (scene.id !== "default") {
      const deleteButton = this.createSceneDeleteButton(scene);
      tabContainer.appendChild(deleteButton);
    }
    editButton.onclick = (e) => {
      e.stopPropagation();
      this.showSceneNameEditModal(scene);
    };
    sceneTab.onclick = async () => {
      this.plugin.settings.currentSceneId = scene.id;
      await this.plugin.saveSettings();
      this.renderScenes();
    };
    return tabContainer;
  }
  // 创建场景删除按钮
  createSceneDeleteButton(scene) {
    const deleteButton = createEl("button", {
      text: "\xD7",
      cls: "scene-tab-delete"
    });
    deleteButton.onclick = async (e) => {
      e.stopPropagation();
      if (this.plugin.settings.scenes.length <= 1) {
        new import_obsidian.Notice("\u81F3\u5C11\u9700\u8981\u4FDD\u7559\u4E00\u4E2A\u573A\u666F");
        return;
      }
      this.plugin.settings.scenes = this.plugin.settings.scenes.filter((s) => s.id !== scene.id);
      if (this.plugin.settings.currentSceneId === scene.id) {
        this.plugin.settings.currentSceneId = this.plugin.settings.scenes[0].id;
      }
      await this.plugin.saveSettings();
      this.renderScenes();
      new import_obsidian.Notice(`\u5DF2\u5220\u9664\u573A\u666F\uFF1A${scene.name}`);
    };
    return deleteButton;
  }
  // 渲染当前场景内容
  renderCurrentSceneContent() {
    if (!this.sceneContentContainer)
      return;
    const currentScene = this.plugin.settings.scenes.find(
      (scene) => scene.id === this.plugin.settings.currentSceneId
    );
    if (!currentScene)
      return;
    this.sceneContentContainer.empty();
    const sceneActionsContainer = this.sceneContentContainer.createDiv("scene-actions-container");
    sceneActionsContainer.style.marginBottom = "20px";
    const addCalloutButton = this.sceneContentContainer.createEl("button", {
      text: "\u6DFB\u52A0\u65B0\u7684\u7B14\u8BB0\u578B",
      cls: "mod-cta"
    });
    addCalloutButton.style.marginTop = "20px";
    addCalloutButton.style.width = "100%";
    addCalloutButton.style.marginBottom = "20px";
    const copyFromButton = sceneActionsContainer.createEl("button", {
      text: "\u4ECE\u5176\u4ED6\u573A\u666F\u590D\u5236\u914D\u7F6E",
      cls: "mod-cta"
    });
    copyFromButton.style.marginBottom = "20px";
    copyFromButton.onclick = () => {
      const modal = new SceneCopyModal(this.app, this.plugin, currentScene, async (sourceSceneId) => {
        const sourceScene = this.plugin.settings.scenes.find((s) => s.id === sourceSceneId);
        if (sourceScene) {
          currentScene.callouts = JSON.parse(JSON.stringify(sourceScene.callouts));
          await this.plugin.saveSettings();
          this.renderCurrentSceneContent();
        }
      });
      modal.open();
    };
    addCalloutButton.onclick = async () => {
      const newCallout = {
        type: "note",
        color: "#808080",
        name: `\u7B14\u8BB0\u7C7B\u578B${currentScene.callouts.length + 1}`,
        textColor: "#000000",
        backgroundColor: "#ffffff"
      };
      currentScene.callouts.push(newCallout);
      await this.plugin.saveSettings();
      this.renderCurrentSceneContent();
    };
    currentScene.callouts.forEach((callout, index) => {
      if (index > 0) {
        const hr = this.sceneContentContainer.createEl("hr");
        hr.style.margin = "20px 0";
      }
      const calloutContainer = this.sceneContentContainer.createDiv("callout-setting-container");
      calloutContainer.style.backgroundColor = "var(--background-secondary)";
      calloutContainer.style.padding = "15px";
      calloutContainer.style.borderRadius = "8px";
      calloutContainer.style.marginBottom = "20px";
      const headerContainer = calloutContainer.createDiv("callout-header");
      headerContainer.style.display = "flex";
      headerContainer.style.justifyContent = "space-between";
      headerContainer.style.alignItems = "center";
      headerContainer.style.marginBottom = "15px";
      headerContainer.createEl("h3", {
        text: `\u7B14\u8BB0\u7C7B\u578B${index + 1}`,
        cls: "callout-header-title"
      });
      if (index > 0) {
        const deleteButton = headerContainer.createEl("button", {
          text: "\u5220\u9664",
          cls: "mod-warning"
        });
        deleteButton.onclick = async () => {
          currentScene.callouts = currentScene.callouts.filter((_, i) => i !== index);
          await this.plugin.saveSettings();
          this.renderCurrentSceneContent();
        };
      }
      this.addCalloutSettings(calloutContainer, callout);
    });
  }
  // 添加 Callout 设置
  addCalloutSettings(container, callout) {
    new import_obsidian.Setting(container).setName("\u6587\u5B57\u989C\u8272").setDesc("\u8BBE\u7F6E\u6587\u5B57\u7684\u989C\u8272").addText((text) => text.setValue(callout.textColor).setPlaceholder("#000000").then((textComponent) => {
      const colorPicker = createEl("input", {
        type: "color",
        value: callout.textColor
      });
      colorPicker.style.marginRight = "8px";
      textComponent.inputEl.before(colorPicker);
      colorPicker.oninput = (e) => {
        const target = e.target;
        textComponent.setValue(target.value);
        callout.textColor = target.value;
        this.plugin.saveSettings();
      };
      textComponent.inputEl.oninput = (e) => {
        const target = e.target;
        colorPicker.value = target.value;
      };
    }).onChange(async (value) => {
      callout.textColor = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(container).setName("Callout \u989C\u8272").setDesc("\u8BBE\u7F6E Callout \u7684\u989C\u8272").addText((text) => text.setValue(callout.color).setPlaceholder("#000000").then((textComponent) => {
      const colorPicker = createEl("input", {
        type: "color",
        value: callout.color
      });
      colorPicker.style.marginRight = "8px";
      textComponent.inputEl.before(colorPicker);
      colorPicker.oninput = (e) => {
        const target = e.target;
        textComponent.setValue(target.value);
        callout.color = target.value;
        this.plugin.saveSettings();
      };
      textComponent.inputEl.oninput = (e) => {
        const target = e.target;
        colorPicker.value = target.value;
      };
    }).onChange(async (value) => {
      callout.color = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(container).setName("Callout \u540D\u79F0").setDesc("\u8BBE\u7F6E Callout \u7684\u663E\u793A\u540D\u79F0").addText((text) => text.setValue(callout.name).setPlaceholder("\u9ED8\u8BA4").onChange(async (value) => {
      callout.name = value.trim() || "\u9ED8\u8BA4";
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(container).setName("Callout \u7C7B\u578B").setDesc("\u8BBE\u7F6E Callout \u7684\u7C7B\u578B\u6807\u8BC6").addText((text) => text.setValue(callout.type).setPlaceholder("note").onChange(async (value) => {
      callout.type = value.trim() || "note";
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(container).setName("\u80CC\u666F\u989C\u8272").setDesc("\u8BBE\u7F6E Callout \u7684\u80CC\u666F\u989C\u8272").addText((text) => text.setValue(callout.backgroundColor).setPlaceholder("#ffffff").then((textComponent) => {
      const colorPicker = createEl("input", {
        type: "color",
        value: callout.backgroundColor
      });
      colorPicker.style.marginRight = "8px";
      textComponent.inputEl.before(colorPicker);
      colorPicker.oninput = (e) => {
        const target = e.target;
        textComponent.setValue(target.value);
        callout.backgroundColor = target.value;
        this.plugin.saveSettings();
      };
      textComponent.inputEl.oninput = (e) => {
        const target = e.target;
        colorPicker.value = target.value;
      };
    }).onChange(async (value) => {
      callout.backgroundColor = value;
      await this.plugin.saveSettings();
    }));
  }
  // 添加新场景
  async addNewScene() {
    const newScene = {
      id: `scene-${Date.now()}`,
      name: `\u573A\u666F${this.plugin.settings.scenes.length + 1}`,
      // 确保使用正确的中文字符
      callouts: []
    };
    this.plugin.settings.scenes.push(newScene);
    this.plugin.settings.currentSceneId = newScene.id;
    await this.plugin.saveSettings();
    this.renderScenes();
  }
  // 更新场景下拉菜单
  updateSceneDropdowns() {
    if (this.sceneDropdown) {
      this.sceneDropdown.selectEl.empty();
      this.plugin.settings.scenes.forEach((scene) => {
        this.sceneDropdown.addOption(scene.id, scene.name);
      });
      this.sceneDropdown.setValue(this.plugin.settings.currentSceneId);
    }
  }
  showSceneNameEditModal(scene) {
    const modal = new SceneNameModal(this.app, scene.name, async (newName) => {
      scene.name = newName;
      await this.plugin.saveSettings();
      this.renderScenes();
      if (this.sceneDropdown) {
        this.updateSceneDropdowns();
      }
    });
    modal.open();
  }
  register(cleanup) {
    this.cleanupFunctions.push(cleanup);
  }
  // 在类的 hide 方法中清理
  hide() {
    this.cleanupFunctions.forEach((cleanup) => cleanup());
    this.cleanupFunctions = [];
  }
  renderBasicContent(container) {
    const sceneSelectContainer = container.createDiv("scene-select-container");
    sceneSelectContainer.style.marginTop = "24px";
    sceneSelectContainer.style.padding = "12px";
    sceneSelectContainer.style.backgroundColor = "var(--background-secondary)";
    sceneSelectContainer.style.borderRadius = "8px";
    sceneSelectContainer.createEl("h4", {
      text: "\u573A\u666F\u7BA1\u7406",
      cls: "setting-category"
    });
    this.sceneTabContainer = sceneSelectContainer.createDiv("scene-tabs");
    this.sceneTabContainer.style.display = "flex";
    this.sceneTabContainer.style.flexWrap = "wrap";
    this.sceneTabContainer.style.gap = "8px";
    this.sceneTabContainer.style.marginBottom = "16px";
    const addSceneButton = this.sceneTabContainer.createEl("button", {
      text: "+ \u65B0\u573A\u666F",
      cls: "scene-tab-button"
    });
    addSceneButton.addEventListener("click", () => this.addNewScene());
    new import_obsidian.Setting(sceneSelectContainer).setName("\u5F53\u524D\u5DE5\u4F5C\u573A\u666F").setDesc("\u9009\u62E9\u8981\u4F7F\u7528\u7684\u5DE5\u4F5C\u573A\u666F").addDropdown((dropdown) => {
      this.sceneDropdown = dropdown;
      this.plugin.settings.scenes.forEach((scene) => {
        dropdown.addOption(scene.id, scene.name);
      });
      dropdown.setValue(this.plugin.settings.currentSceneId);
      dropdown.onChange(async (value) => {
        this.plugin.settings.currentSceneId = value;
        await this.plugin.saveSettings();
        this.renderScenes();
      });
    });
    const globalIconContainer = container.createDiv("global-icon-settings-container");
    globalIconContainer.style.marginBottom = "24px";
    globalIconContainer.style.padding = "12px";
    globalIconContainer.style.backgroundColor = "var(--background-secondary)";
    globalIconContainer.style.borderRadius = "8px";
    globalIconContainer.createEl("h4", {
      text: "\u5168\u5C40\u56FE\u6807\u663E\u793A",
      cls: "setting-category"
    });
    new import_obsidian.Setting(globalIconContainer).setName("\u663E\u793A\u5168\u5C40\u56FE\u6807").setDesc("\u662F\u5426\u5728\u6240\u6709 Callout \u53F3\u4E0A\u89D2\u663E\u793A\u56FE\u6807").addToggle((toggle) => {
      toggle.setValue(this.plugin.settings.showGlobalIcons).onChange(async (value) => {
        this.plugin.settings.showGlobalIcons = value;
        await this.plugin.saveSettings();
        if (this.plugin.updateAllOpenNotes) {
          this.plugin.updateAllOpenNotes();
        }
      });
    });
    const tipContainer = globalIconContainer.createDiv("global-icon-tip");
    tipContainer.style.marginTop = "12px";
    tipContainer.style.padding = "8px";
    tipContainer.style.backgroundColor = "var(--background-primary)";
    tipContainer.style.border = "1px solid var(--background-modifier-border)";
    tipContainer.style.borderRadius = "4px";
    tipContainer.style.fontSize = "0.9em";
    tipContainer.style.color = "var(--text-muted)";
    tipContainer.createEl("p", {
      text: '\u5C5E\u6027\u4E2D\u7684\u58F0\u660E\u4F18\u5148\u8BE5\u6309\u94AE\uFF0C\u5F53\u5F00\u542F\u5168\u5C40\u56FE\u6807\uFF0C\u4F60\u5728\u5C5E\u6027\u4E2D\u58F0\u660E\u5173\u95ED\uFF0CCallout\u53F3\u4E0A\u89D2\u7684\u56FE\u6807\u4E5F\u4F1A\u6D88\u5931\uFF0C\u53CD\u4E4B\u4EA6\u7136\u3002\u5C5E\u6027\u58F0\u660E\u5F62\u5982"Callout extra message display\uFF1AYes/No"\u3002'
    }).style.margin = "0";
    this.sceneContentContainer = sceneSelectContainer.createDiv("scene-content");
    this.sceneContentContainer.style.marginTop = "16px";
    this.renderScenes();
  }
  updatePreviewIcon(iconElement) {
    const iconType = this.plugin.settings.iconSettings.type;
    iconElement.empty();
    switch (iconType) {
      case 1:
        iconElement.innerHTML = `<svg viewBox="0 0 24 24" fill="#4A90E2"><path d="M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/></svg>`;
        break;
      case 2:
        iconElement.innerHTML = `<svg viewBox="0 0 24 24" fill="#2ECC71"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/></svg>`;
        break;
      case 3:
        iconElement.innerHTML = `<svg viewBox="0 0 24 24" fill="#FF69B4"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>`;
        break;
      case 4:
        iconElement.innerHTML = `<svg viewBox="0 0 24 24" fill="#FF9800"><circle cx="12" cy="12" r="10"/></svg>`;
        break;
      case 5:
        iconElement.innerHTML = `<svg viewBox="0 0 24 24" fill="#9E9E9E"><rect x="3" y="3" width="18" height="18" rx="2"/></svg>`;
        break;
    }
  }
};
var CalloutSelectionModal = class extends import_obsidian.Modal {
  constructor(app, plugin, editor) {
    super(app);
    this.plugin = plugin;
    this.editor = editor;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("callout-selection-modal");
    contentEl.createEl("h2", { text: "\u9009\u62E9\u7B14\u8BB0\u7C7B\u578B" });
    const calloutList = contentEl.createDiv("callout-list");
    const currentScene = this.plugin.settings.scenes.find(
      (scene) => scene.id === this.plugin.settings.currentSceneId
    );
    if (!currentScene) {
      contentEl.createEl("p", { text: "\u627E\u4E0D\u5230\u573A\u666F\u914D\u7F6E" });
      return;
    }
    currentScene.callouts.forEach((callout, index) => {
      const calloutItem = calloutList.createDiv("callout-list-item");
      const preview = calloutItem.createDiv("callout-preview");
      preview.style.borderLeft = `4px solid ${callout.color}`;
      preview.style.backgroundColor = this.adjustColor(callout.color, 0.1);
      const title = preview.createEl("h3", { text: callout.name });
      title.style.color = callout.color;
      calloutItem.addEventListener("click", () => {
        this.transformToCallout(callout);
        this.close();
      });
      calloutItem.addEventListener("mouseenter", () => {
        calloutItem.addClass("callout-list-item-hover");
      });
      calloutItem.addEventListener("mouseleave", () => {
        calloutItem.removeClass("callout-list-item-hover");
      });
    });
  }
  // 修改 transformToCallout 方法，直接接受 callout 配置
  transformToCallout(callout) {
    const selection = this.editor.getSelection();
    if (!selection) {
      new import_obsidian.Notice("\u8BF7\u5148\u9009\u62E9\u8981\u8F6C\u6362\u7684\u6587\u672C");
      return;
    }
    const calloutId = `callout-${Date.now()}-${Math.random().toString(36).substring(2, 8)}`;
    const formattedText = `> [!${callout.type}] **<font color="${callout.color}">${callout.name}</font>**
> <span style="background:${callout.backgroundColor}" data-callout-id="${calloutId}"><font color="${callout.textColor}">${selection}</font></span>

`;
    const cursor = this.editor.getCursor();
    this.editor.replaceSelection(formattedText);
    this.editor.setCursor({
      line: cursor.line + 3,
      ch: 0
    });
    new import_obsidian.Notice(`\u6587\u672C\u5DF2\u8F6C\u6362\u4E3A ${callout.name} \u683C\u5F0F\uFF01`);
  }
  adjustColor(color, opacity) {
    if (color.startsWith("#")) {
      const r = parseInt(color.slice(1, 3), 16);
      const g = parseInt(color.slice(3, 5), 16);
      const b = parseInt(color.slice(5, 7), 16);
      return `rgba(${r}, ${g}, ${b}, ${opacity})`;
    }
    return color;
  }
};
var SceneNameModal = class extends import_obsidian.Modal {
  constructor(app, currentName, onSubmit) {
    super(app);
    this.onSubmit = onSubmit;
    this.nameInput = createEl("input", {
      type: "text",
      value: currentName
    });
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("scene-name-modal");
    contentEl.createEl("h3", { text: "\u7F16\u8F91\u573A\u666F\u540D\u79F0" });
    this.nameInput.style.width = "100%";
    this.nameInput.style.marginBottom = "20px";
    contentEl.appendChild(this.nameInput);
    const buttonContainer = contentEl.createDiv("scene-name-modal-buttons");
    buttonContainer.style.display = "flex";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.gap = "10px";
    const saveButton = buttonContainer.createEl("button", {
      text: "\u4FDD\u5B58",
      cls: "mod-cta"
    });
    const cancelButton = buttonContainer.createEl("button", {
      text: "\u53D6\u6D88"
    });
    saveButton.addEventListener("click", () => {
      const newName = this.nameInput.value.trim();
      if (newName) {
        this.onSubmit(newName);
        this.close();
      } else {
        new import_obsidian.Notice("\u573A\u666F\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A");
      }
    });
    cancelButton.addEventListener("click", () => this.close());
  }
};
var SceneCopyModal = class extends import_obsidian.Modal {
  constructor(app, plugin, targetScene, onSubmit) {
    super(app);
    this.plugin = plugin;
    this.targetScene = targetScene;
    this.onSubmit = onSubmit;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("scene-copy-modal");
    contentEl.createEl("h3", { text: "\u4ECE\u5176\u4ED6\u573A\u666F\u590D\u5236\u914D\u7F6E" });
    const sceneList = contentEl.createDiv("scene-copy-list");
    sceneList.style.marginTop = "20px";
    sceneList.style.marginBottom = "20px";
    this.plugin.settings.scenes.forEach((scene) => {
      if (scene.id !== this.targetScene.id) {
        const sceneItem = sceneList.createDiv("scene-copy-item");
        sceneItem.style.padding = "10px";
        sceneItem.style.cursor = "pointer";
        sceneItem.style.borderRadius = "4px";
        sceneItem.style.marginBottom = "8px";
        sceneItem.style.backgroundColor = "var(--background-secondary)";
        sceneItem.createEl("span", { text: scene.name });
        sceneItem.addEventListener("click", () => {
          this.onSubmit(scene.id);
          this.close();
        });
        sceneItem.addEventListener("mouseenter", () => {
          sceneItem.style.backgroundColor = "var(--background-modifier-hover)";
        });
        sceneItem.addEventListener("mouseleave", () => {
          sceneItem.style.backgroundColor = "var(--background-secondary)";
        });
      }
    });
    const cancelButton = contentEl.createEl("button", {
      text: "\u53D6\u6D88",
      cls: "scene-copy-cancel"
    });
    cancelButton.style.display = "block";
    cancelButton.style.marginLeft = "auto";
    cancelButton.addEventListener("click", () => this.close());
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBQbHVnaW4sIFdvcmtzcGFjZUxlYWYsIE1hcmtkb3duVmlldywgTm90aWNlLCBNb2RhbCwgVmlldywgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZywgRWRpdG9yLCBNZW51LCBNZW51SXRlbSB9IGZyb20gJ29ic2lkaWFuJztcblxuLy8gXHU2MjY5XHU1QzU1IE1lbnUgXHU3QzdCXHU1NzhCXG5kZWNsYXJlIG1vZHVsZSAnb2JzaWRpYW4nIHtcbiAgICBpbnRlcmZhY2UgTWVudSB7XG4gICAgICAgIGFkZFN1Ym1lbnUoKTogTWVudTtcbiAgICAgICAgc2hvd0F0TW91c2VFdmVudChldmVudDogTW91c2VFdmVudCk6IHZvaWQ7XG4gICAgfVxuICAgIGludGVyZmFjZSBNZW51SXRlbSB7XG4gICAgICAgIG9uQ2xpY2soY2FsbGJhY2s6IChldmVudDogTW91c2VFdmVudCkgPT4gdm9pZCk6IHRoaXM7XG4gICAgfVxufVxuXG4vLyBcdTYzRDJcdTRFRjZcdThCQkVcdTdGNkVcbmludGVyZmFjZSBDYWxsb3V0Q29uZmlnIHtcbiAgICB0eXBlOiBzdHJpbmc7XG4gICAgY29sb3I6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgdGV4dENvbG9yOiBzdHJpbmc7XG4gICAgYmFja2dyb3VuZENvbG9yOiBzdHJpbmc7XG59XG5cbi8vIFx1OTk5Nlx1NTE0OFx1NEZFRVx1NjUzOVx1OTE0RFx1N0Y2RVx1NjNBNVx1NTNFMyxcdTZERkJcdTUyQTBcdTU3M0FcdTY2NkZcdTc2RjhcdTUxNzNcdTc2ODRcdTVCOUFcdTRFNDlcbmludGVyZmFjZSBTY2VuZUNvbmZpZyB7XG4gICAgaWQ6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgY2FsbG91dHM6IENhbGxvdXRDb25maWdbXTtcbn1cblxuaW50ZXJmYWNlIEljb25TZXR0aW5ncyB7XG4gICAgdHlwZTogbnVtYmVyOyAgLy8gXHU1NkZFXHU2ODA3XHU3QzdCXHU1NzhCIDEtNVxuICAgIHNpemU6IG51bWJlcjsgIC8vIFx1NTZGRVx1NjgwN1x1NTkyN1x1NUMwRlx1RkYwQ1x1NTM1NVx1NEY0RHB4XG4gICAgcG9zaXRpb246IHtcbiAgICAgICAgdG9wOiBudW1iZXI7ICAvLyBcdTc2RjhcdTVCRjlcdTk4NzZcdTkwRThcdTRGNERcdTdGNkVcdUZGMENcdTUzNTVcdTRGNERweFxuICAgICAgICByaWdodDogbnVtYmVyOyAgLy8gXHU3NkY4XHU1QkY5XHU1M0YzXHU0RkE3XHU0RjREXHU3RjZFXHVGRjBDXHU1MzU1XHU0RjREcHhcbiAgICB9O1xufVxuXG5pbnRlcmZhY2UgUGx1Z2luU2V0dGluZ3Mge1xuICAgIGN1cnJlbnRTY2VuZUlkOiBzdHJpbmc7XG4gICAgc2NlbmVzOiBBcnJheTx7XG4gICAgICAgIGlkOiBzdHJpbmc7XG4gICAgICAgIG5hbWU6IHN0cmluZztcbiAgICAgICAgY2FsbG91dHM6IEFycmF5PHtcbiAgICAgICAgICAgIGlkOiBzdHJpbmc7XG4gICAgICAgICAgICBuYW1lOiBzdHJpbmc7XG4gICAgICAgICAgICB0eXBlOiBzdHJpbmc7XG4gICAgICAgICAgICBjb2xvcjogc3RyaW5nO1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiBzdHJpbmc7XG4gICAgICAgICAgICB0ZXh0Q29sb3I6IHN0cmluZztcbiAgICAgICAgfT47XG4gICAgfT47XG4gICAgaWNvblNldHRpbmdzOiBJY29uU2V0dGluZ3M7XG4gICAgaXNBY3RpdmF0ZWQ6IGJvb2xlYW47XG4gICAgbGljZW5zZUtleTogc3RyaW5nO1xuICAgIF9sYXN0SW5zdGFsbFRpbWU6IG51bWJlcjtcbiAgICBoYXNVc2VkVHJpYWw6IGJvb2xlYW47XG4gICAgdHJpYWxFbmRUaW1lOiBudW1iZXIgfCBudWxsO1xuICAgIHNob3dHbG9iYWxJY29uczogYm9vbGVhbjsgIC8vIFx1NkRGQlx1NTJBMFx1OEZEOVx1NEUwMFx1ODg0Q1xuICAgIHVzZVByaXNtU3R5bGU6IGJvb2xlYW47ICAvLyBcdTZERkJcdTUyQTBcdThGRDlcdTRFMDBcdTg4NENcbiAgICBzaG93Q2FsbG91dEljb246IGJvb2xlYW47XG4gICAgbWVzc2FnZXM6IFJlY29yZDxzdHJpbmcsIE1lc3NhZ2VEYXRhPjsgLy8gXHU2REZCXHU1MkEwXHU4RkQ5XHU0RTJBXHU3RjNBXHU1OTMxXHU3Njg0XHU1QzVFXHU2MDI3XG59XG5cbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IFBsdWdpblNldHRpbmdzID0ge1xuICAgIGN1cnJlbnRTY2VuZUlkOiAnZGVmYXVsdCcsXG4gICAgc2NlbmVzOiBbe1xuICAgICAgICBpZDogJ2RlZmF1bHQnLFxuICAgICAgICBuYW1lOiAnXHU5RUQ4XHU4QkE0XHU1NzNBXHU2NjZGJyxcbiAgICAgICAgY2FsbG91dHM6IFtdXG4gICAgfV0sXG4gICAgaWNvblNldHRpbmdzOiB7XG4gICAgICAgIHR5cGU6IDEsXG4gICAgICAgIHNpemU6IDI0LFxuICAgICAgICBwb3NpdGlvbjoge1xuICAgICAgICAgICAgdG9wOiA4LFxuICAgICAgICAgICAgcmlnaHQ6IDE2XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGlzQWN0aXZhdGVkOiBmYWxzZSxcbiAgICBsaWNlbnNlS2V5OiAnJyxcbiAgICBfbGFzdEluc3RhbGxUaW1lOiBEYXRlLm5vdygpLFxuICAgIGhhc1VzZWRUcmlhbDogZmFsc2UsXG4gICAgdHJpYWxFbmRUaW1lOiBudWxsLFxuICAgIHNob3dHbG9iYWxJY29uczogdHJ1ZSwgIC8vIFx1NkRGQlx1NTJBMFx1OEZEOVx1NEUwMFx1ODg0Q1x1RkYwQ1x1OUVEOFx1OEJBNFx1NjYzRVx1NzkzQVx1NTZGRVx1NjgwN1xuICAgIHVzZVByaXNtU3R5bGU6IGZhbHNlLCAgLy8gXHU2REZCXHU1MkEwXHU4RkQ5XHU0RTAwXHU4ODRDXG4gICAgc2hvd0NhbGxvdXRJY29uOiB0cnVlLFxuICAgIG1lc3NhZ2VzOiB7fSxcbn07XG5cbi8vIFx1NUI5QVx1NEU0OVx1ODlDNlx1NTZGRVx1N0M3Qlx1NTc4QlxuY29uc3QgQ0FMTF9PVVRfTUVTU0FHRV9WSUVXID0gXCJjYWxsb3V0LW1lc3NhZ2Utdmlld1wiO1xuXG4vLyBcdTZERkJcdTUyQTAgTWVzc2FnZURhdGEgXHU2M0E1XHU1M0UzXHU1QjlBXHU0RTQ5XG5pbnRlcmZhY2UgTWVzc2FnZURhdGEge1xuICAgIG1lc3NhZ2VzOiBBcnJheTx7XG4gICAgICAgIHRleHQ6IHN0cmluZztcbiAgICAgICAgdGltZXN0YW1wOiBzdHJpbmc7XG4gICAgfT47XG59XG5cbi8vIFx1NTcyOFx1NjU4N1x1NEVGNlx1OTg3Nlx1OTBFOFx1NkRGQlx1NTJBMFx1N0M3Qlx1NTc4Qlx1NUI5QVx1NEU0OVxuaW50ZXJmYWNlIERyb3Bkb3duQ29tcG9uZW50IHtcbiAgICBzZWxlY3RFbDogSFRNTFNlbGVjdEVsZW1lbnQ7XG4gICAgc2V0VmFsdWUodmFsdWU6IHN0cmluZyk6IHRoaXM7XG4gICAgZ2V0VmFsdWUoKTogc3RyaW5nO1xuICAgIGFkZE9wdGlvbih2YWx1ZTogc3RyaW5nLCBkaXNwbGF5OiBzdHJpbmcpOiB0aGlzO1xuICAgIG9uQ2hhbmdlKGNhbGxiYWNrOiAodmFsdWU6IHN0cmluZykgPT4gYW55KTogdGhpcztcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FsbG91dEV4dHJhTWVzc2FnZVBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XG4gICAgc2V0dGluZ3M6IFBsdWdpblNldHRpbmdzO1xuICAgIHByaXZhdGUgbWVzc2FnZUljb25PYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlcjtcbiAgICBtZXNzYWdlVmlldzogQ2FsbG91dE1lc3NhZ2VWaWV3O1xuXG4gICAgYXN5bmMgb25sb2FkKCkge1xuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU1MjFEXHU1OUNCXHU1MzE2XHU2ODM3XHU1RjBGXG4gICAgICAgIHRoaXMudG9nZ2xlUHJpc21TdHlsZSh0aGlzLnNldHRpbmdzLnVzZVByaXNtU3R5bGUpO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1OEJCRVx1N0Y2RVx1NjgwN1x1N0I3RVx1OTg3NVx1RkYwOFx1NTNFQVx1OTcwMFx1ODk4MVx1NEUwMFx1NkIyMVx1RkYwOVxuICAgICAgICB0aGlzLmFkZFNldHRpbmdUYWIobmV3IENhbGxvdXRNZXNzYWdlU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1Njc0M1x1OTY1MFx1NzJCNlx1NjAwMVxuICAgICAgICBjb25zdCBoYXNQZXJtaXNzaW9uID0gYXdhaXQgdGhpcy5jaGVja0FjdGl2YXRpb24oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTNFQVx1NjcwOVx1NTcyOFx1NjcwOVx1Njc0M1x1OTY1MFx1NjVGNlx1NjI0RFx1NTJBMFx1OEY3RFx1NTI5Rlx1ODBGRFxuICAgICAgICBpZiAoaGFzUGVybWlzc2lvbikge1xuICAgICAgICAgICAgLy8gXHU1MjFEXHU1OUNCXHU1MzE2XHU4OUMyXHU1QkRGXHU1NjY4XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VJY29uT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVET01DaGFuZ2VzKG11dGF0aW9ucyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gXHU2Q0U4XHU1MThDXHU4OUM2XHU1NkZFXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyVmlldyhcbiAgICAgICAgICAgICAgICBDQUxMX09VVF9NRVNTQUdFX1ZJRVcsXG4gICAgICAgICAgICAgICAgKGxlYWYpID0+IG5ldyBDYWxsb3V0TWVzc2FnZVZpZXcobGVhZiwgdGhpcylcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIFx1NzZEMVx1NTQyQ1x1NURFNVx1NEY1Q1x1NTMzQVx1NTNEOFx1NTMxNlxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignYWN0aXZlLWxlYWYtY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0T2JzZXJ2aW5nKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIFx1NzZEMVx1NTQyQ1x1NjU4N1x1NEVGNlx1NjI1M1x1NUYwMFxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZS1vcGVuJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0T2JzZXJ2aW5nKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTQ3RFx1NEVFNFxuICAgICAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcbiAgICAgICAgICAgICAgICBpZDogJ3RyYW5zZm9ybS10by1jYWxsb3V0JyxcbiAgICAgICAgICAgICAgICBuYW1lOiAnXHU1QzA2XHU5MDA5XHU0RTJEXHU2NTg3XHU2NzJDXHU4RjZDXHU2MzYyXHU0RTNBIENhbGxvdXQnLFxuICAgICAgICAgICAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1Ub0NhbGxvdXQoZWRpdG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1M0YzXHU5NTJFXHU4M0RDXHU1MzU1XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyQ29udGV4dE1lbnUoKTtcblxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU0RkE3XHU4RkI5XHU2ODBGXHU1NkZFXHU2ODA3XG4gICAgICAgICAgICB0aGlzLmFkZFJpYmJvbkljb24oXG4gICAgICAgICAgICAgICAgJ21lc3NhZ2UtY2lyY2xlJyxcbiAgICAgICAgICAgICAgICAnQ2FsbG91dCBcdTU5MDdcdTZDRTgnLFxuICAgICAgICAgICAgICAgIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU5OTk2XHU1MTQ4XHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1REYyXHU3RUNGXHU1QjU4XHU1NzI4XHU3NkY4XHU1RTk0XHU3Njg0XHU4OUM2XHU1NkZFXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nTGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShDQUxMX09VVF9NRVNTQUdFX1ZJRVcpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nTGVhdmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NURGMlx1NUI1OFx1NTcyOFx1RkYwQ1x1NzZGNFx1NjNBNVx1NkZDMFx1NkQzQlx1N0IyQ1x1NEUwMFx1NEUyQVxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYoZXhpc3RpbmdMZWF2ZXNbMF0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU0RTBEXHU1QjU4XHU1NzI4XHVGRjBDXHU1MjFCXHU1RUZBXHU2NUIwXHU3Njg0XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogQ0FMTF9PVVRfTUVTU0FHRV9WSUVXLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTY2M0VcdTc5M0FcdTYyNDBcdTY3MDkgQ2FsbG91dCBcdTdCMTRcdThCQjBcdTc2ODRcdTRGQTdcdThGQjlcdTY4MEZcdTYzMDlcdTk0QUVcbiAgICAgICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbihcbiAgICAgICAgICAgICAgICAnbGlzdCcsXG4gICAgICAgICAgICAgICAgJ1x1NjYzRVx1NzkzQVx1NjI0MFx1NjcwOSBDYWxsb3V0IFx1N0IxNFx1OEJCMCcsXG4gICAgICAgICAgICAgICAgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0xlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoQ0FMTF9PVVRfTUVTU0FHRV9WSUVXKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxlYWY6IFdvcmtzcGFjZUxlYWY7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdMZWF2ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVhZiA9IGV4aXN0aW5nTGVhdmVzWzBdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxlYWYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IENBTExfT1VUX01FU1NBR0VfVklFVyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAobGVhZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlVmlldyA9IGxlYWYudmlldyBhcyBDYWxsb3V0TWVzc2FnZVZpZXc7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlVmlldy5zd2l0Y2hUb0FsbE1vZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIC8vIFx1NUYwMFx1NTlDQlx1ODlDMlx1NUJERiBET00gXHU1M0Q4XHU1MzE2XG4gICAgICAgICAgICB0aGlzLnN0YXJ0T2JzZXJ2aW5nKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTc5RkJcdTk2NjRcdThGRDlcdTRFMDBcdTg4NENcdUZGMENcdTU2RTBcdTRFM0FcdTVERjJcdTdFQ0ZcdTZERkJcdTUyQTBcdThGQzdcdThCQkVcdTdGNkVcdTY4MDdcdTdCN0VcdTk4NzVcdTRFODZcbiAgICAgICAgLy8gdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBTZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTc2RDFcdTU0MkNcdThCQkVcdTdGNkVcdTUzRDhcdTUzMTZcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uKCdjc3MtY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ2FsbG91dEljb25WaXNpYmlsaXR5KCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU1MjFEXHU1OUNCXHU1MzE2XHU2NUY2XHU2NkY0XHU2NUIwXHU1NkZFXHU2ODA3XHU2NjNFXHU3OTNBXHU3MkI2XHU2MDAxXG4gICAgICAgIHRoaXMudXBkYXRlQ2FsbG91dEljb25WaXNpYmlsaXR5KCk7XG4gICAgfVxuXG4gICAgYXN5bmMgb251bmxvYWQoKSB7XG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NjI0MFx1NjcwOVx1NzZGOFx1NTE3M1x1ODlDNlx1NTZGRVxuICAgICAgICBjb25zdCBsZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKENBTExfT1VUX01FU1NBR0VfVklFVyk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTkwMTBcdTRFMkFcdTUxNzNcdTk1RURcdTg5QzZcdTU2RkVcbiAgICAgICAgZm9yIChjb25zdCBsZWFmIG9mIGxlYXZlcykge1xuICAgICAgICAgICAgYXdhaXQgbGVhZi5kZXRhY2goKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1NTkwNFx1NzQwNiBET00gXHU1M0Q4XHU1MzE2XHU3Njg0XHU2NUIwXHU2NUI5XHU2Q0Q1XG4gICAgcHJpdmF0ZSBoYW5kbGVET01DaGFuZ2VzKG11dGF0aW9uczogTXV0YXRpb25SZWNvcmRbXSkge1xuICAgICAgICBjb25zdCBtYXJrZG93blZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICBpZiAoIW1hcmtkb3duVmlldyB8fCAhbWFya2Rvd25WaWV3LmZpbGUpIHJldHVybjtcblxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTY1ODdcdTRFRjZcdTc2ODQgZnJvbnRtYXR0ZXJcbiAgICAgICAgY29uc3QgZmlsZSA9IG1hcmtkb3duVmlldy5maWxlO1xuICAgICAgICBjb25zdCBjYWNoZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICBjb25zdCBmcm9udG1hdHRlciA9IGNhY2hlPy5mcm9udG1hdHRlcjtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NTE2OFx1NUM0MFx1OEJCRVx1N0Y2RVx1NTQ4QyBmcm9udG1hdHRlciBcdThCQkVcdTdGNkVcbiAgICAgICAgY29uc3QgZ2xvYmFsSWNvbnNFbmFibGVkID0gdGhpcy5zZXR0aW5ncy5zaG93R2xvYmFsSWNvbnM7XG4gICAgICAgIGNvbnN0IGZyb250bWF0dGVyRGlzcGxheSA9IGZyb250bWF0dGVyPy5bJ0NhbGxvdXQgZXh0cmEgbWVzc2FnZSBkaXNwbGF5J107XG4gICAgICAgIFxuICAgICAgICAvLyBcdTY4MzlcdTYzNkVcdTY3NjFcdTRFRjZcdTUxQjNcdTVCOUFcdTY2MkZcdTU0MjZcdTY2M0VcdTc5M0FcdTU2RkVcdTY4MDdcbiAgICAgICAgbGV0IHNob3VsZFNob3dJY29ucyA9IGZhbHNlO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFnbG9iYWxJY29uc0VuYWJsZWQpIHtcbiAgICAgICAgICAgIC8vIFx1NTE2OFx1NUM0MFx1NTZGRVx1NjgwN1x1NTE3M1x1OTVFRFx1NjVGNlx1RkYwQ1x1NTNFQVx1NjcwOVx1NTcyOCBmcm9udG1hdHRlciBcdTY2MEVcdTc4NkVcdThCQkVcdTdGNkUgWWVzIFx1NjVGNlx1NjI0RFx1NjYzRVx1NzkzQVxuICAgICAgICAgICAgc2hvdWxkU2hvd0ljb25zID0gZnJvbnRtYXR0ZXJEaXNwbGF5ID09PSAnWWVzJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFx1NTE2OFx1NUM0MFx1NTZGRVx1NjgwN1x1NUYwMFx1NTQyRlx1NjVGNlx1RkYwQ1x1OTY2NFx1OTc1RSBmcm9udG1hdHRlciBcdTY2MEVcdTc4NkVcdThCQkVcdTdGNkUgTm9cdUZGMENcdTU0MjZcdTUyMTlcdTkwRkRcdTY2M0VcdTc5M0FcbiAgICAgICAgICAgIHNob3VsZFNob3dJY29ucyA9IGZyb250bWF0dGVyRGlzcGxheSAhPT0gJ05vJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NEUwRFx1NUU5NFx1OEJFNVx1NjYzRVx1NzkzQVx1NTZGRVx1NjgwN1x1RkYwQ1x1NTE0OFx1NzlGQlx1OTY2NFx1NjI0MFx1NjcwOVx1NzNCMFx1NjcwOVx1NzY4NFx1NTZGRVx1NjgwN1xuICAgICAgICBpZiAoIXNob3VsZFNob3dJY29ucykge1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdJY29ucyA9IG1hcmtkb3duVmlldy5jb250ZW50RWwucXVlcnlTZWxlY3RvckFsbCgnLmNhbGxvdXQtbWVzc2FnZS1pY29uLWNvbnRhaW5lcicpO1xuICAgICAgICAgICAgZXhpc3RpbmdJY29ucy5mb3JFYWNoKGljb24gPT4gaWNvbi5yZW1vdmUoKSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTU5MDRcdTc0MDYgRE9NIFx1NTNEOFx1NTMxNlx1RkYwQ1x1NkRGQlx1NTJBMFx1NTZGRVx1NjgwN1xuICAgICAgICBmb3IgKGNvbnN0IG11dGF0aW9uIG9mIG11dGF0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgYWRkZWROb2RlcyA9IEFycmF5LmZyb20obXV0YXRpb24uYWRkZWROb2Rlcyk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgYWRkZWROb2Rlcykge1xuICAgICAgICAgICAgICAgIGlmIChub2RlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2FsbG91dHMgPSBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYWxsb3V0Jyk7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxvdXRzLmZvckVhY2goY2FsbG91dCA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbG91dCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50ICYmICFjYWxsb3V0LnF1ZXJ5U2VsZWN0b3IoJy5jYWxsb3V0LW1lc3NhZ2UtaWNvbicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRNZXNzYWdlSWNvblRvQ2FsbG91dChjYWxsb3V0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHU0RkVFXHU2NTM5IGFkZE1lc3NhZ2VJY29uVG9DYWxsb3V0IFx1NjVCOVx1NkNENVxuICAgIHByaXZhdGUgYWRkTWVzc2FnZUljb25Ub0NhbGxvdXQoY2FsbG91dDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1REYyXHU3RUNGXHU1QjU4XHU1NzI4XHU1NkZFXHU2ODA3XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nQ29udGFpbmVyID0gY2FsbG91dC5xdWVyeVNlbGVjdG9yKCcuY2FsbG91dC1tZXNzYWdlLWljb24tY29udGFpbmVyJyk7XG4gICAgICAgIGlmIChleGlzdGluZ0NvbnRhaW5lcikge1xuICAgICAgICAgICAgY29uc3QgY2FsbG91dElkID0gdGhpcy5nZXRDYWxsb3V0SWQoY2FsbG91dCk7XG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlRGF0YSA9IHRoaXMuc2V0dGluZ3MubWVzc2FnZXNbY2FsbG91dElkXTtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VDb3VudCA9IG1lc3NhZ2VEYXRhPy5tZXNzYWdlcz8ubGVuZ3RoIHx8IDA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGNvdW50U3BhbiA9IGV4aXN0aW5nQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5jYWxsb3V0LW1lc3NhZ2UtY291bnQnKTtcbiAgICAgICAgICAgIGlmIChjb3VudFNwYW4pIHtcbiAgICAgICAgICAgICAgICBjb3VudFNwYW4udGV4dENvbnRlbnQgPSBtZXNzYWdlQ291bnQudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGljb25Db250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgaWNvbkNvbnRhaW5lci5jbGFzc05hbWUgPSAnY2FsbG91dC1tZXNzYWdlLWljb24tY29udGFpbmVyJztcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgaWNvbi5jbGFzc05hbWUgPSAnY2FsbG91dC1tZXNzYWdlLWljb24nO1xuICAgICAgICBpY29uLmlubmVySFRNTCA9IHRoaXMuZ2V0SWNvblN2Zyh0aGlzLnNldHRpbmdzLmljb25TZXR0aW5ncy50eXBlKTtcbiAgICAgICAgaWNvbi50aXRsZSA9ICdcdTcwQjlcdTUxRkJcdTZERkJcdTUyQTBcdTYyMTZcdTdGMTZcdThGOTFcdTZEODhcdTYwNkYnO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU2ODM3XHU1RjBGXG4gICAgICAgIGNhbGxvdXQuc3R5bGUuc2V0UHJvcGVydHkoJy0taWNvbi1zaXplJywgYCR7dGhpcy5zZXR0aW5ncy5pY29uU2V0dGluZ3Muc2l6ZX1weGApO1xuICAgICAgICBjYWxsb3V0LnN0eWxlLnNldFByb3BlcnR5KCctLWljb24tdG9wLXBvc2l0aW9uJywgYCR7dGhpcy5zZXR0aW5ncy5pY29uU2V0dGluZ3MucG9zaXRpb24udG9wfXB4YCk7XG4gICAgICAgIGNhbGxvdXQuc3R5bGUuc2V0UHJvcGVydHkoJy0taWNvbi1yaWdodC1wb3NpdGlvbicsIGAke3RoaXMuc2V0dGluZ3MuaWNvblNldHRpbmdzLnBvc2l0aW9uLnJpZ2h0fXB4YCk7XG4gICAgICAgIFxuICAgICAgICBpY29uLnN0eWxlLndpZHRoID0gYCR7dGhpcy5zZXR0aW5ncy5pY29uU2V0dGluZ3Muc2l6ZX1weGA7XG4gICAgICAgIGljb24uc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5zZXR0aW5ncy5pY29uU2V0dGluZ3Muc2l6ZX1weGA7XG4gICAgICAgIGljb25Db250YWluZXIuc3R5bGUudG9wID0gYCR7dGhpcy5zZXR0aW5ncy5pY29uU2V0dGluZ3MucG9zaXRpb24udG9wfXB4YDtcbiAgICAgICAgaWNvbkNvbnRhaW5lci5zdHlsZS5yaWdodCA9IGAke3RoaXMuc2V0dGluZ3MuaWNvblNldHRpbmdzLnBvc2l0aW9uLnJpZ2h0fXB4YDtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTZGRVx1NjgwN1x1NzY4NFx1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNiAtIFx1NjYzRVx1NzkzQVx1OEY5M1x1NTE2NVx1Njg0NlxuICAgICAgICBpY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICghKGF3YWl0IHRoaXMuY2hlY2tBY3RpdmF0aW9uKCkpKSByZXR1cm47XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGNhbGxvdXRJZCA9IHRoaXMuZ2V0Q2FsbG91dElkKGNhbGxvdXQpO1xuICAgICAgICAgICAgdGhpcy5zaG93TWVzc2FnZUlucHV0KGNhbGxvdXQpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGljb25Db250YWluZXIuYXBwZW5kQ2hpbGQoaWNvbik7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTZEODhcdTYwNkZcdTY1NzBcdTkxQ0ZcdTY2M0VcdTc5M0FcbiAgICAgICAgY29uc3QgY2FsbG91dElkID0gdGhpcy5nZXRDYWxsb3V0SWQoY2FsbG91dCk7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VEYXRhID0gdGhpcy5zZXR0aW5ncy5tZXNzYWdlc1tjYWxsb3V0SWRdO1xuICAgICAgICBjb25zdCBtZXNzYWdlQ291bnQgPSBtZXNzYWdlRGF0YT8ubWVzc2FnZXM/Lmxlbmd0aCB8fCAwO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgY291bnRTcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBjb3VudFNwYW4uY2xhc3NOYW1lID0gJ2NhbGxvdXQtbWVzc2FnZS1jb3VudCc7XG4gICAgICAgIGNvdW50U3Bhbi50ZXh0Q29udGVudCA9IG1lc3NhZ2VDb3VudC50b1N0cmluZygpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2NTcwXHU1QjU3XHU3Njg0XHU3MEI5XHU1MUZCXHU0RThCXHU0RUY2IC0gXHU2NjNFXHU3OTNBXHU0RkE3XHU4RkI5XHU2ODBGXG4gICAgICAgIGNvdW50U3Bhbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmNoZWNrQWN0aXZhdGlvbigpKSkgcmV0dXJuO1xuXG4gICAgICAgICAgICBjb25zdCBjYWxsb3V0SWQgPSB0aGlzLmdldENhbGxvdXRJZChjYWxsb3V0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU2MjE2XHU1MjFCXHU1RUZBXHU2RDg4XHU2MDZGXHU4OUM2XHU1NkZFXG4gICAgICAgICAgICBsZXQgbWVzc2FnZVZpZXc6IENhbGxvdXRNZXNzYWdlVmlldyB8IG51bGwgPSBudWxsO1xuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdMZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKENBTExfT1VUX01FU1NBR0VfVklFVyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0xlYXZlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGVhZiA9IGV4aXN0aW5nTGVhdmVzWzBdO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VWaWV3ID0gbGVhZi52aWV3IGFzIENhbGxvdXRNZXNzYWdlVmlldztcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZVZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZVZpZXcuc3dpdGNoVG9TaW5nbGVNb2RlKGNhbGxvdXRJZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBDQUxMX09VVF9NRVNTQUdFX1ZJRVcsXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlVmlldyA9IGxlYWYudmlldyBhcyBDYWxsb3V0TWVzc2FnZVZpZXc7XG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VWaWV3LnN3aXRjaFRvU2luZ2xlTW9kZShjYWxsb3V0SWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpY29uQ29udGFpbmVyLmFwcGVuZENoaWxkKGNvdW50U3Bhbik7XG4gICAgICAgIGNhbGxvdXQuYXBwZW5kQ2hpbGQoaWNvbkNvbnRhaW5lcik7XG4gICAgICAgIGNhbGxvdXQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgIH1cblxuICAgIC8vIFx1NEZFRVx1NjUzOSB1cGRhdGVDYWxsb3V0TWVzc2FnZUNvdW50IFx1NjVCOVx1NkNENVxuICAgIHB1YmxpYyB1cGRhdGVDYWxsb3V0TWVzc2FnZUNvdW50KGNhbGxvdXQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGNhbGxvdXRJZCA9IHRoaXMuZ2V0Q2FsbG91dElkKGNhbGxvdXQpO1xuICAgICAgICBjb25zdCBtZXNzYWdlRGF0YSA9IHRoaXMuc2V0dGluZ3MubWVzc2FnZXNbY2FsbG91dElkXTtcbiAgICAgICAgY29uc3QgbWVzc2FnZUNvdW50ID0gbWVzc2FnZURhdGE/Lm1lc3NhZ2VzPy5sZW5ndGggfHwgMDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGNhbGxvdXQucXVlcnlTZWxlY3RvcignLmNhbGxvdXQtbWVzc2FnZS1pY29uLWNvbnRhaW5lcicpO1xuICAgICAgICBpZiAoY29udGFpbmVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNvdW50U3BhbiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuY2FsbG91dC1tZXNzYWdlLWNvdW50Jyk7XG4gICAgICAgICAgICBpZiAoY291bnRTcGFuKSB7XG4gICAgICAgICAgICAgICAgY291bnRTcGFuLnRleHRDb250ZW50ID0gbWVzc2FnZUNvdW50LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdTVGMzlcdTY4NDZcdTY2M0VcdTc5M0FcdThGOTNcdTUxNjVcdTVCQjlcbiAgICBwcml2YXRlIGFzeW5jIHNob3dNZXNzYWdlSW5wdXQoY2FsbG91dDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgaWYgKCEoYXdhaXQgdGhpcy5jaGVja0FjdGl2YXRpb24oKSkpIHJldHVybjtcbiAgICAgICAgY29uc3QgY2FsbG91dElkID0gdGhpcy5nZXRDYWxsb3V0SWQoY2FsbG91dCk7XG4gICAgICAgIGNvbnN0IHNhdmVkTWVzc2FnZSA9IHRoaXMuc2V0dGluZ3MubWVzc2FnZXNbY2FsbG91dElkXSB8fCAnJzsgXG4gICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IE1lc3NhZ2VJbnB1dE1vZGFsKHRoaXMuYXBwLCB0aGlzLCBjYWxsb3V0SWQpO1xuICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgfVxuXG4gICAgLy8gXHU4M0I3XHU1M0Q2IGNhbGxvdXQgXHU3Njg0IElEXHVGRjBDXHU3NTI4XHU0RThFXHU0RkREXHU1QjU4XHU2RDg4XHU2MDZGXG4gICAgcHJpdmF0ZSBnZXRDYWxsb3V0SWQoY2FsbG91dDogSFRNTEVsZW1lbnQpOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBmb290bm90ZSA9IGNhbGxvdXQucXVlcnlTZWxlY3Rvcignc3BhbicpPy5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2FsbG91dC1pZCcpO1xuICAgICAgICBpZiAoZm9vdG5vdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmb290bm90ZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY29uc3QgcmFuZG9tU3RyID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDgpO1xuICAgICAgICBjb25zdCBuZXdJZCA9IGBjYWxsb3V0LSR7dGltZXN0YW1wfS0ke3JhbmRvbVN0cn1gO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3BhbiA9IGNhbGxvdXQucXVlcnlTZWxlY3Rvcignc3BhbicpO1xuICAgICAgICBpZiAoc3Bhbikge1xuICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGUoJ2RhdGEtY2FsbG91dC1pZCcsIG5ld0lkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3SWQ7XG4gICAgfVxuXG4gICAgLy8gXHU1MkEwXHU4RjdEXHU2M0QyXHU0RUY2XHU4QkJFXG4gICAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xuICAgICAgICBjb25zdCBzYXZlZERhdGEgPSBhd2FpdCB0aGlzLmxvYWREYXRhKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTRGRERcdTVCNThcdTc2ODRcdTY1NzBcdTYzNkVcdUZGMENcdThCRjRcdUZGRkRcdUZGRkRcdUZGRkRcdTY2MkZcdTUxNjhcdTY1QjBcdTVCODlcdTg4QzVcdTYyMTZcdTVCOENcdTUxNjhcdTUzNzhcdThGN0RcdTU0MEVcdTkxQ0RcdTg4QzVcbiAgICAgICAgaWYgKCFzYXZlZERhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTKTtcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MuX2xhc3RJbnN0YWxsVGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmhhc1VzZWRUcmlhbCA9IGZhbHNlOyAgLy8gXHU5MUNEXHU3RjZFXHU4QkQ1XHU3NTI4XHU3MkI2XHU2MDAxXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLnRyaWFsRW5kVGltZSA9IG51bGw7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY4QzBcdTZENEJcdTUyMzBcdTYzRDJcdTk5OTZcdTZCMjFcdTVCODlcdTg4QzVcdTYyMTZcdTkxQ0RcdTY1QjBcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdTg4QzVcdUZGMENcdTVERjJcdTU0MkZcdTc1MjhcdThCRDVcdUZGRkRcdUZGRkRcdUZGRkRcdUZGRkRcdTUyOUZcdUZGRkRcdUZGRkQnKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTY3MDlcdTRGRERcdTVCNThcdTc2ODRcdTY1NzBcdTYzNkVcdUZGMENcdTc2RjRcdTYzQTVcdTRGN0ZcdTc1MjhcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIHNhdmVkRGF0YSk7XG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG4gICAgfVxuXG4gICAgLy8gXHU1QjU4XHU2M0QyXHU0RUY2XHU4QkJFXHU3RjZFXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuICAgIH1cblxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NEZBN1x1OEZCOVx1NjgwRlx1NTZGRVx1NjgwN1xuICAgIGFkZFNpZGViYXJJY29uKCkge1xuICAgICAgICBjb25zdCBzaWRlYmFySWNvbkVsID0gdGhpcy5hZGRSaWJib25JY29uKFxuICAgICAgICAgICAgJ21lc3NhZ2UtY2lyY2xlJywgIC8vIFx1NEY3Rlx1NzUyOFx1NEUwMFx1ODFGNFx1NjgwN1xuICAgICAgICAgICAgJ09wZW4gQ2FsbG91dCBFeHRyYSBNZXNzYWdlJyxcbiAgICAgICAgICAgICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2YXRlVmlldygpO1xuICAgICAgICAgICAgfVxuICAgICAgICApO1xuICAgICAgICBzaWRlYmFySWNvbkVsLmFkZENsYXNzKCdjYWxsb3V0LXNpZGViYXItaWNvbicpO1xuICAgIH1cblxuICAgIC8vIFx1NkZDMFx1NkQzQlx1ODFFQVx1NUI5QVx1NEU0OVx1ODlDNlx1NTZGRVxuICAgIGFzeW5jIGFjdGl2YXRlVmlldygpIHtcbiAgICAgICAgLy8gXHU1MTQ4XHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1REYyXHU3RUNGXHU1QjU4XHU1NzI4XHU4OUM2XHU1NkZFXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nTGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShDQUxMX09VVF9NRVNTQUdFX1ZJRVcpO1xuICAgICAgICBsZXQgbGVhZjogV29ya3NwYWNlTGVhZjtcblxuICAgICAgICBpZiAoZXhpc3RpbmdMZWF2ZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU1REYyXHU1QjU4XHU1NzI4XHU4OUM2XHU1NkZFXHVGRjBDXHU3NkY0XHU2M0E1XHU0RjdGXHU3NTI4XHU3QjJDXHU0RTAwXHU0RTJBXG4gICAgICAgICAgICBsZWFmID0gZXhpc3RpbmdMZWF2ZXNbMF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU0RTBEXHU1QjU4XHU1NzI4XHVGRjBDXHU1NzI4XHU1M0YzXHU0RkE3XHU1MjFCXHU1RUZBXHU2NUIwXHU4OUM2XHU1NkZFXG4gICAgICAgICAgICAvLyBcdTc4NkVcdTRGRERcdTUzRjNcdTRGQTdcdThGQjlcdTY4MEZcdTVCNThcdTU3MjhcbiAgICAgICAgICAgIGlmICghdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTRGQTdcdThGQjlcdTY4MEZcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0U3BsaXQgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHJpZ2h0U3BsaXQpIHtcbiAgICAgICAgICAgICAgICBsZWFmID0gcmlnaHRTcGxpdDtcbiAgICAgICAgICAgICAgICAvLyBcdThCQkVcdTdGNkVcdTg5QzZcdTU2RkVcdTdDN0JcdTU3OEJcbiAgICAgICAgICAgICAgICBhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IENBTExfT1VUX01FU1NBR0VfVklFVyxcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY1RTBcdTZDRDVcdTUyMUJcdTVFRkFcdTg5QzZcdTU2RkUnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdThCQkVcdTdGNkVcdTg5QzZcdTU2RkVcdTY4MDdcdTk4OThcdTU0OENcdTU2RkVcdTY4MDdcbiAgICAgICAgaWYgKGxlYWYudmlldyBpbnN0YW5jZW9mIENhbGxvdXRNZXNzYWdlVmlldykge1xuICAgICAgICAgICAgbGVhZi52aWV3LmdldEljb24gPSAoKSA9PiAnbWVzc2FnZS1jaXJjbGUnO1xuICAgICAgICAgICAgbGVhZi52aWV3LmdldERpc3BsYXlUZXh0ID0gKCkgPT4gJ0NhbGxvdXQgXHU1OTA3XHU2Q0U4JztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1NkZDMFx1NkQzQlx1NUU3Nlx1NjYzRVx1NzkzQVx1ODlDNlx1NTZGRVxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xuXG4gICAgICAgIC8vIFx1N0FDQlx1NTM3M1x1NjYzRVx1NzkzQVx1NUY1M1x1NTI0RFx1NjU4N1x1Njg2M1x1NzY4NCBDYWxsb3V0IFx1NkQ4OFx1NjA2RlxuICAgICAgICAgICAgICAgIGlmIChsZWFmLnZpZXcgaW5zdGFuY2VvZiBDYWxsb3V0TWVzc2FnZVZpZXcpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVhZi52aWV3LmRpc3BsYXlNZXNzYWdlcygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgIC8vIFx1NkNFOFx1NTE4QyBUcmFuc2Zvcm0gdG8gQ2FsbG91dCBcdTU0N0RcdTRFRTRcbiAgICBhc3luYyB0cmFuc2Zvcm1Ub0NhbGxvdXQoZWRpdG9yOiBFZGl0b3IsIGNhbGxvdXRJbmRleDogbnVtYmVyID0gMCkge1xuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmNoZWNrQWN0aXZhdGlvbigpKSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgICAgIGlmICghc2VsZWN0aW9uKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdThCRjdcdTUxNDhcdTkwMDlcdTYyRTlcdTg5ODFcdThGNkNcdTYzNjJcdTc2ODRcdTY1ODdcdTY3MkMnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1RkZGRFx1RkZGRFx1NTI0RFx1NTczQVx1NjY2Rlx1NzY4NCBjYWxsb3V0c1xuICAgICAgICBjb25zdCBjdXJyZW50U2NlbmUgPSB0aGlzLnNldHRpbmdzLnNjZW5lcy5maW5kKFxuICAgICAgICAgICAgc2NlbmUgPT4gc2NlbmUuaWQgPT09IHRoaXMuc2V0dGluZ3MuY3VycmVudFNjZW5lSWRcbiAgICAgICAgKTtcbiAgICAgICAgXG4gICAgICAgIGlmICghY3VycmVudFNjZW5lIHx8ICFjdXJyZW50U2NlbmUuY2FsbG91dHNbY2FsbG91dEluZGV4XSkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2NzJBXHU2MjdFXHU1MjMwXHU1QkY5XHU1RTk0XHU3Njg0IENhbGxvdXQgXHU5MTREXHU3RjZFJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjYWxsb3V0ID0gY3VycmVudFNjZW5lLmNhbGxvdXRzW2NhbGxvdXRJbmRleF07XG4gICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgICAgIGNvbnN0IHJhbmRvbVN0ciA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA2KTtcbiAgICAgICAgY29uc3QgY2FsbG91dElkID0gYGNhbGxvdXQtJHt0aW1lc3RhbXB9LSR7cmFuZG9tU3RyfWA7XG5cbiAgICAgICAgLy8gXHU1MTQ4XHU1QzA2XHU5MDA5XHU0RTJEXHU3Njg0XHU2NTg3XHU2NzJDXHU2NkZGXHU2MzYyXHU0RTNBXHU1RTI2XHU5ODlDXHU4MjcyXHU3Njg0XHU2NTg3XHU2NzJDXG4gICAgICAgIGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKGA8Zm9udCBjb2xvcj1cIiR7Y2FsbG91dC50ZXh0Q29sb3J9XCI+JHtzZWxlY3Rpb259PC9mb250PmApO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU2NUIwXHU3Njg0XHU5MDA5XHU0RTJEXHU2NTg3XHU2NzJDXHVGRjA4XHU3M0IwXHU1NzI4XHU1MzA1XHU1NDJCXHU0RTg2XHU5ODlDXHU4MjcyXHU2ODA3XHU3QjdFXHVGRjA5XG4gICAgICAgIGNvbnN0IGNvbG9yZWRUZXh0ID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU1MThEXHU1QzA2XHU1RTI2XHU5ODlDXHU4MjcyXHU3Njg0XHU2NTg3XHU2NzJDXHU4RjZDXHU2MzYyIENhbGxvdXRcbiAgICAgICAgY29uc3QgZm9ybWF0dGVkVGV4dCA9IGA+IFshJHtjYWxsb3V0LnR5cGV9XSAqKjxmb250IGNvbG9yPVwiJHtjYWxsb3V0LmNvbG9yfVwiPiR7Y2FsbG91dC5uYW1lfTwvZm9udD4qKlxcbj4gPHNwYW4gc3R5bGU9XCJiYWNrZ3JvdW5kOiR7Y2FsbG91dC5jb2xvcn1cIiBkYXRhLWNhbGxvdXQtaWQ9XCIke2NhbGxvdXRJZH1cIj48Zm9udCBjb2xvcj1cIiR7Y2FsbG91dC50ZXh0Q29sb3J9XCI+JHtjb2xvcmVkVGV4dH08L2ZvbnQ+PC9zcGFuPlxcblxcbmA7XG4gICAgICAgIFxuICAgICAgICBlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihmb3JtYXR0ZWRUZXh0KTtcbiAgICAgICAgbmV3IE5vdGljZShgXHU2NTg3XHU2NzJDXHU1REYyXHU4RjZDXHU2MzYyXHU0RTNBICR7Y2FsbG91dC5uYW1lfSBcdTY4M0NcdUZGMDFgKTtcbiAgICB9XG5cbiAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTdGMTZcdThGOTFcdTU2NjhcdTVCOUVcdUZGRkRcdUZGRkRcbiAgICBnZXRFZGl0b3IoKSB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICBpZiAoIWFjdGl2ZVZpZXcpIHJldHVybiBudWxsO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU0RkVFXHU1OTBEIHNvdXJjZU1vZGUgXHU0RTBEXHU1QjU4XHU1NzI4XHU3Njg0XHU5ODk4XG4gICAgICAgIGNvbnN0IGVkaXRvciA9IGFjdGl2ZVZpZXcuZWRpdG9yO1xuICAgICAgICByZXR1cm4gZWRpdG9yO1xuICAgIH1cblxuICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1OTAwOVx1NEUyRFx1NjcyQ1xuICAgIGdldFNlbGVjdGVkVGV4dChlZGl0b3I6IEVkaXRvcik6IHN0cmluZyB7XG4gICAgICAgIGlmICghZWRpdG9yLmdldFNlbGVjdGlvbigpKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdExpbmVVbmRlckN1cnNvcihlZGl0b3IpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlZGl0b3IuZ2V0U2VsZWN0aW9uKCk7XG4gICAgfVxuXG4gICAgLy8gXHU1OTgyXHU2NzlDXHU2Q0ExXHU2NzA5XHU2NzJDXHU5MDA5XHU0RTJEXHVGRjBDXHU1MjE5XHU5MDA5XHU2MkU5XHU1MTQ5XHU2ODA3XHU2MjQwXHU1NzI4XHU4ODRDXG4gICAgc2VsZWN0TGluZVVuZGVyQ3Vyc29yKGVkaXRvcjogRWRpdG9yKSB7XG4gICAgICAgIGNvbnN0IGN1cnNvciA9IGVkaXRvci5nZXRDdXJzb3IoKTtcbiAgICAgICAgY29uc3QgbGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcbiAgICAgICAgZWRpdG9yLnNldFNlbGVjdGlvbihcbiAgICAgICAgICAgIHsgbGluZTogY3Vyc29yLmxpbmUsIGNoOiAwIH0sXG4gICAgICAgICAgICB7IGxpbmU6IGN1cnNvci5saW5lLCBjaDogbGluZS5sZW5ndGggfVxuICAgICAgICApO1xuICAgIH1cblxuICAgIC8vIFx1ODlDMlx1NUJERiBET00gXHU1M0Q4XG4gICAgcHJpdmF0ZSBhc3luYyBzdGFydE9ic2VydmluZygpIHtcbiAgICAgICAgLy8gXHU2NUFEXHU1RjAwXHU0RTRCXHU1MjREXHU3Njg0XHU4OUMyXHU1QkRGXHU1NjY4XG4gICAgICAgIHRoaXMubWVzc2FnZUljb25PYnNlcnZlcj8uZGlzY29ubmVjdCgpO1xuXG4gICAgICAgIC8vIFx1NjhDMFx1NjdFNVx1NjYyRlx1NTQyNlx1NjcwOVx1Njc0M1x1OTY1MFx1NEY3Rlx1NzUyOFx1NjNEMlx1NEVGNlxuICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmNoZWNrQWN0aXZhdGlvbigpKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWFya2Rvd25WaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICAgICAgaWYgKCFtYXJrZG93blZpZXcgfHwgIW1hcmtkb3duVmlldy5maWxlKSByZXR1cm47XG5cbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU0RUY2XHU3Njg0IGZyb250bWF0dGVyXG4gICAgICAgIGNvbnN0IGZpbGUgPSBtYXJrZG93blZpZXcuZmlsZTtcbiAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgY29uc3QgZnJvbnRtYXR0ZXIgPSBjYWNoZT8uZnJvbnRtYXR0ZXI7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTY4QzBcdTY3RTVcdTUxNjhcdTVDNDBcdThCQkVcdTdGNkVcdTU0OEMgZnJvbnRtYXR0ZXIgXHU4QkJFXHU3RjZFXG4gICAgICAgIGNvbnN0IGdsb2JhbEljb25zRW5hYmxlZCA9IHRoaXMuc2V0dGluZ3Muc2hvd0dsb2JhbEljb25zO1xuICAgICAgICBjb25zdCBmcm9udG1hdHRlckRpc3BsYXkgPSBmcm9udG1hdHRlcj8uWydDYWxsb3V0IGV4dHJhIG1lc3NhZ2UgZGlzcGxheSddO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2MzZFXHU2NzYxXHU0RUY2XHU1MUIzXHU1QjlBXHU2NjJGXHU1NDI2XHU2NjNFXHU3OTNBXHU1NkZFXHU2ODA3XG4gICAgICAgIGxldCBzaG91bGRTaG93SWNvbnMgPSBmYWxzZTtcbiAgICAgICAgXG4gICAgICAgIGlmICghZ2xvYmFsSWNvbnNFbmFibGVkKSB7XG4gICAgICAgICAgICAvLyBcdTUxNjhcdTVDNDBcdTU2RkVcdTY4MDdcdTUxNzNcdTk1RURcdTY1RjZcdUZGMENcdTUzRUFcdTY3MDlcdTU3MjggZnJvbnRtYXR0ZXIgXHU2NjBFXHU3ODZFXHU4QkJFXHU3RjZFIFllcyBcdTY1RjZcdTYyNERcdTY2M0VcdTc5M0FcbiAgICAgICAgICAgIHNob3VsZFNob3dJY29ucyA9IGZyb250bWF0dGVyRGlzcGxheSA9PT0gJ1llcyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBcdTUxNjhcdTVDNDBcdTU2RkVcdTY4MDdcdTVGMDBcdTU0MkZcdTY1RjZcdUZGMENcdTk2NjRcdTk3NUUgZnJvbnRtYXR0ZXIgXHU2NjBFXHU3ODZFXHU4QkJFXHU3RjZFIE5vXHVGRjBDXHU1NDI2XHU1MjE5XHU5MEZEXHU2NjNFXHU3OTNBXG4gICAgICAgICAgICBzaG91bGRTaG93SWNvbnMgPSBmcm9udG1hdHRlckRpc3BsYXkgIT09ICdObyc7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb250ZW50RWwgPSBtYXJrZG93blZpZXcuY29udGVudEVsO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU0RTBEXHU1RTk0XHU4QkU1XHU2NjNFXHU3OTNBXHU1NkZFXHU2ODA3XHVGRjBDXHU3OUZCXHU5NjY0XHU2MjQwXHU2NzA5XHU3M0IwXHU2NzA5XHU3Njg0XHU1NkZFXHU2ODA3XG4gICAgICAgIGlmICghc2hvdWxkU2hvd0ljb25zKSB7XG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0ljb25zID0gY29udGVudEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYWxsb3V0LW1lc3NhZ2UtaWNvbi1jb250YWluZXInKTtcbiAgICAgICAgICAgIGV4aXN0aW5nSWNvbnMuZm9yRWFjaChpY29uID0+IGljb24ucmVtb3ZlKCkpO1xuICAgICAgICAgICAgcmV0dXJuOyAgLy8gXHU0RTBEXHU1NDJGXHU1MkE4XHU4OUMyXHU1QkRGXHU1NjY4XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTVFOTRcdThCRTVcdTY2M0VcdTc5M0FcdTU2RkVcdTY4MDdcdUZGMENcdTUyMTlcdTZCNjNcdTVFMzhcdTg5QzJcdTVCREZcdTU0OENcdTZERkJcdTUyQTBcdTU2RkVcdTY4MDdcbiAgICAgICAgdGhpcy5tZXNzYWdlSWNvbk9ic2VydmVyLm9ic2VydmUoY29udGVudEVsLCB7XG4gICAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICAgICAgICBzdWJ0cmVlOiB0cnVlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1RkZGRFx1RkZGRFx1RkZGRFx1RkZGRFx1NTMxNlx1NzNCMFx1NjcwOVx1RkZGRFx1RkZGRCBjYWxsb3V0c1xuICAgICAgICBjb25zdCBjYWxsb3V0cyA9IGNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FsbG91dCcpO1xuICAgICAgICBjYWxsb3V0cy5mb3JFYWNoKGNhbGxvdXQgPT4ge1xuICAgICAgICAgICAgaWYgKGNhbGxvdXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkTWVzc2FnZUljb25Ub0NhbGxvdXQoY2FsbG91dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NEUwMFx1NEUyQVx1NjVCMFx1NjVCOVx1NkNENVx1Njc2NVx1NjZGNFx1NjVCMFx1NjI0MFx1NjcwOVx1NjI1M1x1NUYwMFx1NzY4NFx1N0IxNFx1OEJCMFxuICAgIHByaXZhdGUgdXBkYXRlQWxsT3Blbk5vdGVzKCkge1xuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTYyNDBcdTY3MDlcdTYyNTNcdTVGMDBcdTc2ODRcdTdCMTRcdThCQjBcdTg5QzZcdTU2RkVcbiAgICAgICAgY29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnbWFya2Rvd24nKTtcbiAgICAgICAgbGVhdmVzLmZvckVhY2gobGVhZiA9PiB7XG4gICAgICAgICAgICBjb25zdCB2aWV3ID0gbGVhZi52aWV3O1xuICAgICAgICAgICAgaWYgKHZpZXcgaW5zdGFuY2VvZiBNYXJrZG93blZpZXcpIHtcbiAgICAgICAgICAgICAgICAvLyBcdTVCRjlcdTZCQ0ZcdTRFMkFcdTg5QzZcdTU2RkVcdTkxQ0RcdUZGRkRcdUZGRkRcdUZGRkRcdThGRDBcdTg4NEMgc3RhcnRPYnNlcnZpbmdcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0T2JzZXJ2aW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgcmVnaXN0ZXJDb250ZXh0TWVudSgpIHtcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uKCdlZGl0b3ItbWVudScsIChtZW51OiBNZW51LCBlZGl0b3I6IEVkaXRvcikgPT4ge1xuICAgICAgICAgICAgICAgIG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnNldFRpdGxlKCdcdTYyMTFcdTc2ODRcdTdCMTRcdThCQjBcdTdDN0JcdTU3OEInKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldEljb24oJ3F1b3RlLWdseXBoJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRTZWN0aW9uKCdhLW15LW5vdGVzJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIShhd2FpdCB0aGlzLmNoZWNrQWN0aXZhdGlvbigpKSkgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IENhbGxvdXRTZWxlY3Rpb25Nb2RhbCh0aGlzLmFwcCwgdGhpcywgZWRpdG9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIG1lbnUuYWRkU2VwYXJhdG9yKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGFzeW5jIHZhbGlkYXRlTGljZW5zZShrZXk6IHN0cmluZyk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgICAgICAvLyBcdTVCOUFcdTRFNDlcdTY3MDlcdTY1NDhcdTc2ODRcdTZGQzBcdTZEM0JcdTc4MDFcbiAgICAgICAgY29uc3QgdmFsaWRMaWNlbnNlS2V5ID0gJ0w5WjMtS0oyVi1QNEE2LVFUMVktTTVCMC1SOE43LURYM1ctSDZVOS1GQzBNLVYyRzEnO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU4RjkzXHU1MTY1XHU0RTJEXHU2MjQwXHU2NzA5XHU3QTdBXHU2ODNDXHU1NDhDXHU4RkRFXHU1QjU3XHU3QjI2XG4gICAgICAgIGNvbnN0IGNsZWFuSW5wdXQgPSBrZXkucmVwbGFjZSgvW1xccy1dL2csICcnKTtcbiAgICAgICAgY29uc3QgY2xlYW5WYWxpZCA9IHZhbGlkTGljZW5zZUtleS5yZXBsYWNlKC9bXFxzLV0vZywgJycpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIGNsZWFuSW5wdXQgPT09IGNsZWFuVmFsaWQ7XG4gICAgfVxuXG4gICAgLy8gXHU0RkVFXHVGRkZEXHVGRkZEXHVGRkZEXHVGRkZEXHVGRkZEXHU2M0QyXHU0RUY2XHU1MjlGXHU4MEZEXHU2NUI5XHU2Q0Q1XHVGRjBDXHU2REZCXHU1MkEwXHU2Mzg4XHU2NzQzXHU2OEMwXHU2N0U1XG4gICAgcHVibGljIGFzeW5jIGNoZWNrQWN0aXZhdGlvbigpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAgICAgLy8gXHU1MTQ4XHU2OEMwXHU2N0U1XHU2NjJGXHU1NDI2XHU1REYyXHU2RkMwXHU2RDNCXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmxpY2Vuc2VLZXkgJiYgKGF3YWl0IHRoaXMudmFsaWRhdGVMaWNlbnNlKHRoaXMuc2V0dGluZ3MubGljZW5zZUtleSkpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gXHU2OEMwXHU2N0U1XHU4QkQ1XHU3NTI4XHU3MkI2XHU2MDAxXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnRyaWFsRW5kVGltZSkge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGlmIChub3cgPCB0aGlzLnNldHRpbmdzLnRyaWFsRW5kVGltZSkge1xuICAgICAgICAgICAgICAgIC8vIFx1NTcyOFx1OEJENVx1NzUyOFx1NjcxRlx1NTE4NVxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBcdThCRDVcdTc1MjhcdTY3MUZcdTVERjJcdThGQzdcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLnRyaWFsRW5kVGltZSA9IG51bGw7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVQbHVnaW5GZWF0dXJlcygpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlTWVzc2FnZUNvdW50KGNhbGxvdXQ6IEhUTUxFbGVtZW50LCBjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IGNhbGxvdXRJZCA9IHRoaXMuZ2V0Q2FsbG91dElkKGNhbGxvdXQpO1xuICAgICAgICBjb25zdCBtZXNzYWdlRGF0YSA9IHRoaXMuc2V0dGluZ3MubWVzc2FnZXNbY2FsbG91dElkXTtcbiAgICAgICAgY29uc3QgbWVzc2FnZUNvdW50ID0gbWVzc2FnZURhdGE/Lm1lc3NhZ2VzPy5sZW5ndGggfHwgMDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGNvdW50U3BhbiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuY2FsbG91dC1tZXNzYWdlLWNvdW50Jyk7XG4gICAgICAgIGlmIChjb3VudFNwYW4pIHtcbiAgICAgICAgICAgIGNvdW50U3Bhbi50ZXh0Q29udGVudCA9IG1lc3NhZ2VDb3VudC50b1N0cmluZygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHU1NzI4IENhbGxvdXRNZXNzYWdlUGx1Z2luIFx1N0M3Qlx1NEUyRFx1NkRGQlx1NTJBMFx1Nzk4MVx1NzUyOFx1NTI5Rlx1ODBGRFx1NzY4NFx1NjVCOVx1NkNENVxuICAgIHByaXZhdGUgZGlzYWJsZVBsdWdpbkZlYXR1cmVzKCkge1xuICAgICAgICAvLyBcdTY1QURcdTVGMDAgRE9NIFx1ODlDMlx1NUJERlx1NTY2OFxuICAgICAgICB0aGlzLm1lc3NhZ2VJY29uT2JzZXJ2ZXI/LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NzlGQlx1OTY2NFx1NjI0MFx1NjcwOVx1NkQ4OFx1NjA2Rlx1NTZGRVx1NjgwN1xuICAgICAgICBjb25zdCBtYXJrZG93blZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICBpZiAobWFya2Rvd25WaWV3KSB7XG4gICAgICAgICAgICBjb25zdCBpY29ucyA9IG1hcmtkb3duVmlldy5jb250ZW50RWwucXVlcnlTZWxlY3RvckFsbCgnLmNhbGxvdXQtbWVzc2FnZS1pY29uLWNvbnRhaW5lcicpO1xuICAgICAgICAgICAgaWNvbnMuZm9yRWFjaChpY29uID0+IGljb24ucmVtb3ZlKCkpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBcdTc5RkJcdTk2NjRcdTRGQTdcdThGQjlcdTY4MEZcdTg5QzZcdTU2RkVcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZShDQUxMX09VVF9NRVNTQUdFX1ZJRVcpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU1M0YzXHU5NTJFXHU4M0RDXHU1MzU1XG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS50cmlnZ2VyKCdlZGl0b3ItbWVudScpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2RTA1XHU5NjY0XHU1NDdEXHU0RUU0IC0gXHU0RkVFXHU2NTM5XHU4RkQ5XHU5MUNDXG4gICAgICAgIGNvbnN0IGNvbW1hbmRJZCA9ICd0cmFuc2Zvcm0tdG8tY2FsbG91dCc7XG4gICAgICAgIGlmICh0aGlzLmFwcC5jb21tYW5kcy5jb21tYW5kc1tjb21tYW5kSWRdKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5hcHAuY29tbWFuZHMuY29tbWFuZHNbY29tbWFuZElkXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBnZXRJY29uU3ZnKHR5cGU6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IGljb25zOiBSZWNvcmQ8bnVtYmVyLCBzdHJpbmc+ID0ge1xuICAgICAgICAgICAgMTogJzxzdmcgdD1cIjE3MzMzMDQ4ODg5MTBcIiBjbGFzcz1cImljb25cIiB2aWV3Qm94PVwiMCAwIDEwMjQgMTAyNFwiIHZlcnNpb249XCIxLjFcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgcC1pZD1cIjI4MjlcIiB3aWR0aD1cIjIwMFwiIGhlaWdodD1cIjIwMFwiPjxwYXRoIGQ9XCJNNTA3LjI5Nzk1OSA4NjIuMDQwODE2Yy01Mi4yNDQ4OTggMC0xMDIuOTIyNDQ5LTkuNDA0MDgyLTE1MS41MTAyMDQtMjcuNjg5Nzk2bC0xMTYuNTA2MTIyIDI1LjZjLTI0LjAzMjY1MyA1LjIyNDQ5LTQ2LjQ5Nzk1OSAwLTYwLjYwNDA4Mi0xNC42Mjg1NzEtMTQuNjI4NTcxLTE0LjYyODU3MS0xOS44NTMwNjEtMzYuNTcxNDI5LTE0LjYyODU3MS02MC42MDQwODJsMTcuMjQwODE2LTc3Ljg0NDg5OGMtNDMuMzYzMjY1LTU3LjQ2OTM4OC02Ni4zNTEwMi0xMjIuNzc1NTEtNjYuMzUxMDItMTkwLjY5Mzg3N0MxMTQuOTM4Nzc2IDMyMC43ODM2NzMgMjkxLjAwNDA4MiAxNjEuOTU5MTg0IDUwNy4yOTc5NTkgMTYxLjk1OTE4NGMxMDcuNjI0NDkgMCAyMDguNDU3MTQzIDM2LjA0ODk4IDI4My42ODk3OTYgMTAxLjg3NzU1MUM4NjcuMjY1MzA2IDMzMC43MTAyMDQgOTA5LjA2MTIyNCA0MjAuMDQ4OTggOTA5LjA2MTIyNCA1MTYuMTc5NTkyYzAgMTkwLjY5Mzg3OC0xODAuMjQ0ODk4IDM0NS44NjEyMjQtNDAxLjc2MzI2NSAzNDUuODYxMjI0elwiIGZpbGw9XCIjN0JENEVGXCIgcC1pZD1cIjI4MzBcIj48L3BhdGg+PHBhdGggZD1cIk01MTIgNTgxLjQ4NTcxNGMtMzguMTM4Nzc2IDAtNjkuNDg1NzE0LTMxLjM0NjkzOS02OS40ODU3MTQtNjkuNDg1NzE0czMxLjM0NjkzOS02OS40ODU3MTQgNjkuNDg1NzE0LTY5LjQ4NTcxNCA2OS40ODU3MTQgMzEuMzQ2OTM5IDY5LjQ4NTcxNCA2OS40ODU3MTQtMzEuMzQ2OTM5IDY5LjQ4NTcxNC02OS40ODU3MTQgNjkuNDg1NzE0ek03MTAuNTMwNjEyIDU4MS40ODU3MTRjLTM4LjEzODc3NiAwLTY5LjQ4NTcxNC0zMS4zNDY5MzktNjkuNDg1NzE0LTY5LjQ4NTcxNHMzMS4zNDY5MzktNjkuNDg1NzE0IDY5LjQ4NTcxNC02OS40ODU3MTQgNjkuNDg1NzE0IDMxLjM0NjkzOSA2OS40ODU3MTUgNjkuNDg1NzE0LTMxLjM0NjkzOSA2OS40ODU3MTQtNjkuNDg1NzE1IDY5LjQ4NTcxNHpNMzEzLjQ2OTM4OCA1ODEuNDg1NzE0Yy0zOC4xMzg3NzYgMC02OS40ODU3MTQtMzEuMzQ2OTM5LTY5LjQ4NTcxNS02OS40ODU3MTRzMzEuMzQ2OTM5LTY5LjQ4NTcxNCA2OS40ODU3MTUtNjkuNDg1NzE0IDY5LjQ4NTcxNCAzMS4zNDY5MzkgNjkuNDg1NzE0IDY5LjQ4NTcxNC0zMS4zNDY5MzkgNjkuNDg1NzE0LTY5LjQ4NTcxNCA2OS40ODU3MTR6XCIgZmlsbD1cIiMyNzhEQ0FcIiBwLWlkPVwiMjgzMVwiPjwvcGF0aD48L3N2Zz4nLFxuICAgICAgICAgICAgMjogJzxzdmcgdD1cIjE3MzMzMDUxNjQ3NTZcIiBjbGFzcz1cImljb25cIiB2aWV3Qm94PVwiMCAwIDEwMjQgMTAyNFwiIHZlcnNpb249XCIxLjFcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgcC1pZD1cIjQwODRcIiB3aWR0aD1cIjIwMFwiIGhlaWdodD1cIjIwMFwiPjxwYXRoIGQ9XCJNOTEzLjMzIDE0NC4xNXY1NzcuNTdINTkwLjg1Yy04Ljk0IDAtMTcuNDEgMi41OC0yNC41OCA3LjEyTDMwNC43MiA4NTQuOTd2LTg3LjI0YzAtMjUuNDEtMjAuNi00Ni00Ni00NkgxMDkuMzNWMTQ0LjE1aDgwNG0yNS40Mi00Nkg4My45MmMtMTEuMzcgMC0yMC41OCA5LjIyLTIwLjU4IDIwLjU4djYyOC40MWMwIDExLjM3IDkuMjIgMjAuNTggMjAuNTggMjAuNThoMTc0Ljh2MTYwLjQ5TDU5MS4xNyA3NjcuOWwtMC4zMS0wLjE4aDM0Ny45YzExLjM3IDAgMjAuNTgtOS4yMiAyMC41OC0yMC41OHYtNjI4LjRjLTAuMDEtMTEuMzctOS4yMi0yMC41OS0yMC41OS0yMC41OXpcIiBmaWxsPVwiIzVCRTdDNFwiIHAtaWQ9XCI0MDg1XCI+PC9wYXRoPjxwYXRoIGQ9XCJNNzIwLjU0IDQ2OC41MUgzMDIuMTJjLTEyLjcgMC0yMy0xMC4zLTIzLTIzczEwLjMtMjMgMjMtMjNoNDE4LjQyYzEyLjcgMCAyMyAxMC4zIDIzIDIzcy0xMC4yOSAyMy0yMyAyM3pcIiBmaWxsPVwiIzdBNTdEMVwiIHAtaWQ9XCI0MDg2XCI+PC9wYXRoPjxwYXRoIGQ9XCJNNTExLjMzIDY3Ny43MmMtMTIuNyAwLTIzLTEwLjMtMjMtMjNWMjM2LjNjMC0xMi43IDEwLjMtMjMgMjMtMjNzMjMgMTAuMyAyMyAyM3Y0MTguNDJjMCAxMi43MS0xMC4yOSAyMy0yMyAyM3pcIiBmaWxsPVwiIzdBNTdEMVwiIHAtaWQ9XCI0MDg3XCI+PC9wYXRoPjxwYXRoIGQ9XCJNNzQ1LjgxIDIwMC43MWgtNDEuOTdjLTYuNjMgMC0xMi01LjM3LTEyLTEyczUuMzctMTIgMTItMTJoNDEuOTdjNi42MyAwIDEyIDUuMzcgMTIgMTJzLTUuMzcgMTItMTIgMTJ6TTg2MS4zOSAzNTEuODFjLTYuNjMgMC0xMi01LjM3LTEyLTEyVjIyNy4zN2MwLTE0LjctMTEuOTYtMjYuNjctMjYuNjctMjYuNjdoLTI0LjM4Yy02LjYzIDAtMTItNS4zNy0xMi0xMnM1LjM3LTEyIDEyLTEyaDI0LjM4YzI3Ljk0IDAgNTAuNjcgMjIuNzMgNTAuNjcgNTAuNjd2MTEyLjQ0YzAgNi42My01LjM4IDEyLTEyIDEyelwiIGZpbGw9XCIjNUJFN0M0XCIgcC1pZD1cIjQwODhcIj48L3BhdGg+PC9zdmc+JyxcbiAgICAgICAgICAgIDM6ICc8c3ZnIHQ9XCIxNzMzMzA1MTgzNzgzXCIgY2xhc3M9XCJpY29uXCIgdmlld0JveD1cIjAgMCAxMDI0IDEwMjRcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHAtaWQ9XCI0MjQ5XCIgd2lkdGg9XCIyMDBcIiBoZWlnaHQ9XCIyMDBcIj48cGF0aCBkPVwiTTg5Mi44NCA0MTAuMDdINDU5Ljk3Yy05LjIxIDAtMTYuNjcgNy40NC0xNi42NyAxNi42M3YzMzNjMCA5LjIyIDcuNDYgMTYuNjMgMTYuNjcgMTYuNjNoMjY2LjM4bDExNi41NCA2Ni42M3YtNjYuNjNoNDkuOTVjOS4yMSAwIDE2LjY3LTcuNDEgMTYuNjctMTYuNjN2LTMzM2MwLTkuMTktNy40Ni0xNi42My0xNi42Ny0xNi42M3pcIiBmaWxsPVwiI0VDODdDMFwiIHAtaWQ9XCI0MjUwXCI+PC9wYXRoPjxwYXRoIGQ9XCJNNDU5Ljk3IDQxMC4wN2MtOS4yMSAwLTE2LjY3IDcuNDQtMTYuNjcgMTYuNjN2MjE2LjQ3aDI0OS43NWM5LjIxIDAgMTYuNjctNy40NiAxNi42Ny0xNi42OFY0MTAuMDdINDU5Ljk3elwiIGZpbGw9XCIjRDc3MEFEXCIgcC1pZD1cIjQyNTFcIj48L3BhdGg+PHBhdGggZD1cIk02NTkuNzYgMTc2Ljk2SDEyNi45NWMtOS4yMSAwLTE2LjYzIDcuNDYtMTYuNjMgMTYuNjZ2Mzk5LjYxYzAgOS4xNyA3LjQzIDE2LjYzIDE2LjYzIDE2LjYzaDQ5Ljk1djk5LjlsMTc5LjgxLTk5LjloMzAzLjA1YzkuMTggMCAxNi42My03LjQ2IDE2LjYzLTE2LjYzVjE5My42MmMwLjAxLTkuMi03LjQ0LTE2LjY2LTE2LjYzLTE2LjY2elwiIGZpbGw9XCIjQUM5MkVCXCIgcC1pZD1cIjQyNTJcIj48L3BhdGg+PHBhdGggZD1cIk00NDguODcgMjc2Ljg2Yy0yMS43NCAwLTQxLjQgOC45NC01NS41IDIzLjMzLTE0LjExLTE0LjM5LTMzLjc2LTIzLjMzLTU1LjUxLTIzLjMzLTQyLjkgMC03Ny42OSAzNC43OS03Ny42OSA3Ny43IDAgODguOCAxMzMuMiAxNjYuNDggMTMzLjIgMTY2LjQ4czEzMy4xOSA3Ny42OCAxMzMuMTkgMTY2LjQ4YzAgNDIuOTEtMzQuNzggNzcuNy03Ny42OSA3Ny43elwiIGZpbGw9XCIjRjVGN0ZBXCIgcC1pZD1cIjQyNTNcIj48L3BhdGg+PHBhdGggZD1cIk00NDguODcgMjc2Ljg2Yy01LjcyIDAtMTEuMjkgMC42My0xNi42NiAxLjgxIDM0LjkxIDcuNjIgNjEuMDYgMzguNjkgNjEuMDYgNzUuOSAwIDY5LjE3LTgwLjgzIDEzMS42MS0xMTYuNTYgMTU1LjgyIDEwLjE1IDYuODggMTYuNjYgMTAuNjYgMTYuNjYgMTAuNjZzMTMzLjE5LTc3LjY4IDEzMy4xOS0xNjYuNDhjMC00Mi45Mi0zNC43OC03Ny43MS03Ny42OS03Ny43MXpcIiBvcGFjaXR5PVwiLjFcIiBwLWlkPVwiNDI1NFwiPjwvcGF0aD48L3N2Zz4nLFxuICAgICAgICAgICAgNDogJzxzdmcgdD1cIjE3MzMzMDUyMzg5NTVcIiBjbGFzcz1cImljb25cIiB2aWV3Qm94PVwiMCAwIDEwMjQgMTAyNFwiIHZlcnNpb249XCIxLjFcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgcC1pZD1cIjc1NjBcIiB3aWR0aD1cIjIwMFwiIGhlaWdodD1cIjIwMFwiPjxwYXRoIGQ9XCJNNTEyIDUxMm0tNTEyIDBhNTEyIDUxMiAwIDEgMCAxMDI0IDAgNTEyIDUxMiAwIDEgMC0xMDI0IDBaXCIgZmlsbD1cIiNGRjlENTRcIiBwLWlkPVwiNzU2MVwiPjwvcGF0aD48cGF0aCBkPVwiTTE0MC40ODQ0IDI0MS45NTU4ODZhNDYuNTUxOTMgMTAxLjY5NjU1NyAyOS43NSAxIDAgODAuODMyNjYxIDQ2LjE5OTY3MiA0Ni41NTE5MyAxMDEuNjk2NTU3IDI5Ljc1IDEgMC04MC44MzI2NjEtNDYuMTk5NjcyWlwiIGZpbGw9XCIjRkZGRkZGXCIgcC1pZD1cIjc1NjJcIj48L3BhdGg+PHBhdGggZD1cIk05My40OTU2NTIgNDMxLjg2MDg3bS0yMi4yNjA4NjkgMGEyMi4yNjA4NyAyMi4yNjA4NyAwIDEgMCA0NC41MjE3MzkgMCAyMi4yNjA4NyAyMi4yNjA4NyAwIDEgMC00NC41MjE3MzkgMFpcIiBmaWxsPVwiI0ZGRkZGRlwiIHAtaWQ9XCI3NTYzXCI+PC9wYXRoPjxwYXRoIGQ9XCJNODMyLjU1NjUyMiA4NTcuMDQzNDc4YTI0LjQ4Njk1NyAyNC40ODY5NTcgMCAxIDAgMC00OC45NzM5MTMgMjQuNDg2OTU3IDI0LjQ4Njk1NyAwIDAgMCAwIDQ4Ljk3MzkxM3ogbTAgMjQuNDg2OTU3YTQ4Ljk3MzkxMyA0OC45NzM5MTMgMCAxIDAgMC05Ny45NDc4MjYgNDguOTczOTEzIDQ4Ljk3MzkxMyAwIDAgMCAwIDk3Ljk0NzgyNnpcIiBmaWxsPVwiI0ZGRkZGRlwiIHAtaWQ9XCI3NTY0XCI+PC9wYXRoPjxwYXRoIGQ9XCJNNzM1LjM5MjI3OCAzMjAuNTU2NTIySDI5Ny41MTIwN0MyNzUuNzg1NDYxIDMyMC41NTY1MjIgMjU4LjIyNjA4NyAzMzguMzI5NiAyNTguMjI2MDg3IDM2MC4zMTQ0MzV2MzEyLjQ4MDI3OGMwIDIxLjk3NTkzIDE3LjU1OTM3NCAzOS43NDkwMDkgMzkuMjg1OTgzIDM5Ljc0OTAwOWg2My4wMjQ5NzNsMTAuNjg1MjE4IDQ3Ljk0MTAwOGM0Ljk2ODYyNiAyMi4yMTYzNDggMzEuODMzMDQzIDMwLjY5MzI4NyA0OC4zNTA2MDkgMTUuMTk5NzIybDY3LjU4NC02My4xMzE4MjZoMjQ4LjIzNTQwOGMyMS43MjY2MDkgMCAzOS4yODU5ODMtMTcuNzgxOTgzIDM5LjI4NTk4My0zOS43NTc5MTNWMzYwLjMxNDQzNUM3NzQuNjc4MjYxIDMzOC4zODMwMjYgNzU3LjA1NjU1NyAzMjAuNTU2NTIyIDczNS4zOTIyNzggMzIwLjU1NjUyMnpNNDAxLjQ5NzA0MyA1MzQuNjQzNzU3Yy0xOC4zNzg1NzQgMC0zMy4yMTMyMTctMTUuMDgzOTY1LTMzLjIxMzIxNy0zMy42MTM5MTRzMTQuODk2OTc0LTMzLjYxMzkxMyAzMy4yMTMyMTctMzMuNjEzOTEzYzE4LjM2OTY3IDAgMzMuMjEzMjE3IDE1LjA4Mzk2NSAzMy4yMTMyMTggMzMuNjEzOTEzcy0xNC44NDM1NDggMzMuNjEzOTEzLTMzLjIxMzIxOCAzMy42MTM5MTR6IG0xMjAuOTY1NTY2IDIuMzQxODQzYy0xOC4zNjk2NyAwLTMzLjIxMzIxNy0xNS4wODM5NjUtMzMuMjEzMjE4LTMzLjYxMzkxMyAwLTE4LjUzODg1MiAxNC44OTY5NzQtMzMuNjIyODE3IDMzLjIxMzIxOC0zMy42MjI4MTcgMTguMzY5NjcgMCAzMy4yMTMyMTcgMTUuMDgzOTY1IDMzLjIxMzIxNyAzMy42MjI4MTcgMCAxOC41MjEwNDMtMTQuODQzNTQ4IDMzLjYxMzkxMy0zMy4yMTMyMTcgMzMuNjEzOTEzeiBtMTIwLjk2NTU2NSAwYy0xOC4zNjk2NyAwLTMzLjIxMzIxNy0xNS4wODM5NjUtMzMuMjEzMjE3LTMzLjYxMzkxMyAwLTE4LjUzODg1MiAxNC44OTY5NzQtMzMuNjIyODE3IDMzLjIxMzIxNy0zMy42MjI4MTcgMTguMzY5NjcgMCAzMy4yMTMyMTcgMTUuMDgzOTY1IDMzLjIxMzIxNyAzMy42MjI4MTcgMCAxOC41MjEwNDMtMTQuODQzNTQ4IDMzLjYxMzkxMy0zMy4yMTMyMTcgMzMuNjEzOTEzelwiIGZpbGw9XCIjRkZGRkZGXCIgcC1pZD1cIjc1NjVcIj48L3BhdGg+PC9zdmc+JyxcbiAgICAgICAgICAgIDU6ICc8c3ZnIHQ9XCIxNzMzMzA1MjY2NTQ3XCIgY2xhc3M9XCJpY29uXCIgdmlld0JveD1cIjAgMCAxMDI0IDEwMjRcIiB2ZXJzaW9uPVwiMS4xXCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIHAtaWQ9XCI4OTE4XCIgd2lkdGg9XCIyMDBcIiBoZWlnaHQ9XCIyMDBcIj48cGF0aCBkPVwiTTUxMiA3MzZsLTE5MiAxOTJ2LTE5MkgxMjhhMzIgMzIgMCAwIDEtMzItMzJWMTI4YTMyIDMyIDAgMCAxIDMyLTMyaDc2OGEzMiAzMiAwIDAgMSAzMiAzMnY1NzZhMzIgMzIgMCAwIDEtMzIgMzJINTEyelwiIGZpbGw9XCIjRkZGRkZGXCIgcC1pZD1cIjg5MTlcIj48L3BhdGg+PHBhdGggZD1cIk01MTIgNzM2bC0xOTIgMTkydi0xOTJIMTI4YTMyIDMyIDAgMCAxLTMyLTMyVjEyOGEzMiAzMiAwIDAgMSAzMi0zMmg3NjhhMzIgMzIgMCAwIDEgMzIgMzJ2NTc2YTMyIDMyIDAgMCAxLTMyIDMySDUxMnogbS0xNjAgMTE0Ljc1Mkw0OTguNzUyIDcwNEg4OTZWMTI4SDEyOHY1NzZoMjI0djE0Ni43NTJ6XCIgZmlsbD1cIiM1RDZEN0VcIiBwLWlkPVwiODkyMFwiPjwvcGF0aD48cGF0aCBkPVwiTTIyNCAzODRoNTc2djMySDIyNHYtMzJ6IG0wIDk2aDU3NnYzMkgyMjR2LTMyeiBtMCA5NmgzMjB2MzJIMjI0di0zMnpcIiBmaWxsPVwiIzgwOEZBMVwiIHAtaWQ9XCI4OTIxXCI+PC9wYXRoPjxwYXRoIGQ9XCJNMjI0IDIyNGg1NzZ2MTkySDIyNHpcIiBmaWxsPVwiI0M0OUY3NFwiIHAtaWQ9XCI4OTIyXCI+PC9wYXRoPjwvc3ZnPidcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGljb25zW3R5cGVdIHx8IGljb25zWzFdO1xuICAgIH1cblxuICAgIC8vIFx1NEZFRVx1NjUzOSByZWZyZXNoQWxsSWNvbnMgXHU2NUI5XHU2Q0Q1XG4gICAgcHVibGljIHJlZnJlc2hBbGxJY29ucygpIHtcbiAgICAgICAgY29uc3QgbWFya2Rvd25WaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICAgICAgaWYgKCFtYXJrZG93blZpZXcpIHJldHVybjtcblxuICAgICAgICBjb25zdCBjYWxsb3V0cyA9IG1hcmtkb3duVmlldy5jb250ZW50RWwucXVlcnlTZWxlY3RvckFsbCgnLmNhbGxvdXQnKTtcbiAgICAgICAgY2FsbG91dHMuZm9yRWFjaChjYWxsb3V0ID0+IHtcbiAgICAgICAgICAgIGlmIChjYWxsb3V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBcdTc5RkJcdTk2NjRcdTczQjBcdTY3MDlcdTc2ODRcdTU2RkVcdTY4MDdcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ0ljb24gPSBjYWxsb3V0LnF1ZXJ5U2VsZWN0b3IoJy5jYWxsb3V0LW1lc3NhZ2UtaWNvbi1jb250YWluZXInKTtcbiAgICAgICAgICAgICAgICBpZiAoZXhpc3RpbmdJY29uKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4aXN0aW5nSWNvbi5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwIENTUyBcdTUzRDhcdTkxQ0ZcbiAgICAgICAgICAgICAgICBjYWxsb3V0LnN0eWxlLnNldFByb3BlcnR5KCctLWljb24tc2l6ZScsIGAke3RoaXMuc2V0dGluZ3MuaWNvblNldHRpbmdzLnNpemV9cHhgKTtcbiAgICAgICAgICAgICAgICBjYWxsb3V0LnN0eWxlLnNldFByb3BlcnR5KCctLWljb24tdG9wLXBvc2l0aW9uJywgYCR7dGhpcy5zZXR0aW5ncy5pY29uU2V0dGluZ3MucG9zaXRpb24udG9wfXB4YCk7XG4gICAgICAgICAgICAgICAgY2FsbG91dC5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1pY29uLXJpZ2h0LXBvc2l0aW9uJywgYCR7dGhpcy5zZXR0aW5ncy5pY29uU2V0dGluZ3MucG9zaXRpb24ucmlnaHR9cHhgKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBcdUZGRkRcdUZGRkRcdTY1QjBcdTZERkJcdTUyQTBcdTU2RkVcdTY4MDdcbiAgICAgICAgICAgICAgICB0aGlzLmFkZE1lc3NhZ2VJY29uVG9DYWxsb3V0KGNhbGxvdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdTRGRUVcdTY1MzkgdG9nZ2xlUHJpc21TdHlsZSBcdTY1QjlcdTZDRDVcbiAgICBwcml2YXRlIHRvZ2dsZVByaXNtU3R5bGUoZW5hYmxlZDogYm9vbGVhbikge1xuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTY4MzlcdTUxNDNcdTdEMjBcbiAgICAgICAgY29uc3Qgcm9vdEVsZW1lbnQgPSBkb2N1bWVudC5ib2R5O1xuICAgICAgICBcbiAgICAgICAgaWYgKGVuYWJsZWQpIHtcbiAgICAgICAgICAgIC8vIFx1NEZFRVx1NjUzOVx1NjgzN1x1NUYwRlx1NjgwN1x1N0I3RVx1NTE4NVx1NUJCOVx1RkYwQ1x1NkRGQlx1NTJBMCAhaW1wb3J0YW50IFx1Njc2NVx1Nzg2RVx1NEZERFx1NjgzN1x1NUYwRlx1NEYxOFx1NTE0OFx1N0VBN1xuICAgICAgICAgICAgY29uc3Qgc3R5bGVUYWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgICAgICAgc3R5bGVUYWcuaWQgPSAnY2FsbG91dC1wcmlzbS1zdHlsZXMnO1xuICAgICAgICAgICAgc3R5bGVUYWcudGV4dENvbnRlbnQgPSBgXG4gICAgICAgICAgICAgICAgYm9keTpub3QoLnB0LWRpc2FibGUtY2FsbG91dC1zdHlsaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIC0tY2FsbG91dC1wYWRkaW5nOiA0cHg7XG4gICAgICAgICAgICAgICAgICAgIC0tY2FsbG91dC1yYWRpdXM6IHZhcigtLXJhZGl1cy1tKTtcbiAgICAgICAgICAgICAgICAgICAgLS1jYWxsb3V0LWJhY2tncm91bmQtYWxwaGE6IDIwJTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBib2R5Om5vdCgucHQtZGlzYWJsZS1jYWxsb3V0LXN0eWxpbmcpIC5jYWxsb3V0IHtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdW5zZXQ7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC5jYWxsb3V0LW1lc3NhZ2UtaWNvbi1jb250YWluZXIge1xuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGUgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAgei1pbmRleDogOTk5OSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXIgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAgZ2FwOiA0cHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBhbGwgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAuY2FsbG91dC1tZXNzYWdlLWljb24ge1xuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXIgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXIgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IGFsbCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgICB6LWluZGV4OiA5OTk5ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLyogXHU2REZCXHU1MkEwXHU2NUIwXHU3Njg0XHU2ODM3XHU1RjBGXHU4OUM0XHU1MjE5XHU2NzY1XHU3NDA2XHU1MkE4XHU2MDAxXHU1QzNBXHU1QkY4XHU1NDhDXHU0RjREXHU3RjZFICovXG4gICAgICAgICAgICAgICAgLmNhbGxvdXQtbWVzc2FnZS1pY29uLWNvbnRhaW5lcltzdHlsZSo9XCJ0b3BcIl0sXG4gICAgICAgICAgICAgICAgLmNhbGxvdXQtbWVzc2FnZS1pY29uLWNvbnRhaW5lcltzdHlsZSo9XCJyaWdodFwiXSB7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogdmFyKC0taWNvbi10b3AtcG9zaXRpb24pICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiB2YXIoLS1pY29uLXJpZ2h0LXBvc2l0aW9uKSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC5jYWxsb3V0LW1lc3NhZ2UtaWNvbltzdHlsZSo9XCJ3aWR0aFwiXSxcbiAgICAgICAgICAgICAgICAuY2FsbG91dC1tZXNzYWdlLWljb25bc3R5bGUqPVwiaGVpZ2h0XCJdIHtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IHZhcigtLWljb24tc2l6ZSkgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiB2YXIoLS1pY29uLXNpemUpICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLmNhbGxvdXQtbWVzc2FnZS1jb3VudCB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1mbGV4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXIgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXIgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tdGV4dC1hY2NlbnQpICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiB3aGl0ZSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCUgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDIwcHggIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAyMHB4ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXIgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IGFsbCAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgICAgICB6LWluZGV4OiA5OTk5ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLmNhbGxvdXQ6aG92ZXIgLmNhbGxvdXQtbWVzc2FnZS1pY29uLWNvbnRhaW5lciB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEgIWltcG9ydGFudDtcbiAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogdmlzaWJsZSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC53b3Jrc3BhY2UtbGVhZi1jb250ZW50W2RhdGEtdHlwZT1cIm1hcmtkb3duXCJdIC5jYWxsb3V0LW1lc3NhZ2UtaWNvbi1jb250YWluZXIge1xuICAgICAgICAgICAgICAgICAgICB6LWluZGV4OiA5OTk5ICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLmNhbGxvdXQtbWVzc2FnZS1pY29uLWNvbnRhaW5lcjo6YmVmb3JlIHtcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyc7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAtNXB4O1xuICAgICAgICAgICAgICAgICAgICByaWdodDogLTVweDtcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAtNXB4O1xuICAgICAgICAgICAgICAgICAgICBsZWZ0OiAtNXB4O1xuICAgICAgICAgICAgICAgICAgICB6LWluZGV4OiAtMTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAuY2FsbG91dC10aXRsZSB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgICAgICAgei1pbmRleDogNTtcbiAgICAgICAgICAgICAgICAgICAgZ2FwOiB1bnNldDtcbiAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICAgICAgbWluLWhlaWdodDogMzZweDtcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQ7XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1tKTtcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSh2YXIoLS1jYWxsb3V0LWNvbG9yKSwgMC4wNSk7XG4gICAgICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBhdXRvO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC5jYWxsb3V0LXRpdGxlOmVtcHR5ICsgLmNhbGxvdXQtY29udGVudCB7XG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IHZhcigtLXNpemUtNC0xKSB2YXIoLS1zaXplLTQtMyk7XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci10b3Atc3R5bGU6IHNvbGlkO1xuICAgICAgICAgICAgICAgICAgICBib3JkZXItdG9wLXdpZHRoOiAxcHg7XG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXJhZGl1cy1tKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAuY2FsbG91dC10aXRsZS1pbm5lciB7XG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IHZhcigtLXNpemUtNC0xKSAwO1xuICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDAgdmFyKC0tc2l6ZS00LTEpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC5jYWxsb3V0LWljb24ge1xuICAgICAgICAgICAgICAgICAgICBhbGlnbi1zZWxmOiB1bnNldDtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwIHZhcigtLXNpemUtNC0xKSAwIHZhcigtLXNpemUtNC0yKTtcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLW0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC5jYWxsb3V0LWZvbGQge1xuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgICAgICBhbGlnbi1zZWxmOiB1bnNldDtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogdW5zZXQ7XG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiBhdXRvO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC5jYWxsb3V0LWNvbnRlbnQge1xuICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiB2YXIoLS1zaXplLTQtNSkgdmFyKC0tc2l6ZS00LTMpIHZhcigtLXNpemUtNC0xKSB2YXIoLS1zaXplLTQtMyk7XG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IC0xNnB4O1xuICAgICAgICAgICAgICAgICAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCByZ2JhKHZhcigtLWNhbGxvdXQtY29sb3IpKTtcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHJnYmEodmFyKC0tY2FsbG91dC1jb2xvcikpO1xuICAgICAgICAgICAgICAgICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkIHJnYmEodmFyKC0tY2FsbG91dC1jb2xvcikpO1xuICAgICAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogdmFyKC0tcmFkaXVzLW0pO1xuICAgICAgICAgICAgICAgICAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiB2YXIoLS1yYWRpdXMtbSk7XG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEodmFyKC0tY2FsbG91dC1jb2xvciksIDApO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC5jYWxsb3V0IHAge1xuICAgICAgICAgICAgICAgICAgICBmb250LWZhbWlseTogJ1BhbGF0aW5vJywgJ0thaScsICdcdTY5NzdcdTRGNTMnLCBzZXJpZjtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAuY2FsbG91dC1oaWdobGlnaHQge1xuICAgICAgICAgICAgICAgICAgICBhbmltYXRpb246IGhpZ2hsaWdodC1wdWxzZSAycyBlYXNlLWluLW91dDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBAa2V5ZnJhbWVzIGhpZ2hsaWdodC1wdWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIDAlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgMCAwIDAgcmdiYSh2YXIoLS10ZXh0LWFjY2VudC1yZ2IpLCAwLjQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDcwJSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgMCAxMHB4IHJnYmEodmFyKC0tdGV4dC1hY2NlbnQtcmdiKSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgMTAwJSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgMCAwIHJnYmEodmFyKC0tdGV4dC1hY2NlbnQtcmdiKSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAvKiBcdTZERkJcdTUyQTBcdTYyNDBcdTY3MDkgQ2FsbG91dCBcdTdDN0JcdTU3OEJcdTc2ODRcdTY4MzdcdTVGMEYgKi9cbiAgICAgICAgICAgICAgICAke3RoaXMuZ2V0Q2FsbG91dFR5cGVTdHlsZXMoKX1cbiAgICAgICAgICAgIGA7XG4gICAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlVGFnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFx1NzlGQlx1OTY2NFx1NjgzN1x1NUYwRlx1NjgwN1x1N0I3RVxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdTdHlsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjYWxsb3V0LXByaXNtLXN0eWxlcycpO1xuICAgICAgICAgICAgaWYgKGV4aXN0aW5nU3R5bGUpIHtcbiAgICAgICAgICAgICAgICBleGlzdGluZ1N0eWxlLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBcdTUyMzdcdTY1QjBcdTYyNDBcdTY3MDlcdTU2RkVcdTY4MDdcdTRFRTVcdTc4NkVcdTRGRERcdTVCODNcdTRFRUNcdTc4NkVcdTY2M0VcdTc5M0FcbiAgICAgICAgdGhpcy5yZWZyZXNoQWxsSWNvbnMoKTtcbiAgICB9XG5cbiAgICAvLyBcdTZERkJcdTUyQTBcdTRFMDBcdTRFMkFcdTY1QjBcdTY1QjlcdTZDRDVcdTY3NjVcdTc1MUZcdTYyMTBcdTYyNDBcdTY3MDkgQ2FsbG91dCBcdTdDN0JcdTU3OEJcdTc2ODRcdTY4MzdcdTVGMEZcbiAgICBwcml2YXRlIGdldENhbGxvdXRUeXBlU3R5bGVzKCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAvKiBUeXBlIDEgLSBOb3RlICovXG4gICAgICAgICAgICBib2R5Om5vdCgucHQtZGlzYWJsZS1jYWxsb3V0LXN0eWxpbmcpIC5jYWxsb3V0W2RhdGEtY2FsbG91dD1cIm5vdGVcIl0gPiAuY2FsbG91dC10aXRsZSB7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLWNvbG9yLWdyZXktdGV4dCk7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tY29sb3ItZ3JleS1iYXNlKTtcbiAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLWdyZXktdGludCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBib2R5Om5vdCgucHQtZGlzYWJsZS1jYWxsb3V0LXN0eWxpbmcpIC5jYWxsb3V0W2RhdGEtY2FsbG91dD1cIm5vdGVcIl0gPiAuY2FsbG91dC1jb250ZW50IHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBoc2xhKHZhcigtLWNvbG9yLWdyZXktYmFzZS1oc2wpLCB2YXIoLS1jYWxsb3V0LWJhY2tncm91bmQtYWxwaGEpKTtcbiAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWNvbG9yLWdyZXktdGludCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8qIFR5cGUgMiAtIEFic3RyYWN0L1N1bW1hcnkvVExEUiAqL1xuICAgICAgICAgICAgYm9keTpub3QoLnB0LWRpc2FibGUtY2FsbG91dC1zdHlsaW5nKSAuY2FsbG91dDppcyhbZGF0YS1jYWxsb3V0PVwiYWJzdHJhY3RcIl0sW2RhdGEtY2FsbG91dD1cInN1bW1hcnlcIl0sW2RhdGEtY2FsbG91dD1cInRsZHJcIl0pID4gLmNhbGxvdXQtdGl0bGUge1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1jb2xvci1jeWFuLXRleHQpO1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWNvbG9yLWN5YW4tYmFzZSk7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1jeWFuLXRpbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYm9keTpub3QoLnB0LWRpc2FibGUtY2FsbG91dC1zdHlsaW5nKSAuY2FsbG91dDppcyhbZGF0YS1jYWxsb3V0PVwiYWJzdHJhY3RcIl0sW2RhdGEtY2FsbG91dD1cInN1bW1hcnlcIl0sW2RhdGEtY2FsbG91dD1cInRsZHJcIl0pID4gLmNhbGxvdXQtY29udGVudCB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogaHNsYSh2YXIoLS1jb2xvci1jeWFuLWJhc2UtaHNsKSwgdmFyKC0tY2FsbG91dC1iYWNrZ3JvdW5kLWFscGhhKSk7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1jb2xvci1jeWFuLXRpbnQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvKiBcdTdFRTdcdTdFRURcdTUyQTBcdTUxNzZcdTRFRDZcdTdDN0JcdTU3OEJcdTc2ODRcdTY4MzdcdTVGMEYuLi4gKi9cbiAgICAgICAgICAgIC8qIFx1OEZEOVx1OTFDQ1x1NTNFRlx1NEVFNVx1N0VFN1x1N0VFRFx1NkRGQlx1NTJBMFx1NTE3Nlx1NEVENlx1N0M3Qlx1NTc4Qlx1NzY4NFx1NjgzN1x1NUYwRlx1RkYwQ1x1NEUwRVx1NTM5Rlx1NTlDQiBDU1MgXHU0RkREXHU2MzAxXHU0RTAwXHU4MUY0ICovXG4gICAgICAgIGA7XG4gICAgfVxuXG4gICAgLy8gXHU2REZCXHU1MkEwXHU2NkY0XHU2NUIwXHU1NkZFXHU2ODA3XHU2NjNFXHU3OTNBXHU3MkI2XHU2MDAxXHU3Njg0XHU2NUI5XHU2Q0Q1XG4gICAgcHJpdmF0ZSB1cGRhdGVDYWxsb3V0SWNvblZpc2liaWxpdHkoKSB7XG4gICAgICAgIGNvbnN0IGJvZHlDbGFzc2VzID0gZG9jdW1lbnQuYm9keS5jbGFzc0xpc3Q7XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLnNob3dDYWxsb3V0SWNvbikge1xuICAgICAgICAgICAgYm9keUNsYXNzZXMuYWRkKCdzaG93LWNhbGxvdXQtaWNvbicpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYm9keUNsYXNzZXMucmVtb3ZlKCdzaG93LWNhbGxvdXQtaWNvbicpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBcdTVGMzlcdThGOTNcdTUxNjVcdTY4NDZcdTc2ODQgTW9kYWxcbmNsYXNzIE1lc3NhZ2VJbnB1dE1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHBsdWdpbjogQ2FsbG91dEV4dHJhTWVzc2FnZVBsdWdpbjtcbiAgICBjYWxsb3V0SWQ6IHN0cmluZztcbiAgICBpbnB1dEVsOiBIVE1MVGV4dEFyZWFFbGVtZW50O1xuICAgIG1lc3NhZ2VJbmRleDogbnVtYmVyOyAgLy8gXHU2REZCXHU1MkEwXHU2RDg4XHU2MDZGXHU3RDIyXHU1RjE1XHU1QzVFXHU2MDI3XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBDYWxsb3V0RXh0cmFNZXNzYWdlUGx1Z2luLCBjYWxsb3V0SWQ6IHN0cmluZywgbWVzc2FnZUluZGV4PzogbnVtYmVyKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLmNhbGxvdXRJZCA9IGNhbGxvdXRJZDtcbiAgICAgICAgdGhpcy5tZXNzYWdlSW5kZXggPSBtZXNzYWdlSW5kZXg7ICAvLyBcdTRGRERcdTVCNThcdTZEODhcdTYwNkZcdTdEMjJcdTVGMTVcbiAgICAgICAgdGhpcy5pbnB1dEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdtZXNzYWdlLWlucHV0LW1vZGFsJyk7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1N0YxNlx1OEY5MSBDYWxsb3V0IFx1NTkwN1x1NkNFOCcgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTY2MkZcdTdGMTZcdThGOTFcdTczQjBcdTY3MDlcdTZEODhcdTYwNkZcdUZGMENcdTUyMTlcdTU4NkJcdTUxNDVcdTVERjJcdTY3MDlcdTUxODVcdTVCQjlcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm1lc3NhZ2VJbmRleCA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VEYXRhID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubWVzc2FnZXNbdGhpcy5jYWxsb3V0SWRdO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2VEYXRhPy5tZXNzYWdlcz8uW3RoaXMubWVzc2FnZUluZGV4XSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRFbC52YWx1ZSA9IG1lc3NhZ2VEYXRhLm1lc3NhZ2VzW3RoaXMubWVzc2FnZUluZGV4XS50ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLmlucHV0RWwucm93cyA9IDEwO1xuICAgICAgICB0aGlzLmlucHV0RWwucGxhY2Vob2xkZXIgPSAnXHU4QkY3XHU4RjkzXHU1MTY1IENhbGxvdXQgXHU1OTA3XHU2Q0U4XHU0RkUxXHU2MDZGLi4uJztcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVFbCgnZGl2JywgeyBcbiAgICAgICAgICAgIGNsczogJ21lc3NhZ2UtaW5wdXQtbW9kYWwtYnV0dG9ucycgXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHU0RkREXHU1QjU4JyxcbiAgICAgICAgICAgIGNsczogJ21vZC1jdGEnXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1NTNENlx1NkQ4OCcgXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNhdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNhdmVNZXNzYWdlKCk7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XG5cbiAgICAgICAgY29udGVudEVsLmFwcGVuZENoaWxkKHRoaXMuaW5wdXRFbCk7XG4gICAgICAgIGNvbnRlbnRFbC5hcHBlbmRDaGlsZChidXR0b25Db250YWluZXIpO1xuICAgIH1cblxuICAgIGFzeW5jIHNhdmVNZXNzYWdlKCkge1xuICAgICAgICBjb25zdCB0ZXh0ID0gdGhpcy5pbnB1dEVsLnZhbHVlLnRyaW0oKTtcbiAgICAgICAgaWYgKCF0ZXh0KSByZXR1cm47XG5cbiAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5tZXNzYWdlc1t0aGlzLmNhbGxvdXRJZF0pIHtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1lc3NhZ2VzW3RoaXMuY2FsbG91dElkXSA9IHtcbiAgICAgICAgICAgICAgICBtZXNzYWdlczogW11cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCk7XG5cbiAgICAgICAgLy8gXHU1OTgyXHU2NzlDXHU2NjJGXHU3RjE2XHU4RjkxXHU3M0IwXHU2NzA5XHU2RDg4XHU2MDZGXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5tZXNzYWdlSW5kZXggPT09ICdudW1iZXInKSB7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tZXNzYWdlc1t0aGlzLmNhbGxvdXRJZF0ubWVzc2FnZXNbdGhpcy5tZXNzYWdlSW5kZXhdID0ge1xuICAgICAgICAgICAgICAgIHRleHQsXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2NUIwXHU2RDg4XHU2MDZGXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tZXNzYWdlc1t0aGlzLmNhbGxvdXRJZF0ubWVzc2FnZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgdGV4dCxcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cbiAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU2RDg4XHU2MDZGXHU4QkExXHU2NTcwXHU2NjNFXHU3OTNBXG4gICAgICAgIGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuICAgICAgICBpZiAoYWN0aXZlVmlldykge1xuICAgICAgICAgICAgY29uc3QgY2FsbG91dCA9IGFjdGl2ZVZpZXcuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgICAgICAgYFtkYXRhLWNhbGxvdXQtaWQ9XCIke3RoaXMuY2FsbG91dElkfVwiXWBcbiAgICAgICAgICAgICk/LmNsb3Nlc3QoJy5jYWxsb3V0Jyk7XG4gICAgICAgICAgICBpZiAoY2FsbG91dCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udXBkYXRlQ2FsbG91dE1lc3NhZ2VDb3VudChjYWxsb3V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1NTIzN1x1NjVCMFx1NkQ4OFx1NjA2Rlx1ODlDNlx1NTZGRVxuICAgICAgICBjb25zdCBtZXNzYWdlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoQ0FMTF9PVVRfTUVTU0FHRV9WSUVXKVswXT8udmlldyBhcyBDYWxsb3V0TWVzc2FnZVZpZXc7XG4gICAgICAgIGlmIChtZXNzYWdlVmlldykge1xuICAgICAgICAgICAgbWVzc2FnZVZpZXcuZGlzcGxheU1lc3NhZ2VzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZUFsbENhbGxvdXRDb3VudHMoY2FsbG91dElkOiBzdHJpbmcpIHtcbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU2MjQwXHU2NzA5XHU3NkY4XHU1MTczXHU3Njg0IENhbGxvdXQgXHU1MTQzXHU3RDIwXG4gICAgICAgIGNvbnN0IG1hcmtkb3duVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICAgIGlmICghbWFya2Rvd25WaWV3KSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgY2FsbG91dHMgPSBtYXJrZG93blZpZXcuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYWxsb3V0Jyk7XG4gICAgICAgIGNhbGxvdXRzLmZvckVhY2goY2FsbG91dCA9PiB7XG4gICAgICAgICAgICBpZiAoY2FsbG91dCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSB0aGlzLnBsdWdpbi5nZXRDYWxsb3V0SWQoY2FsbG91dCk7XG4gICAgICAgICAgICAgICAgaWYgKGlkID09PSBjYWxsb3V0SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGFpbmVyID0gY2FsbG91dC5xdWVyeVNlbGVjdG9yKCcuY2FsbG91dC1tZXNzYWdlLWljb24tY29udGFpbmVyJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250YWluZXIgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4udXBkYXRlTWVzc2FnZUNvdW50KGNhbGxvdXQsIGNvbnRhaW5lcik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9uQ2xvc2UoKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICB9XG59XG5cbi8vIFx1NTNGM1x1NEZBN1x1OTc2Mlx1Njc3Rlx1NTZGRVx1RkYwQ1x1NjYzRVx1NzkzQSBDYWxsb3V0IFx1NkQ4OFx1NjA2RlxuZXhwb3J0IGNsYXNzIENhbGxvdXRNZXNzYWdlVmlldyBleHRlbmRzIFZpZXcge1xuICAgIHByaXZhdGUgY3VycmVudENhbGxvdXRJZDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSB2aWV3TW9kZTogJ2FsbCcgfCAnc2luZ2xlJyA9ICdhbGwnO1xuICAgIHByaXZhdGUgbWVzc2FnZUNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBidXR0b25Db250YWluZXI6IEhUTUxFbGVtZW50O1xuICAgIHBsdWdpbjogQ2FsbG91dEV4dHJhTWVzc2FnZVBsdWdpbjtcblxuICAgIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogQ2FsbG91dEV4dHJhTWVzc2FnZVBsdWdpbikge1xuICAgICAgICBzdXBlcihsZWFmKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgICAgIHRoaXMuY29udGFpbmVyRWwuZW1wdHkoKTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZUJ1dHRvbnMoKTtcbiAgICAgICAgdGhpcy5tZXNzYWdlQ29udGFpbmVyID0gdGhpcy5jb250YWluZXJFbC5jcmVhdGVEaXYoJ2NhbGxvdXQtbWVzc2FnZXMtY29udGFpbmVyJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTc2RDFcdTU0MkNcdTZEM0JcdTUyQThcdTg5QzZcdTU2RkVcdTUzRDhcdTUzMTZcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uKCdhY3RpdmUtbGVhZi1jaGFuZ2UnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmlld01vZGUgPT09ICdhbGwnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheU1lc3NhZ2VzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBcdTc2RDFcdTU0MkNcdTdGMTZcdThGOTFcdTU2NjhcdTUxODVcdTVCQjlcdTUzRDhcdTUzMTZcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uKCdlZGl0b3ItY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyAgLy8gXHU2REZCXHU1MkEwXHU1RUY2XHU2NUY2XHU0RUU1XHU3ODZFXHU0RkREIERPTSBcdTY2RjRcdTY1QjBcdTVCOENcdTYyMTBcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMudmlld01vZGUgPT09ICdhbGwnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlNZXNzYWdlcygpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gXHU3NkQxXHU1NDJDXHU2NTg3XHU0RUY2XHU2MjUzXHU1RjAwXG4gICAgICAgIHRoaXMucmVnaXN0ZXJFdmVudChcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZS1vcGVuJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZXdNb2RlID09PSAnYWxsJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlNZXNzYWdlcygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2NUIwXHU3Njg0XHU0RThCXHU0RUY2XHU3NkQxXHU1NDJDXHVGRjFBXHU3NkQxXHU1NDJDIERPTSBcdTUzRDhcdTUzMTZcbiAgICAgICAgdGhpcy5yZWdpc3RlckV2ZW50KFxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uKCdsYXlvdXQtY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52aWV3TW9kZSA9PT0gJ2FsbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheU1lc3NhZ2VzKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBcdTUyMURcdTU5Q0JcdTUzMTZcdTY2M0VcdTc5M0FcdTVGNTNcdTUyNERcdTdCMTRcdThCQjBcdTc2ODRcdTZEODhcdTYwNkZcbiAgICAgICAgaWYgKHRoaXMudmlld01vZGUgPT09ICdhbGwnKSB7XG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlNZXNzYWdlcygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0aWFsaXplQnV0dG9ucygpIHtcbiAgICAgICAgdGhpcy5idXR0b25Db250YWluZXIgPSB0aGlzLmNvbnRhaW5lckVsLmNyZWF0ZURpdigndmlldy1idXR0b25zLXJvdycpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2NjNFXHU3OTNBXHU2MjQwXHU2NzA5XHU3QjE0XHU4QkIwXHU3Njg0XHU2MzA5XHU5NEFFXG4gICAgICAgIGNvbnN0IGFsbEJ1dHRvbiA9IHRoaXMuYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnXHU2NjNFXHU3OTNBXHU1RjUzXHU1MjREXHU2MjQwXHU2NzA5IENhbGxvdXQgXHU3QjE0XHU4QkIwJyxcbiAgICAgICAgICAgIGNsczogdGhpcy52aWV3TW9kZSA9PT0gJ2FsbCcgPyAnbW9kLWN0YScgOiAnJ1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBzaW5nbGVCdXR0b24gPSB0aGlzLmJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgdGV4dDogJ1x1NjYzRVx1NzkzQVx1NTM1NVx1NEUyQSBDYWxsb3V0IFx1N0IxNFx1OEJCMCcsXG4gICAgICAgICAgICBjbHM6IHRoaXMudmlld01vZGUgPT09ICdzaW5nbGUnID8gJ21vZC1jdGEnIDogJydcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYWxsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zd2l0Y2hUb0FsbE1vZGUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2luZ2xlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudENhbGxvdXRJZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoVG9TaW5nbGVNb2RlKHRoaXMuY3VycmVudENhbGxvdXRJZCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NzBCOVx1NTFGQiBDYWxsb3V0IFx1NTNGM1x1NEUwQVx1ODlEMlx1NzY4NFx1NjU3MFx1NUI1N1x1Njc2NVx1NjdFNVx1NzcwQlx1NTM1NVx1NEUyQSBDYWxsb3V0IFx1NzY4NFx1NTkwN1x1NkNFOCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTVCRkNcdTUxRkFcdTYzMDlcdTk0QUVcdTg4NENcbiAgICAgICAgY29uc3QgZXhwb3J0QnV0dG9uUm93ID0gdGhpcy5idXR0b25Db250YWluZXIuY3JlYXRlRGl2KCdleHBvcnQtYnV0dG9uLXJvdycpO1xuICAgICAgICBjb25zdCBleHBvcnRCdXR0b24gPSBleHBvcnRCdXR0b25Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdcdTVCRkNcdTUxRkFcdTdCMTRcdThCQjAnLFxuICAgICAgICAgICAgY2xzOiAnZXhwb3J0LWJ1dHRvbidcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZXhwb3J0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5leHBvcnRUb1BERigpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdTRGRUVcdTY1Mzkgc3dpdGNoVmlld01vZGUgXHU2NUI5XHU2Q0Q1XG4gICAgcHVibGljIHN3aXRjaFZpZXdNb2RlKG1vZGU6ICdhbGwnIHwgJ3NpbmdsZScsIGFjdGl2ZUJ1dHRvbjogSFRNTEVsZW1lbnQsIGluYWN0aXZlQnV0dG9uOiBIVE1MRWxlbWVudCkge1xuICAgICAgICB0aGlzLnZpZXdNb2RlID0gbW9kZTtcbiAgICAgICAgYWN0aXZlQnV0dG9uLmFkZENsYXNzKCdtb2QtY3RhJyk7XG4gICAgICAgIGluYWN0aXZlQnV0dG9uLnJlbW92ZUNsYXNzKCdtb2QtY3RhJyk7XG4gICAgICAgIFxuICAgICAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgaWYgKG1vZGUgPT09ICdzaW5nbGUnKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50Q2FsbG91dElkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5TWVzc2FnZXMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU3MEI5XHU1MUZCIENhbGxvdXQgXHU1M0YzXHU0RTBBXHU4OUQyXHU3Njg0XHU2NTcwXHU1QjU3XHU2NzY1XHU2N0U1XHU3NzBCXHU1MzU1XHU0RTJBIENhbGxvdXQgXHU3Njg0XHU1OTA3XHU2Q0U4Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gJ2FsbCcpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheU1lc3NhZ2VzKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBcdTRGRUVcdTY1Mzkgc3dpdGNoVG9BbGxNb2RlIFx1NjVCOVx1NkNENVxuICAgIHB1YmxpYyBzd2l0Y2hUb0FsbE1vZGUoKSB7XG4gICAgICAgIHRoaXMudmlld01vZGUgPSAnYWxsJztcbiAgICAgICAgdGhpcy5jdXJyZW50Q2FsbG91dElkID0gbnVsbDsgLy8gXHU5MUNEXHU4OTgxXHVGRjFBXHU2RTA1XHU5NjY0XHU1RjUzXHU1MjREXHU5MDA5XHU0RTJEXHU3Njg0IENhbGxvdXRcbiAgICAgICAgdGhpcy51cGRhdGVCdXR0b25TdGF0ZXMoKTtcbiAgICAgICAgdGhpcy5yZWZyZXNoVmlldygpO1xuICAgIH1cblxuICAgIC8vIFx1NEZFRVx1NjUzOSBzd2l0Y2hUb1NpbmdsZU1vZGUgXHU2NUI5XHU2Q0Q1XG4gICAgcHVibGljIHN3aXRjaFRvU2luZ2xlTW9kZShjYWxsb3V0SWQ/OiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy52aWV3TW9kZSA9ICdzaW5nbGUnO1xuICAgICAgICB0aGlzLmN1cnJlbnRDYWxsb3V0SWQgPSBjYWxsb3V0SWQ7XG4gICAgICAgIHRoaXMudXBkYXRlQnV0dG9uU3RhdGVzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTZFMDVcdTdBN0FcdTZEODhcdTYwNkZcdTVCQjlcdTU2NjhcbiAgICAgICAgdGhpcy5tZXNzYWdlQ29udGFpbmVyLmVtcHR5KCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoIWNhbGxvdXRJZCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU3MEI5XHU1MUZCIENhbGxvdXQgXHU1M0YzXHU0RTBBXHU4OUQyXHU3Njg0XHU2NTcwXHU1QjU3XHU2NzY1XHU2N0U1XHU3NzBCXHU1MzU1XHU0RTJBIENhbGxvdXQgXHU3Njg0XHU1OTA3XHU2Q0U4Jyk7XG4gICAgICAgICAgICByZXR1cm47IC8vIFx1NEUwRFx1NjYzRVx1NzkzQVx1OTc2Mlx1Njc3Rlx1NjU4N1x1NUI1N1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTZEODhcdTYwNkZcdTY1NzBcdTYzNkVcbiAgICAgICAgY29uc3QgbWVzc2FnZURhdGEgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tZXNzYWdlc1tjYWxsb3V0SWRdO1xuICAgICAgICBpZiAobWVzc2FnZURhdGE/Lm1lc3NhZ2VzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlck1lc3NhZ2VzKGNhbGxvdXRJZCwgbWVzc2FnZURhdGEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zaG93RW1wdHlNZXNzYWdlKCdcdThCRTUgQ2FsbG91dCBcdTY2ODJcdTY1RTBcdTU5MDdcdTZDRTgnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBzZXRDdXJyZW50Q2FsbG91dChjYWxsb3V0SWQ6IHN0cmluZykge1xuICAgICAgICB0aGlzLmN1cnJlbnRDYWxsb3V0SWQgPSBjYWxsb3V0SWQ7XG4gICAgICAgIHRoaXMudmlld01vZGUgPSAnc2luZ2xlJztcbiAgICAgICAgdGhpcy51cGRhdGVCdXR0b25TdGF0ZXMoKTtcbiAgICAgICAgdGhpcy5kaXNwbGF5TWVzc2FnZXMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZUJ1dHRvblN0YXRlcygpIHtcbiAgICAgICAgY29uc3QgYnV0dG9ucyA9IHRoaXMuYnV0dG9uQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpO1xuICAgICAgICBidXR0b25zWzBdLnRvZ2dsZUNsYXNzKCdtb2QtY3RhJywgdGhpcy52aWV3TW9kZSA9PT0gJ2FsbCcpO1xuICAgICAgICBidXR0b25zWzFdLnRvZ2dsZUNsYXNzKCdtb2QtY3RhJywgdGhpcy52aWV3TW9kZSA9PT0gJ3NpbmdsZScpO1xuICAgIH1cblxuICAgIC8vIFx1NEZFRVx1NjUzOSBkaXNwbGF5TWVzc2FnZXMgXHU2NUI5XHU2Q0Q1XG4gICAgcHVibGljIGRpc3BsYXlNZXNzYWdlcygpIHtcbiAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICAgIGlmICghYWN0aXZlVmlldykgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU2RTA1XHU3QTdBXHU2RDg4XHU2MDZGXHU1QkI5XHU1NjY4XG4gICAgICAgIHRoaXMubWVzc2FnZUNvbnRhaW5lci5lbXB0eSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU4M0I3XHU1M0Q2XHU1RjUzXHU1MjREXHU2NTg3XHU2ODYzXHU0RTJEXHU2MjQwXHU2NzA5XHU3Njg0IENhbGxvdXQgXHU1MTQzXHU3RDIwXG4gICAgICAgIGNvbnN0IGNhbGxvdXRzID0gYWN0aXZlVmlldy5jb250ZW50RWwucXVlcnlTZWxlY3RvckFsbCgnLmNhbGxvdXQnKTtcbiAgICAgICAgY29uc3QgY3VycmVudENhbGxvdXRJZHMgPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NjUzNlx1OTZDNlx1NjI0MFx1NjcwOSBDYWxsb3V0IFx1NzY4NCBJRFxuICAgICAgICBjYWxsb3V0cy5mb3JFYWNoKGNhbGxvdXQgPT4ge1xuICAgICAgICAgICAgaWYgKGNhbGxvdXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy5nZXRDYWxsb3V0SWRGcm9tRWxlbWVudChjYWxsb3V0KTtcbiAgICAgICAgICAgICAgICBpZiAoaWQpIGN1cnJlbnRDYWxsb3V0SWRzLmFkZChpZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubWVzc2FnZXM7XG4gICAgICAgIFxuICAgICAgICBpZiAodGhpcy52aWV3TW9kZSA9PT0gJ3NpbmdsZScgJiYgdGhpcy5jdXJyZW50Q2FsbG91dElkKSB7XG4gICAgICAgICAgICAvLyBcdTUzNTVcdTRFMkEgQ2FsbG91dCBcdTY2M0VcdTc5M0FcdTZBMjFcdTVGMEZcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VEYXRhID0gbWVzc2FnZXNbdGhpcy5jdXJyZW50Q2FsbG91dElkXTtcbiAgICAgICAgICAgIGlmIChtZXNzYWdlRGF0YT8ubWVzc2FnZXM/Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck1lc3NhZ2VzKHRoaXMuY3VycmVudENhbGxvdXRJZCwgbWVzc2FnZURhdGEpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dFbXB0eU1lc3NhZ2UoJ1x1OEJFNSBDYWxsb3V0IFx1NjY4Mlx1NjVFMFx1NTkwN1x1NkNFOCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMudmlld01vZGUgPT09ICdhbGwnKSB7XG4gICAgICAgICAgICAvLyBcdTY2M0VcdTc5M0FcdTYyNDBcdTY3MDkgQ2FsbG91dCBcdTc2ODRcdTZEODhcdTYwNkZcbiAgICAgICAgICAgIGxldCBoYXNNZXNzYWdlcyA9IGZhbHNlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTkwNERcdTUzODZcdTVGNTNcdTUyNERcdTY1ODdcdTY4NjNcdTRFMkRcdTc2ODRcdTYyNDBcdTY3MDkgQ2FsbG91dFxuICAgICAgICAgICAgY3VycmVudENhbGxvdXRJZHMuZm9yRWFjaChjYWxsb3V0SWQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VEYXRhID0gbWVzc2FnZXNbY2FsbG91dElkXTtcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZURhdGE/Lm1lc3NhZ2VzPy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NEUzQVx1NkJDRlx1NEUyQSBDYWxsb3V0IFx1NTIxQlx1NUVGQVx1NEUwMFx1NEUyQVx1NTIwNlx1N0VDNFx1NUJCOVx1NTY2OFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBncm91cENvbnRhaW5lciA9IHRoaXMubWVzc2FnZUNvbnRhaW5lci5jcmVhdGVEaXYoJ2NhbGxvdXQtbWVzc2FnZS1ncm91cCcpO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1MjA2XHU3RUM0XHU2ODA3XHU5ODk4XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdyb3VwVGl0bGUgPSBncm91cENvbnRhaW5lci5jcmVhdGVEaXYoJ2NhbGxvdXQtbWVzc2FnZS1ncm91cC10aXRsZScpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBjYWxsb3V0Q29uZmlnID0gdGhpcy5nZXRDYWxsb3V0Q29uZmlnRm9yTWVzc2FnZShjYWxsb3V0SWQpO1xuICAgICAgICAgICAgICAgICAgICBncm91cFRpdGxlLnN0eWxlLmNvbG9yID0gY2FsbG91dENvbmZpZy5jb2xvcjtcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBUaXRsZS5zdHlsZS5ib3JkZXJCb3R0b20gPSBgMnB4IHNvbGlkICR7Y2FsbG91dENvbmZpZy5jb2xvcn1gO1xuICAgICAgICAgICAgICAgICAgICBncm91cFRpdGxlLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxMHB4JztcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBUaXRsZS5zdHlsZS5wYWRkaW5nQm90dG9tID0gJzVweCc7XG4gICAgICAgICAgICAgICAgICAgIGdyb3VwVGl0bGUuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcbiAgICAgICAgICAgICAgICAgICAgZ3JvdXBUaXRsZS50ZXh0Q29udGVudCA9IGAke2NhbGxvdXRDb25maWcubmFtZX0gXHU3Njg0XHU1OTA3XHU2Q0U4YDtcblxuICAgICAgICAgICAgICAgICAgICAvLyBcdTZFMzJcdTY3RDNcdThCRTUgQ2FsbG91dCBcdTc2ODRcdTYyNDBcdTY3MDlcdTZEODhcdTYwNkZcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZURhdGEubWVzc2FnZXMuZm9yRWFjaCgobWVzc2FnZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VFbCA9IHRoaXMuY3JlYXRlTWVzc2FnZUVsZW1lbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbG91dElkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZURhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbG91dENvbmZpZ1xuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwQ29udGFpbmVyLmFwcGVuZENoaWxkKG1lc3NhZ2VFbCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgaGFzTWVzc2FnZXMgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTRFRkJcdTRGNTVcdTZEODhcdTYwNkZcdUZGMENcdTY2M0VcdTc5M0FcdTdBN0FcdTZEODhcdTYwNkZcdTYzRDBcdTc5M0FcbiAgICAgICAgICAgIGlmICghaGFzTWVzc2FnZXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dFbXB0eU1lc3NhZ2UoJ1x1NUY1M1x1NTI0RFx1NjU4N1x1Njg2M1x1NEUyRFx1NkNBMVx1NjcwOSBDYWxsb3V0IFx1NTkwN1x1NkNFOCcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHU2NUIwXHU1ODlFXHVGRjFBXHU2RDg4XHU2MDZGXHU2RTMyXHU2N0QzXHU2NUI5XHU2Q0Q1XG4gICAgcHJpdmF0ZSByZW5kZXJNZXNzYWdlcyhjYWxsb3V0SWQ6IHN0cmluZywgbWVzc2FnZURhdGE6IE1lc3NhZ2VEYXRhKSB7XG4gICAgICAgIGlmICghbWVzc2FnZURhdGE/Lm1lc3NhZ2VzKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICAvLyBcdTZFMDVcdTdBN0FcdTczQjBcdTY3MDlcdTUxODVcdTVCQjlcbiAgICAgICAgdGhpcy5tZXNzYWdlQ29udGFpbmVyLmVtcHR5KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTgzQjdcdTUzRDYgQ2FsbG91dCBcdTkxNERcdTdGNkVcbiAgICAgICAgY29uc3QgY2FsbG91dENvbmZpZyA9IHRoaXMuZ2V0Q2FsbG91dENvbmZpZ0Zvck1lc3NhZ2UoY2FsbG91dElkKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NkUzMlx1NjdEM1x1NkJDRlx1Njc2MVx1NkQ4OFx1NjA2RlxuICAgICAgICBtZXNzYWdlRGF0YS5tZXNzYWdlcy5mb3JFYWNoKChtZXNzYWdlLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbWVzc2FnZUVsID0gdGhpcy5jcmVhdGVNZXNzYWdlRWxlbWVudChcbiAgICAgICAgICAgICAgICBjYWxsb3V0SWQsXG4gICAgICAgICAgICAgICAgbWVzc2FnZSxcbiAgICAgICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgICAgICBtZXNzYWdlRGF0YSxcbiAgICAgICAgICAgICAgICBjYWxsb3V0Q29uZmlnXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKG1lc3NhZ2VFbCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFx1NjVCMFx1NTg5RVx1RkYxQVx1NTM1NVx1NEUyQVx1NkQ4OFx1NjA2Rlx1NTE0M1x1N0QyMFx1NTIxQlx1NUVGQVx1NjVCOVx1NkNENVxuICAgIHByaXZhdGUgY3JlYXRlTWVzc2FnZUVsZW1lbnQoXG4gICAgICAgIGNhbGxvdXRJZDogc3RyaW5nLCBcbiAgICAgICAgbWVzc2FnZTogeyB0ZXh0OiBzdHJpbmc7IHRpbWVzdGFtcDogc3RyaW5nIH0sIFxuICAgICAgICBpbmRleDogbnVtYmVyLFxuICAgICAgICBtZXNzYWdlRGF0YTogTWVzc2FnZURhdGEsXG4gICAgICAgIGNhbGxvdXRDb25maWc6IENhbGxvdXRDb25maWdcbiAgICApOiBIVE1MRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2VFbCA9IGNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2NhbGxvdXQtbWVzc2FnZS1pdGVtJyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NjgzN1x1NUYwRlxuICAgICAgICBPYmplY3QuYXNzaWduKG1lc3NhZ2VFbC5zdHlsZSwge1xuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiB0aGlzLmFkanVzdENvbG9yKGNhbGxvdXRDb25maWcuY29sb3IsIDAuMSksXG4gICAgICAgICAgICBib3JkZXJMZWZ0OiBgNHB4IHNvbGlkICR7Y2FsbG91dENvbmZpZy5jb2xvcn1gLFxuICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnNHB4JyxcbiAgICAgICAgICAgIG1hcmdpbjogJzEwcHggMCcsXG4gICAgICAgICAgICBwYWRkaW5nOiAnMTJweCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2ODA3XHU5ODk4XHU1MzNBXHU1N0RGXG4gICAgICAgIGNvbnN0IHRpdGxlRWwgPSBtZXNzYWdlRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnY2FsbG91dC1tZXNzYWdlLXRpdGxlJyB9KTtcbiAgICAgICAgY29uc3QgdGl0bGVUZXh0ID0gdGl0bGVFbC5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgICAgIHRleHQ6IGNhbGxvdXRDb25maWcubmFtZSxcbiAgICAgICAgICAgIGNsczogJ2NhbGxvdXQtdGl0bGUtdGV4dCdcbiAgICAgICAgfSk7XG4gICAgICAgIHRpdGxlVGV4dC5zdHlsZS5jb2xvciA9IGNhbGxvdXRDb25maWcuY29sb3I7XG4gICAgICAgIHRpdGxlVGV4dC5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xuXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjMwOVx1OTRBRVx1NUJCOVx1NTY2OFxuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSB0aXRsZUVsLmNyZWF0ZUVsKCdkaXYnLCB7IGNsczogJ2NhbGxvdXQtbWVzc2FnZS1idXR0b25zJyB9KTtcblxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTdGMTZcdThGOTFcdTYzMDlcdTk0QUVcbiAgICAgICAgY29uc3QgZWRpdEJ1dHRvbiA9IHRoaXMuY3JlYXRlQnV0dG9uKGJ1dHRvbkNvbnRhaW5lciwgJ1x1N0YxNlx1OEY5MScsIGNhbGxvdXRDb25maWcuY29sb3IpO1xuICAgICAgICBlZGl0QnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuICAgICAgICAgICAgbW9kYWwudGl0bGVFbC5zZXRUZXh0KCdcdTdGMTZcdThGOTEgQ2FsbG91dCBcdTU5MDdcdTZDRTgnKTtcbiAgICAgICAgICAgIG1vZGFsLmNvbnRhaW5lckVsLmFkZENsYXNzKCdjYWxsb3V0LW1lc3NhZ2UtbW9kYWwnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2NTg3XHU2NzJDXHU1MzNBXHU1N0RGXHU1QkI5XHU1NjY4XG4gICAgICAgICAgICBjb25zdCB0ZXh0QXJlYUNvbnRhaW5lciA9IG1vZGFsLmNvbnRlbnRFbC5jcmVhdGVEaXYoJ2NhbGxvdXQtbWVzc2FnZS10ZXh0YXJlYS1jb250YWluZXInKTtcbiAgICAgICAgICAgIHRleHRBcmVhQ29udGFpbmVyLnN0eWxlLm1hcmdpbiA9ICcyMHB4IDAnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTY1ODdcdTY3MkNcdTUzM0FcdTU3REZcbiAgICAgICAgICAgIGNvbnN0IHRleHRBcmVhID0gdGV4dEFyZWFDb250YWluZXIuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xuICAgICAgICAgICAgICAgIGF0dHI6IHtcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdcdThCRjdcdThGOTNcdTUxNjUgQ2FsbG91dCBcdTU5MDdcdTZDRThcdTRGRTFcdTYwNkYuLi4nXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjbHM6ICdjYWxsb3V0LW1lc3NhZ2UtdGV4dGFyZWEnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBtZXNzYWdlLnRleHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTVCOUVcdTY1RjZcdTY2RjRcdTY1QjBcdTc2RDFcdTU0MkNcbiAgICAgICAgICAgIHRleHRBcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1RleHQgPSB0ZXh0QXJlYS52YWx1ZS50cmltKCk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld1RleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1QjlFXHU2NUY2XHU2NkY0XHU2NUIwXHU2RDg4XHU2MDZGXHU1MTg1XHU1QkI5XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VEYXRhLm1lc3NhZ2VzW2luZGV4XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IG5ld1RleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gXHU1QjlFXHU2NUY2XHU2NkY0XHU2NUIwXHU4OUM2XHU1NkZFXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheU1lc3NhZ2VzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1NjU4N1x1NjcyQ1x1NTMzQVx1NTdERlx1NjgzN1x1NUYwRlxuICAgICAgICAgICAgdGV4dEFyZWEuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgICAgICB0ZXh0QXJlYS5zdHlsZS5taW5IZWlnaHQgPSAnMTUwcHgnO1xuICAgICAgICAgICAgdGV4dEFyZWEuc3R5bGUucGFkZGluZyA9ICcxMHB4JztcbiAgICAgICAgICAgIHRleHRBcmVhLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc0cHgnO1xuICAgICAgICAgICAgdGV4dEFyZWEuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xuICAgICAgICAgICAgdGV4dEFyZWEuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtcHJpbWFyeSknO1xuICAgICAgICAgICAgdGV4dEFyZWEuc3R5bGUucmVzaXplID0gJ3ZlcnRpY2FsJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU2MzA5XHU5NEFFXHU1QkI5XHU1NjY4XG4gICAgICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBtb2RhbC5jb250ZW50RWwuY3JlYXRlRGl2KCdidXR0b24tY29udGFpbmVyJyk7XG4gICAgICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcbiAgICAgICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdmbGV4LWVuZCc7XG4gICAgICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuZ2FwID0gJzEwcHgnO1xuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICcyMHB4JztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU0RkREXHU1QjU4XHU2MzA5XHU5NEFFXG4gICAgICAgICAgICBjb25zdCBzYXZlQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogJ1x1NEZERFx1NUI1OCcsXG4gICAgICAgICAgICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgc2F2ZUJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KSc7XG4gICAgICAgICAgICBzYXZlQnV0dG9uLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtb24tYWNjZW50KSc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NTNENlx1NkQ4OFx1NjMwOVx1OTRBRVxuICAgICAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogJ1x1NTNENlx1NkQ4OCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTRGRERcdTVCNThcdTYzMDlcdTk0QUVcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcbiAgICAgICAgICAgIHNhdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VGV4dCA9IHRleHRBcmVhLnZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgICAgICBpZiAoIW5ld1RleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1OTA3XHU2Q0U4XHU1MTg1XHU1QkI5XHU0RTBEXHU4MEZEXHU0RTNBXHU3QTdBJyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gXHU2NzAwXHU3RUM4XHU0RkREXHU1QjU4XHU4QkJFXHU3RjZFXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU2RDg4XHU2MDZGXHU4QkExXHU2NTcwXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVBbGxDYWxsb3V0Q291bnRzKGNhbGxvdXRJZCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gXHU1MTczXHU5NUVEXHU2QTIxXHU2MDAxXHU2ODQ2XG4gICAgICAgICAgICAgICAgbW9kYWwuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTU5MDdcdTZDRThcdTVERjJcdTY2RjRcdTY1QjAnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTUzRDZcdTZEODhcdTYzMDlcdTk0QUVcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcbiAgICAgICAgICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICBtb2RhbC5jbG9zZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1Nzg2RVx1NEZERFx1NTE4NVx1NUJCOVx1ODhBQlx1OEJCRVx1N0Y2RVx1NUU3Nlx1ODA1QVx1NzEyNlxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGV4dEFyZWEudmFsdWUgPSBtZXNzYWdlLnRleHQ7XG4gICAgICAgICAgICAgICAgdGV4dEFyZWEuZm9jdXMoKTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU1MjIwXHU5NjY0XHU2MzA5XHU5NEFFXG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRoaXMuY3JlYXRlQnV0dG9uKGJ1dHRvbkNvbnRhaW5lciwgJ1x1NTIyMFx1OTY2NCcsICcjZmY0NDQ0Jyk7XG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgIC8vIFx1N0FDQlx1NTM3M1x1NEVDRVx1NjU3MFx1N0VDNFx1NEUyRFx1NzlGQlx1OTY2NFx1NkQ4OFx1NjA2RlxuICAgICAgICAgICAgbWVzc2FnZURhdGEubWVzc2FnZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU3QUNCXHU1MzczXHU2NkY0XHU2NUIwXHU4OUM2XHU1NkZFXG4gICAgICAgICAgICB0aGlzLmRpc3BsYXlNZXNzYWdlcygpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTcxMzZcdTU0MEVcdTRGRERcdTVCNThcdThCQkVcdTdGNkVcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTZEODhcdTYwNkZcdThCQTFcdTY1NzBcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQWxsQ2FsbG91dENvdW50cyhjYWxsb3V0SWQpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdTU5MDdcdTZDRThcdTVERjJcdTUyMjBcdTk2NjQnKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTUxODVcdTVCQjlcdTUzM0FcdTU3REZcbiAgICAgICAgY29uc3QgY29udGVudEVsID0gbWVzc2FnZUVsLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgICAgICBjbHM6ICdjYWxsb3V0LW1lc3NhZ2UtY29udGVudCcsXG4gICAgICAgICAgICB0ZXh0OiBtZXNzYWdlLnRleHRcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnRlbnRFbC5zdHlsZS5jb2xvciA9IGNhbGxvdXRDb25maWcudGV4dENvbG9yO1xuXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjVGNlx1OTVGNFx1NjIzM1xuICAgICAgICBtZXNzYWdlRWwuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICAgIGNsczogJ2NhbGxvdXQtbWVzc2FnZS10aW1lc3RhbXAnLFxuICAgICAgICAgICAgdGV4dDogbWVzc2FnZS50aW1lc3RhbXBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VFbDtcbiAgICB9XG5cbiAgICAvLyBcdTY1QjBcdTU4OUVcdUZGMUFcdTU5MDRcdTc0MDZcdTdGMTZcdThGOTFcdTY0Q0RcdTRGNUNcbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUVkaXQoXG4gICAgICAgIGU6IE1vdXNlRXZlbnQsXG4gICAgICAgIG1lc3NhZ2U6IHsgdGV4dDogc3RyaW5nOyB0aW1lc3RhbXA6IHN0cmluZyB9LFxuICAgICAgICBtZXNzYWdlRWw6IEhUTUxFbGVtZW50LFxuICAgICAgICBpbmRleDogbnVtYmVyLFxuICAgICAgICBtZXNzYWdlRGF0YTogTWVzc2FnZURhdGFcbiAgICApIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RCBjYWxsb3V0SWRcbiAgICAgICAgY29uc3QgY2FsbG91dElkID0gdGhpcy5jdXJyZW50Q2FsbG91dElkO1xuICAgICAgICBpZiAoIWNhbGxvdXRJZCkgcmV0dXJuO1xuXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NEUwMFx1NEUyQVx1N0I4MFx1NTM1NVx1NzY4NFx1NkEyMVx1NjAwMVx1Njg0Nlx1Njc2NVx1N0YxNlx1OEY5MVx1NkQ4OFx1NjA2RlxuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBNb2RhbCh0aGlzLmFwcCk7XG4gICAgICAgIG1vZGFsLnRpdGxlRWwuc2V0VGV4dCgnXHU3RjE2XHU4RjkxIENhbGxvdXQgXHU1OTA3XHU2Q0U4Jyk7XG4gICAgICAgIG1vZGFsLmNvbnRhaW5lckVsLmFkZENsYXNzKCdjYWxsb3V0LW1lc3NhZ2UtbW9kYWwnKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjU4N1x1NjcyQ1x1NTMzQVx1NTdERlx1NUJCOVx1NTY2OFxuICAgICAgICBjb25zdCB0ZXh0QXJlYUNvbnRhaW5lciA9IG1vZGFsLmNvbnRlbnRFbC5jcmVhdGVEaXYoJ2NhbGxvdXQtbWVzc2FnZS10ZXh0YXJlYS1jb250YWluZXInKTtcbiAgICAgICAgdGV4dEFyZWFDb250YWluZXIuc3R5bGUubWFyZ2luID0gJzIwcHggMCc7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTY1ODdcdTY3MkNcdTUzM0FcdTU3REZcdTVFNzZcdTc4NkVcdTRGRERcdThCQkVcdTdGNkVcdTUzOUZcdTY3MDlcdTUxODVcdTVCQjlcbiAgICAgICAgY29uc3QgdGV4dEFyZWEgPSB0ZXh0QXJlYUNvbnRhaW5lci5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XG4gICAgICAgICAgICBhdHRyOiB7XG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdcdThCRjdcdThGOTNcdTUxNjUgQ2FsbG91dCBcdTU5MDdcdTZDRThcdTRGRTFcdTYwNkYuLi4nXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY2xzOiAnY2FsbG91dC1tZXNzYWdlLXRleHRhcmVhJyxcbiAgICAgICAgICAgIHZhbHVlOiBtZXNzYWdlLnRleHRcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdThCQkVcdTdGNkVcdTY1ODdcdTY3MkNcdTUzM0FcdTU3REZcdTY4MzdcdTVGMEZcbiAgICAgICAgdGV4dEFyZWEuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIHRleHRBcmVhLnN0eWxlLm1pbkhlaWdodCA9ICcxNTBweCc7XG4gICAgICAgIHRleHRBcmVhLnN0eWxlLnBhZGRpbmcgPSAnMTBweCc7XG4gICAgICAgIHRleHRBcmVhLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc0cHgnO1xuICAgICAgICB0ZXh0QXJlYS5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XG4gICAgICAgIHRleHRBcmVhLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpJztcbiAgICAgICAgdGV4dEFyZWEuc3R5bGUucmVzaXplID0gJ3ZlcnRpY2FsJztcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjMwOVx1OTRBRVx1NUJCOVx1NTY2OFxuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBtb2RhbC5jb250ZW50RWwuY3JlYXRlRGl2KCdidXR0b24tY29udGFpbmVyJyk7XG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnZmxleC1lbmQnO1xuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuZ2FwID0gJzEwcHgnO1xuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzIwcHgnO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU0RkREXHU1QjU4XHU2MzA5XHU5NEFFXG4gICAgICAgIGNvbnN0IHNhdmVCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdcdTRGRERcdTVCNTgnLFxuICAgICAgICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICAgICAgfSk7XG4gICAgICAgIHNhdmVCdXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWludGVyYWN0aXZlLWFjY2VudCknO1xuICAgICAgICBzYXZlQnV0dG9uLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtb24tYWNjZW50KSc7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTUzRDZcdTZEODhcdTYzMDlcdTk0QUVcbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnXHU1M0Q2XHU2RDg4J1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NEZERFx1NUI1OFx1NjMwOVx1OTRBRVx1NzBCOVx1NTFGQlx1NEU4Qlx1NEVGNlxuICAgICAgICBzYXZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3VGV4dCA9IHRleHRBcmVhLnZhbHVlLnRyaW0oKTtcbiAgICAgICAgICAgIGlmICghbmV3VGV4dCkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NTkwN1x1NkNFOFx1NTE4NVx1NUJCOVx1NEUwRFx1ODBGRFx1NEUzQVx1N0E3QScpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU2NkY0XHU2NUIwXHU2RDg4XHU2MDZGXHU1MTg1XHU1QkI5XG4gICAgICAgICAgICBtZXNzYWdlRGF0YS5tZXNzYWdlc1tpbmRleF0udGV4dCA9IG5ld1RleHQ7XG4gICAgICAgICAgICBtZXNzYWdlRGF0YS5tZXNzYWdlc1tpbmRleF0udGltZXN0YW1wID0gbmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTRGRERcdTVCNThcdThCQkVcdTdGNkVcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTUyMzdcdTY1QjBcdTg5QzZcdTU2RkVcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaFZpZXcoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU1MTczXHU5NUVEXHU2QTIxXHU2MDAxXHU2ODQ2XG4gICAgICAgICAgICBtb2RhbC5jbG9zZSgpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1OTA3XHU2Q0U4XHU1REYyXHU2NkY0XHU2NUIwJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU1M0Q2XHU2RDg4XHU2MzA5XHU5NEFFXHU3MEI5XHU1MUZCXHU0RThCXHU0RUY2XG4gICAgICAgIGNhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIG1vZGFsLmNsb3NlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU3ODZFXHU0RkREXHU1MTg1XHU1QkI5XHU4OEFCXHU4QkJFXHU3RjZFXG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGV4dEFyZWEudmFsdWUgPSBtZXNzYWdlLnRleHQ7XG4gICAgICAgICAgICB0ZXh0QXJlYS5mb2N1cygpO1xuICAgICAgICB9LCAwKTtcbiAgICAgICAgXG4gICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICB9XG5cbiAgICAvLyBcdTY1QjBcdTU4OUVcdUZGMUFcdTU5MDRcdTc0MDZcdTUyMjBcdTk2NjRcdTY0Q0RcdTRGNUNcbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZURlbGV0ZShcbiAgICAgICAgZTogTW91c2VFdmVudCxcbiAgICAgICAgaW5kZXg6IG51bWJlcixcbiAgICAgICAgbWVzc2FnZURhdGE6IE1lc3NhZ2VEYXRhLFxuICAgICAgICBjYWxsb3V0SWQ6IHN0cmluZ1xuICAgICkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgbWVzc2FnZURhdGEubWVzc2FnZXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTZEODhcdTYwNkZcdThCQTFcdTY1NzBcbiAgICAgICAgdGhpcy51cGRhdGVNZXNzYWdlQ291bnQoY2FsbG91dElkLCBtZXNzYWdlRGF0YS5tZXNzYWdlcy5sZW5ndGgpO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU1MjM3XHU2NUIwXHU4OUM2XHU1NkZFXG4gICAgICAgIHRoaXMucmVmcmVzaFZpZXcoKTtcbiAgICAgICAgbmV3IE5vdGljZSgnXHU2RDg4XHU2MDZGXHU1REYyXHU1MjIwXHU5NjY0Jyk7XG4gICAgfVxuXG4gICAgLy8gXHU2NUIwXHU1ODlFXHVGRjFBXHU2NkY0XHU2NUIwXHU2RDg4XHU2MDZGXHU4QkExXHU2NTcwXG4gICAgcHJpdmF0ZSB1cGRhdGVNZXNzYWdlQ291bnQoY2FsbG91dElkOiBzdHJpbmcsIGNvdW50OiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgYWN0aXZlVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICAgIGlmICghYWN0aXZlVmlldykgcmV0dXJuO1xuXG4gICAgICAgIGNvbnN0IGNhbGxvdXRzID0gYWN0aXZlVmlldy5jb250ZW50RWwucXVlcnlTZWxlY3RvckFsbCgnLmNhbGxvdXQnKTtcbiAgICAgICAgY2FsbG91dHMuZm9yRWFjaChjYWxsb3V0ID0+IHtcbiAgICAgICAgICAgIGlmIChjYWxsb3V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHRoaXMuZ2V0Q2FsbG91dElkRnJvbUVsZW1lbnQoY2FsbG91dCk7XG4gICAgICAgICAgICAgICAgaWYgKGlkID09PSBjYWxsb3V0SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY291bnRTcGFuID0gY2FsbG91dC5xdWVyeVNlbGVjdG9yKCcuY2FsbG91dC1tZXNzYWdlLWNvdW50Jyk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudFNwYW4pIGNvdW50U3Bhbi50ZXh0Q29udGVudCA9IGNvdW50LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBcdTVERTVcdTUxNzdcdTY1QjlcdTZDRDVcdUZGMUFcdTUyMUJcdTVFRkFcdTYzMDlcdTk0QUVcbiAgICBwcml2YXRlIGNyZWF0ZUJ1dHRvbihjb250YWluZXI6IEhUTUxFbGVtZW50LCB0ZXh0OiBzdHJpbmcsIGNvbG9yOiBzdHJpbmcpOiBIVE1MQnV0dG9uRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgdGV4dCxcbiAgICAgICAgICAgIGNsczogYGNhbGxvdXQtbWVzc2FnZS0ke3RleHQudG9Mb3dlckNhc2UoKX0tYnV0dG9uYFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIE9iamVjdC5hc3NpZ24oYnV0dG9uLnN0eWxlLCB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGNvbG9yLFxuICAgICAgICAgICAgY29sb3I6ICcjZmZmZmZmJyxcbiAgICAgICAgICAgIGJvcmRlcjogJ25vbmUnLFxuICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnNHB4JyxcbiAgICAgICAgICAgIHBhZGRpbmc6ICc0cHggOHB4JyxcbiAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgICAgICAgbWFyZ2luUmlnaHQ6IHRleHQgPT09ICdcdTdGMTZcdThGOTEnID8gJzhweCcgOiAnMCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGJ1dHRvbjtcbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dFbXB0eU1lc3NhZ2UobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgICAgIC8vIFx1NTk4Mlx1Njc5Q1x1NjYyRlx1NTM1NVx1NEUyQVx1NkEyMVx1NUYwRlx1NEUxNFx1NkNBMVx1NjcwOVx1OTAwOVx1NjJFOSBDYWxsb3V0XHVGRjBDXHU1M0VBXHU2NjNFXHU3OTNBXHU5MDFBXHU3N0U1XHVGRjBDXHU0RTBEXHU2NjNFXHU3OTNBXHU5NzYyXHU2NzdGXHU2NTg3XHU1QjU3XG4gICAgICAgIGlmICh0aGlzLnZpZXdNb2RlID09PSAnc2luZ2xlJyAmJiAhdGhpcy5jdXJyZW50Q2FsbG91dElkKSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdcdTcwQjlcdTUxRkIgQ2FsbG91dCBcdTUzRjNcdTRFMEFcdTg5RDJcdTc2ODRcdTY1NzBcdTVCNTdcdTY3NjVcdTY3RTVcdTc3MEJcdTUzNTVcdTRFMkEgQ2FsbG91dCBcdTc2ODRcdTU5MDdcdTZDRTgnKTtcbiAgICAgICAgICAgIHJldHVybjsgLy8gXHU3NkY0XHU2M0E1XHU4RkQ0XHU1NkRFXHVGRjBDXHU0RTBEXHU2NjNFXHU3OTNBXHU5NzYyXHU2NzdGXHU2NTg3XHU1QjU3XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFx1NTE3Nlx1NEVENlx1NjBDNVx1NTFCNVx1RkYwOFx1NTk4Mlx1NkNBMVx1NjcwOVx1NTkwN1x1NkNFOFx1N0I0OVx1RkYwOVx1NjI0RFx1NjYzRVx1NzkzQVx1OTc2Mlx1Njc3Rlx1NjU4N1x1NUI1N1xuICAgICAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICAgIGNsczogJ2NhbGxvdXQtbWVzc2FnZS1lbXB0eScsXG4gICAgICAgICAgICB0ZXh0OiBtZXNzYWdlXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0Q2FsbG91dENvbmZpZ0Zvck1lc3NhZ2UoY2FsbG91dElkOiBzdHJpbmcpOiBDYWxsb3V0Q29uZmlnIHtcbiAgICAgICAgLy8gXHU0RUNFXHU1RjUzXHU1MjREXHU1NzNBXHU2NjZGXHU0RTJEXHU4M0I3XHU1M0Q2IENhbGxvdXQgXHU5MTREXHU3RjZFXG4gICAgICAgIGNvbnN0IGN1cnJlbnRTY2VuZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnNjZW5lcy5maW5kKFxuICAgICAgICAgICAgc2NlbmUgPT4gc2NlbmUuaWQgPT09IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1cnJlbnRTY2VuZUlkXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGN1cnJlbnRTY2VuZSkge1xuICAgICAgICAgICAgLy8gXHU0RUNFIGNhbGxvdXRJZCBcdTRFMkRcdTgzQjdcdTUzRDZcdTVCRjlcdTVFOTRcdTc2ODQgQ2FsbG91dCBcdTUxODVcdTVCQjlcbiAgICAgICAgICAgIGNvbnN0IG1hcmtkb3duVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICAgICAgICBpZiAobWFya2Rvd25WaWV3KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY2FsbG91dHMgPSBtYXJrZG93blZpZXcuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYWxsb3V0Jyk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBjYWxsb3V0IG9mIEFycmF5LmZyb20oY2FsbG91dHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjYWxsb3V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy5wbHVnaW4uZ2V0Q2FsbG91dElkKGNhbGxvdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkID09PSBjYWxsb3V0SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTgzQjdcdTUzRDYgQ2FsbG91dCBcdTc2ODRcdTY4MDdcdTk4OThcdTY1ODdcdTY3MkNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0aXRsZUVsID0gY2FsbG91dC5xdWVyeVNlbGVjdG9yKCcuY2FsbG91dC10aXRsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aXRsZUVsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlVGV4dCA9IHRpdGxlRWwudGV4dENvbnRlbnQgfHwgJyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTcyOFx1NUY1M1x1NTI0RFx1NTczQVx1NjY2Rlx1NzY4NFx1OTE0RFx1N0Y2RVx1NEUyRFx1NjdFNVx1NjI3RVx1NTMzOVx1OTE0RFx1NzY4NCBDYWxsb3V0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IGN1cnJlbnRTY2VuZS5jYWxsb3V0cy5maW5kKGMgPT4gdGl0bGVUZXh0LmluY2x1ZGVzKGMubmFtZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29uZmlnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBcdTU5ODJcdTY3OUNcdTZDQTFcdTY3MDlcdTYyN0VcdTUyMzBcdTUzMzlcdTkxNERcdTc2ODRcdTkxNERcdTdGNkVcdUZGMENcdThGRDRcdTU2REVcdTVGNTNcdTUyNERcdTU3M0FcdTY2NkZcdTc2ODRcdTdCMkNcdTRFMDBcdTRFMkFcdTkxNERcdTdGNkVcdTYyMTZcdTlFRDhcdThCQTRcdTkxNERcdTdGNkVcbiAgICAgICAgcmV0dXJuIGN1cnJlbnRTY2VuZT8uY2FsbG91dHNbMF0gfHwgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NlbmVzWzBdLmNhbGxvdXRzWzBdO1xuICAgIH1cblxuICAgIHByaXZhdGUgc2Nyb2xsVG9DYWxsb3V0KGNhbGxvdXRJZDogc3RyaW5nKSB7XG4gICAgICAgIGNvbnN0IG1hcmtkb3duVmlldyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVWaWV3T2ZUeXBlKE1hcmtkb3duVmlldyk7XG4gICAgICAgIGlmICghbWFya2Rvd25WaWV3KSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgY2FsbG91dHMgPSBtYXJrZG93blZpZXcuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYWxsb3V0Jyk7XG4gICAgICAgIGZvciAoY29uc3QgY2FsbG91dCBvZiBBcnJheS5mcm9tKGNhbGxvdXRzKSkge1xuICAgICAgICAgICAgaWYgKGNhbGxvdXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGlkID0gdGhpcy5nZXRDYWxsb3V0SWRGcm9tRWxlbWVudChjYWxsb3V0KTtcbiAgICAgICAgICAgICAgICBpZiAoaWQgPT09IGNhbGxvdXRJZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBcdTlBRDhcdTRFQUVcdTY2M0VcdTc5M0FcdTYyN0VcdTUyMzBcdTc2ODQgY2FsbG91dFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZ2hsaWdodENhbGxvdXQoY2FsbG91dCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFx1NkVEQVx1NTJBOFx1NTIzMCBjYWxsb3V0XG4gICAgICAgICAgICAgICAgICAgIGNhbGxvdXQuc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnY2VudGVyJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBoaWdobGlnaHRDYWxsb3V0KGNhbGxvdXQ6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNhbGxvdXQuYWRkQ2xhc3MoJ2NhbGxvdXQtaGlnaGxpZ2h0Jyk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgY2FsbG91dC5yZW1vdmVDbGFzcygnY2FsbG91dC1oaWdobGlnaHQnKTtcbiAgICAgICAgfSwgMjAwMCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhZGp1c3RDb2xvcihjb2xvcjogc3RyaW5nLCBvcGFjaXR5OiBudW1iZXIpOiBzdHJpbmcge1xuICAgICAgICBpZiAoY29sb3Iuc3RhcnRzV2l0aCgnIycpKSB7XG4gICAgICAgICAgICBjb25zdCByID0gcGFyc2VJbnQoY29sb3Iuc2xpY2UoMSwgMyksIDE2KTtcbiAgICAgICAgICAgIGNvbnN0IGcgPSBwYXJzZUludChjb2xvci5zbGljZSgzLCA1KSwgMTYpO1xuICAgICAgICAgICAgY29uc3QgYiA9IHBhcnNlSW50KGNvbG9yLnNsaWNlKDUsIDcpLCAxNik7XG4gICAgICAgICAgICByZXR1cm4gYHJnYmEoJHtyfSwgJHtnfSwgJHtifSwgJHtvcGFjaXR5fSlgO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb2xvcjtcbiAgICB9XG5cbiAgICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xuICAgICAgICByZXR1cm4gQ0FMTF9PVVRfTUVTU0FHRV9WSUVXO1xuICAgIH1cblxuICAgIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XG4gICAgICAgIHJldHVybiAnQ2FsbG91dCBcdTU5MDdcdTZDRTgnO1xuICAgIH1cblxuICAgIGdldEljb24oKTogc3RyaW5nIHtcbiAgICAgICAgcmV0dXJuICdtZXNzYWdlLWNpcmNsZSc7XG4gICAgfVxuXG4gICAgLy8gXHU2REZCXHU1MkEwXHU2NUIwXHU2NUI5XHU2Q0Q1XHU0RUU1XHU2NTJGXHU2MzAxXHU1QkZDXHU4MjJBXG4gICAgbmF2aWdhdGlvbiA9IHRydWU7XG5cbiAgICAvLyBcdTZERkJcdTUyQTBcdTVCRkNcdTUxRkEgUERGIFx1NjVCOVx1NkNENVxuICAgIHByaXZhdGUgYXN5bmMgZXhwb3J0VG9QREYoKSB7XG4gICAgICAgIGlmICghKGF3YWl0IHRoaXMucGx1Z2luLmNoZWNrQWN0aXZhdGlvbigpKSkgcmV0dXJuO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU5ODg0XHU4OUM4XHU1QkI5XHU1NjY4XG4gICAgICAgICAgICBjb25zdCBwcmV2aWV3Q29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgcHJldmlld0NvbnRlbnQuY2xhc3NOYW1lID0gJ2V4cG9ydC1wcmV2aWV3LWNvbnRhaW5lcic7XG5cbiAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NjYzRVx1NzkzQVx1NzY4NFx1NkQ4OFx1NjA2RlxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tZXNzYWdlcztcbiAgICAgICAgICAgIGxldCBoYXNDb250ZW50ID0gZmFsc2U7XG5cbiAgICAgICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1ODlDNlx1NTZGRVx1NEUyRFx1NjYzRVx1NzkzQVx1NzY4NFx1NkQ4OFx1NjA2RlxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZXNUb1Nob3cgPSBBcnJheS5mcm9tKHRoaXMubWVzc2FnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuY2FsbG91dC1tZXNzYWdlLWl0ZW0nKSkubWFwKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlRWwgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5jYWxsb3V0LXRpdGxlLXRleHQnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50RWwgPSBpdGVtLnF1ZXJ5U2VsZWN0b3IoJy5jYWxsb3V0LW1lc3NhZ2UtY29udGVudCcpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVFbCA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLmNhbGxvdXQtbWVzc2FnZS10aW1lc3RhbXAnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjb2xvciA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGl0ZW0pLmJvcmRlckxlZnRDb2xvcjtcblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZUVsPy50ZXh0Q29udGVudCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogY29udGVudEVsPy50ZXh0Q29udGVudCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgdGltZTogdGltZUVsPy50ZXh0Q29udGVudCB8fCAnJyxcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6IGNvbG9yXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBpZiAobWVzc2FnZXNUb1Nob3cubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2Q0ExXHU2NzA5XHU1M0VGXHU1QkZDXHU1MUZBXHU3Njg0IENhbGxvdXQgXHU1OTA3XHU2Q0U4Jyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTVCRkNcdTUxRkFcdTUxODVcdTVCQjlcbiAgICAgICAgICAgIG1lc3NhZ2VzVG9TaG93LmZvckVhY2gobWVzc2FnZSA9PiB7XG4gICAgICAgICAgICAgICAgaGFzQ29udGVudCA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBjYWxsb3V0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgY2FsbG91dERpdi5jbGFzc05hbWUgPSAnY2FsbG91dCc7XG4gICAgICAgICAgICAgICAgY2FsbG91dERpdi5zdHlsZS5ib3JkZXJMZWZ0Q29sb3IgPSBtZXNzYWdlLmNvbG9yO1xuICAgICAgICAgICAgICAgIGNhbGxvdXREaXYuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gdGhpcy5hZGp1c3RDb2xvcihtZXNzYWdlLmNvbG9yLCAwLjEpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgdGl0bGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICB0aXRsZURpdi5jbGFzc05hbWUgPSAnY2FsbG91dC10aXRsZSc7XG4gICAgICAgICAgICAgICAgdGl0bGVEaXYuc3R5bGUuY29sb3IgPSBtZXNzYWdlLmNvbG9yO1xuICAgICAgICAgICAgICAgIHRpdGxlRGl2LnRleHRDb250ZW50ID0gbWVzc2FnZS50aXRsZTtcbiAgICAgICAgICAgICAgICBjYWxsb3V0RGl2LmFwcGVuZENoaWxkKHRpdGxlRGl2KTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBjb250ZW50RGl2LmNsYXNzTmFtZSA9ICdjYWxsb3V0LWNvbnRlbnQnO1xuICAgICAgICAgICAgICAgIGNvbnRlbnREaXYudGV4dENvbnRlbnQgPSBtZXNzYWdlLmNvbnRlbnQ7XG4gICAgICAgICAgICAgICAgY2FsbG91dERpdi5hcHBlbmRDaGlsZChjb250ZW50RGl2KTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICB0aW1lRGl2LmNsYXNzTmFtZSA9ICdjYWxsb3V0LXRpbWVzdGFtcCc7XG4gICAgICAgICAgICAgICAgdGltZURpdi50ZXh0Q29udGVudCA9IG1lc3NhZ2UudGltZTtcbiAgICAgICAgICAgICAgICBjYWxsb3V0RGl2LmFwcGVuZENoaWxkKHRpbWVEaXYpO1xuXG4gICAgICAgICAgICAgICAgcHJldmlld0NvbnRlbnQuYXBwZW5kQ2hpbGQoY2FsbG91dERpdik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU5ODg0XHU4OUM4XHU2QTIxXHU2MDAxXHU2ODQ2XG4gICAgICAgICAgICBjb25zdCBwcmV2aWV3TW9kYWwgPSBuZXcgTW9kYWwodGhpcy5hcHApO1xuICAgICAgICAgICAgcHJldmlld01vZGFsLnRpdGxlRWwuc2V0VGV4dCgnXHU1QkZDXHU1MUZBXHU5ODg0XHU4OUM4Jyk7XG4gICAgICAgICAgICBwcmV2aWV3TW9kYWwuY29udGVudEVsLmFkZENsYXNzKCdleHBvcnQtcHJldmlldy1tb2RhbCcpO1xuXG4gICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTRFMDBcdTRFMkFcdTY1QjBcdTc2ODRcdTk4ODRcdTg5QzhcdTVCQjlcdTU2NjhcdUZGMENcdTc2RjRcdTYzQTVcdTU5MERcdTUyMzZcdTVGNTNcdTUyNEQgdmlldyBcdTc2ODRcdTUxODVcdTVCQjlcdTU0OENcdTY4MzdcdTVGMEZcbiAgICAgICAgICAgIGNvbnN0IHByZXZpZXdDb250YWluZXIgPSBwcmV2aWV3TW9kYWwuY29udGVudEVsLmNyZWF0ZURpdignZXhwb3J0LXByZXZpZXctY29udGFpbmVyJyk7XG4gICAgICAgICAgICBwcmV2aWV3Q29udGFpbmVyLnN0eWxlLm1heEhlaWdodCA9ICc3MHZoJztcbiAgICAgICAgICAgIHByZXZpZXdDb250YWluZXIuc3R5bGUub3ZlcmZsb3cgPSAnYXV0byc7XG4gICAgICAgICAgICBwcmV2aWV3Q29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAnMjBweCc7XG4gICAgICAgICAgICBwcmV2aWV3Q29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpJztcbiAgICAgICAgICAgIHByZXZpZXdDb250YWluZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzhweCc7XG4gICAgICAgICAgICBwcmV2aWV3Q29udGFpbmVyLnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpJztcblxuICAgICAgICAgICAgLy8gXHU3NkY0XHU2M0E1XHU1MTRCXHU5Njg2XHU1RjUzXHU1MjREXHU2RDg4XHU2MDZGXHU1QkI5XHU1NjY4XHU3Njg0XHU1MTg1XHU1QkI5XG4gICAgICAgICAgICBjb25zdCBjbG9uZWRNZXNzYWdlcyA9IEFycmF5LmZyb20odGhpcy5tZXNzYWdlQ29udGFpbmVyLmNoaWxkcmVuKS5tYXAoY2hpbGQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNsb25lID0gKGNoaWxkIGFzIEhUTUxFbGVtZW50KS5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gXHU3OUZCXHU5NjY0XHU3RjE2XHU4RjkxXHU1NDhDXHU1MjIwXHU5NjY0XHU2MzA5XHU5NEFFXG4gICAgICAgICAgICAgICAgY29uc3QgYnV0dG9ucyA9IGNsb25lLnF1ZXJ5U2VsZWN0b3IoJy5jYWxsb3V0LW1lc3NhZ2UtYnV0dG9ucycpO1xuICAgICAgICAgICAgICAgIGlmIChidXR0b25zKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbnMucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiBjbG9uZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBcdTUzRDZcdTVGNTNcdTUyNERcdTdCMTRcdThCQjBcdTY4MDdcdTk4OThcbiAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xuICAgICAgICAgICAgaWYgKGFjdGl2ZUZpbGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0aXRsZUNvbnRhaW5lciA9IHByZXZpZXdDb250YWluZXIuY3JlYXRlRGl2KCdub3RlLXRpdGxlLWNvbnRhaW5lcicpO1xuICAgICAgICAgICAgICAgIHRpdGxlQ29udGFpbmVyLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICAgICAgICAgIHRpdGxlQ29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAnMTVweCAwJztcbiAgICAgICAgICAgICAgICB0aXRsZUNvbnRhaW5lci5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMjVweCc7XG4gICAgICAgICAgICAgICAgdGl0bGVDb250YWluZXIuc3R5bGUuYm9yZGVyQm90dG9tID0gJzJweCBzb2xpZCB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpJztcblxuICAgICAgICAgICAgICAgIGNvbnN0IHRpdGxlVGV4dCA9IHRpdGxlQ29udGFpbmVyLmNyZWF0ZUVsKCdoMicsIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYWN0aXZlRmlsZS5iYXNlbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAnbm90ZS10aXRsZSdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aXRsZVRleHQuc3R5bGUubWFyZ2luID0gJzAnO1xuICAgICAgICAgICAgICAgIHRpdGxlVGV4dC5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LWFjY2VudCknO1xuICAgICAgICAgICAgICAgIHRpdGxlVGV4dC5zdHlsZS5mb250U2l6ZSA9ICcxLjVlbSc7XG4gICAgICAgICAgICAgICAgdGl0bGVUZXh0LnN0eWxlLmZvbnRXZWlnaHQgPSAnNjAwJztcbiAgICAgICAgICAgICAgICB0aXRsZVRleHQuc3R5bGUubGV0dGVyU3BhY2luZyA9ICcwLjVweCc7XG4gICAgICAgICAgICAgICAgdGl0bGVUZXh0LnN0eWxlLmZvbnRGYW1pbHkgPSAndmFyKC0tZm9udC1pbnRlcmZhY2UpJztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1MTRCXHU5Njg2XHU3Njg0XHU2RDg4XHU2MDZGXHU1MjMwXHU5ODg0XHU4OUM4XHU1QkI5XG4gICAgICAgICAgICBjbG9uZWRNZXNzYWdlcy5mb3JFYWNoKGNsb25lID0+IHtcbiAgICAgICAgICAgICAgICBwcmV2aWV3Q29udGFpbmVyLmFwcGVuZENoaWxkKGNsb25lKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTYzMDlcdTk0QUVcdTVCQjlcdTU2NjhcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IHByZXZpZXdNb2RhbC5jb250ZW50RWwuY3JlYXRlRGl2KCdleHBvcnQtcHJldmlldy1idXR0b25zJyk7XG4gICAgICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzIwcHgnO1xuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnZmxleC1lbmQnO1xuICAgICAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmdhcCA9ICcxMHB4JztcblxuICAgICAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1QkZDXHU1MUZBXHU2MzA5XHU5NEFFXG4gICAgICAgICAgICBjb25zdCBleHBvcnRCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiAnXHU3ODZFXHU4QkE0XHU1QkZDXHU1MUZBJyxcbiAgICAgICAgICAgICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTNENlx1NkQ4OFx1NjMwOVx1OTRBRVxuICAgICAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogJ1x1NTNENlx1NkQ4OCdcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBcdTRGRUVcdTY1MzlcdTVCRkNcdTUxRkFcdTYzMDlcdTk0QUVcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcdUZGMENcdTRGN0ZcdTc1MjhcdTUxNEJcdTk2ODZcdTc2ODRcdTUxODVcdTVCQjlcdTc1MUZcdTYyMTAgUERGXG4gICAgICAgICAgICBleHBvcnRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZW1vdGUgPSByZXF1aXJlKCdAZWxlY3Ryb24vcmVtb3RlJyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVtb3RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdTY1RTBcdTZDRDVcdThCQkZcdTk1RUVcdTdDRkJcdTdFREZcdTVCRjlcdThCRERcdTY4NDYnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZmlsZVBhdGgsIGNhbmNlbGVkIH0gPSBhd2FpdCByZW1vdGUuZGlhbG9nLnNob3dTYXZlRGlhbG9nKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnXHU1QkZDXHU1MUZBIFBERicsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0UGF0aDogJ0NhbGxvdXRcdTdCMTRcdThCQjAucGRmJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcnM6IFt7IG5hbWU6ICdQREYgXHU2NTg3XHU0RUY2JywgZXh0ZW5zaW9uczogWydwZGYnXSB9XVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FuY2VsZWQgfHwgIWZpbGVQYXRoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3aW4gPSBuZXcgcmVtb3RlLkJyb3dzZXJXaW5kb3coe1xuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDgwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogNjAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hvdzogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICB3ZWJQcmVmZXJlbmNlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVJbnRlZ3JhdGlvbjogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAvLyBcdTRGN0ZcdTc1MjhcdTUxNEJcdTk2ODZcdTc2ODRcdTUxODVcdTVCQjlcdTUyMUJcdTVFRkFcdTYyNTNcdTUzNzBcdTUxODVcdTVCQjlcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJpbnRDb250ZW50ID0gYFxuICAgICAgICAgICAgICAgICAgICAgICAgPGh0bWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGhlYWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0aXRsZT5DYWxsb3V0IFx1NTkwN1x1NkNFOFx1NUJGQ1x1NTFGQTwvdGl0bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHlsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5nZXRPYnNpZGlhblN0eWxlcygpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaGVhZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8Ym9keT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImV4cG9ydC1wcmV2aWV3LWNvbnRhaW5lclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtwcmV2aWV3Q29udGFpbmVyLmlubmVySFRNTH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9ib2R5PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9odG1sPlxuICAgICAgICAgICAgICAgICAgICBgO1xuXG4gICAgICAgICAgICAgICAgICAgIHdpbi5sb2FkVVJMKCdkYXRhOnRleHQvaHRtbDtjaGFyc2V0PXV0Zi04LCcgKyBlbmNvZGVVUklDb21wb25lbnQocHJpbnRDb250ZW50KSk7XG5cbiAgICAgICAgICAgICAgICAgICAgd2luLndlYkNvbnRlbnRzLm9uKCdkaWQtZmluaXNoLWxvYWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB3aW4ud2ViQ29udGVudHMucHJpbnRUb1BERih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbnNUeXBlOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmludEJhY2tncm91bmQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaW50U2VsZWN0aW9uT25seTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhbmRzY2FwZTogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmUoJ2ZzJykud3JpdGVGaWxlKGZpbGVQYXRoLCBkYXRhLCAoZXJyb3I6IEVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignUERGIFx1NUJGQ1x1NTFGQVx1NTkzMVx1OEQyNTonLCBlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdQREYgXHU1QkZDXHU1MUZBXHU1OTMxXHU4RDI1Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdQREYgXHU1QkZDXHU1MUZBXHU2MjEwXHU1MjlGXHVGRjAxJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1BERiBcdTc1MUZcdTYyMTBcdTU5MzFcdThEMjU6JywgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1BERiBcdTc1MUZcdTYyMTBcdTU5MzFcdThEMjUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW4uY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcHJldmlld01vZGFsLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXhwb3J0IGVycm9yOicsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1QkZDXHU1MUZBIFBERiBcdTU5MzFcdThEMjUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIHByZXZpZXdNb2RhbC5jbG9zZSgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHByZXZpZXdNb2RhbC5vcGVuKCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFeHBvcnQgZXJyb3I6JywgZXJyb3IpO1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1QkZDXHU1MUZBIFBERiBcdTU5MzFcdThEMjUnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1NkRGQlx1NTJBMFx1ODNCN1x1NTNENiBPYnNpZGlhbiBcdTY4MzdcdTVGMEZcdTc2ODRcdThGODVcdTUyQTlcdTY1QjlcdTZDRDVcbiAgICBwcml2YXRlIGdldE9ic2lkaWFuU3R5bGVzKCk6IHN0cmluZyB7XG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1NEUzQlx1OTg5OFx1NzY4NFx1NjI0MFx1NjcwOSBDU1MgXHU1M0Q4XHU5MUNGXG4gICAgICAgIGNvbnN0IHN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7XG4gICAgICAgIGxldCBjc3NWYXJzID0gJzpyb290IHtcXG4nO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgcHJvcCA9IHN0eWxlc1tpXTtcbiAgICAgICAgICAgIGlmIChwcm9wLnN0YXJ0c1dpdGgoJy0tJykpIHtcbiAgICAgICAgICAgICAgICBjc3NWYXJzICs9IGAgICR7cHJvcH06ICR7c3R5bGVzLmdldFByb3BlcnR5VmFsdWUocHJvcCl9O1xcbmA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY3NzVmFycyArPSAnfVxcbic7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1RkM1XHU4OTgxXHU3Njg0XHU2ODM3XHU1RjBGXHU4OUM0XHU1MjE5XG4gICAgICAgIHJldHVybiBgXG4gICAgICAgICAgICAke2Nzc1ZhcnN9XG4gICAgICAgICAgICBib2R5IHtcbiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogdmFyKC0tZm9udC10ZXh0KTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMjBweDtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuZXhwb3J0LXByZXZpZXctY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDgwMHB4O1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMCBhdXRvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLmNhbGxvdXQtbWVzc2FnZS1pdGVtIHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDEwcHggMDtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAuY2FsbG91dC1tZXNzYWdlLXRpdGxlIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5jYWxsb3V0LW1lc3NhZ2UtY29udGVudCB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiA4cHggMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC5jYWxsb3V0LW1lc3NhZ2UtdGltZXN0YW1wIHtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDAuOGVtO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICAgICAgICB9XG4gICAgICAgIGA7XG4gICAgfVxuXG4gICAgLy8gXHU1NzI4IENhbGxvdXRNZXNzYWdlVmlldyBcdTdDN0JcdTRFMkRcdTZERkJcdTUyQTBcdTY2M0VcdTc5M0FcdTdCMTRcdThCQjBcdTU0MERcdTc5RjBcdTc2ODRcdTY1QjlcdTZDRDVcbiAgICBwcml2YXRlIGRpc3BsYXlOb3RlVGl0bGUoKSB7XG4gICAgICAgIC8vIFx1NkUwNVx1OTY2NFx1NURGMlx1NjcwOVx1NzY4NFx1NjgwN1x1OTg5OFxuICAgICAgICBjb25zdCBleGlzdGluZ1RpdGxlID0gdGhpcy5jb250YWluZXJFbC5xdWVyeVNlbGVjdG9yKCcubm90ZS10aXRsZS1jb250YWluZXInKTtcbiAgICAgICAgaWYgKGV4aXN0aW5nVGl0bGUpIHtcbiAgICAgICAgICAgIGV4aXN0aW5nVGl0bGUucmVtb3ZlKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTZEM0JcdTUyQThcdTc2ODRcdTdCMTRcdThCQjBcbiAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XG4gICAgICAgIGlmICghYWN0aXZlRmlsZSkgcmV0dXJuO1xuXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjgwN1x1OTg5OFx1NUJCOVx1NTY2OFxuICAgICAgICBjb25zdCB0aXRsZUNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyRWwuY3JlYXRlRGl2KCdub3RlLXRpdGxlLWNvbnRhaW5lcicpO1xuICAgICAgICB0aXRsZUNvbnRhaW5lci5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgdGl0bGVDb250YWluZXIuc3R5bGUucGFkZGluZyA9ICcxNXB4IDAnO1xuICAgICAgICB0aXRsZUNvbnRhaW5lci5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMjVweCc7XG4gICAgICAgIHRpdGxlQ29udGFpbmVyLnN0eWxlLmJvcmRlckJvdHRvbSA9ICcycHggc29saWQgdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50KSc7XG4gICAgICAgIHRpdGxlQ29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ3N0aWNreSc7XG4gICAgICAgIHRpdGxlQ29udGFpbmVyLnN0eWxlLnRvcCA9ICcwJztcbiAgICAgICAgdGl0bGVDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtcHJpbWFyeSknO1xuICAgICAgICB0aXRsZUNvbnRhaW5lci5zdHlsZS56SW5kZXggPSAnMSc7XG4gICAgICAgIHRpdGxlQ29udGFpbmVyLnN0eWxlLmJveFNoYWRvdyA9ICcwIDJweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpJztcblxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTY4MDdcdTk4OThcdTY1ODdcdTY3MkNcbiAgICAgICAgY29uc3QgdGl0bGVUZXh0ID0gdGl0bGVDb250YWluZXIuY3JlYXRlRWwoJ2gyJywge1xuICAgICAgICAgICAgdGV4dDogYWN0aXZlRmlsZS5iYXNlbmFtZSxcbiAgICAgICAgICAgIGNsczogJ25vdGUtdGl0bGUnXG4gICAgICAgIH0pO1xuICAgICAgICB0aXRsZVRleHQuc3R5bGUubWFyZ2luID0gJzAnO1xuICAgICAgICB0aXRsZVRleHQuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1hY2NlbnQpJztcbiAgICAgICAgdGl0bGVUZXh0LnN0eWxlLmZvbnRTaXplID0gJzEuNWVtJztcbiAgICAgICAgdGl0bGVUZXh0LnN0eWxlLmZvbnRXZWlnaHQgPSAnNjAwJztcbiAgICAgICAgdGl0bGVUZXh0LnN0eWxlLmxldHRlclNwYWNpbmcgPSAnMC41cHgnO1xuICAgICAgICB0aXRsZVRleHQuc3R5bGUuZm9udEZhbWlseSA9ICd2YXIoLS1mb250LWludGVyZmFjZSknO1xuXG4gICAgICAgIC8vIFx1NUMwNlx1NjgwN1x1OTg5OFx1NUJCOVx1NTY2OFx1NjNEMlx1NTE2NVx1NTIzMFx1NkQ4OFx1NjA2Rlx1NUJCOVx1NTY2OFx1NEU0Qlx1NTI0RFxuICAgICAgICBpZiAodGhpcy5tZXNzYWdlQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckVsLmluc2VydEJlZm9yZSh0aXRsZUNvbnRhaW5lciwgdGhpcy5tZXNzYWdlQ29udGFpbmVyKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1NkRGQlx1NTJBMCBnZXRDYWxsb3V0SWRGcm9tRWxlbWVudCBcdTY1QjlcdTZDRDVcbiAgICBwcml2YXRlIGdldENhbGxvdXRJZEZyb21FbGVtZW50KGNhbGxvdXQ6IEhUTUxFbGVtZW50KTogc3RyaW5nIHwgbnVsbCB7XG4gICAgICAgIGNvbnN0IHNwYW4gPSBjYWxsb3V0LnF1ZXJ5U2VsZWN0b3IoJ3NwYW5bZGF0YS1jYWxsb3V0LWlkXScpO1xuICAgICAgICBpZiAoc3Bhbikge1xuICAgICAgICAgICAgcmV0dXJuIHNwYW4uZ2V0QXR0cmlidXRlKCdkYXRhLWNhbGxvdXQtaWQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBcdTY1QjBcdTU4OUVcdUZGMUFcdTg5QzZcdTU2RkVcdTUyMzdcdTY1QjBcdTY1QjlcdTZDRDVcbiAgICBwcml2YXRlIHJlZnJlc2hWaWV3KCkge1xuICAgICAgICB0aGlzLm1lc3NhZ2VDb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgdGhpcy5kaXNwbGF5TWVzc2FnZXMoKTtcbiAgICB9XG5cbiAgICAvLyBcdTZERkJcdTUyQTBcdTY2RjRcdTY1QjBcdTYyNDBcdTY3MDlcdTc2RjhcdTUxNzNcdTZEODhcdTYwNkZcdThCQTFcdTY1NzBcdTc2ODRcdTY1QjlcdTZDRDVcbiAgICBwcml2YXRlIHVwZGF0ZUFsbENhbGxvdXRDb3VudHMoY2FsbG91dElkOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgbWFya2Rvd25WaWV3ID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcbiAgICAgICAgaWYgKCFtYXJrZG93blZpZXcpIHJldHVybjtcblxuICAgICAgICBjb25zdCBjYWxsb3V0cyA9IG1hcmtkb3duVmlldy5jb250ZW50RWwucXVlcnlTZWxlY3RvckFsbCgnLmNhbGxvdXQnKTtcbiAgICAgICAgY2FsbG91dHMuZm9yRWFjaChjYWxsb3V0ID0+IHtcbiAgICAgICAgICAgIGlmIChjYWxsb3V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHRoaXMucGx1Z2luLmdldENhbGxvdXRJZChjYWxsb3V0KTtcbiAgICAgICAgICAgICAgICBpZiAoaWQgPT09IGNhbGxvdXRJZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi51cGRhdGVDYWxsb3V0TWVzc2FnZUNvdW50KGNhbGxvdXQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG4vLyBcdThCQkVcdTdGNkVcdTk3NjJcdTc2ODRcdTdDN0JcdTUxNDFcdThCQjhcdTc1MjhcdTYyMzdcdThDMDNcdTY1NzRcdTYzRDJcdTRFRjZcdTc2ODRcdTdGNkVcbmNsYXNzIENhbGxvdXRNZXNzYWdlU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuICAgIHBsdWdpbjogQ2FsbG91dEV4dHJhTWVzc2FnZVBsdWdpbjtcbiAgICBwcml2YXRlIHNjZW5lRHJvcGRvd246IERyb3Bkb3duQ29tcG9uZW50O1xuICAgIHByaXZhdGUgc2NlbmVUYWJDb250YWluZXI6IEhUTUxFbGVtZW50O1xuICAgIHByaXZhdGUgc2NlbmVDb250ZW50Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcbiAgICBwcml2YXRlIGNsZWFudXBGdW5jdGlvbnM6IEFycmF5PCgpID0+IHZvaWQ+ID0gW107XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBDYWxsb3V0RXh0cmFNZXNzYWdlUGx1Z2luKSB7XG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgeyBjb250YWluZXJFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcblxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTk4NzZcdTkwRThcdTVCRkNcdTgyMkFcdTY4MEZcbiAgICAgICAgY29uc3QgbmF2Q29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCduYXYtY29udGFpbmVyJyk7XG4gICAgICAgIG5hdkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICBuYXZDb250YWluZXIuc3R5bGUuYm9yZGVyQm90dG9tID0gJzJweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xuICAgICAgICBuYXZDb250YWluZXIuc3R5bGUubWFyZ2luQm90dG9tID0gJzI0cHgnO1xuICAgICAgICBuYXZDb250YWluZXIuc3R5bGUucGFkZGluZyA9ICcwIDEwcHgnO1xuICAgICAgICBuYXZDb250YWluZXIuc3R5bGUuZ2FwID0gJzEwcHgnO1xuXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjgwN1x1N0I3RVxuICAgICAgICBjb25zdCB0YWJzID0gW1xuICAgICAgICAgICAgeyBpZDogJ2Jhc2ljJywgdGV4dDogJ1x1NTdGQVx1Nzg0MFx1OEJCRVx1N0Y2RScgfSxcbiAgICAgICAgICAgIHsgaWQ6ICdpY29uJywgdGV4dDogJ1x1NTZGRVx1NjgwN1x1ODhDNVx1OTk3MCcgfSxcbiAgICAgICAgICAgIHsgaWQ6ICdsaWNlbnNlJywgdGV4dDogJ1x1NjM4OFx1Njc0MycgfSxcbiAgICAgICAgICAgIHsgaWQ6ICdhYm91dCcsIHRleHQ6ICdcdTUxNzNcdTRFOEUnIH1cbiAgICAgICAgXTtcblxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTUxODVcdTVCQjlcdTVCQjlcdTU2NjhcbiAgICAgICAgY29uc3QgY29udGVudENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdignY29udGVudC1jb250YWluZXInKTtcbiAgICAgICAgY29uc3QgY29udGVudHM6IFJlY29yZDxzdHJpbmcsIEhUTUxEaXZFbGVtZW50PiA9IHtcbiAgICAgICAgICAgIGJhc2ljOiBjb250ZW50Q29udGFpbmVyLmNyZWF0ZURpdignYmFzaWMtc2V0dGluZ3MtY29udGVudCcpLFxuICAgICAgICAgICAgaWNvbjogY29udGVudENvbnRhaW5lci5jcmVhdGVEaXYoJ2ljb24tc2V0dGluZ3MtY29udGVudCcpLFxuICAgICAgICAgICAgbGljZW5zZTogY29udGVudENvbnRhaW5lci5jcmVhdGVEaXYoJ2xpY2Vuc2UtY29udGVudCcpLFxuICAgICAgICAgICAgYWJvdXQ6IGNvbnRlbnRDb250YWluZXIuY3JlYXRlRGl2KCdhYm91dC1jb250ZW50JylcbiAgICAgICAgfTtcblxuICAgICAgICAvLyBcdThCQkVcdTdGNkVcdTY4MDdcdTdCN0VcdTY4MzdcdTVGMEZcdTU0OENcdTcwQjlcdTUxRkJcdTRFOEJcdTRFRjZcbiAgICAgICAgdGFicy5mb3JFYWNoKHRhYiA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YWJCdXR0b24gPSBuYXZDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgICAgICB0ZXh0OiB0YWIudGV4dCxcbiAgICAgICAgICAgICAgICBjbHM6ICduYXYtdGFiJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRhYkJ1dHRvbi5zdHlsZS5wYWRkaW5nID0gJzhweCAxNnB4JztcbiAgICAgICAgICAgIHRhYkJ1dHRvbi5zdHlsZS5ib3JkZXIgPSAnbm9uZSc7XG4gICAgICAgICAgICB0YWJCdXR0b24uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzRweCA0cHggMCAwJztcbiAgICAgICAgICAgIHRhYkJ1dHRvbi5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xuICAgICAgICAgICAgdGFiQnV0dG9uLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgICAgIHRhYkJ1dHRvbi5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG4gICAgICAgICAgICB0YWJCdXR0b24uc3R5bGUuZm9udFNpemUgPSAnMTRweCc7XG4gICAgICAgICAgICB0YWJCdXR0b24uc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGFiQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gXHU5NjkwXHU4NUNGXHU2MjQwXHU2NzA5XHU1MTg1XHU1QkI5XG4gICAgICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyhjb250ZW50cykuZm9yRWFjaChjb250ZW50ID0+IGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJyk7XG4gICAgICAgICAgICAgICAgLy8gXHU2NjNFXHU3OTNBXHU1RjUzXHU1MjREXHU2ODA3XHU3QjdFXHU1MTg1XHU1QkI5XG4gICAgICAgICAgICAgICAgY29udGVudHNbdGFiLmlkXS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTY4MDdcdTdCN0VcdTY4MzdcdTVGMEZcbiAgICAgICAgICAgICAgICBuYXZDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLm5hdi10YWInKS5mb3JFYWNoKGVsID0+IHtcbiAgICAgICAgICAgICAgICAgICAgKGVsIGFzIEhUTUxFbGVtZW50KS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndHJhbnNwYXJlbnQnO1xuICAgICAgICAgICAgICAgICAgICAoZWwgYXMgSFRNTEVsZW1lbnQpLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtbXV0ZWQpJztcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICB0YWJCdXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KSc7XG4gICAgICAgICAgICAgICAgdGFiQnV0dG9uLnN0eWxlLmNvbG9yID0gJ3ZhcigtLXRleHQtYWNjZW50KSc7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTlFRDhcdThCQTRcdTY2M0VcdTc5M0FcdTU3RkFcdTc4NDBcdThCQkVcdTdGNkVcbiAgICAgICAgY29udGVudHMuYmFzaWMuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIG5hdkNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcubmF2LXRhYicpPy5jbGljaygpO1xuXG4gICAgICAgIC8vIFx1NkUzMlx1NjdEM1x1NTdGQVx1Nzg0MFx1OEJCRVx1N0Y2RVx1NTE4NVx1NUJCOVxuICAgICAgICB0aGlzLnJlbmRlckJhc2ljQ29udGVudChjb250ZW50cy5iYXNpYyk7XG5cbiAgICAgICAgLy8gXHU2RTMyXHU2N0QzXHU1NkZFXHU2ODA3XHU4QkJFXHU3RjZFXHU1MTg1XHU1QkI5XG4gICAgICAgIHRoaXMucmVuZGVySWNvblNldHRpbmdzKGNvbnRlbnRzLmljb24pO1xuXG4gICAgICAgIC8vIFx1NkUzMlx1NjdEM1x1NjM4OFx1Njc0M1x1NTE4NVx1NUJCOVxuICAgICAgICB0aGlzLnJlbmRlckxpY2Vuc2VDb250ZW50KGNvbnRlbnRzLmxpY2Vuc2UpO1xuXG4gICAgICAgIC8vIFx1NTE3M1x1NEU4RVx1NTE4NVx1NUJCOVxuICAgICAgICB0aGlzLnJlbmRlckFib3V0Q29udGVudChjb250ZW50cy5hYm91dCk7XG5cbiAgICAgICAgLy8gXHU1NzI4XHU5NzAwXHU4OTgxXHU4OUU2XHU1M0QxXHU3MEI5XHU1MUZCXHU0RThCXHU0RUY2XHU3Njg0XHU1NzMwXHU2NUI5XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBuYXZDb250YWluZXIucXVlcnlTZWxlY3RvcignLm5hdi10YWInKTtcbiAgICAgICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgZWxlbWVudC5jbGljaygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gXHU2RTMyXHU2N0QzXHU1NkZFXHU2ODA3XHU4QkJFXHU3RjZFXG4gICAgcHJpdmF0ZSByZW5kZXJJY29uU2V0dGluZ3MoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTU2RkVcdTY4MDdcdThCQkVcdTdGNkVcdTUzM0FcdTU3REZcbiAgICAgICAgY29uc3QgaWNvblNldHRpbmdzQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdignaWNvbi1zZXR0aW5ncy1jb250YWluZXInKTtcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTAgUHJpc20gXHU2ODM3XHU1RjBGXHU4QkJFXHU3RjZFXG4gICAgICAgIG5ldyBTZXR0aW5nKGljb25TZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTU0MkZcdTc1MjggQ2FsbG91dCBQcmlzbSBcdTY4MzdcdTVGMEYnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1NjYyRlx1NTQyNlx1NTQyRlx1NzUyOCBQcmlzbSBcdTY4MzdcdTVGMEZcdTdGOEVcdTUzMTYgQ2FsbG91dCcpXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7XG4gICAgICAgICAgICAgICAgdG9nZ2xlXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VQcmlzbVN0eWxlKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VQcmlzbVN0eWxlID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFx1NTIwN1x1NjM2MiBQcmlzbSBcdTY4MzdcdTVGMEZcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnRvZ2dsZVByaXNtU3R5bGUodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NUY1M1x1NTI0RFx1NEY3Rlx1NzUyOFx1NjgzN1x1NUYwRlxuICAgICAgICBuZXcgU2V0dGluZyhpY29uU2V0dGluZ3NDb250YWluZXIpXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHU1RjUzXHU1MjREXHU1NkZFXHU2ODA3XHU2ODM3XHU1RjBGJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdTkwMDlcdTYyRTlcdTg5ODFcdTRGN0ZcdTc1MjhcdTc2ODRcdTU2RkVcdTY4MDdcdTY4MzdcdTVGMEYnKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpY29ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgMTogJ1x1NjgzN1x1NUYwRjEnLFxuICAgICAgICAgICAgICAgICAgICAyOiAnXHU2ODM3XHU1RjBGMicsXG4gICAgICAgICAgICAgICAgICAgIDM6ICdcdTY4MzdcdTVGMEYzJyxcbiAgICAgICAgICAgICAgICAgICAgNDogJ1x1NjgzN1x1NUYwRjQnLFxuICAgICAgICAgICAgICAgICAgICA1OiAnXHU2ODM3XHU1RjBGNSdcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGljb25zKS5mb3JFYWNoKChbdmFsdWUsIG5hbWVdKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbih2YWx1ZSwgbmFtZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZHJvcGRvd24uc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvblNldHRpbmdzLnR5cGUudG9TdHJpbmcoKSk7XG4gICAgICAgICAgICAgICAgZHJvcGRvd24ub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmljb25TZXR0aW5ncy50eXBlID0gcGFyc2VJbnQodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ucmVmcmVzaEFsbEljb25zKCk7IC8vIFx1N0FDQlx1NTM3M1x1NTIzN1x1NjVCMFx1NjI0MFx1NjcwOVx1NTZGRVx1NjgwN1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGVQcmV2aWV3KCk7IC8vIFx1NjZGNFx1NjVCMFx1OTg4NFx1ODlDOFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU1NkZFXHU2ODA3XHU1OTI3XHU1QzBGXHU4QkJFXHU3RjZFXG4gICAgICAgIG5ldyBTZXR0aW5nKGljb25TZXR0aW5nc0NvbnRhaW5lcilcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTU2RkVcdTY4MDdcdTU5MjdcdTVDMEYnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1OEMwM1x1NjU3NFx1NTZGRVx1NjgwN1x1NzY4NFx1NTkyN1x1NUMwRlx1RkYwOFx1NTBDRlx1N0QyMFx1RkYwOScpXG4gICAgICAgICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiB7XG4gICAgICAgICAgICAgICAgc2xpZGVyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMTYsIDQ4LCAyKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvblNldHRpbmdzLnNpemUpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmljb25TZXR0aW5ncy5zaXplID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnJlZnJlc2hBbGxJY29ucygpOyAvLyBcdTZERkJcdTUyQTBcdThGRDlcdTg4NENcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVByZXZpZXcoKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTU2RkVcdTY4MDdcdTRGNERcdTdGNkVcdThCQkVcdTdGNkVcbiAgICAgICAgY29uc3QgcG9zaXRpb25Db250YWluZXIgPSBpY29uU2V0dGluZ3NDb250YWluZXIuY3JlYXRlRGl2KCdwb3NpdGlvbi1zZXR0aW5ncycpO1xuICAgICAgICBwb3NpdGlvbkNvbnRhaW5lci5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdcdTU2RkVcdTY4MDdcdTRGNERcdTdGNkVcdThDMDNcdTY1NzQnLCBjbHM6ICdzZXR0aW5nLWNhdGVnb3J5JyB9KTtcblxuICAgICAgICAvLyBcdTk4NzZcdTkwRThcdTRGNERcdTdGNkVcbiAgICAgICAgbmV3IFNldHRpbmcocG9zaXRpb25Db250YWluZXIpXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHU5ODc2XHU5MEU4XHU5NUY0XHU4REREJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdThDMDNcdTY1NzRcdTU2RkVcdTY4MDdcdThERERcdTc5QkJcdTk4NzZcdTkwRThcdTc2ODRcdThERERcdTc5QkJcdUZGMDhcdTUwQ0ZcdTdEMjBcdUZGMDknKVxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4ge1xuICAgICAgICAgICAgICAgIHNsaWRlclxuICAgICAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDAsIDMyLCAyKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvblNldHRpbmdzLnBvc2l0aW9uLnRvcClcbiAgICAgICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvblNldHRpbmdzLnBvc2l0aW9uLnRvcCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5yZWZyZXNoQWxsSWNvbnMoKTsgLy8gXHU2REZCXHU1MkEwXHU4RkQ5XHU4ODRDXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVQcmV2aWV3KCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU1M0YzXHU0RkE3XHU0RjREXHU3RjZFXG4gICAgICAgIG5ldyBTZXR0aW5nKHBvc2l0aW9uQ29udGFpbmVyKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1x1NTNGM1x1NEZBN1x1OTVGNFx1OERERCcpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU4QzAzXHU2NTc0XHU1NkZFXHU2ODA3XHU4REREXHU3OUJCXHU1M0YzXHU0RkE3XHU3Njg0XHU4REREXHU3OUJCXHVGRjA4XHU1MENGXHU3RDIwXHVGRjA5JylcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHtcbiAgICAgICAgICAgICAgICBzbGlkZXJcbiAgICAgICAgICAgICAgICAgICAgLnNldExpbWl0cyg4LCAxMDAsIDIpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uU2V0dGluZ3MucG9zaXRpb24ucmlnaHQpXG4gICAgICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmljb25TZXR0aW5ncy5wb3NpdGlvbi5yaWdodCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5yZWZyZXNoQWxsSWNvbnMoKTsgLy8gXHU2REZCXHU1MkEwXHU4RkQ5XHU4ODRDXG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVQcmV2aWV3KCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU5ODg0XHU4OUM4XHU1MzNBXHU1N0RGXG4gICAgICAgIGNvbnN0IHByZXZpZXdDb250YWluZXIgPSBpY29uU2V0dGluZ3NDb250YWluZXIuY3JlYXRlRGl2KCdpY29uLXByZXZpZXctY29udGFpbmVyJyk7XG4gICAgICAgIHByZXZpZXdDb250YWluZXIuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnXHU1NkZFXHU2ODA3XHU5ODg0XHU4OUM4JywgY2xzOiAnc2V0dGluZy1jYXRlZ29yeScgfSk7XG5cbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBIENhbGxvdXQgXHU5ODg0XHU4OUM4XG4gICAgICAgIGNvbnN0IGNhbGxvdXRQcmV2aWV3ID0gcHJldmlld0NvbnRhaW5lci5jcmVhdGVEaXYoJ2NhbGxvdXQnKTtcbiAgICAgICAgY2FsbG91dFByZXZpZXcuYWRkQ2xhc3MoJ2NhbGxvdXQnKTtcbiAgICAgICAgY2FsbG91dFByZXZpZXcuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgICBjYWxsb3V0UHJldmlldy5zdHlsZS5tYXJnaW4gPSAnMTBweCAwJztcblxuICAgICAgICAvLyBcdThCQkVcdTdGNkVcdTk4ODRcdTg5QzggQ2FsbG91dCBcdTc2ODQgQ1NTIFx1NTNEOFx1OTFDRlxuICAgICAgICBjYWxsb3V0UHJldmlldy5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1pY29uLXNpemUnLCBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uU2V0dGluZ3Muc2l6ZX1weGApO1xuICAgICAgICBjYWxsb3V0UHJldmlldy5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1pY29uLXRvcC1wb3NpdGlvbicsIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmljb25TZXR0aW5ncy5wb3NpdGlvbi50b3B9cHhgKTtcbiAgICAgICAgY2FsbG91dFByZXZpZXcuc3R5bGUuc2V0UHJvcGVydHkoJy0taWNvbi1yaWdodC1wb3NpdGlvbicsIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmljb25TZXR0aW5ncy5wb3NpdGlvbi5yaWdodH1weGApO1xuXG4gICAgICAgIC8vIFx1NTIxQlx1NUVGQSBDYWxsb3V0IFx1NjgwN1x1OTg5OFxuICAgICAgICBjb25zdCBjYWxsb3V0VGl0bGUgPSBjYWxsb3V0UHJldmlldy5jcmVhdGVEaXYoJ2NhbGxvdXQtdGl0bGUnKTtcbiAgICAgICAgY2FsbG91dFRpdGxlLmlubmVySFRNTCA9ICc8ZGl2IGNsYXNzPVwiY2FsbG91dC10aXRsZS1pbm5lclwiPlx1OTg4NFx1ODlDOCBDYWxsb3V0PC9kaXY+JztcblxuICAgICAgICAvLyBcdTUyMUJcdTVFRkEgQ2FsbG91dCBcdTUxODVcdTVCQjlcbiAgICAgICAgY29uc3QgY2FsbG91dENvbnRlbnQgPSBjYWxsb3V0UHJldmlldy5jcmVhdGVEaXYoJ2NhbGxvdXQtY29udGVudCcpO1xuICAgICAgICBjYWxsb3V0Q29udGVudC5pbm5lckhUTUwgPSAnXHU4RkQ5XHU2NjJGXHU0RTAwXHU0RTJBXHU3NTI4XHU0RThFXHU5ODg0XHU4OUM4XHU1NkZFXHU2ODA3XHU2ODM3XHU1RjBGXHU3Njg0IENhbGxvdXQnO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NkQ4OFx1NjA2Rlx1NTZGRVx1NjgwN1xuICAgICAgICBjb25zdCBpY29uQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGljb25Db250YWluZXIuY2xhc3NOYW1lID0gJ2NhbGxvdXQtbWVzc2FnZS1pY29uLWNvbnRhaW5lcic7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGljb24uY2xhc3NOYW1lID0gJ2NhbGxvdXQtbWVzc2FnZS1pY29uJztcbiAgICAgICAgaWNvbi5pbm5lckhUTUwgPSB0aGlzLnBsdWdpbi5nZXRJY29uU3ZnKHRoaXMucGx1Z2luLnNldHRpbmdzLmljb25TZXR0aW5ncy50eXBlKTtcblxuICAgICAgICAvLyBcdThCQkVcdTdGNkVcdTU2RkVcdTY4MDdcdTY4MzdcdTVGMEZcbiAgICAgICAgaWNvbi5zdHlsZS53aWR0aCA9IGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmljb25TZXR0aW5ncy5zaXplfXB4YDtcbiAgICAgICAgaWNvbi5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uU2V0dGluZ3Muc2l6ZX1weGA7XG4gICAgICAgIGljb25Db250YWluZXIuc3R5bGUudG9wID0gYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvblNldHRpbmdzLnBvc2l0aW9uLnRvcH1weGA7XG4gICAgICAgIGljb25Db250YWluZXIuc3R5bGUucmlnaHQgPSBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uU2V0dGluZ3MucG9zaXRpb24ucmlnaHR9cHhgO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NkQ4OFx1NjA2Rlx1NjU3MFx1OTFDRlx1NjYzRVx1NzkzQVxuICAgICAgICBjb25zdCBjb3VudFNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgIGNvdW50U3Bhbi5jbGFzc05hbWUgPSAnY2FsbG91dC1tZXNzYWdlLWNvdW50JztcbiAgICAgICAgY291bnRTcGFuLnRleHRDb250ZW50ID0gJzAnO1xuXG4gICAgICAgIGljb25Db250YWluZXIuYXBwZW5kQ2hpbGQoaWNvbik7XG4gICAgICAgIGljb25Db250YWluZXIuYXBwZW5kQ2hpbGQoY291bnRTcGFuKTtcbiAgICAgICAgY2FsbG91dFByZXZpZXcuYXBwZW5kQ2hpbGQoaWNvbkNvbnRhaW5lcik7XG5cbiAgICAgICAgLy8gXHU1QjlFXHU2NUY2XHU2NkY0XHU2NUIwXHU5ODg0XHU4OUM4XHU3Njg0XHU1MUZEXHU2NTcwXG4gICAgICAgIGNvbnN0IHVwZGF0ZVByZXZpZXcgPSAoKSA9PiB7XG4gICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjAgQ1NTIFx1NTNEOFx1OTFDRlxuICAgICAgICAgICAgY2FsbG91dFByZXZpZXcuc3R5bGUuc2V0UHJvcGVydHkoJy0taWNvbi1zaXplJywgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvblNldHRpbmdzLnNpemV9cHhgKTtcbiAgICAgICAgICAgIGNhbGxvdXRQcmV2aWV3LnN0eWxlLnNldFByb3BlcnR5KCctLWljb24tdG9wLXBvc2l0aW9uJywgYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvblNldHRpbmdzLnBvc2l0aW9uLnRvcH1weGApO1xuICAgICAgICAgICAgY2FsbG91dFByZXZpZXcuc3R5bGUuc2V0UHJvcGVydHkoJy0taWNvbi1yaWdodC1wb3NpdGlvbicsIGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmljb25TZXR0aW5ncy5wb3NpdGlvbi5yaWdodH1weGApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTUxODVcdTgwNTRcdTY4MzdcdTVGMEZcbiAgICAgICAgICAgIGljb24uc3R5bGUud2lkdGggPSBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uU2V0dGluZ3Muc2l6ZX1weGA7XG4gICAgICAgICAgICBpY29uLnN0eWxlLmhlaWdodCA9IGAke3RoaXMucGx1Z2luLnNldHRpbmdzLmljb25TZXR0aW5ncy5zaXplfXB4YDtcbiAgICAgICAgICAgIGljb25Db250YWluZXIuc3R5bGUudG9wID0gYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvblNldHRpbmdzLnBvc2l0aW9uLnRvcH1weGA7XG4gICAgICAgICAgICBpY29uQ29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gYCR7dGhpcy5wbHVnaW4uc2V0dGluZ3MuaWNvblNldHRpbmdzLnBvc2l0aW9uLnJpZ2h0fXB4YDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWNvbi5pbm5lckhUTUwgPSB0aGlzLnBsdWdpbi5nZXRJY29uU3ZnKHRoaXMucGx1Z2luLnNldHRpbmdzLmljb25TZXR0aW5ncy50eXBlKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gdXBkYXRlUHJldmlldzsgLy8gXHU4RkQ0XHU1NkRFXHU2NkY0XHU2NUIwXHU1MUZEXHU2NTcwXHU0RjlCXHU4QkJFXHU3RjZFXHU2NkY0XHU2NTM5XHU2NUY2XHU4QzAzXHU3NTI4XG4gICAgfVxuXG4gICAgcHJpdmF0ZSB1cGRhdGVQcmV2aWV3SWNvbihpY29uRWxlbWVudDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgaWNvblR5cGUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uU2V0dGluZ3MudHlwZTtcbiAgICAgICAgaWNvbkVsZW1lbnQuZW1wdHkoKTtcbiAgICAgICAgXG4gICAgICAgIHN3aXRjaCAoaWNvblR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgMTogLy8gXHU4NEREXHU4MjcyXHU1QkY5XHU4QkREXG4gICAgICAgICAgICAgICAgaWNvbkVsZW1lbnQuaW5uZXJIVE1MID0gYDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCIjNEE5MEUyXCI+PHBhdGggZD1cIk0yMCAySDRjLTEuMSAwLTIgLjktMiAydjE4bDQtNGgxNGMxLjEgMCAyLS45IDItMlY0YzAtMS4xLS45LTItMi0yelwiLz48L3N2Zz5gO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOiAvLyBcdTdFRkZcdTgyNzJcdTUyQTBcdTUzRjdcbiAgICAgICAgICAgICAgICBpY29uRWxlbWVudC5pbm5lckhUTUwgPSBgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIiMyRUNDNzFcIj48cGF0aCBkPVwiTTE5IDEzaC02djZoLTJ2LTZINXYtMmg2VjVoMnY2aDZ2MnpcIi8+PC9zdmc+YDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzogLy8gXHU3Qzg5XHU4MjcyXHU3MjMxXHU1RkMzXG4gICAgICAgICAgICAgICAgaWNvbkVsZW1lbnQuaW5uZXJIVE1MID0gYDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCIjRkY2OUI0XCI+PHBhdGggZD1cIk0xMiAyMS4zNWwtMS40NS0xLjMyQzUuNCAxNS4zNiAyIDEyLjI4IDIgOC41IDIgNS40MiA0LjQyIDMgNy41IDNjMS43NCAwIDMuNDEuODEgNC41IDIuMDlDMTMuMDkgMy44MSAxNC43NiAzIDE2LjUgMyAxOS41OCAzIDIyIDUuNDIgMjIgOC41YzAgMy43OC0zLjQgNi44Ni04LjU1IDExLjU0TDEyIDIxLjM1elwiLz48L3N2Zz5gO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA0OiAvLyBcdTZBNTlcdTgyNzJcdTU3MDZcdTVGNjJcbiAgICAgICAgICAgICAgICBpY29uRWxlbWVudC5pbm5lckhUTUwgPSBgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIiNGRjk4MDBcIj48Y2lyY2xlIGN4PVwiMTJcIiBjeT1cIjEyXCIgcj1cIjEwXCIvPjwvc3ZnPmA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDU6IC8vIFx1NzA3MFx1ODI3Mlx1NjVCOVx1NUY2MlxuICAgICAgICAgICAgICAgIGljb25FbGVtZW50LmlubmVySFRNTCA9IGA8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwiIzlFOUU5RVwiPjxyZWN0IHg9XCIzXCIgeT1cIjNcIiB3aWR0aD1cIjE4XCIgaGVpZ2h0PVwiMThcIiByeD1cIjJcIi8+PC9zdmc+YDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFx1NkUzMlx1NjdEM1x1NjM4OFx1Njc0M1x1NTE4NVx1NUJCOVxuICAgIHByaXZhdGUgcmVuZGVyTGljZW5zZUNvbnRlbnQoY29udGFpbmVyOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCBsaWNlbnNlSGVhZGVyID0gY29udGFpbmVyLmNyZWF0ZURpdignbGljZW5zZS1oZWFkZXInKTtcbiAgICAgICAgbGljZW5zZUhlYWRlci5jcmVhdGVFbCgnaDEnLCB7IHRleHQ6ICdcdTYzRDJcdTRFRjZcdTYzODhcdTY3NDMnIH0pLnN0eWxlLmNvbG9yID0gJyNmZjZiNmInO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc3RhdHVzQ29udGFpbmVyID0gbGljZW5zZUhlYWRlci5jcmVhdGVEaXYoJ2xpY2Vuc2Utc3RhdHVzLWNvbnRhaW5lcicpO1xuICAgICAgICBzdGF0dXNDb250YWluZXIuc3R5bGUubWFyZ2luID0gJzIwcHggMCc7XG4gICAgICAgIHN0YXR1c0NvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gJzE1cHgnO1xuICAgICAgICBzdGF0dXNDb250YWluZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzhweCc7XG4gICAgICAgIHN0YXR1c0NvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pc0FjdGl2YXRlZCA/ICcjZThmNWU5JyA6ICcjZmZlYmVlJztcbiAgICAgICAgc3RhdHVzQ29udGFpbmVyLnN0eWxlLmJvcmRlciA9IGAxcHggc29saWQgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5pc0FjdGl2YXRlZCA/ICcjNGNhZjUwJyA6ICcjZjQ0MzM2J31gO1xuXG4gICAgICAgIGNvbnN0IHN0YXR1c0ljb24gPSBzdGF0dXNDb250YWluZXIuY3JlYXRlU3BhbignbGljZW5zZS1zdGF0dXMtaWNvbicpO1xuICAgICAgICBzdGF0dXNJY29uLnNldFRleHQodGhpcy5wbHVnaW4uc2V0dGluZ3MuaXNBY3RpdmF0ZWQgPyAnXHUyNzA1JyA6ICdcdTI3NEMnKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHN0YXR1c1RleHQgPSBzdGF0dXNDb250YWluZXIuY3JlYXRlU3BhbignbGljZW5zZS1zdGF0dXMtdGV4dCcpO1xuICAgICAgICBzdGF0dXNUZXh0LnNldFRleHQodGhpcy5wbHVnaW4uc2V0dGluZ3MuaXNBY3RpdmF0ZWQgPyAnIFx1NURGMlx1NjM4OFx1Njc0M1x1RkYwQ1x1OEJGN1x1OTFDRFx1NTQyRicgOiAnIFx1NjcyQVx1NjM4OFx1Njc0MycpO1xuICAgICAgICBzdGF0dXNUZXh0LnN0eWxlLm1hcmdpbkxlZnQgPSAnOHB4JztcbiAgICAgICAgc3RhdHVzVGV4dC5zdHlsZS5jb2xvciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmlzQWN0aXZhdGVkID8gJyMyZTdkMzInIDogJyNjNjI4MjgnO1xuXG4gICAgICAgIC8vIFx1OTFDRFx1NTQyRlx1NjMwOVx1OTRBRVxuICAgICAgICBjb25zdCByZXN0YXJ0QnV0dG9uID0gc3RhdHVzQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnXHU5MUNEXHU1NDJGIE9ic2lkaWFuJyxcbiAgICAgICAgICAgIGNsczogJ3Jlc3RhcnQtb2JzaWRpYW4tYnV0dG9uJ1xuICAgICAgICB9KTtcbiAgICAgICAgcmVzdGFydEJ1dHRvbi5zdHlsZS5tYXJnaW5MZWZ0ID0gJzIwcHgnO1xuICAgICAgICByZXN0YXJ0QnV0dG9uLnN0eWxlLnBhZGRpbmcgPSAnNHB4IDEycHgnO1xuICAgICAgICByZXN0YXJ0QnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjNGNhZjUwJztcbiAgICAgICAgcmVzdGFydEJ1dHRvbi5zdHlsZS5jb2xvciA9ICd3aGl0ZSc7XG4gICAgICAgIHJlc3RhcnRCdXR0b24uc3R5bGUuYm9yZGVyID0gJ25vbmUnO1xuICAgICAgICByZXN0YXJ0QnV0dG9uLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc0cHgnO1xuICAgICAgICByZXN0YXJ0QnV0dG9uLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTkxQ0RcdTU0MkZcdTUyOUZcdTgwRkRcbiAgICAgICAgcmVzdGFydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICAgIGNvbnN0IGVsZWN0cm9uID0gcmVxdWlyZSgnZWxlY3Ryb24nKTtcbiAgICAgICAgICAgIGNvbnN0IHdpbmRvdyA9IGVsZWN0cm9uLnJlbW90ZS5nZXRDdXJyZW50V2luZG93KCk7XG4gICAgICAgICAgICB3aW5kb3cucmVsb2FkKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NkZDMFx1NkQzQlx1NzgwMVx1OEY5M1x1NTE2NVx1NTMzQVx1NTdERlxuICAgICAgICBjb25zdCBhY3RpdmF0aW9uQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdignbGljZW5zZS1hY3RpdmF0aW9uLWNvbnRhaW5lcicpO1xuICAgICAgICBhY3RpdmF0aW9uQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICcyMHB4JztcbiAgICAgICAgYWN0aXZhdGlvbkNvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gJzIwcHgnO1xuICAgICAgICBhY3RpdmF0aW9uQ29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSknO1xuICAgICAgICBhY3RpdmF0aW9uQ29udGFpbmVyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc4cHgnO1xuXG4gICAgICAgIGNvbnN0IGlucHV0Q29udGFpbmVyID0gYWN0aXZhdGlvbkNvbnRhaW5lci5jcmVhdGVEaXYoJ2xpY2Vuc2UtaW5wdXQtY29udGFpbmVyJyk7XG4gICAgICAgIGlucHV0Q29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1OEY5M1x1NTE2NVx1NkZDMFx1NkQzQlx1NzgwMScgfSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBpbnB1dCA9IGlucHV0Q29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHtcbiAgICAgICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgIHBsYWNlaG9sZGVyOiAnXHU4QkY3XHU4RjkzXHU1MTY1XHU2RkMwXHU2RDNCXHU3ODAxJ1xuICAgICAgICB9KTtcbiAgICAgICAgaW5wdXQuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIGlucHV0LnN0eWxlLnBhZGRpbmcgPSAnOHB4JztcbiAgICAgICAgaW5wdXQuc3R5bGUubWFyZ2luVG9wID0gJzEwcHgnO1xuICAgICAgICBpbnB1dC5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNHB4JztcbiAgICAgICAgaW5wdXQuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xuICAgICAgICBpbnB1dC52YWx1ZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmxpY2Vuc2VLZXk7XG5cbiAgICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5saWNlbnNlS2V5ID0gdGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IGFjdGl2YXRlQnV0dG9uID0gYWN0aXZhdGlvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgdGV4dDogJ1x1NkZDMFx1NkQzQlx1NjNEMlx1NEVGNicsXG4gICAgICAgICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgICAgICB9KTtcbiAgICAgICAgYWN0aXZhdGVCdXR0b24uc3R5bGUubWFyZ2luVG9wID0gJzE1cHgnO1xuICAgICAgICBhY3RpdmF0ZUJ1dHRvbi5zdHlsZS53aWR0aCA9ICcxMDAlJztcblxuICAgICAgICBhY3RpdmF0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCB0aGlzLnBsdWdpbi52YWxpZGF0ZUxpY2Vuc2UodGhpcy5wbHVnaW4uc2V0dGluZ3MubGljZW5zZUtleSk7XG4gICAgICAgICAgICBpZiAoaXNWYWxpZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmlzQWN0aXZhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTkxQ0RcdTU0MkZcdTYzRDBcdTc5M0FcdTVCQjlcdTU2NjhcbiAgICAgICAgICAgICAgICBjb25zdCByZXN0YXJ0Q29udGFpbmVyID0gYWN0aXZhdGlvbkNvbnRhaW5lci5jcmVhdGVEaXYoJ3Jlc3RhcnQtY29udGFpbmVyJyk7XG4gICAgICAgICAgICAgICAgcmVzdGFydENvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3AgPSAnMjBweCc7XG4gICAgICAgICAgICAgICAgcmVzdGFydENvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gJzE1cHgnO1xuICAgICAgICAgICAgICAgIHJlc3RhcnRDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNlOGY1ZTknO1xuICAgICAgICAgICAgICAgIHJlc3RhcnRDb250YWluZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzhweCc7XG4gICAgICAgICAgICAgICAgcmVzdGFydENvbnRhaW5lci5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkICM0Y2FmNTAnO1xuICAgICAgICAgICAgICAgIHJlc3RhcnRDb250YWluZXIuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG5cbiAgICAgICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTYzRDBcdTc5M0FcdTY1ODdcdTY3MkNcbiAgICAgICAgICAgICAgICBjb25zdCByZXN0YXJ0VGV4dCA9IHJlc3RhcnRDb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdcdTZGQzBcdTZEM0JcdTYyMTBcdTUyOUZcdUZGMDFcdThCRjdcdTkxQ0RcdTU0MkYgT2JzaWRpYW4gXHU0RUU1XHU1NDJGXHU3NTI4XHU2MjQwXHU2NzA5XHU1MjlGXHU4MEZEXHUzMDAyJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJlc3RhcnRUZXh0LnN0eWxlLm1hcmdpbiA9ICcwIDAgMTVweCAwJztcbiAgICAgICAgICAgICAgICByZXN0YXJ0VGV4dC5zdHlsZS5jb2xvciA9ICcjMmU3ZDMyJztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTkxQ0RcdTU0MkZcdTYzMDlcdTk0QUVcbiAgICAgICAgICAgICAgICBjb25zdCByZXN0YXJ0QnV0dG9uID0gcmVzdGFydENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnXHU5MUNEXHU1NDJGIE9ic2lkaWFuJyxcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXN0YXJ0QnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjNGNhZjUwJztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBcdTkxQ0RcdTU0MkZcdTUyOUZcdTgwRkRcbiAgICAgICAgICAgICAgICByZXN0YXJ0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGVsZWN0cm9uID0gcmVxdWlyZSgnZWxlY3Ryb24nKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgd2luZG93ID0gZWxlY3Ryb24ucmVtb3RlLmdldEN1cnJlbnRXaW5kb3coKTtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnJlbG9hZCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU2RkMwXHU2RDNCXHU2MjEwXHU1MjlGXHVGRjAxJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1NkZDMFx1NkQzQlx1NzgwMVx1NjVFMFx1NjU0OFx1RkYwMScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdThCRDVcdTc1MjhcdTcyQjZcdTYwMDFcdTY2M0VcdTc5M0FcdTVCQjlcdTU2NjhcbiAgICAgICAgY29uc3QgdHJpYWxTdGF0dXNDb250YWluZXIgPSBhY3RpdmF0aW9uQ29udGFpbmVyLmNyZWF0ZURpdigndHJpYWwtc3RhdHVzLWNvbnRhaW5lcicpO1xuICAgICAgICB0cmlhbFN0YXR1c0NvbnRhaW5lci5zdHlsZS5tYXJnaW5Ub3AgPSAnMTVweCc7XG4gICAgICAgIHRyaWFsU3RhdHVzQ29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAnMTVweCc7XG4gICAgICAgIHRyaWFsU3RhdHVzQ29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpJztcbiAgICAgICAgdHJpYWxTdGF0dXNDb250YWluZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzhweCc7XG4gICAgICAgIHRyaWFsU3RhdHVzQ29udGFpbmVyLnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpJztcbiAgICAgICAgdHJpYWxTdGF0dXNDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuXG4gICAgICAgIC8vIFx1NjYzRVx1NzkzQVx1OEJENVx1NzUyOFx1NzJCNlx1NjAwMVxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGFzVXNlZFRyaWFsKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MudHJpYWxFbmRUaW1lICYmIERhdGUubm93KCkgPCB0aGlzLnBsdWdpbi5zZXR0aW5ncy50cmlhbEVuZFRpbWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ1RpbWUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy50cmlhbEVuZFRpbWUgLSBub3c7XG4gICAgICAgICAgICAgICAgY29uc3QgcmVtYWluaW5nTWludXRlcyA9IE1hdGguY2VpbChyZW1haW5pbmdUaW1lIC8gKDEwMDAgKiA2MCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlbWFpbmluZ1NlY29uZHMgPSBNYXRoLmNlaWwocmVtYWluaW5nVGltZSAvIDEwMDApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFx1NTIxQlx1NUVGQVx1NjVGNlx1OTVGNFx1NjYzRVx1NzkzQVx1NUJCOVx1NTY2OFxuICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVDb250YWluZXIgPSB0cmlhbFN0YXR1c0NvbnRhaW5lci5jcmVhdGVEaXYoJ3RyaWFsLXRpbWUtY29udGFpbmVyJyk7XG4gICAgICAgICAgICAgICAgdGltZUNvbnRhaW5lci5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgICAgICAgICB0aW1lQ29udGFpbmVyLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxMHB4JztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBjb25zdCB0aW1lRGlzcGxheSA9IHRpbWVDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogYFx1NTI2OVx1NEY1OVx1OEJENVx1NzUyOFx1NjVGNlx1OTVGNFx1RkYxQSR7cmVtYWluaW5nTWludXRlc31cdTUyMDYke3JlbWFpbmluZ1NlY29uZHMgJSA2MH1cdTc5RDJgLFxuICAgICAgICAgICAgICAgICAgICBjbHM6ICd0cmlhbC10aW1lLWRpc3BsYXknXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGltZURpc3BsYXkuc3R5bGUuZm9udFNpemUgPSAnMTZweCc7XG4gICAgICAgICAgICAgICAgdGltZURpc3BsYXkuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcbiAgICAgICAgICAgICAgICB0aW1lRGlzcGxheS5zdHlsZS5jb2xvciA9ICcjNGNhZjUwJztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdThGREJcdTVFQTZcdTY3NjFcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmVzc0NvbnRhaW5lciA9IHRyaWFsU3RhdHVzQ29udGFpbmVyLmNyZWF0ZURpdigndHJpYWwtcHJvZ3Jlc3MtY29udGFpbmVyJyk7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gJzZweCc7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNlMGUwZTAnO1xuICAgICAgICAgICAgICAgIHByb2dyZXNzQ29udGFpbmVyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICczcHgnO1xuICAgICAgICAgICAgICAgIHByb2dyZXNzQ29udGFpbmVyLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NDb250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzEwcHgnO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzID0gcHJvZ3Jlc3NDb250YWluZXIuY3JlYXRlRGl2KCd0cmlhbC1wcm9ncmVzcycpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSAocmVtYWluaW5nVGltZSAvICg2ICogNjAgKiA2MCAqIDEwMDApKSAqIDEwMDtcbiAgICAgICAgICAgICAgICBwcm9ncmVzcy5zdHlsZS53aWR0aCA9IGAke3BlcmNlbnRhZ2V9JWA7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3Muc3R5bGUuaGVpZ2h0ID0gJzEwMCUnO1xuICAgICAgICAgICAgICAgIHByb2dyZXNzLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjNGNhZjUwJztcbiAgICAgICAgICAgICAgICBwcm9ncmVzcy5zdHlsZS50cmFuc2l0aW9uID0gJ3dpZHRoIDFzIGxpbmVhcic7XG5cbiAgICAgICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTVCOUVcdTY1RjZcdTY2RjRcdTY1QjBcbiAgICAgICAgICAgICAgICBjb25zdCB1cGRhdGVUaW1lciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdSZW1haW5pbmdUaW1lID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudHJpYWxFbmRUaW1lIC0gY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAobmV3UmVtYWluaW5nVGltZSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHVwZGF0ZVRpbWVyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpOyAvLyBcdTkxQ0RcdTZFMzJcdTY3RDNcdThCQkVcdTdGNkVcdTk4NzVcdTk3NjJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3TWludXRlcyA9IE1hdGguZmxvb3IobmV3UmVtYWluaW5nVGltZSAvICgxMDAwICogNjApKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3U2Vjb25kcyA9IE1hdGguZmxvb3IoKG5ld1JlbWFpbmluZ1RpbWUgLyAxMDAwKSAlIDYwKTtcbiAgICAgICAgICAgICAgICAgICAgdGltZURpc3BsYXkudGV4dENvbnRlbnQgPSBgXHU1MjY5XHU0RjU5XHU4QkQ1XHU3NTI4XHU2NUY2XHU5NUY0XHVGRjFBJHtuZXdNaW51dGVzfVx1NTIwNiR7bmV3U2Vjb25kc31cdTc5RDJgO1xuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3UGVyY2VudGFnZSA9IChuZXdSZW1haW5pbmdUaW1lIC8gKDYgKiA2MCAqIDYwICogMTAwMCkpICogMTAwO1xuICAgICAgICAgICAgICAgICAgICBwcm9ncmVzcy5zdHlsZS53aWR0aCA9IGAke25ld1BlcmNlbnRhZ2V9JWA7XG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7XG5cbiAgICAgICAgICAgICAgICAvLyBcdTVGNTNcdThCQkVcdTdGNkVcdTk4NzVcdTk3NjJcdTUxNzNcdTk1RURcdTY1RjZcdTZFMDVcdTk2NjRcdTVCOUFcdTY1RjZcdTU2NjhcbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyKCgpID0+IGNsZWFySW50ZXJ2YWwodXBkYXRlVGltZXIpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhdHVzVGV4dCA9IHRyaWFsU3RhdHVzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdcdThCRDVcdTc1MjhcdTVERjJcdTdFRDNcdTY3NUZcdUZGMENcdTUzNzhcdThGN0RcdTYzRDJcdTRFRjZcdTVFNzZcdTkxQ0RcdTY1QjBcdTVCODlcdTg4QzVcdTUzRUZcdTkxQ0RcdTY1QjBcdTgzQjdcdTVGOTdcdThCRDVcdTc1MjhcdTY3M0FcdTRGMUEnLFxuICAgICAgICAgICAgICAgICAgICBjbHM6ICd0cmlhbC1zdGF0dXMtdGV4dCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzdGF0dXNUZXh0LnN0eWxlLmNvbG9yID0gJyNmNDQzMzYnO1xuICAgICAgICAgICAgICAgIHN0YXR1c1RleHQuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcic7XG4gICAgICAgICAgICAgICAgc3RhdHVzVGV4dC5zdHlsZS5mb250V2VpZ2h0ID0gJ2JvbGQnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgc3RhdHVzVGV4dCA9IHRyaWFsU3RhdHVzQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnLCB7XG4gICAgICAgICAgICAgICAgdGV4dDogJ1x1NjcyQVx1NUYwMFx1NTlDQlx1OEJENVx1NzUyOFx1RkYwOFx1NTM3OFx1OEY3RFx1OTFDRFx1ODhDNVx1NTNFRlx1OTFDRFx1NjVCMFx1ODNCN1x1NUY5N1x1OEJENVx1NzUyOFx1NjczQVx1NEYxQVx1RkYwOScsXG4gICAgICAgICAgICAgICAgY2xzOiAndHJpYWwtc3RhdHVzLXRleHQnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN0YXR1c1RleHQuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1tdXRlZCknO1xuICAgICAgICAgICAgc3RhdHVzVGV4dC5zdHlsZS50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1OEJENVx1NzUyOFx1NjMwOVx1OTRBRVxuICAgICAgICBjb25zdCB0cmlhbEJ1dHRvbiA9IGFjdGl2YXRpb25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdcdTYzRDJcdTRFRjZcdThCRDVcdTc1MjgnLFxuICAgICAgICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICAgICAgfSk7XG4gICAgICAgIHRyaWFsQnV0dG9uLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICB0cmlhbEJ1dHRvbi5zdHlsZS5tYXJnaW5Ub3AgPSAnMTVweCc7XG4gICAgICAgIHRyaWFsQnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjNGNhZjUwJztcbiAgICAgICAgdHJpYWxCdXR0b24uc3R5bGUuY29sb3IgPSAnI2ZmZmZmZic7XG4gICAgICAgIHRyaWFsQnV0dG9uLnN0eWxlLnBhZGRpbmcgPSAnOHB4JztcbiAgICAgICAgdHJpYWxCdXR0b24uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzRweCc7XG4gICAgICAgIHRyaWFsQnV0dG9uLnN0eWxlLmN1cnNvciA9ICdwb2ludGVyJztcbiAgICAgICAgdHJpYWxCdXR0b24uc3R5bGUuYm9yZGVyID0gJ25vbmUnO1xuICAgICAgICB0cmlhbEJ1dHRvbi5zdHlsZS5mb250U2l6ZSA9ICcxNHB4JztcbiAgICAgICAgdHJpYWxCdXR0b24uc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJztcblxuICAgICAgICB0cmlhbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5oYXNVc2VkVHJpYWwpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdcdThCRDVcdTc1MjhcdTY3M0FcdTRGMUFcdTVERjJcdTc1MjhcdTVCOENcdUZGMENcdThCRjdcdTZGQzBcdTZEM0JcdTYzRDJcdTRFRjZcdTdFRTdcdTdFRURcdTRGN0ZcdTc1MjhcdUZGMDEnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFx1OEJCRVx1N0Y2RVx1OEJENVx1NzUyOFx1NUYwMFx1NTlDQlx1NjVGNlx1OTVGNFx1NTQ4Q1x1N0VEM1x1Njc1Rlx1NjVGNlx1OTVGNFxuICAgICAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IGVuZFRpbWUgPSBzdGFydFRpbWUgKyAoNiAqIDYwICogNjAgKiAxMDAwKTsgLy8gNlx1NUMwRlx1NjVGNiA9IDYgKiA2MCAqIDYwICogMTAwMCBcdTZCRUJcdTc5RDJcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gXHU0RkREXHU1QjU4XHU4QkQ1XHU3NTI4XHU3MkI2XHU2MDAxXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50cmlhbEVuZFRpbWUgPSBlbmRUaW1lO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaGFzVXNlZFRyaWFsID0gdHJ1ZTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXG4gICAgICAgICAgICAvLyBcdTkxQ0RcdTY1QjBcdTUyQTBcdThGN0RcdTYzRDJcdTRFRjZcdTRFRTVcdTU0MkZcdTc1MjhcdTYyNDBcdTY3MDlcdTUyOUZcdTgwRkRcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLm9udW5sb2FkKCk7IC8vIFx1NTE0OFx1NTM3OFx1OEY3RFx1NUY1M1x1NTI0RFx1NjNEMlx1NEVGNlx1NzJCNlx1NjAwMVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4ub25sb2FkKCk7ICAgLy8gXHU5MUNEXHU2NUIwXHU1MkEwXHU4RjdEXHU2M0QyXHU0RUY2XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NjYzRVx1NzkzQVx1NUYwMFx1NTlDQlx1OEJENVx1NzUyOFx1NjNEMFx1NzkzQVxuICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1REYyXHU1RjAwXHU1NDJGNlx1NUMwRlx1NjVGNlx1OEJENVx1NzUyOFx1NjcxRlx1RkYwMVx1NjI0MFx1NjcwOVx1NTI5Rlx1ODBGRFx1NURGMlx1NTQyRlx1NzUyOCcpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTkxQ0RcdTY1QjBcdTUyQTBcdThGN0RcdThCQkVcdTdGNkVcdTk4NzVcdTk3NjJcbiAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xuXG4gICAgICAgICAgICAvLyBcdTU0MkZcdTUyQThcdTVCOUFcdTY1RjZcdTU2NjhcdTY4QzBcdTY3RTVcdThCRDVcdTc1MjhcdTdFRDNcdTY3NUZcbiAgICAgICAgICAgIGNvbnN0IGNoZWNrVHJpYWxJbnRlcnZhbCA9IHNldEludGVydmFsKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICAgICAgICAgIGlmIChub3cgPj0gZW5kVGltZSkge1xuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGNoZWNrVHJpYWxJbnRlcnZhbCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIFx1Nzk4MVx1NzUyOFx1NjI0MFx1NjcwOVx1NTI5Rlx1ODBGRFxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5vbnVubG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5kaXNhYmxlUGx1Z2luRmVhdHVyZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU4QkQ1XHU3NTI4XHU2NzFGXHU1REYyXHU3RUQzXHU2NzVGXHVGRjBDXHU4QkY3XHU2RkMwXHU2RDNCXHU2M0QyXHU0RUY2XHU3RUU3XHU3RUVEXHU0RjdGXHU3NTI4XHVGRjAxJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDEwMDApO1xuXG4gICAgICAgICAgICAvLyBcdTZDRThcdTUxOENcdTZFMDVcdTc0MDZcdTUxRkRcdTY1NzBcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXIoKCkgPT4gY2xlYXJJbnRlcnZhbChjaGVja1RyaWFsSW50ZXJ2YWwpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHU0RkVFXHU2NTM5IHJlbmRlckFib3V0Q29udGVudCBcdTY1QjlcdTZDRDVcbiAgICBwcml2YXRlIHJlbmRlckFib3V0Q29udGVudChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIGNvbnRhaW5lci5jcmVhdGVFbCgnaDEnLCB7IHRleHQ6ICdcdTUxNzNcdTRFOEVcdTYzRDJcdTRFRjYnIH0pXG4gICAgICAgICAgICAuc3R5bGUuY29sb3IgPSAnI2ZmNmI2Yic7XG5cbiAgICAgICAgY29uc3QgZGVzY3JpcHRpb25Db250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRWwoJ2RpdicpO1xuICAgICAgICBkZXNjcmlwdGlvbkNvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHsgXG4gICAgICAgICAgICB0ZXh0OiAnXHU4RkQ5XHU2NjJGXHU0RTAwXHU0RTJBXHU3NTI4XHU0RThFXHU1NzI4IE9ic2lkaWFuIFx1NEUyRFx1NEUzQSBDYWxsb3V0IFx1NkRGQlx1NTJBMFx1OTg5RFx1NTkxNlx1NTkwN1x1NkNFOFx1NTI5Rlx1ODBGRFx1NzY4NFx1NjNEMlx1NEVGNlx1RkYwQydcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3Qgd2FybmluZ1RleHQgPSBkZXNjcmlwdGlvbkNvbnRhaW5lci5jcmVhdGVFbCgnc3BhbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdcdThCRjdcdTZDRThcdTYxMEZcdThCRTVcdTYzRDJcdTRFRjZcdTVCRjlcdTRFOEVDYWxsb3V0XHU3QjE0XHU4QkIwXHU3QzdCXHU1QjU4XHU1NzI4XHU4RjgzXHU1OTI3XHU3Njg0SFRNTFwiXHU3QjE0XHU4QkIwXHU2QzYxXHU2N0QzXCJcdUZGMENcdTRGN0ZcdTc1MjhcdTUyNERcdThCRjdcdTc3RTVcdTYwODlcdTMwMDInXG4gICAgICAgIH0pO1xuICAgICAgICB3YXJuaW5nVGV4dC5zdHlsZS5jb2xvciA9ICcjZmYwMDAwJztcblxuICAgICAgICBjb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTcyNDhcdTY3MkM6IDEuMi4wJyB9KTtcbiAgICAgICAgY29udGFpbmVyLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiAnXHU0RjVDXHU4MDA1OiBcdTRFMDBcdTYyNEJcdTcwQzJcdTcyNENcdTYyNTNcdTVGOTdcdTdBMDBcdTcwQzInIH0pO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTIwNlx1OTY5NFx1N0VCRlxuICAgICAgICBjb25zdCBocjEgPSBjb250YWluZXIuY3JlYXRlRWwoJ2hyJyk7XG4gICAgICAgIGhyMS5zdHlsZS5tYXJnaW4gPSAnMjBweCAwJztcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTUxNzNcdTZDRThcdTkwRThcdTUyMDZcbiAgICAgICAgY29uc3QgZm9sbG93VGl0bGUgPSBjb250YWluZXIuY3JlYXRlRWwoJ2gxJywgeyB0ZXh0OiAnXHU2QjIyXHU4RkNFXHU2Q0U4JyB9KTtcbiAgICAgICAgZm9sbG93VGl0bGUuc3R5bGUuY29sb3IgPSAnIzQxNjlFMSc7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwQlx1N0FEOVx1OTRGRVx1NjNBNVxuICAgICAgICBjb25zdCBiaWxpYmlsaUxpbmsgPSBjb250YWluZXIuY3JlYXRlRWwoJ2EnLCB7XG4gICAgICAgICAgICB0ZXh0OiAnQlx1N0FEOTogXHU0RTAwXHU2MjRCXHU3MEMyXHU3MjRDXHU2MjUzXHU1Rjk3XHU3QTAwXHU3MEMyJyxcbiAgICAgICAgICAgIGhyZWY6ICdodHRwczovL3NwYWNlLmJpbGliaWxpLmNvbS8zOTc1MTE4NzA/c3BtX2lkX2Zyb209MzMzLjEzNjUuMC4wJ1xuICAgICAgICB9KTtcbiAgICAgICAgYmlsaWJpbGlMaW5rLnN0eWxlLmNvbG9yID0gJyMwMEExRDYnO1xuICAgICAgICBiaWxpYmlsaUxpbmsuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGJpbGliaWxpTGluay5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMTBweCc7XG4gICAgICAgIGJpbGliaWxpTGluay5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICd1bmRlcmxpbmUnO1xuICAgICAgICBiaWxpYmlsaUxpbmsuc3R5bGUudGV4dFVuZGVybGluZU9mZnNldCA9ICcycHgnO1xuICAgICAgICBiaWxpYmlsaUxpbmsuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NUMwRlx1N0VBMlx1NEU2Nlx1OTRGRVx1NjNBNVxuICAgICAgICBjb25zdCB4aWFvaG9uZ3NodUxpbmsgPSBjb250YWluZXIuY3JlYXRlRWwoJ2EnLCB7XG4gICAgICAgICAgICB0ZXh0OiAnXHU1QzBGXHU3RUEyXHU0RTY2OiBcdTRFMDBcdTYyNEJcdTcwQzJcdTcyNENcdTYyNTNcdTVGOTdcdTdBMDBcdTcwQzInLFxuICAgICAgICAgICAgaHJlZjogJ2h0dHBzOi8vd3d3LnhpYW9ob25nc2h1LmNvbS91c2VyL3Byb2ZpbGUvNjM3N2I1MjgwMDAwMDAwMDFmMDFlMmVmJ1xuICAgICAgICB9KTtcbiAgICAgICAgeGlhb2hvbmdzaHVMaW5rLnN0eWxlLmNvbG9yID0gJyNGRTJDNTUnO1xuICAgICAgICB4aWFvaG9uZ3NodUxpbmsuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIHhpYW9ob25nc2h1TGluay5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMjBweCc7XG4gICAgICAgIHhpYW9ob25nc2h1TGluay5zdHlsZS50ZXh0RGVjb3JhdGlvbiA9ICd1bmRlcmxpbmUnO1xuICAgICAgICB4aWFvaG9uZ3NodUxpbmsuc3R5bGUudGV4dFVuZGVybGluZU9mZnNldCA9ICcycHgnO1xuICAgICAgICB4aWFvaG9uZ3NodUxpbmsuc3R5bGUuY3Vyc29yID0gJ3BvaW50ZXInO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTZGRVx1NzI0N1xuICAgICAgICBjb25zdCBpbWcgPSBjb250YWluZXIuY3JlYXRlRWwoJ2ltZycsIHtcbiAgICAgICAgICAgIGF0dHI6IHtcbiAgICAgICAgICAgICAgICBzcmM6ICdodHRwczovL3poYW5namlhbmdjaG9uZy5vc3MtY24tY2hlbmdkdS5hbGl5dW5jcy5jb20vMi5wbmcnLFxuICAgICAgICAgICAgICAgIGFsdDogJ1x1NTE3M1x1NkNFOFx1NEU4Q1x1N0VGNFx1NzgwMSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGltZy5zdHlsZS5tYXhXaWR0aCA9ICcxMDAlJztcbiAgICAgICAgaW1nLnN0eWxlLmhlaWdodCA9ICdhdXRvJztcbiAgICAgICAgaW1nLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBpbWcuc3R5bGUubWFyZ2luID0gJzEwcHggYXV0byc7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1MjA2XHU5Njk0XHU3RUJGXG4gICAgICAgIGNvbnN0IGhyMiA9IGNvbnRhaW5lci5jcmVhdGVFbCgnaHInKTtcbiAgICAgICAgaHIyLnN0eWxlLm1hcmdpbiA9ICcyMHB4IDAnO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1OEQ1RVx1NTJBOVx1NjUyRlx1NjMwMVx1OTBFOFx1NTIwNlxuICAgICAgICBjb25zdCBzcG9uc29yVGl0bGUgPSBjb250YWluZXIuY3JlYXRlRWwoJ2gxJywgeyB0ZXh0OiAnXHU4RDVFXHU1MkE5XHU2NTJGXHU2MzAxJyB9KTtcbiAgICAgICAgc3BvbnNvclRpdGxlLnN0eWxlLmNvbG9yID0gJyM0MTY5RTEnO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1OEJENVx1NzUyOFx1OEJGNFx1NjYwRVx1NjU4N1x1NjcyQ1xuICAgICAgICBjb25zdCB0cmlhbFRleHQgPSBjb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7XG4gICAgICAgICAgICB0ZXh0OiAnXHU2QjY0XHU2M0QyXHU0RUY2XHU1MTQxXHU4QkI4XHU3NjdEXHU1QUQ2XHVGRjBDXHU4QkQ1XHU3NTI4XHU2NUY2XHU5NUY0XHU3RUQzXHU2NzVGXHU0RUU1XHU1NDBFXHVGRjBDXHU5MUNEXHU2NUIwXHU1Qjg5XHU4OEM1XHU2M0QyXHU0RUY2XHU1MzczXHU1M0VGXHU3RUU3XHU3RUVEXHU4QkQ1XHU3NTI4J1xuICAgICAgICB9KTtcbiAgICAgICAgdHJpYWxUZXh0LnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICB0cmlhbFRleHQuc3R5bGUubWFyZ2luID0gJzEwcHggMCc7XG4gICAgICAgIHRyaWFsVGV4dC5zdHlsZS5jb2xvciA9ICcjNjY2NjY2JztcbiAgICAgICAgdHJpYWxUZXh0LnN0eWxlLmZvbnRTaXplID0gJzAuOWVtJztcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdThENUVcdTUyQTlcdTY3MkNcbiAgICAgICAgY29uc3Qgc3BvbnNvclRleHQgPSBjb250YWluZXIuY3JlYXRlRWwoJ3AnLCB7IFxuICAgICAgICAgICAgdGV4dDogJ1x1OEJGN1x1NEY1Q1x1ODAwNVx1NTU5RFx1NEUwMFx1NzRGNlx1NzdGRlx1NkNDOVx1NkMzNCdcbiAgICAgICAgfSk7XG4gICAgICAgIHNwb25zb3JUZXh0LnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICBzcG9uc29yVGV4dC5zdHlsZS5tYXJnaW4gPSAnMTBweCAwJztcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdThENUVcdTUyQTlcdTU2RkVcdTcyNDdcbiAgICAgICAgY29uc3Qgc3BvbnNvckltZyA9IGNvbnRhaW5lci5jcmVhdGVFbCgnaW1nJywge1xuICAgICAgICAgICAgYXR0cjoge1xuICAgICAgICAgICAgICAgIHNyYzogJ2h0dHBzOi8vemhhbmdqaWFuZ2Nob25nLm9zcy1jbi1jaGVuZ2R1LmFsaXl1bmNzLmNvbS8yMDI0MTIwNDE0MjE1OS5wbmcnLFxuICAgICAgICAgICAgICAgIGFsdDogJ1x1OEQ1RVx1NTJBOVx1NEU4Q1x1N0VGNFx1NzgwMSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHNwb25zb3JJbWcuc3R5bGUubWF4V2lkdGggPSAnMTAwJSc7XG4gICAgICAgIHNwb25zb3JJbWcuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nO1xuICAgICAgICBzcG9uc29ySW1nLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICBzcG9uc29ySW1nLnN0eWxlLm1hcmdpbiA9ICcxMHB4IGF1dG8nO1xuICAgIH1cblxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NTczQVx1NjY2Rlx1NkUzMlx1NjdEM1x1NzZGOFx1NTE3M1x1NzY4NFx1NjVCOVx1NkNENVxuICAgIHByaXZhdGUgcmVuZGVyU2NlbmVzKCkge1xuICAgICAgICB0aGlzLnJlbmRlclNjZW5lVGFicygpO1xuICAgICAgICB0aGlzLnJlbmRlckN1cnJlbnRTY2VuZUNvbnRlbnQoKTtcbiAgICAgICAgdGhpcy51cGRhdGVTY2VuZURyb3Bkb3ducygpO1xuICAgIH1cblxuICAgIC8vIFx1NkUzMlx1NjdEM1x1NTczQVx1NjY2Rlx1NjgwN1x1N0I3RVxuICAgIHByaXZhdGUgcmVuZGVyU2NlbmVUYWJzKCkge1xuICAgICAgICBpZiAoIXRoaXMuc2NlbmVUYWJDb250YWluZXIpIHJldHVybjtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NkUwNVx1OTY2NFx1NzNCMFx1NjcwOVx1NjgwN1x1N0I3RVx1RkYwQ1x1NEZERFx1NzU1OVx1NkRGQlx1NTJBMFx1NjMwOVx1OTRBRVxuICAgICAgICBjb25zdCBhZGRCdXR0b24gPSB0aGlzLnNjZW5lVGFiQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zY2VuZS10YWItYnV0dG9uJyk7XG4gICAgICAgIHRoaXMuc2NlbmVUYWJDb250YWluZXIuZW1wdHkoKTtcbiAgICAgICAgaWYgKGFkZEJ1dHRvbikgdGhpcy5zY2VuZVRhYkNvbnRhaW5lci5hcHBlbmRDaGlsZChhZGRCdXR0b24pO1xuXG4gICAgICAgIC8vIFx1NkUzMlx1NjdEM1x1NTczQVx1NjY2Rlx1NjgwN1x1N0I3RVxuICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY2VuZXMuZm9yRWFjaChzY2VuZSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YWJDb250YWluZXIgPSB0aGlzLmNyZWF0ZVNjZW5lVGFiKHNjZW5lKTtcbiAgICAgICAgICAgIHRoaXMuc2NlbmVUYWJDb250YWluZXIuYXBwZW5kQ2hpbGQodGFiQ29udGFpbmVyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gXHU1MjFCXHU1RUZBXHU1MzU1XHU0RTJBXHU1NzNBXHU2NjZGXHU2ODA3XHU3QjdFXG4gICAgcHJpdmF0ZSBjcmVhdGVTY2VuZVRhYihzY2VuZTogU2NlbmVDb25maWcpIHtcbiAgICAgICAgY29uc3QgdGFiQ29udGFpbmVyID0gY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2NlbmUtdGFiLWNvbnRhaW5lcicgfSk7XG4gICAgICAgIHRhYkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICB0YWJDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgICAgICB0YWJDb250YWluZXIuc3R5bGUuZ2FwID0gJzRweCc7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTdGMTZcdThGOTFcdTYzMDlcdTk0QUVcbiAgICAgICAgY29uc3QgZWRpdEJ1dHRvbiA9IHRhYkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgdGV4dDogJ1x1MjcwRScsXG4gICAgICAgICAgICBjbHM6ICdzY2VuZS10YWItZWRpdCdcbiAgICAgICAgfSk7XG4gICAgICAgIGVkaXRCdXR0b24uc3R5bGUucGFkZGluZyA9ICc0cHggOHB4JztcbiAgICAgICAgZWRpdEJ1dHRvbi5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgIGVkaXRCdXR0b24uc3R5bGUuYm9yZGVyID0gJ25vbmUnO1xuICAgICAgICBlZGl0QnV0dG9uLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc0cHgnO1xuICAgICAgICBlZGl0QnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd0cmFuc3BhcmVudCc7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTU3M0FcdTY2NkZcdTY4MDdcdTdCN0VcbiAgICAgICAgY29uc3Qgc2NlbmVUYWIgPSB0YWJDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQ6IHNjZW5lLm5hbWUsXG4gICAgICAgICAgICBjbHM6ICdzY2VuZS10YWInXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NEUzQVx1NUY1M1x1NTI0RFx1OTAwOVx1NEUyRFx1NTczQVx1NjY2Rlx1NkRGQlx1NTJBMFx1OUFEOFx1NEVBRVx1NjgzN1x1NUYwRlxuICAgICAgICBpZiAoc2NlbmUuaWQgPT09IHRoaXMucGx1Z2luLnNldHRpbmdzLmN1cnJlbnRTY2VuZUlkKSB7XG4gICAgICAgICAgICBzY2VuZVRhYi5hZGRDbGFzcygnc2NlbmUtdGFiLWFjdGl2ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1MjIwXHU5NjY0XHU2MzA5XHU5NEFFXHVGRjA4XHU5NzVFXHU5RUQ4XHU4QkE0XHU1NzNBXHU2NjZGXHVGRjA5XG4gICAgICAgIGlmIChzY2VuZS5pZCAhPT0gJ2RlZmF1bHQnKSB7XG4gICAgICAgICAgICBjb25zdCBkZWxldGVCdXR0b24gPSB0aGlzLmNyZWF0ZVNjZW5lRGVsZXRlQnV0dG9uKHNjZW5lKTtcbiAgICAgICAgICAgIHRhYkNvbnRhaW5lci5hcHBlbmRDaGlsZChkZWxldGVCdXR0b24pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHU3RUQxXHU1QjlBXHU0RThCXHU0RUY2XG4gICAgICAgIGVkaXRCdXR0b24ub25jbGljayA9IChlKSA9PiB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgdGhpcy5zaG93U2NlbmVOYW1lRWRpdE1vZGFsKHNjZW5lKTtcbiAgICAgICAgfTtcblxuICAgICAgICBzY2VuZVRhYi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VycmVudFNjZW5lSWQgPSBzY2VuZS5pZDtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJTY2VuZXMoKTtcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gdGFiQ29udGFpbmVyO1xuICAgIH1cblxuICAgIC8vIFx1NTIxQlx1NUVGQVx1NTczQVx1NjY2Rlx1NTIyMFx1OTY2NFx1NjMwOVx1OTRBRVxuICAgIHByaXZhdGUgY3JlYXRlU2NlbmVEZWxldGVCdXR0b24oc2NlbmU6IFNjZW5lQ29uZmlnKSB7XG4gICAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnXHUwMEQ3JyxcbiAgICAgICAgICAgIGNsczogJ3NjZW5lLXRhYi1kZWxldGUnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKGUpID0+IHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NlbmVzLmxlbmd0aCA8PSAxKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU4MUYzXHU1QzExXHU5NzAwXHU4OTgxXHU0RkREXHU3NTU5XHU0RTAwXHU0RTJBXHU1NzNBXHU2NjZGJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY2VuZXMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY2VuZXMuZmlsdGVyKHMgPT4gcy5pZCAhPT0gc2NlbmUuaWQpO1xuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1cnJlbnRTY2VuZUlkID09PSBzY2VuZS5pZCkge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmN1cnJlbnRTY2VuZUlkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NlbmVzWzBdLmlkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclNjZW5lcygpO1xuICAgICAgICAgICAgbmV3IE5vdGljZShgXHU1REYyXHU1MjIwXHU5NjY0XHU1NzNBXHU2NjZGXHVGRjFBJHtzY2VuZS5uYW1lfWApO1xuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBkZWxldGVCdXR0b247XG4gICAgfVxuXG4gICAgLy8gXHU2RTMyXHU2N0QzXHU1RjUzXHU1MjREXHU1NzNBXHU2NjZGXHU1MTg1XHU1QkI5XG4gICAgcHJpdmF0ZSByZW5kZXJDdXJyZW50U2NlbmVDb250ZW50KCkge1xuICAgICAgICBpZiAoIXRoaXMuc2NlbmVDb250ZW50Q29udGFpbmVyKSByZXR1cm47XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjdXJyZW50U2NlbmUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY2VuZXMuZmluZChcbiAgICAgICAgICAgIHNjZW5lID0+IHNjZW5lLmlkID09PSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXJyZW50U2NlbmVJZFxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFjdXJyZW50U2NlbmUpIHJldHVybjtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2NlbmVDb250ZW50Q29udGFpbmVyLmVtcHR5KCk7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1NzNBXHU2NjZGXHU2NENEXHU0RjVDXHVGRkZEXHVGRkZEXHU5NEFFXHU1QkI5XHU1NjY4XG4gICAgICAgIGNvbnN0IHNjZW5lQWN0aW9uc0NvbnRhaW5lciA9IHRoaXMuc2NlbmVDb250ZW50Q29udGFpbmVyLmNyZWF0ZURpdignc2NlbmUtYWN0aW9ucy1jb250YWluZXInKTtcbiAgICAgICAgc2NlbmVBY3Rpb25zQ29udGFpbmVyLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcyMHB4JztcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NjVCMFx1NzY4NCBDYWxsb3V0IFx1NjMwOVx1OTRBRVxuICAgICAgICBjb25zdCBhZGRDYWxsb3V0QnV0dG9uID0gdGhpcy5zY2VuZUNvbnRlbnRDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdcdTZERkJcdTUyQTBcdTY1QjBcdTc2ODRcdTdCMTRcdThCQjBcdTU3OEInLFxuICAgICAgICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICAgICAgfSk7XG4gICAgICAgIGFkZENhbGxvdXRCdXR0b24uc3R5bGUubWFyZ2luVG9wID0gJzIwcHgnO1xuICAgICAgICBhZGRDYWxsb3V0QnV0dG9uLnN0eWxlLndpZHRoID0gJzEwMCUnO1xuICAgICAgICBhZGRDYWxsb3V0QnV0dG9uLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcyMHB4JzsgIC8vIFx1NkRGQlx1NTJBMFx1NUU5NVx1OTBFOFx1OTVGNFx1OERERFxuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NEVDRVx1NTE3Nlx1NEVENlx1NTczQVx1NjY2Rlx1NTkwRFx1NTIzNlx1OTE0RFx1N0Y2RVx1NzY4NFx1NjMwOVx1OTRBRSAtIFx1NzlGQlx1NTIzMFx1OEZEOVx1OTFDQ1xuICAgICAgICBjb25zdCBjb3B5RnJvbUJ1dHRvbiA9IHNjZW5lQWN0aW9uc0NvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgdGV4dDogJ1x1NEVDRVx1NTE3Nlx1NEVENlx1NTczQVx1NjY2Rlx1NTkwRFx1NTIzNlx1OTE0RFx1N0Y2RScsXG4gICAgICAgICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgICAgICB9KTtcbiAgICAgICAgY29weUZyb21CdXR0b24uc3R5bGUubWFyZ2luQm90dG9tID0gJzIwcHgnOyAgLy8gXHU2REZCXHU1MkEwXHU1RTk1XHU5MEU4XHU5NUY0XHU4REREXG5cbiAgICAgICAgY29weUZyb21CdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IFNjZW5lQ29weU1vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbiwgY3VycmVudFNjZW5lLCBhc3luYyAoc291cmNlU2NlbmVJZCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNvdXJjZVNjZW5lID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2NlbmVzLmZpbmQocyA9PiBzLmlkID09PSBzb3VyY2VTY2VuZUlkKTtcbiAgICAgICAgICAgICAgICBpZiAoc291cmNlU2NlbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFNjZW5lLmNhbGxvdXRzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzb3VyY2VTY2VuZS5jYWxsb3V0cykpO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDdXJyZW50U2NlbmVDb250ZW50KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBtb2RhbC5vcGVuKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgYWRkQ2FsbG91dEJ1dHRvbi5vbmNsaWNrID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV3Q2FsbG91dDogQ2FsbG91dENvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnbm90ZScsXG4gICAgICAgICAgICAgICAgY29sb3I6ICcjODA4MDgwJyxcbiAgICAgICAgICAgICAgICBuYW1lOiBgXHU3QjE0XHU4QkIwXHU3QzdCXHU1NzhCJHtjdXJyZW50U2NlbmUuY2FsbG91dHMubGVuZ3RoICsgMX1gLFxuICAgICAgICAgICAgICAgIHRleHRDb2xvcjogJyMwMDAwMDAnLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJyNmZmZmZmYnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgY3VycmVudFNjZW5lLmNhbGxvdXRzLnB1c2gobmV3Q2FsbG91dCk7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQ3VycmVudFNjZW5lQ29udGVudCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFx1NkUzMlx1NjdEMyBDYWxsb3V0IFx1OTE0RFx1N0Y2RVxuICAgICAgICBjdXJyZW50U2NlbmUuY2FsbG91dHMuZm9yRWFjaCgoY2FsbG91dCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmIChpbmRleCA+IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBociA9IHRoaXMuc2NlbmVDb250ZW50Q29udGFpbmVyLmNyZWF0ZUVsKCdocicpO1xuICAgICAgICAgICAgICAgIGhyLnN0eWxlLm1hcmdpbiA9ICcyMHB4IDAnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjYWxsb3V0Q29udGFpbmVyID0gdGhpcy5zY2VuZUNvbnRlbnRDb250YWluZXIuY3JlYXRlRGl2KCdjYWxsb3V0LXNldHRpbmctY29udGFpbmVyJyk7XG4gICAgICAgICAgICBjYWxsb3V0Q29udGFpbmVyLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSknO1xuICAgICAgICAgICAgY2FsbG91dENvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gJzE1cHgnO1xuICAgICAgICAgICAgY2FsbG91dENvbnRhaW5lci5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnOHB4JztcbiAgICAgICAgICAgIGNhbGxvdXRDb250YWluZXIuc3R5bGUubWFyZ2luQm90dG9tID0gJzIwcHgnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBcdTUyMUJcdTVFRkFcdTY4MDdcdTk4OThcdTU0OENcdTUyMjBcdTk2NjRcdTYzMDlcdTk0QUVcdTc2ODRcdTVCQjlcdTU2NjhcbiAgICAgICAgICAgIGNvbnN0IGhlYWRlckNvbnRhaW5lciA9IGNhbGxvdXRDb250YWluZXIuY3JlYXRlRGl2KCdjYWxsb3V0LWhlYWRlcicpO1xuICAgICAgICAgICAgaGVhZGVyQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgICAgICBoZWFkZXJDb250YWluZXIuc3R5bGUuanVzdGlmeUNvbnRlbnQgPSAnc3BhY2UtYmV0d2Vlbic7XG4gICAgICAgICAgICBoZWFkZXJDb250YWluZXIuc3R5bGUuYWxpZ25JdGVtcyA9ICdjZW50ZXInO1xuICAgICAgICAgICAgaGVhZGVyQ29udGFpbmVyLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxNXB4JztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaGVhZGVyQ29udGFpbmVyLmNyZWF0ZUVsKCdoMycsIHsgXG4gICAgICAgICAgICAgICAgdGV4dDogYFx1N0IxNFx1OEJCMFx1N0M3Qlx1NTc4QiR7aW5kZXggKyAxfWAsXG4gICAgICAgICAgICAgICAgY2xzOiAnY2FsbG91dC1oZWFkZXItdGl0bGUnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGluZGV4ID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGhlYWRlckNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgICAgICAgICB0ZXh0OiAnXHU1MjIwXHU5NjY0JyxcbiAgICAgICAgICAgICAgICAgICAgY2xzOiAnbW9kLXdhcm5pbmcnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZGVsZXRlQnV0dG9uLm9uY2xpY2sgPSBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTY2VuZS5jYWxsb3V0cyA9IGN1cnJlbnRTY2VuZS5jYWxsb3V0cy5maWx0ZXIoKF8sIGkpID0+IGkgIT09IGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQ3VycmVudFNjZW5lQ29udGVudCgpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFx1NkRGQlx1NTJBMCBDYWxsb3V0IFx1OEJCRVx1N0Y2RVxuICAgICAgICAgICAgdGhpcy5hZGRDYWxsb3V0U2V0dGluZ3MoY2FsbG91dENvbnRhaW5lciwgY2FsbG91dCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFx1NkRGQlx1NTJBMCBDYWxsb3V0IFx1OEJCRVx1N0Y2RVxuICAgIHByaXZhdGUgYWRkQ2FsbG91dFNldHRpbmdzKGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGNhbGxvdXQ6IENhbGxvdXRDb25maWcpIHtcbiAgICAgICAgLy8gXHU2NTg3XHU1QjU3XHU5ODlDXHU4MjcyXHU4QkJFXHU3RjZFXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTY1ODdcdTVCNTdcdTk4OUNcdTgyNzInKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1OEJCRVx1N0Y2RVx1NjU4N1x1NUI1N1x1NzY4NFx1OTg5Q1x1ODI3MicpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoY2FsbG91dC50ZXh0Q29sb3IpXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCcjMDAwMDAwJylcbiAgICAgICAgICAgICAgICAudGhlbih0ZXh0Q29tcG9uZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sb3JQaWNrZXIgPSBjcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY29sb3InLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNhbGxvdXQudGV4dENvbG9yXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb2xvclBpY2tlci5zdHlsZS5tYXJnaW5SaWdodCA9ICc4cHgnO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0Q29tcG9uZW50LmlucHV0RWwuYmVmb3JlKGNvbG9yUGlja2VyKTtcblxuICAgICAgICAgICAgICAgICAgICBjb2xvclBpY2tlci5vbmlucHV0ID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0Q29tcG9uZW50LnNldFZhbHVlKHRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsb3V0LnRleHRDb2xvciA9IHRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIHRleHRDb21wb25lbnQuaW5wdXRFbC5vbmlucHV0ID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvclBpY2tlci52YWx1ZSA9IHRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbG91dC50ZXh0Q29sb3IgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuXG4gICAgICAgIC8vIENhbGxvdXQgXHU5ODlDXHU4MjcyXHU4QkJFXHU3RjZFXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcbiAgICAgICAgICAgIC5zZXROYW1lKCdDYWxsb3V0IFx1OTg5Q1x1ODI3MicpXG4gICAgICAgICAgICAuc2V0RGVzYygnXHU4QkJFXHU3RjZFIENhbGxvdXQgXHU3Njg0XHU5ODlDXHU4MjcyJylcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShjYWxsb3V0LmNvbG9yKVxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignIzAwMDAwMCcpXG4gICAgICAgICAgICAgICAgLnRoZW4odGV4dENvbXBvbmVudCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9yUGlja2VyID0gY3JlYXRlRWwoJ2lucHV0Jywge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NvbG9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjYWxsb3V0LmNvbG9yXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb2xvclBpY2tlci5zdHlsZS5tYXJnaW5SaWdodCA9ICc4cHgnO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0Q29tcG9uZW50LmlucHV0RWwuYmVmb3JlKGNvbG9yUGlja2VyKTtcblxuICAgICAgICAgICAgICAgICAgICBjb2xvclBpY2tlci5vbmlucHV0ID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0Q29tcG9uZW50LnNldFZhbHVlKHRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsb3V0LmNvbG9yID0gdGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgdGV4dENvbXBvbmVudC5pbnB1dEVsLm9uaW5wdXQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yUGlja2VyLnZhbHVlID0gdGFyZ2V0LnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjYWxsb3V0LmNvbG9yID0gdmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBDYWxsb3V0IFx1NTQwRFx1NzlGMFx1OEJCRVx1N0Y2RVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXIpXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ2FsbG91dCBcdTU0MERcdTc5RjAnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1OEJCRVx1N0Y2RSBDYWxsb3V0IFx1NzY4NFx1NjYzRVx1NzkzQVx1NTQwRFx1NzlGMCcpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoY2FsbG91dC5uYW1lKVxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignXHU5RUQ4XHU4QkE0JykgIC8vIFx1Nzg2RVx1NEZERFx1NEY3Rlx1NzUyOFx1NkI2M1x1Nzg2RVx1NzY4NFx1NEUyRFx1NjU4N1x1NUI1N1x1N0IyNlxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbG91dC5uYW1lID0gdmFsdWUudHJpbSgpIHx8ICdcdTlFRDhcdThCQTQnOyAgLy8gXHU3ODZFXHU0RkREXHU0RjdGXHU3NTI4XHU2QjYzXHU3ODZFXHU3Njg0XHU0RTJEXHU2NTg3XHU1QjU3XHU3QjI2XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAvLyBDYWxsb3V0IFx1N0M3Qlx1NTc4Qlx1OEJCRVx1N0Y2RVxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXIpXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ2FsbG91dCBcdTdDN0JcdTU3OEInKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1OEJCRVx1N0Y2RSBDYWxsb3V0IFx1NzY4NFx1N0M3Qlx1NTc4Qlx1NjgwN1x1OEJDNicpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoY2FsbG91dC50eXBlKVxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignbm90ZScpXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjYWxsb3V0LnR5cGUgPSB2YWx1ZS50cmltKCkgfHwgJ25vdGUnO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgLy8gXHU4MENDXHU2NjZGXHU5ODlDXHU4MjcyXHU4QkJFXHU3RjZFXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lcilcbiAgICAgICAgICAgIC5zZXROYW1lKCdcdTgwQ0NcdTY2NkZcdTk4OUNcdTgyNzInKVxuICAgICAgICAgICAgLnNldERlc2MoJ1x1OEJCRVx1N0Y2RSBDYWxsb3V0IFx1NzY4NFx1ODBDQ1x1NjY2Rlx1OTg5Q1x1ODI3MicpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoY2FsbG91dC5iYWNrZ3JvdW5kQ29sb3IpXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCcjZmZmZmZmJylcbiAgICAgICAgICAgICAgICAudGhlbih0ZXh0Q29tcG9uZW50ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29sb3JQaWNrZXIgPSBjcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY29sb3InLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGNhbGxvdXQuYmFja2dyb3VuZENvbG9yXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb2xvclBpY2tlci5zdHlsZS5tYXJnaW5SaWdodCA9ICc4cHgnO1xuICAgICAgICAgICAgICAgICAgICB0ZXh0Q29tcG9uZW50LmlucHV0RWwuYmVmb3JlKGNvbG9yUGlja2VyKTtcblxuICAgICAgICAgICAgICAgICAgICBjb2xvclBpY2tlci5vbmlucHV0ID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0Q29tcG9uZW50LnNldFZhbHVlKHRhcmdldC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsb3V0LmJhY2tncm91bmRDb2xvciA9IHRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIHRleHRDb21wb25lbnQuaW5wdXRFbC5vbmlucHV0ID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvclBpY2tlci52YWx1ZSA9IHRhcmdldC52YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbG91dC5iYWNrZ3JvdW5kQ29sb3IgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgIH1cblxuICAgIC8vIFx1NkRGQlx1NTJBMFx1NjVCMFx1NTczQVx1NjY2RlxuICAgIHByaXZhdGUgYXN5bmMgYWRkTmV3U2NlbmUoKSB7XG4gICAgICAgIGNvbnN0IG5ld1NjZW5lOiBTY2VuZUNvbmZpZyA9IHtcbiAgICAgICAgICAgIGlkOiBgc2NlbmUtJHtEYXRlLm5vdygpfWAsXG4gICAgICAgICAgICBuYW1lOiBgXHU1NzNBXHU2NjZGJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY2VuZXMubGVuZ3RoICsgMX1gLCAgLy8gXHU3ODZFXHU0RkREXHU0RjdGXHU3NTI4XHU2QjYzXHU3ODZFXHU3Njg0XHU0RTJEXHU2NTg3XHU1QjU3XHU3QjI2XG4gICAgICAgICAgICBjYWxsb3V0czogW11cbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNjZW5lcy5wdXNoKG5ld1NjZW5lKTtcbiAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VycmVudFNjZW5lSWQgPSBuZXdTY2VuZS5pZDtcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG4gICAgICAgIHRoaXMucmVuZGVyU2NlbmVzKCk7XG4gICAgfVxuXG4gICAgLy8gXHU2NkY0XHU2NUIwXHU1NzNBXHU2NjZGXHU0RTBCXHU2MkM5XHU4M0RDXHU1MzU1XG4gICAgcHJpdmF0ZSB1cGRhdGVTY2VuZURyb3Bkb3ducygpIHtcbiAgICAgICAgaWYgKHRoaXMuc2NlbmVEcm9wZG93bikge1xuICAgICAgICAgICAgdGhpcy5zY2VuZURyb3Bkb3duLnNlbGVjdEVsLmVtcHR5KCk7XG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY2VuZXMuZm9yRWFjaChzY2VuZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zY2VuZURyb3Bkb3duLmFkZE9wdGlvbihzY2VuZS5pZCwgc2NlbmUubmFtZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuc2NlbmVEcm9wZG93bi5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXJyZW50U2NlbmVJZCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHNob3dTY2VuZU5hbWVFZGl0TW9kYWwoc2NlbmU6IFNjZW5lQ29uZmlnKSB7XG4gICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IFNjZW5lTmFtZU1vZGFsKHRoaXMuYXBwLCBzY2VuZS5uYW1lLCBhc3luYyAobmV3TmFtZSkgPT4ge1xuICAgICAgICAgICAgc2NlbmUubmFtZSA9IG5ld05hbWU7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyU2NlbmVzKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFx1NjZGNFx1NjVCMFx1NEUwQlx1NjJDOVx1ODNEQ1x1NTM1NVxuICAgICAgICAgICAgaWYgKHRoaXMuc2NlbmVEcm9wZG93bikge1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2NlbmVEcm9wZG93bnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIG1vZGFsLm9wZW4oKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlZ2lzdGVyKGNsZWFudXA6ICgpID0+IHZvaWQpIHtcbiAgICAgICAgdGhpcy5jbGVhbnVwRnVuY3Rpb25zLnB1c2goY2xlYW51cCk7XG4gICAgfVxuXG4gICAgLy8gXHU1NzI4XHU3QzdCXHU3Njg0IGhpZGUgXHU2NUI5XHU2Q0Q1XHU0RTJEXHU2RTA1XHU3NDA2XG4gICAgaGlkZSgpIHtcbiAgICAgICAgdGhpcy5jbGVhbnVwRnVuY3Rpb25zLmZvckVhY2goY2xlYW51cCA9PiBjbGVhbnVwKCkpO1xuICAgICAgICB0aGlzLmNsZWFudXBGdW5jdGlvbnMgPSBbXTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHJlbmRlckJhc2ljQ29udGVudChjb250YWluZXI6IEhUTUxFbGVtZW50KSB7XG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTczQVx1NjY2Rlx1OTAwOVx1NjJFOVx1NTY2OFxuICAgICAgICBjb25zdCBzY2VuZVNlbGVjdENvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ3NjZW5lLXNlbGVjdC1jb250YWluZXInKTtcbiAgICAgICAgc2NlbmVTZWxlY3RDb250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzI0cHgnO1xuICAgICAgICBzY2VuZVNlbGVjdENvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gJzEycHgnO1xuICAgICAgICBzY2VuZVNlbGVjdENvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpJztcbiAgICAgICAgc2NlbmVTZWxlY3RDb250YWluZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzhweCc7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1NzNBXHU2NjZGXHU2ODA3XHU5ODk4XG4gICAgICAgIHNjZW5lU2VsZWN0Q29udGFpbmVyLmNyZWF0ZUVsKCdoNCcsIHtcbiAgICAgICAgICAgIHRleHQ6ICdcdTU3M0FcdTY2NkZcdTdCQTFcdTc0MDYnLFxuICAgICAgICAgICAgY2xzOiAnc2V0dGluZy1jYXRlZ29yeSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1NzNBXHU2NjZGXHU5MDA5XHU2MkU5XHU1NjY4XG4gICAgICAgIHRoaXMuc2NlbmVUYWJDb250YWluZXIgPSBzY2VuZVNlbGVjdENvbnRhaW5lci5jcmVhdGVEaXYoJ3NjZW5lLXRhYnMnKTtcbiAgICAgICAgdGhpcy5zY2VuZVRhYkNvbnRhaW5lci5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xuICAgICAgICB0aGlzLnNjZW5lVGFiQ29udGFpbmVyLnN0eWxlLmZsZXhXcmFwID0gJ3dyYXAnO1xuICAgICAgICB0aGlzLnNjZW5lVGFiQ29udGFpbmVyLnN0eWxlLmdhcCA9ICc4cHgnO1xuICAgICAgICB0aGlzLnNjZW5lVGFiQ29udGFpbmVyLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxNnB4JztcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTY1QjBcdTU3M0FcdTY2NkZcdTYzMDlcdTk0QUVcbiAgICAgICAgY29uc3QgYWRkU2NlbmVCdXR0b24gPSB0aGlzLnNjZW5lVGFiQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XG4gICAgICAgICAgICB0ZXh0OiAnKyBcdTY1QjBcdTU3M0FcdTY2NkYnLFxuICAgICAgICAgICAgY2xzOiAnc2NlbmUtdGFiLWJ1dHRvbidcbiAgICAgICAgfSk7XG4gICAgICAgIGFkZFNjZW5lQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5hZGROZXdTY2VuZSgpKTtcblxuICAgICAgICAvLyBcdTVDMDZcdTVGNTNcdTUyNERcdTVERTVcdTRGNUNcdTU3M0FcdTY2NkZcdThCQkVcdTdGNkVcdTc5RkJcdTUyMzBcdThGRDlcdTkxQ0NcbiAgICAgICAgbmV3IFNldHRpbmcoc2NlbmVTZWxlY3RDb250YWluZXIpXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHU1RjUzXHU1MjREXHU1REU1XHU0RjVDXHU1NzNBXHU2NjZGJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdTkwMDlcdTYyRTlcdTg5ODFcdTRGN0ZcdTc1MjhcdTc2ODRcdTVERTVcdTRGNUNcdTU3M0FcdTY2NkYnKVxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcbiAgICAgICAgICAgICAgICAvLyBcdTRGRERcdTVCNThcdTRFMEJcdTYyQzlcdTgzRENcdTUzNTVcdTVGMTVcdTc1MjhcdTRFRTVcdTRGQkZcdTU0MEVcdTdFRURcdTY2RjRcdTY1QjBcbiAgICAgICAgICAgICAgICB0aGlzLnNjZW5lRHJvcGRvd24gPSBkcm9wZG93bjtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTYyNDBcdTY3MDlcdTU3M0FcdTY2NkZcdTkwMDlcdTk4NzlcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY2VuZXMuZm9yRWFjaChzY2VuZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihzY2VuZS5pZCwgc2NlbmUubmFtZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gXHU4QkJFXHU3RjZFXHU1RjUzXHU1MjREXHU5MDA5XHU0RTJEXHU3Njg0XHU1NzNBXHU2NjZGXG4gICAgICAgICAgICAgICAgZHJvcGRvd24uc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VycmVudFNjZW5lSWQpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFx1NzZEMVx1NTQyQ1x1OTAwOVx1NjJFOVx1NTNEOFx1NTMxNlxuICAgICAgICAgICAgICAgIGRyb3Bkb3duLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXJyZW50U2NlbmVJZCA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTY2VuZXMoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFx1NkRGQlx1NTJBMFx1NTE2OFx1NUM0MFx1NTZGRVx1NjgwN1x1NjYzRVx1NzkzQVx1OEJCRVx1N0Y2RVxuICAgICAgICBjb25zdCBnbG9iYWxJY29uQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdignZ2xvYmFsLWljb24tc2V0dGluZ3MtY29udGFpbmVyJyk7XG4gICAgICAgIGdsb2JhbEljb25Db250YWluZXIuc3R5bGUubWFyZ2luQm90dG9tID0gJzI0cHgnO1xuICAgICAgICBnbG9iYWxJY29uQ29udGFpbmVyLnN0eWxlLnBhZGRpbmcgPSAnMTJweCc7XG4gICAgICAgIGdsb2JhbEljb25Db250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KSc7XG4gICAgICAgIGdsb2JhbEljb25Db250YWluZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzhweCc7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU2ODA3XHU5ODk4XG4gICAgICAgIGdsb2JhbEljb25Db250YWluZXIuY3JlYXRlRWwoJ2g0JywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdcdTUxNjhcdTVDNDBcdTU2RkVcdTY4MDdcdTY2M0VcdTc5M0EnLFxuICAgICAgICAgICAgY2xzOiAnc2V0dGluZy1jYXRlZ29yeSdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU4QkJFXHU3RjZFXHU5ODc5XG4gICAgICAgIG5ldyBTZXR0aW5nKGdsb2JhbEljb25Db250YWluZXIpXG4gICAgICAgICAgICAuc2V0TmFtZSgnXHU2NjNFXHU3OTNBXHU1MTY4XHU1QzQwXHU1NkZFXHU2ODA3JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdcdTY2MkZcdTU0MjZcdTU3MjhcdTYyNDBcdTY3MDkgQ2FsbG91dCBcdTUzRjNcdTRFMEFcdTg5RDJcdTY2M0VcdTc5M0FcdTU2RkVcdTY4MDcnKVxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4ge1xuICAgICAgICAgICAgICAgIHRvZ2dsZVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd0dsb2JhbEljb25zKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93R2xvYmFsSWNvbnMgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBcdTY2RjRcdTY1QjBcdTYyNDBcdTY3MDlcdTYyNTNcdTVGMDBcdTc2ODRcdTdCMTRcdThCQjBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi51cGRhdGVBbGxPcGVuTm90ZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi51cGRhdGVBbGxPcGVuTm90ZXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBcdTZERkJcdTUyQTBcdTYzRDBcdTc5M0FcdThCRURcbiAgICAgICAgY29uc3QgdGlwQ29udGFpbmVyID0gZ2xvYmFsSWNvbkNvbnRhaW5lci5jcmVhdGVEaXYoJ2dsb2JhbC1pY29uLXRpcCcpO1xuICAgICAgICB0aXBDb250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzEycHgnO1xuICAgICAgICB0aXBDb250YWluZXIuc3R5bGUucGFkZGluZyA9ICc4cHgnO1xuICAgICAgICB0aXBDb250YWluZXIuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtcHJpbWFyeSknO1xuICAgICAgICB0aXBDb250YWluZXIuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xuICAgICAgICB0aXBDb250YWluZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzRweCc7XG4gICAgICAgIHRpcENvbnRhaW5lci5zdHlsZS5mb250U2l6ZSA9ICcwLjllbSc7XG4gICAgICAgIHRpcENvbnRhaW5lci5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XG4gICAgICAgIHRpcENvbnRhaW5lci5jcmVhdGVFbCgncCcsIHtcbiAgICAgICAgICAgIHRleHQ6ICdcdTVDNUVcdTYwMjdcdTRFMkRcdTc2ODRcdTU4RjBcdTY2MEVcdTRGMThcdTUxNDhcdThCRTVcdTYzMDlcdTk0QUVcdUZGMENcdTVGNTNcdTVGMDBcdTU0MkZcdTUxNjhcdTVDNDBcdTU2RkVcdTY4MDdcdUZGMENcdTRGNjBcdTU3MjhcdTVDNUVcdTYwMjdcdTRFMkRcdTU4RjBcdTY2MEVcdTUxNzNcdTk1RURcdUZGMENDYWxsb3V0XHU1M0YzXHU0RTBBXHU4OUQyXHU3Njg0XHU1NkZFXHU2ODA3XHU0RTVGXHU0RjFBXHU2RDg4XHU1OTMxXHVGRjBDXHU1M0NEXHU0RTRCXHU0RUE2XHU3MTM2XHUzMDAyXHU1QzVFXHU2MDI3XHU1OEYwXHU2NjBFXHU1RjYyXHU1OTgyXCJDYWxsb3V0IGV4dHJhIG1lc3NhZ2UgZGlzcGxheVx1RkYxQVllcy9Ob1wiXHUzMDAyJ1xuICAgICAgICB9KS5zdHlsZS5tYXJnaW4gPSAnMCc7XG5cbiAgICAgICAgLy8gXHU2REZCXHU1MkEwXHU1NzNBXHU2NjZGXHU1MTg1XHU1QkI5XHU1QkI5XHU1NjY4XG4gICAgICAgIHRoaXMuc2NlbmVDb250ZW50Q29udGFpbmVyID0gc2NlbmVTZWxlY3RDb250YWluZXIuY3JlYXRlRGl2KCdzY2VuZS1jb250ZW50Jyk7XG4gICAgICAgIHRoaXMuc2NlbmVDb250ZW50Q29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICcxNnB4JztcblxuICAgICAgICAvLyBcdTZFMzJcdTY3RDNcdTU3M0FcdTY2NkZcbiAgICAgICAgdGhpcy5yZW5kZXJTY2VuZXMoKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZVByZXZpZXdJY29uKGljb25FbGVtZW50OiBIVE1MRWxlbWVudCkge1xuICAgICAgICAvLyBcdTY4MzlcdTYzNkVcdTRFMERcdTU0MENcdTc2ODRcdTU2RkVcdTY4MDdcdTdDN0JcdTU3OEJcdThCQkVcdTdGNkVcdTRFMERcdTU0MENcdTc2ODRcdTY4MzdcdTVGMEZcbiAgICAgICAgY29uc3QgaWNvblR5cGUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pY29uU2V0dGluZ3MudHlwZTtcbiAgICAgICAgaWNvbkVsZW1lbnQuZW1wdHkoKTtcbiAgICAgICAgXG4gICAgICAgIHN3aXRjaCAoaWNvblR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgMTogLy8gXHU4NEREXHU4MjcyXHU1QkY5XHU4QkREXG4gICAgICAgICAgICAgICAgaWNvbkVsZW1lbnQuaW5uZXJIVE1MID0gYDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCIjNEE5MEUyXCI+PHBhdGggZD1cIk0yMCAySDRjLTEuMSAwLTIgLjktMiAydjE4bDQtNGgxNGMxLjEgMCAyLS45IDItMlY0YzAtMS4xLS45LTItMi0yelwiLz48L3N2Zz5gO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAyOiAvLyBcdTdFRkZcdTgyNzJcdTUyQTBcdTUzRjdcbiAgICAgICAgICAgICAgICBpY29uRWxlbWVudC5pbm5lckhUTUwgPSBgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIiMyRUNDNzFcIj48cGF0aCBkPVwiTTE5IDEzaC02djZoLTJ2LTZINXYtMmg2VjVoMnY2aDZ2MnpcIi8+PC9zdmc+YDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzogLy8gXHU3Qzg5XHU4MjcyXHU3MjMxXHU1RkMzXG4gICAgICAgICAgICAgICAgaWNvbkVsZW1lbnQuaW5uZXJIVE1MID0gYDxzdmcgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCIjRkY2OUI0XCI+PHBhdGggZD1cIk0xMiAyMS4zNWwtMS40NS0xLjMyQzUuNCAxNS4zNiAyIDEyLjI4IDIgOC41IDIgNS40MiA0LjQyIDMgNy41IDNjMS43NCAwIDMuNDEuODEgNC41IDIuMDlDMTMuMDkgMy44MSAxNC43NiAzIDE2LjUgMyAxOS41OCAzIDIyIDUuNDIgMjIgOC41YzAgMy43OC0zLjQgNi44Ni04LjU1IDExLjU0TDEyIDIxLjM1elwiLz48L3N2Zz5gO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA0OiAvLyBcdTZBNTlcdTgyNzJcdTU3MDZcdTVGNjJcbiAgICAgICAgICAgICAgICBpY29uRWxlbWVudC5pbm5lckhUTUwgPSBgPHN2ZyB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIiNGRjk4MDBcIj48Y2lyY2xlIGN4PVwiMTJcIiBjeT1cIjEyXCIgcj1cIjEwXCIvPjwvc3ZnPmA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDU6IC8vIFx1NzA3MFx1ODI3Mlx1NjVCOVx1NUY2MlxuICAgICAgICAgICAgICAgIGljb25FbGVtZW50LmlubmVySFRNTCA9IGA8c3ZnIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBmaWxsPVwiIzlFOUU5RVwiPjxyZWN0IHg9XCIzXCIgeT1cIjNcIiB3aWR0aD1cIjE4XCIgaGVpZ2h0PVwiMThcIiByeD1cIjJcIi8+PC9zdmc+YDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gXHU2REZCXHU1MkEwXHU2NUIwXHU3Njg0IE1vZGFsIFx1N0M3QlxuY2xhc3MgQ2FsbG91dFNlbGVjdGlvbk1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICAgIHByaXZhdGUgcGx1Z2luOiBDYWxsb3V0RXh0cmFNZXNzYWdlUGx1Z2luO1xuICAgIHByaXZhdGUgZWRpdG9yOiBFZGl0b3I7XG5cbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBDYWxsb3V0RXh0cmFNZXNzYWdlUGx1Z2luLCBlZGl0b3I6IEVkaXRvcikge1xuICAgICAgICBzdXBlcihhcHApO1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5lZGl0b3IgPSBlZGl0b3I7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnY2FsbG91dC1zZWxlY3Rpb24tbW9kYWwnKTtcblxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnXHU5MDA5XHU2MkU5XHU3QjE0XHU4QkIwXHU3QzdCXHU1NzhCJyB9KTtcblxuICAgICAgICBjb25zdCBjYWxsb3V0TGlzdCA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ2NhbGxvdXQtbGlzdCcpO1xuXG4gICAgICAgIC8vIFx1ODNCN1x1NTNENlx1NUY1M1x1NTI0RFx1OTAwOVx1NEUyRFx1NTczQVx1NjY2Rlx1NzY4NFx1OTE0RFx1N0Y2RVxuICAgICAgICBjb25zdCBjdXJyZW50U2NlbmUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zY2VuZXMuZmluZChcbiAgICAgICAgICAgIHNjZW5lID0+IHNjZW5lLmlkID09PSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jdXJyZW50U2NlbmVJZFxuICAgICAgICApO1xuXG4gICAgICAgIGlmICghY3VycmVudFNjZW5lKSB7XG4gICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ3AnLCB7IHRleHQ6ICdcdTYyN0VcdTRFMERcdTUyMzBcdTU3M0FcdTY2NkZcdTkxNERcdTdGNkUnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gXHU0RjdGXHU3NTI4XHU1RjUzXHU1MjREXHU1NzNBXHU2NjZGXHU3Njg0IGNhbGxvdXRzIFx1OTE0RFx1N0Y2RVxuICAgICAgICBjdXJyZW50U2NlbmUuY2FsbG91dHMuZm9yRWFjaCgoY2FsbG91dCwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNhbGxvdXRJdGVtID0gY2FsbG91dExpc3QuY3JlYXRlRGl2KCdjYWxsb3V0LWxpc3QtaXRlbScpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBwcmV2aWV3ID0gY2FsbG91dEl0ZW0uY3JlYXRlRGl2KCdjYWxsb3V0LXByZXZpZXcnKTtcbiAgICAgICAgICAgIHByZXZpZXcuc3R5bGUuYm9yZGVyTGVmdCA9IGA0cHggc29saWQgJHtjYWxsb3V0LmNvbG9yfWA7XG4gICAgICAgICAgICBwcmV2aWV3LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuYWRqdXN0Q29sb3IoY2FsbG91dC5jb2xvciwgMC4xKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgdGl0bGUgPSBwcmV2aWV3LmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogY2FsbG91dC5uYW1lIH0pO1xuICAgICAgICAgICAgdGl0bGUuc3R5bGUuY29sb3IgPSBjYWxsb3V0LmNvbG9yO1xuXG4gICAgICAgICAgICBjYWxsb3V0SXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybVRvQ2FsbG91dChjYWxsb3V0KTsgIC8vIFx1NEZFRVx1NjUzOVx1OEZEOVx1OTFDQ1x1RkYwQ1x1NzZGNFx1NjNBNVx1NEYyMFx1OTAxMiBjYWxsb3V0IFx1OTE0RFx1N0Y2RVxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBjYWxsb3V0SXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNhbGxvdXRJdGVtLmFkZENsYXNzKCdjYWxsb3V0LWxpc3QtaXRlbS1ob3ZlcicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjYWxsb3V0SXRlbS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNhbGxvdXRJdGVtLnJlbW92ZUNsYXNzKCdjYWxsb3V0LWxpc3QtaXRlbS1ob3ZlcicpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIFx1NEZFRVx1NjUzOSB0cmFuc2Zvcm1Ub0NhbGxvdXQgXHU2NUI5XHU2Q0Q1XHVGRjBDXHU3NkY0XHU2M0E1XHU2M0E1XHU1M0Q3IGNhbGxvdXQgXHU5MTREXHU3RjZFXG4gICAgcHJpdmF0ZSB0cmFuc2Zvcm1Ub0NhbGxvdXQoY2FsbG91dDogQ2FsbG91dENvbmZpZykge1xuICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSB0aGlzLmVkaXRvci5nZXRTZWxlY3Rpb24oKTtcbiAgICAgICAgaWYgKCFzZWxlY3Rpb24pIHtcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1x1OEJGN1x1NTE0OFx1OTAwOVx1NjJFOVx1ODk4MVx1OEY2Q1x1NjM2Mlx1NzY4NFx1NjU4N1x1NjcyQycpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgY2FsbG91dElkID0gYGNhbGxvdXQtJHtEYXRlLm5vdygpfS0ke01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygyLCA4KX1gO1xuICAgICAgICBcbiAgICAgICAgLy8gXHU0RjdGXHU3NTI4XHU0RjIwXHU1MTY1XHVGRkZEXHVGRkZEIGNhbGxvdXQgXHU5MTREXHU3RjZFXG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZFRleHQgPSBgPiBbISR7Y2FsbG91dC50eXBlfV0gKio8Zm9udCBjb2xvcj1cIiR7Y2FsbG91dC5jb2xvcn1cIj4ke2NhbGxvdXQubmFtZX08L2ZvbnQ+KipcXG4+IDxzcGFuIHN0eWxlPVwiYmFja2dyb3VuZDoke2NhbGxvdXQuYmFja2dyb3VuZENvbG9yfVwiIGRhdGEtY2FsbG91dC1pZD1cIiR7Y2FsbG91dElkfVwiPjxmb250IGNvbG9yPVwiJHtjYWxsb3V0LnRleHRDb2xvcn1cIj4ke3NlbGVjdGlvbn08L2ZvbnQ+PC9zcGFuPlxcblxcbmA7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTgzQjdcdTUzRDZcdTVGNTNcdTUyNERcdTUxNDlcdTY4MDdcdTRGNERcdTdGNkVcbiAgICAgICAgY29uc3QgY3Vyc29yID0gdGhpcy5lZGl0b3IuZ2V0Q3Vyc29yKCk7XG4gICAgICAgIFxuICAgICAgICAvLyBcdTY2RkZcdTYzNjJcdTkwMDlcdTY1ODdcdTY3MkNcdTVFNzZcdTZERkJcdTUyQTBcdTRFMjRcdTRFMkFcdTYzNjJcdTg4NENcbiAgICAgICAgdGhpcy5lZGl0b3IucmVwbGFjZVNlbGVjdGlvbihmb3JtYXR0ZWRUZXh0KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFx1NUMwNlx1NTE0OVx1NjgwN1x1NzlGQlx1NTIzMFx1NjVCMFx1ODg0Q1xuICAgICAgICB0aGlzLmVkaXRvci5zZXRDdXJzb3Ioe1xuICAgICAgICAgICAgbGluZTogY3Vyc29yLmxpbmUgKyAzLFxuICAgICAgICAgICAgY2g6IDBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbmV3IE5vdGljZShgXHU2NTg3XHU2NzJDXHU1REYyXHU4RjZDXHU2MzYyXHU0RTNBICR7Y2FsbG91dC5uYW1lfSBcdTY4M0NcdTVGMEZcdUZGMDFgKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGFkanVzdENvbG9yKGNvbG9yOiBzdHJpbmcsIG9wYWNpdHk6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGlmIChjb2xvci5zdGFydHNXaXRoKCcjJykpIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBwYXJzZUludChjb2xvci5zbGljZSgxLCAzKSwgMTYpO1xuICAgICAgICAgICAgY29uc3QgZyA9IHBhcnNlSW50KGNvbG9yLnNsaWNlKDMsIDUpLCAxNik7XG4gICAgICAgICAgICBjb25zdCBiID0gcGFyc2VJbnQoY29sb3Iuc2xpY2UoNSwgNyksIDE2KTtcbiAgICAgICAgICAgIHJldHVybiBgcmdiYSgke3J9LCAke2d9LCAke2J9LCAke29wYWNpdHl9KWA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNvbG9yO1xuICAgIH1cbn1cblxuLy8gXHU2REZCXHU1MkEwXHU1NzNBXHU2NjZGXHU1NDBEXHU3OUYwXHU3RjE2XHU4RjkxXHVGRkZEXHVGRkZEXHVGRkZEXHU2MDAxXHU2ODQ2XG5jbGFzcyBTY2VuZU5hbWVNb2RhbCBleHRlbmRzIE1vZGFsIHtcbiAgICBwcml2YXRlIG5hbWVJbnB1dDogSFRNTElucHV0RWxlbWVudDtcbiAgICBwcml2YXRlIG9uU3VibWl0OiAobmFtZTogc3RyaW5nKSA9PiB2b2lkO1xuXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGN1cnJlbnROYW1lOiBzdHJpbmcsIG9uU3VibWl0OiAobmFtZTogc3RyaW5nKSA9PiB2b2lkKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcbiAgICAgICAgdGhpcy5uYW1lSW5wdXQgPSBjcmVhdGVFbCgnaW5wdXQnLCB7XG4gICAgICAgICAgICB0eXBlOiAndGV4dCcsXG4gICAgICAgICAgICB2YWx1ZTogY3VycmVudE5hbWVcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgb25PcGVuKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnc2NlbmUtbmFtZS1tb2RhbCcpO1xuXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdcdTdGMTZcdThGOTFcdTU3M0FcdTY2NkZcdTU0MERcdTc5RjAnIH0pOyAgLy8gXHU3ODZFXHU0RkREXHU0RjdGXHU3NTI4XHU2QjYzXHU3ODZFXHU3Njg0XHU0RTJEXHU2NTg3XHU1QjU3XHU3QjI2XG5cbiAgICAgICAgdGhpcy5uYW1lSW5wdXQuc3R5bGUud2lkdGggPSAnMTAwJSc7XG4gICAgICAgIHRoaXMubmFtZUlucHV0LnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcyMHB4JztcbiAgICAgICAgY29udGVudEVsLmFwcGVuZENoaWxkKHRoaXMubmFtZUlucHV0KTtcblxuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdzY2VuZS1uYW1lLW1vZGFsLWJ1dHRvbnMnKTtcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdmbGV4LWVuZCc7XG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5nYXAgPSAnMTBweCc7XG5cbiAgICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xuICAgICAgICAgICAgdGV4dDogJ1x1NEZERFx1NUI1OCcsXG4gICAgICAgICAgICBjbHM6ICdtb2QtY3RhJ1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdcdTUzRDZcdTZEODgnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNhdmVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuZXdOYW1lID0gdGhpcy5uYW1lSW5wdXQudmFsdWUudHJpbSgpO1xuICAgICAgICAgICAgaWYgKG5ld05hbWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uU3VibWl0KG5ld05hbWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnXHU1NzNBXHU2NjZGXHU1NDBEXHU3OUYwXHU0RTBEXHU4MEZEXHU0RTNBXHU3QTdBJyk7ICAvLyBcdTc4NkVcdTRGRERcdTRGN0ZcdTc1MjhcdTZCNjNcdTc4NkVcdTc2ODRcdTRFMkRcdTY1ODdcdTVCNTdcdTdCMjZcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY2FuY2VsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5jbG9zZSgpKTtcbiAgICB9XG59XG5cbi8vIFx1NkRGQlx1NTJBMFx1NTczQVx1NjY2Rlx1OTE0RFx1N0Y2RVx1NTkwRFx1NTIzNlx1NkEyMVx1NjAwMVx1Njg0NlxuY2xhc3MgU2NlbmVDb3B5TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSBwbHVnaW46IENhbGxvdXRFeHRyYU1lc3NhZ2VQbHVnaW47XG4gICAgcHJpdmF0ZSB0YXJnZXRTY2VuZTogU2NlbmVDb25maWc7XG4gICAgcHJpdmF0ZSBvblN1Ym1pdDogKHNvdXJjZVNjZW5lSWQ6IHN0cmluZykgPT4gdm9pZDtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBhcHA6IEFwcCxcbiAgICAgICAgcGx1Z2luOiBDYWxsb3V0RXh0cmFNZXNzYWdlUGx1Z2luLFxuICAgICAgICB0YXJnZXRTY2VuZTogU2NlbmVDb25maWcsXG4gICAgICAgIG9uU3VibWl0OiAoc291cmNlU2NlbmVJZDogc3RyaW5nKSA9PiB2b2lkXG4gICAgKSB7XG4gICAgICAgIHN1cGVyKGFwcCk7XG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xuICAgICAgICB0aGlzLnRhcmdldFNjZW5lID0gdGFyZ2V0U2NlbmU7XG4gICAgICAgIHRoaXMub25TdWJtaXQgPSBvblN1Ym1pdDtcbiAgICB9XG5cbiAgICBvbk9wZW4oKSB7XG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdzY2VuZS1jb3B5LW1vZGFsJyk7XG5cbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1x1NEVDRVx1NTE3Nlx1NEVENlx1NTczQVx1NjY2Rlx1NTkwRFx1NTIzNlx1OTE0RFx1N0Y2RScgfSk7XG5cbiAgICAgICAgY29uc3Qgc2NlbmVMaXN0ID0gY29udGVudEVsLmNyZWF0ZURpdignc2NlbmUtY29weS1saXN0Jyk7XG4gICAgICAgIHNjZW5lTGlzdC5zdHlsZS5tYXJnaW5Ub3AgPSAnMjBweCc7XG4gICAgICAgIHNjZW5lTGlzdC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMjBweCc7XG5cbiAgICAgICAgLy8gXHU1MjFCXHU1RUZBXHU1NzNBXHU2NjZGXHU1MjE3XHU4ODY4XG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNjZW5lcy5mb3JFYWNoKHNjZW5lID0+IHtcbiAgICAgICAgICAgIGlmIChzY2VuZS5pZCAhPT0gdGhpcy50YXJnZXRTY2VuZS5pZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNjZW5lSXRlbSA9IHNjZW5lTGlzdC5jcmVhdGVEaXYoJ3NjZW5lLWNvcHktaXRlbScpO1xuICAgICAgICAgICAgICAgIHNjZW5lSXRlbS5zdHlsZS5wYWRkaW5nID0gJzEwcHgnO1xuICAgICAgICAgICAgICAgIHNjZW5lSXRlbS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XG4gICAgICAgICAgICAgICAgc2NlbmVJdGVtLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc0cHgnO1xuICAgICAgICAgICAgICAgIHNjZW5lSXRlbS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnOHB4JztcbiAgICAgICAgICAgICAgICBzY2VuZUl0ZW0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3ZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KSc7XG5cbiAgICAgICAgICAgICAgICBzY2VuZUl0ZW0uY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6IHNjZW5lLm5hbWUgfSk7XG5cbiAgICAgICAgICAgICAgICBzY2VuZUl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25TdWJtaXQoc2NlbmUuaWQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBzY2VuZUl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2NlbmVJdGVtLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWhvdmVyKSc7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBzY2VuZUl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgc2NlbmVJdGVtLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSknO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBjb250ZW50RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcbiAgICAgICAgICAgIHRleHQ6ICdcdTUzRDZcdTZEODgnLFxuICAgICAgICAgICAgY2xzOiAnc2NlbmUtY29weS1jYW5jZWwnXG4gICAgICAgIH0pO1xuICAgICAgICBjYW5jZWxCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIGNhbmNlbEJ1dHRvbi5zdHlsZS5tYXJnaW5MZWZ0ID0gJ2F1dG8nO1xuICAgICAgICBjYW5jZWxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuICAgIH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUFpSTtBQWdFakksSUFBTSxtQkFBbUM7QUFBQSxFQUNyQyxnQkFBZ0I7QUFBQSxFQUNoQixRQUFRLENBQUM7QUFBQSxJQUNMLElBQUk7QUFBQSxJQUNKLE1BQU07QUFBQSxJQUNOLFVBQVUsQ0FBQztBQUFBLEVBQ2YsQ0FBQztBQUFBLEVBQ0QsY0FBYztBQUFBLElBQ1YsTUFBTTtBQUFBLElBQ04sTUFBTTtBQUFBLElBQ04sVUFBVTtBQUFBLE1BQ04sS0FBSztBQUFBLE1BQ0wsT0FBTztBQUFBLElBQ1g7QUFBQSxFQUNKO0FBQUEs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QU87QUFBQSxNQUN4QztBQUFBLElBQ0osQ0FBQztBQUFBLEVBQ0w7QUFBQTtBQUFBLEVBR1EsaUJBQWlCLFNBQWtCO0FBRXZDLFVBQU0sY0FBYyxTQUFTO0FBRTdCLFFBQUksU0FBUztBQUVULFlBQU0sV0FBVyxTQUFTLGNBQWMsT0FBTztBQUMvQyxlQUFTLEtBQUs7QUFDZCxlQUFTLGNBQWM7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7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
